"use strict";(self.webpackChunkAngular14_1_0Project=self.webpackChunkAngular14_1_0Project||[]).push([[179],{2011:(gt,Me,L)=>{L.d(Me,{Dh:()=>Ee,GT:()=>pe,cc:()=>Re,hO:()=>$e,on:()=>G,pX:()=>le,xv:()=>ge});var d=L(4650),ee=L(9260),k=L(4976);gt=L.hmd(gt);const ce=["ngOnDestroy"],le=(ye,mt,bt,Le={})=>new Proxy(ye,{get:(Ie,_e)=>bt.runOutsideAngular(()=>{var qe;if(ye[_e])return!(null===(qe=Le?.spy)||void 0===qe)&&qe.get&&Le.spy.get(_e,ye[_e]),ye[_e];if(ce.indexOf(_e)>-1)return()=>{};const He=mt.toPromise().then(tt=>{const re=tt&&tt[_e];return"function"==typeof re?re.bind(tt):re&&re.then?re.then(xt=>bt.run(()=>xt)):bt.run(()=>re)});return new Proxy(()=>{},{get:(tt,re)=>He[re],apply:(tt,re,xt)=>He.then(ct=>{var Ht;const at=ct&&ct(...xt);return!(null===(Ht=Le?.spy)||void 0===Ht)&&Ht.apply&&Le.spy.apply(_e,xt,at),at})})})}),pe=(ye,mt)=>{mt.forEach(bt=>{Object.getOwnPropertyNames(bt.prototype||bt).forEach(Le=>{Object.defineProperty(ye.prototype,Le,Object.getOwnPropertyDescriptor(bt.prototype||bt,Le))})})};class he{constructor(mt){return mt}}const Ee=new d.OlP("angularfire2.app.options"),ge=new d.OlP("angularfire2.app.name");function G(ye,mt,bt){const Ie="object"==typeof bt&&bt||{};Ie.name=Ie.name||"string"==typeof bt&&bt||"[DEFAULT]";const qe=ee.Z.apps.filter(He=>He&&He.name===Ie.name)[0]||mt.runOutsideAngular(()=>ee.Z.initializeApp(ye,Ie));try{JSON.stringify(ye)!==JSON.stringify(qe.options)&&H("error",`${qe.name} Firebase App already initialized with different options${gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new he(qe)}const H=(ye,...mt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[ye](...mt)},K={provide:he,useFactory:G,deps:[Ee,d.R0b,[new d.FiY,ge]]};let $e=(()=>{class ye{constructor(bt){ee.Z.registerVersion("angularfire",k.q4.full,"core"),ee.Z.registerVersion("angularfire",k.q4.full,"app-compat"),ee.Z.registerVersion("angular",d.q4F.full,bt.toString())}static initializeApp(bt,Le){return{ngModule:ye,providers:[{provide:Ee,useValue:bt},{provide:ge,useValue:Le}]}}}return ye.\u0275fac=function(bt){return new(bt||ye)(d.LFG(d.Lbi))},ye.\u0275mod=d.oAB({type:ye}),ye.\u0275inj=d.cJS({providers:[K]}),ye})();function Re(ye,mt,bt,Le,Ie){const[,_e,qe]=globalThis.\u0275AngularfireInstanceCache.find(He=>He[0]===ye)||[];if(_e)return function De(ye,mt){try{return ye.toString()===mt.toString()}catch{return ye===mt}}(Ie,qe)||(we("error",`${mt} was already initialized on the ${bt} Firebase App with different settings.${st?" You may need to reload as Firebase is not HMR aware.":""}`),we("warn",{is:Ie,was:qe})),_e;{const He=Le();return globalThis.\u0275AngularfireInstanceCache.push([ye,He,Ie]),He}}const st=!!gt.hot,we=(ye,...mt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[ye](...mt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(gt,Me,L)=>{L.d(Me,{q4:()=>vi,iC:()=>dd,HU:()=>Cg,vb:()=>ud,JM:()=>H_});var d=L(4650),ee=L(259),k=L(5861),ce=L(6881),le=L(2090),pe=L(4859),he=L(1877);let ge,G;const $e=new WeakMap,Re=new WeakMap,De=new WeakMap,st=new WeakMap,we=new WeakMap;let bt={get(w,D,x){if(w instanceof IDBTransaction){if("done"===D)return Re.get(w);if("objectStoreNames"===D)return w.objectStoreNames||De.get(w);if("store"===D)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return qe(w[D])},set:(w,D,x)=>(w[D]=x,!0),has:(w,D)=>w instanceof IDBTransaction&&("done"===D||"store"===D)||D in w};function _e(w){return"function"==typeof w?function Ie(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function K(){return G||(G=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...D){return w.apply(He(this),D),qe($e.get(this))}:function(...D){return qe(w.apply(He(this),D))}:function(D,...x){const N=w.call(He(this),D,...x);return De.set(N,D.sort?D.sort():[D]),qe(N)}}(w):(w instanceof IDBTransaction&&function mt(w){if(Re.has(w))return;const D=new Promise((x,N)=>{const z=()=>{w.removeEventListener("complete",Y),w.removeEventListener("error",fe),w.removeEventListener("abort",fe)},Y=()=>{x(),z()},fe=()=>{N(w.error||new DOMException("AbortError","AbortError")),z()};w.addEventListener("complete",Y),w.addEventListener("error",fe),w.addEventListener("abort",fe)});Re.set(w,D)}(w),((w,D)=>D.some(x=>w instanceof x))(w,function H(){return ge||(ge=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,bt):w)}function qe(w){if(w instanceof IDBRequest)return function ye(w){const D=new Promise((x,N)=>{const z=()=>{w.removeEventListener("success",Y),w.removeEventListener("error",fe)},Y=()=>{x(qe(w.result)),z()},fe=()=>{N(w.error),z()};w.addEventListener("success",Y),w.addEventListener("error",fe)});return D.then(x=>{x instanceof IDBCursor&&$e.set(x,w)}).catch(()=>{}),we.set(D,w),D}(w);if(st.has(w))return st.get(w);const D=_e(w);return D!==w&&(st.set(w,D),we.set(D,w)),D}const He=w=>we.get(w),xt=["get","getKey","getAll","getAllKeys","count"],ct=["put","add","delete","clear"],Ht=new Map;function at(w,D){if(!(w instanceof IDBDatabase)||D in w||"string"!=typeof D)return;if(Ht.get(D))return Ht.get(D);const x=D.replace(/FromIndex$/,""),N=D!==x,z=ct.includes(x);if(!(x in(N?IDBIndex:IDBObjectStore).prototype)||!z&&!xt.includes(x))return;const Y=function(){var fe=(0,k.Z)(function*(Ze,...ze){const ht=this.transaction(Ze,z?"readwrite":"readonly");let Je=ht.store;return N&&(Je=Je.index(ze.shift())),(yield Promise.all([Je[x](...ze),z&&ht.done]))[0]});return function(ze){return fe.apply(this,arguments)}}();return Ht.set(D,Y),Y}!function Le(w){bt=w(bt)}(w=>({...w,get:(D,x,N)=>at(D,x)||w.get(D,x,N),has:(D,x)=>!!at(D,x)||w.has(D,x)}));const fs="@firebase/installations",Gi="w:0.6.4",ie="FIS_v2",lt=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Pt(w){return w instanceof le.ZR&&w.code.includes("request-failed")}function ln({projectId:w}){return`https://firebaseinstallations.googleapis.com/v1/projects/${w}/installations`}function yt(w){return{token:w.token,requestStatus:2,expiresIn:Kr(w.expiresIn),creationTime:Date.now()}}function qt(w,D){return bn.apply(this,arguments)}function bn(){return(bn=(0,k.Z)(function*(w,D){const N=(yield D.json()).error;return lt.create("request-failed",{requestName:w,serverCode:N.code,serverMessage:N.message,serverStatus:N.status})})).apply(this,arguments)}function yn({apiKey:w}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w})}function kn(w,{refreshToken:D}){const x=yn(w);return x.append("Authorization",function hi(w){return`${ie} ${w}`}(D)),x}function Yn(w){return jn.apply(this,arguments)}function jn(){return(jn=(0,k.Z)(function*(w){const D=yield w();return D.status>=500&&D.status<600?w():D})).apply(this,arguments)}function Kr(w){return Number(w.replace("s","000"))}function dt(w,D){return Br.apply(this,arguments)}function Br(){return(Br=(0,k.Z)(function*({appConfig:w,heartbeatServiceProvider:D},{fid:x}){const N=ln(w),z=yn(w),Y=D.getImmediate({optional:!0});if(Y){const ht=yield Y.getHeartbeatsHeader();ht&&z.append("x-firebase-client",ht)}const Ze={method:"POST",headers:z,body:JSON.stringify({fid:x,authVersion:ie,appId:w.appId,sdkVersion:Gi})},ze=yield Yn(()=>fetch(N,Ze));if(ze.ok){const ht=yield ze.json();return{fid:ht.fid||x,registrationStatus:2,refreshToken:ht.refreshToken,authToken:yt(ht.authToken)}}throw yield qt("Create Installation",ze)})).apply(this,arguments)}function Ti(w){return new Promise(D=>{setTimeout(D,w)})}const Co=/^[cdef][\w-]{21}$/;function cr(){try{const w=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(w),w[0]=112+w[0]%16;const x=function wn(w){return function Ur(w){return btoa(String.fromCharCode(...w)).replace(/\+/g,"-").replace(/\//g,"_")}(w).substr(0,22)}(w);return Co.test(x)?x:""}catch{return""}}function Jt(w){return`${w.appName}!${w.appId}`}const nt=new Map;function vt(w,D){const x=Jt(w);Yr(x,D),function Qn(w,D){const x=function yr(){return!Tt&&"BroadcastChannel"in self&&(Tt=new BroadcastChannel("[Firebase] FID Change"),Tt.onmessage=w=>{Yr(w.data.key,w.data.fid)}),Tt}();x&&x.postMessage({key:w,fid:D}),function un(){0===nt.size&&Tt&&(Tt.close(),Tt=null)}()}(x,D)}function Yr(w,D){const x=nt.get(w);if(x)for(const N of x)N(D)}let Tt=null;const lr="firebase-installations-store";let vr=null;function Si(){return vr||(vr=function tt(w,D,{blocked:x,upgrade:N,blocking:z,terminated:Y}={}){const fe=indexedDB.open(w,D),Ze=qe(fe);return N&&fe.addEventListener("upgradeneeded",ze=>{N(qe(fe.result),ze.oldVersion,ze.newVersion,qe(fe.transaction))}),x&&fe.addEventListener("blocked",()=>x()),Ze.then(ze=>{Y&&ze.addEventListener("close",()=>Y()),z&&ze.addEventListener("versionchange",()=>z())}).catch(()=>{}),Ze}("firebase-installations-database",1,{upgrade:(w,D)=>{0===D&&w.createObjectStore(lr)}})),vr}function Tn(w,D){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,k.Z)(function*(w,D){const x=Jt(w),z=(yield Si()).transaction(lr,"readwrite"),Y=z.objectStore(lr),fe=yield Y.get(x);return yield Y.put(D,x),yield z.done,(!fe||fe.fid!==D.fid)&&vt(w,D.fid),D})).apply(this,arguments)}function qi(w){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,k.Z)(function*(w){const D=Jt(w),N=(yield Si()).transaction(lr,"readwrite");yield N.objectStore(lr).delete(D),yield N.done})).apply(this,arguments)}function Qr(w,D){return jr.apply(this,arguments)}function jr(){return(jr=(0,k.Z)(function*(w,D){const x=Jt(w),z=(yield Si()).transaction(lr,"readwrite"),Y=z.objectStore(lr),fe=yield Y.get(x),Ze=D(fe);return void 0===Ze?yield Y.delete(x):yield Y.put(Ze,x),yield z.done,Ze&&(!fe||fe.fid!==Ze.fid)&&vt(w,Ze.fid),Ze})).apply(this,arguments)}function U(w){return V.apply(this,arguments)}function V(){return(V=(0,k.Z)(function*(w){let D;const x=yield Qr(w.appConfig,N=>{const z=W(N),Y=ue(w,z);return D=Y.registrationPromise,Y.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function W(w){return Ue(w||{fid:cr(),registrationStatus:0})}function ue(w,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(lt.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},N=function J(w,D){return We.apply(this,arguments)}(w,x);return{installationEntry:x,registrationPromise:N}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:St(w)}:{installationEntry:D}}function We(){return(We=(0,k.Z)(function*(w,D){try{const x=yield dt(w,D);return Tn(w.appConfig,x)}catch(x){throw Pt(x)&&409===x.customData.serverCode?yield qi(w.appConfig):yield Tn(w.appConfig,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function St(w){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,k.Z)(function*(w){let D=yield on(w.appConfig);for(;1===D.registrationStatus;)yield Ti(100),D=yield on(w.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:N}=yield U(w);return N||x}return D})).apply(this,arguments)}function on(w){return Qr(w,D=>{if(!D)throw lt.create("installation-not-found");return Ue(D)})}function Ue(w){return function ut(w){return 1===w.registrationStatus&&w.registrationTime+1e4<Date.now()}(w)?{fid:w.fid,registrationStatus:0}:w}function _t(w,D){return pn.apply(this,arguments)}function pn(){return(pn=(0,k.Z)(function*({appConfig:w,heartbeatServiceProvider:D},x){const N=wr(w,x),z=kn(w,x),Y=D.getImmediate({optional:!0});if(Y){const ht=yield Y.getHeartbeatsHeader();ht&&z.append("x-firebase-client",ht)}const Ze={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:Gi,appId:w.appId}})},ze=yield Yn(()=>fetch(N,Ze));if(ze.ok)return yt(yield ze.json());throw yield qt("Generate Auth Token",ze)})).apply(this,arguments)}function wr(w,{fid:D}){return`${ln(w)}/${D}/authTokens:generate`}function gn(w){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,k.Z)(function*(w,D=!1){let x;const N=yield Qr(w.appConfig,Y=>{if(!Vt(Y))throw lt.create("not-registered");const fe=Y.authToken;if(!D&&en(fe))return Y;if(1===fe.requestStatus)return x=se(w,D),Y;{if(!navigator.onLine)throw lt.create("app-offline");const Ze=zt(Y);return x=Be(w,Ze),Ze}});return x?yield x:N.authToken})).apply(this,arguments)}function se(w,D){return ne.apply(this,arguments)}function ne(){return(ne=(0,k.Z)(function*(w,D){let x=yield Fe(w.appConfig);for(;1===x.authToken.requestStatus;)yield Ti(100),x=yield Fe(w.appConfig);const N=x.authToken;return 0===N.requestStatus?gn(w,D):N})).apply(this,arguments)}function Fe(w){return Qr(w,D=>{if(!Vt(D))throw lt.create("not-registered");return function Ir(w){return 1===w.requestStatus&&w.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Be(w,D){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,k.Z)(function*(w,D){try{const x=yield _t(w,D),N=Object.assign(Object.assign({},D),{authToken:x});return yield Tn(w.appConfig,N),x}catch(x){if(!Pt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const N=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Tn(w.appConfig,N)}else yield qi(w.appConfig);throw x}})).apply(this,arguments)}function Vt(w){return void 0!==w&&2===w.registrationStatus}function en(w){return 2===w.requestStatus&&!function Dn(w){const D=Date.now();return D<w.creationTime||w.creationTime+w.expiresIn<D+36e5}(w)}function zt(w){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},w),{authToken:D})}function Jr(){return(Jr=(0,k.Z)(function*(w){const D=w,{installationEntry:x,registrationPromise:N}=yield U(D);return N?N.catch(console.error):gn(D).catch(console.error),x.fid})).apply(this,arguments)}function ia(){return(ia=(0,k.Z)(function*(w,D=!1){const x=w;return yield tn(x),(yield gn(x,D)).token})).apply(this,arguments)}function tn(w){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,k.Z)(function*(w){const{registrationPromise:D}=yield U(w);D&&(yield D)})).apply(this,arguments)}function ur(w){return lt.create("missing-app-config-values",{valueName:w})}const Hr="installations",za=w=>{const D=w.getProvider("app").getImmediate(),x=function Ou(w){if(!w||!w.options)throw ur("App Configuration");if(!w.name)throw ur("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!w.options[x])throw ur(x);return{appName:w.name,projectId:w.options.projectId,apiKey:w.options.apiKey,appId:w.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,ce._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},ps=w=>{const D=w.getProvider("app").getImmediate(),x=(0,ce._getProvider)(D,Hr).getImmediate();return{getId:()=>function pi(w){return Jr.apply(this,arguments)}(x),getToken:z=>function ra(w){return ia.apply(this,arguments)}(x,z)}};(function Mi(){(0,ce._registerComponent)(new pe.wA(Hr,za,"PUBLIC")),(0,ce._registerComponent)(new pe.wA("installations-internal",ps,"PRIVATE"))})(),(0,ce.registerVersion)(fs,"0.6.4"),(0,ce.registerVersion)(fs,"0.6.4","esm2017");const bo="@firebase/remote-config",vn=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class gi{constructor(D,x,N,z){this.client=D,this.storage=x,this.storageCache=N,this.logger=z}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const N=Date.now()-x,z=N<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${N}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${z}.`),z}fetch(D){var x=this;return(0,k.Z)(function*(){const[N,z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(z&&x.isCachedDataFresh(D.cacheMaxAgeMillis,N))return z;D.eTag=z&&z.eTag;const Y=yield x.client.fetch(D),fe=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Y.status&&fe.push(x.storage.setLastSuccessfulFetchResponse(Y)),yield Promise.all(fe),Y})()}}function $u(w=navigator){return w.languages&&w.languages[0]||w.language}class sa{constructor(D,x,N,z,Y,fe){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=N,this.projectId=z,this.apiKey=Y,this.appId=fe}fetch(D){var x=this;return(0,k.Z)(function*(){const[N,z]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),fe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},ze={sdk_version:x.sdkVersion,app_instance_id:N,app_instance_id_token:z,app_id:x.appId,language_code:$u()},ht={method:"POST",headers:Ze,body:JSON.stringify(ze)},Je=fetch(fe,ht),Nt=new Promise((Ni,Ts)=>{D.signal.addEventListener(()=>{const Nl=new Error("The operation was aborted.");Nl.name="AbortError",Ts(Nl)})});let Ci;try{yield Promise.race([Je,Nt]),Ci=yield Je}catch(Ni){let Ts="fetch-client-network";throw"AbortError"===Ni?.name&&(Ts="fetch-timeout"),vn.create(Ts,{originalErrorMessage:Ni?.message})}let Gn=Ci.status;const zn=Ci.headers.get("ETag")||void 0;let Uo,lo;if(200===Ci.status){let Ni;try{Ni=yield Ci.json()}catch(Ts){throw vn.create("fetch-client-parse",{originalErrorMessage:Ts?.message})}Uo=Ni.entries,lo=Ni.state}if("INSTANCE_STATE_UNSPECIFIED"===lo?Gn=500:"NO_CHANGE"===lo?Gn=304:("NO_TEMPLATE"===lo||"EMPTY_CONFIG"===lo)&&(Uo={}),304!==Gn&&200!==Gn)throw vn.create("fetch-status",{httpStatus:Gn});return{status:Gn,eTag:zn,config:Uo}})()}}class kh{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,k.Z)(function*(){const N=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,N)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:N}){var z=this;return(0,k.Z)(function*(){yield function rl(w,D){return new Promise((x,N)=>{const z=Math.max(D-Date.now(),0),Y=setTimeout(x,z);w.addEventListener(()=>{clearTimeout(Y),N(vn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const Y=yield z.client.fetch(D);return yield z.storage.deleteThrottleMetadata(),Y}catch(Y){if(!function Za(w){if(!(w instanceof le.ZR&&w.customData))return!1;const D=Number(w.customData.httpStatus);return 429===D||500===D||503===D||504===D}(Y))throw Y;const fe={throttleEndTimeMillis:Date.now()+(0,le.$s)(N),backoffCount:N+1};return yield z.storage.setThrottleMetadata(fe),z.attemptFetch(D,fe)}})()}}class Nh{constructor(D,x,N,z,Y){this.app=D,this._client=x,this._storageCache=N,this._storage=z,this._logger=Y,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function gr(w,D){const x=w.target.error||void 0;return vn.create(D,{originalErrorMessage:x&&x?.message})}const xr="app_namespace_store";class C0{constructor(D,x,N,z=function Qa(){return new Promise((w,D)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=N=>{D(gr(N,"storage-open"))},x.onsuccess=N=>{w(N.target.result)},x.onupgradeneeded=N=>{0===N.oldVersion&&N.target.result.createObjectStore(xr,{keyPath:"compositeKey"})}}catch(x){D(vn.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=D,this.appName=x,this.namespace=N,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,k.Z)(function*(){const N=yield x.openDbPromise;return new Promise((z,Y)=>{const Ze=N.transaction([xr],"readonly").objectStore(xr),ze=x.createCompositeKey(D);try{const ht=Ze.get(ze);ht.onerror=Je=>{Y(gr(Je,"storage-get"))},ht.onsuccess=Je=>{const Nt=Je.target.result;z(Nt?Nt.value:void 0)}}catch(ht){Y(vn.create("storage-get",{originalErrorMessage:ht?.message}))}})})()}set(D,x){var N=this;return(0,k.Z)(function*(){const z=yield N.openDbPromise;return new Promise((Y,fe)=>{const ze=z.transaction([xr],"readwrite").objectStore(xr),ht=N.createCompositeKey(D);try{const Je=ze.put({compositeKey:ht,value:x});Je.onerror=Nt=>{fe(gr(Nt,"storage-set"))},Je.onsuccess=()=>{Y()}}catch(Je){fe(vn.create("storage-set",{originalErrorMessage:Je?.message}))}})})()}delete(D){var x=this;return(0,k.Z)(function*(){const N=yield x.openDbPromise;return new Promise((z,Y)=>{const Ze=N.transaction([xr],"readwrite").objectStore(xr),ze=x.createCompositeKey(D);try{const ht=Ze.delete(ze);ht.onerror=Je=>{Y(gr(Je,"storage-delete"))},ht.onsuccess=()=>{z()}}catch(ht){Y(vn.create("storage-delete",{originalErrorMessage:ht?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Fn{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,k.Z)(function*(){const x=D.storage.getLastFetchStatus(),N=D.storage.getLastSuccessfulFetchTimestampMillis(),z=D.storage.getActiveConfig(),Y=yield x;Y&&(D.lastFetchStatus=Y);const fe=yield N;fe&&(D.lastSuccessfulFetchTimestampMillis=fe);const Ze=yield z;Ze&&(D.activeConfig=Ze)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function $r(){return ol.apply(this,arguments)}function ol(){return(ol=(0,k.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}let Do,Ln;!function Fs(){(0,ce._registerComponent)(new pe.wA("remote-config",function w(D,{instanceIdentifier:x}){const N=D.getProvider("app").getImmediate(),z=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw vn.create("registration-window");if(!(0,le.hl)())throw vn.create("indexed-db-unavailable");const{projectId:Y,apiKey:fe,appId:Ze}=N.options;if(!Y)throw vn.create("registration-project-id");if(!fe)throw vn.create("registration-api-key");if(!Ze)throw vn.create("registration-app-id");const ze=new C0(Ze,N.name,x=x||"firebase"),ht=new Fn(ze),Je=new he.Yd(bo);Je.logLevel=he.in.ERROR;const Nt=new sa(z,ce.SDK_VERSION,x,Y,fe,Ze),Ci=new kh(Nt,ze),Gn=new gi(Ci,ze,ht,Je),zn=new Nh(N,Gn,ht,ze,Je);return function lg(w){const D=(0,le.m9)(w);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(zn),zn},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(bo,"0.4.4"),(0,ce.registerVersion)(bo,"0.4.4","esm2017")}();const al=new WeakMap,Xr=new WeakMap,Ls=new WeakMap,Er=new WeakMap,At=new WeakMap;let aa={get(w,D,x){if(w instanceof IDBTransaction){if("done"===D)return Xr.get(w);if("objectStoreNames"===D)return w.objectStoreNames||Ls.get(w);if("store"===D)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return Pi(w[D])},set:(w,D,x)=>(w[D]=x,!0),has:(w,D)=>w instanceof IDBTransaction&&("done"===D||"store"===D)||D in w};function Zu(w){return"function"==typeof w?function Wu(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Zs(){return Ln||(Ln=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...D){return w.apply(Ja(this),D),Pi(al.get(this))}:function(...D){return Pi(w.apply(Ja(this),D))}:function(D,...x){const N=w.call(Ja(this),D,...x);return Ls.set(N,D.sort?D.sort():[D]),Pi(N)}}(w):(w instanceof IDBTransaction&&function zu(w){if(Xr.has(w))return;const D=new Promise((x,N)=>{const z=()=>{w.removeEventListener("complete",Y),w.removeEventListener("error",fe),w.removeEventListener("abort",fe)},Y=()=>{x(),z()},fe=()=>{N(w.error||new DOMException("AbortError","AbortError")),z()};w.addEventListener("complete",Y),w.addEventListener("error",fe),w.addEventListener("abort",fe)});Xr.set(w,D)}(w),((w,D)=>D.some(x=>w instanceof x))(w,function ug(){return Do||(Do=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,aa):w)}function Pi(w){if(w instanceof IDBRequest)return function Gu(w){const D=new Promise((x,N)=>{const z=()=>{w.removeEventListener("success",Y),w.removeEventListener("error",fe)},Y=()=>{x(Pi(w.result)),z()},fe=()=>{N(w.error),z()};w.addEventListener("success",Y),w.addEventListener("error",fe)});return D.then(x=>{x instanceof IDBCursor&&al.set(x,w)}).catch(()=>{}),At.set(D,w),D}(w);if(Er.has(w))return Er.get(w);const D=Zu(w);return D!==w&&(Er.set(w,D),At.set(D,w)),D}const Ja=w=>At.get(w);function Ae(w,D,{blocked:x,upgrade:N,blocking:z,terminated:Y}={}){const fe=indexedDB.open(w,D),Ze=Pi(fe);return N&&fe.addEventListener("upgradeneeded",ze=>{N(Pi(fe.result),ze.oldVersion,ze.newVersion,Pi(fe.transaction))}),x&&fe.addEventListener("blocked",()=>x()),Ze.then(ze=>{Y&&ze.addEventListener("close",()=>Y()),z&&ze.addEventListener("versionchange",()=>z())}).catch(()=>{}),Ze}function $t(w,{blocked:D}={}){const x=indexedDB.deleteDatabase(w);return D&&x.addEventListener("blocked",()=>D()),Pi(x).then(()=>{})}const Xa=["get","getKey","getAll","getAllKeys","count"],cl=["put","add","delete","clear"],Sn=new Map;function ec(w,D){if(!(w instanceof IDBDatabase)||D in w||"string"!=typeof D)return;if(Sn.get(D))return Sn.get(D);const x=D.replace(/FromIndex$/,""),N=D!==x,z=cl.includes(x);if(!(x in(N?IDBIndex:IDBObjectStore).prototype)||!z&&!Xa.includes(x))return;const Y=function(){var fe=(0,k.Z)(function*(Ze,...ze){const ht=this.transaction(Ze,z?"readwrite":"readonly");let Je=ht.store;return N&&(Je=Je.index(ze.shift())),(yield Promise.all([Je[x](...ze),z&&ht.done]))[0]});return function(ze){return fe.apply(this,arguments)}}();return Sn.set(D,Y),Y}!function qu(w){aa=w(aa)}(w=>({...w,get:(D,x,N)=>ec(D,x)||w.get(D,x,N),has:(D,x)=>!!ec(D,x)||w.has(D,x)}));const Ks="/firebase-messaging-sw.js",ei="/firebase-cloud-messaging-push-scope",To="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ul="google.c.a.c_id",An="google.c.a.c_l",Lh="google.c.a.ts",Vh="google.c.a.e";var ti=(()=>{return(w=ti||(ti={})).PUSH_RECEIVED="push-received",w.NOTIFICATION_CLICKED="notification-clicked",ti;var w})();function Oi(w){const D=new Uint8Array(w);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ms(w){const x=(w+"=".repeat((4-w.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),N=atob(x),z=new Uint8Array(N.length);for(let Y=0;Y<N.length;++Y)z[Y]=N.charCodeAt(Y);return z}const ni="fcm_token_details_db",Ys="fcm_token_object_Store";function dg(w){return So.apply(this,arguments)}function So(){return So=(0,k.Z)(function*(w){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Y=>Y.name).includes(ni))return null;let D=null;return(yield Ae(ni,5,{upgrade:(N=(0,k.Z)(function*(z,Y,fe,Ze){var ze;if(Y<2||!z.objectStoreNames.contains(Ys))return;const ht=Ze.objectStore(Ys),Je=yield ht.index("fcmSenderId").get(w);if(yield ht.clear(),Je)if(2===Y){const Nt=Je;if(!Nt.auth||!Nt.p256dh||!Nt.endpoint)return;D={token:Nt.fcmToken,createTime:null!==(ze=Nt.createTime)&&void 0!==ze?ze:Date.now(),subscriptionOptions:{auth:Nt.auth,p256dh:Nt.p256dh,endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:"string"==typeof Nt.vapidKey?Nt.vapidKey:Oi(Nt.vapidKey)}}}else if(3===Y){const Nt=Je;D={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:Oi(Nt.auth),p256dh:Oi(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:Oi(Nt.vapidKey)}}}else if(4===Y){const Nt=Je;D={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:Oi(Nt.auth),p256dh:Oi(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:Oi(Nt.vapidKey)}}}}),function(Y,fe,Ze,ze){return N.apply(this,arguments)})})).close(),yield $t(ni),yield $t("fcm_vapid_details_db"),yield $t("undefined"),dl(D)?D:null;var N}),So.apply(this,arguments)}function dl(w){if(!w||!w.subscriptionOptions)return!1;const{subscriptionOptions:D}=w;return"number"==typeof w.createTime&&w.createTime>0&&"string"==typeof w.token&&w.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Or="firebase-messaging-store";let hl=null;function la(){return hl||(hl=Ae("firebase-messaging-database",1,{upgrade:(w,D)=>{0===D&&w.createObjectStore(Or)}})),hl}function ua(w){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,k.Z)(function*(w){const D=nc(w),N=yield(yield la()).transaction(Or).objectStore(Or).get(D);if(N)return N;{const z=yield dg(w.appConfig.senderId);if(z)return yield fl(w,z),z}})).apply(this,arguments)}function fl(w,D){return da.apply(this,arguments)}function da(){return(da=(0,k.Z)(function*(w,D){const x=nc(w),z=(yield la()).transaction(Or,"readwrite");return yield z.objectStore(Or).put(D,x),yield z.done,D})).apply(this,arguments)}function Yu(w){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,k.Z)(function*(w){const D=nc(w),N=(yield la()).transaction(Or,"readwrite");yield N.objectStore(Or).delete(D),yield N.done})).apply(this,arguments)}function nc({appConfig:w}){return w.appId}const nn=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function _s(w,D){return In.apply(this,arguments)}function In(){return(In=(0,k.Z)(function*(w,D){const x=yield gl(w),N=ha(D),z={method:"POST",headers:x,body:JSON.stringify(N)};let Y;try{Y=yield(yield fetch(ic(w.appConfig),z)).json()}catch(fe){throw nn.create("token-subscribe-failed",{errorInfo:fe?.toString()})}if(Y.error)throw nn.create("token-subscribe-failed",{errorInfo:Y.error.message});if(!Y.token)throw nn.create("token-subscribe-no-token");return Y.token})).apply(this,arguments)}function pl(w,D){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,k.Z)(function*(w,D){const x=yield gl(w),N=ha(D.subscriptionOptions),z={method:"PATCH",headers:x,body:JSON.stringify(N)};let Y;try{Y=yield(yield fetch(`${ic(w.appConfig)}/${D.token}`,z)).json()}catch(fe){throw nn.create("token-update-failed",{errorInfo:fe?.toString()})}if(Y.error)throw nn.create("token-update-failed",{errorInfo:Y.error.message});if(!Y.token)throw nn.create("token-update-no-token");return Y.token})).apply(this,arguments)}function rc(w,D){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,k.Z)(function*(w,D){const N={method:"DELETE",headers:yield gl(w)};try{const Y=yield(yield fetch(`${ic(w.appConfig)}/${D}`,N)).json();if(Y.error)throw nn.create("token-unsubscribe-failed",{errorInfo:Y.error.message})}catch(z){throw nn.create("token-unsubscribe-failed",{errorInfo:z?.toString()})}})).apply(this,arguments)}function ic({projectId:w}){return`https://fcmregistrations.googleapis.com/v1/projects/${w}/registrations`}function gl(w){return Js.apply(this,arguments)}function Js(){return(Js=(0,k.Z)(function*({appConfig:w,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function ha({p256dh:w,auth:D,endpoint:x,vapidKey:N}){const z={web:{endpoint:x,auth:D,p256dh:w}};return N!==To&&(z.web.applicationPubKey=N),z}const Mo=6048e5;function Xu(w){return fa.apply(this,arguments)}function fa(){return(fa=(0,k.Z)(function*(w){const D=yield ml(w.swRegistration,w.vapidKey),x={vapidKey:w.vapidKey,swScope:w.swRegistration.scope,endpoint:D.endpoint,auth:Oi(D.getKey("auth")),p256dh:Oi(D.getKey("p256dh"))},N=yield ua(w.firebaseDependencies);if(N){if(jh(N.subscriptionOptions,x))return Date.now()>=N.createTime+Mo?pa(w,{token:N.token,createTime:Date.now(),subscriptionOptions:x}):N.token;try{yield rc(w.firebaseDependencies,N.token)}catch(z){console.warn(z)}return Uh(w.firebaseDependencies,x)}return Uh(w.firebaseDependencies,x)})).apply(this,arguments)}function Bh(w){return ys.apply(this,arguments)}function ys(){return(ys=(0,k.Z)(function*(w){const D=yield ua(w.firebaseDependencies);D&&(yield rc(w.firebaseDependencies,D.token),yield Yu(w.firebaseDependencies));const x=yield w.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function pa(w,D){return sc.apply(this,arguments)}function sc(){return(sc=(0,k.Z)(function*(w,D){try{const x=yield pl(w.firebaseDependencies,D),N=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield fl(w.firebaseDependencies,N),x}catch(x){throw yield Bh(w),x}})).apply(this,arguments)}function Uh(w,D){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,k.Z)(function*(w,D){const N={token:yield _s(w,D),createTime:Date.now(),subscriptionOptions:D};return yield fl(w,N),N.token})).apply(this,arguments)}function ml(w,D){return ed.apply(this,arguments)}function ed(){return(ed=(0,k.Z)(function*(w,D){return(yield w.pushManager.getSubscription())||w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ms(D)})})).apply(this,arguments)}function jh(w,D){return D.vapidKey===w.vapidKey&&D.endpoint===w.endpoint&&D.auth===w.auth&&D.p256dh===w.p256dh}function _l(w){const D={from:w.from,collapseKey:w.collapse_key,messageId:w.fcmMessageId};return function oc(w,D){if(!D.notification)return;w.notification={};const x=D.notification.title;x&&(w.notification.title=x);const N=D.notification.body;N&&(w.notification.body=N);const z=D.notification.image;z&&(w.notification.image=z);const Y=D.notification.icon;Y&&(w.notification.icon=Y)}(D,w),function ac(w,D){!D.data||(w.data=D.data)}(D,w),function cc(w,D){var x,N,z,Y,fe;if(!(D.fcmOptions||null!==(x=D.notification)&&void 0!==x&&x.click_action))return;w.fcmOptions={};const Ze=null!==(z=null===(N=D.fcmOptions)||void 0===N?void 0:N.link)&&void 0!==z?z:null===(Y=D.notification)||void 0===Y?void 0:Y.click_action;Ze&&(w.fcmOptions.link=Ze);const ze=null===(fe=D.fcmOptions)||void 0===fe?void 0:fe.analytics_label;ze&&(w.fcmOptions.analyticsLabel=ze)}(D,w),D}function Hh(w){return"object"==typeof w&&!!w&&ul in w}function xo(w,D){const x=[];for(let N=0;N<w.length;N++)x.push(w.charAt(N)),N<D.length&&x.push(D.charAt(N));return x.join("")}function yl(w){return nn.create("missing-app-config-values",{valueName:w})}xo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),xo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ga{constructor(D,x,N){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function td(w){if(!w||!w.options)throw yl("App Configuration Object");if(!w.name)throw yl("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=w;for(const N of D)if(!x[N])throw yl(N);return{appName:w.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:z,installations:x,analyticsProvider:N}}_delete(){return Promise.resolve()}}function $h(w){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,k.Z)(function*(w){try{w.swRegistration=yield navigator.serviceWorker.register(Ks,{scope:ei}),w.swRegistration.update().catch(()=>{})}catch(D){throw nn.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function ma(w,D){return vs.apply(this,arguments)}function vs(){return(vs=(0,k.Z)(function*(w,D){if(!D&&!w.swRegistration&&(yield $h(w)),D||!w.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw nn.create("invalid-sw-registration");w.swRegistration=D}})).apply(this,arguments)}function Xs(w,D){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,k.Z)(function*(w,D){D?w.vapidKey=D:w.vapidKey||(w.vapidKey=To)})).apply(this,arguments)}function _a(){return(_a=(0,k.Z)(function*(w,D){if(!navigator)throw nn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw nn.create("permission-blocked");return yield Xs(w,D?.vapidKey),yield ma(w,D?.serviceWorkerRegistration),Xu(w)})).apply(this,arguments)}function _i(w,D,x){return vl.apply(this,arguments)}function vl(){return(vl=(0,k.Z)(function*(w,D,x){const N=Po(D);(yield w.firebaseDependencies.analyticsProvider.get()).logEvent(N,{message_id:x[ul],message_name:x[An],message_time:x[Lh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Po(w){switch(w){case ti.NOTIFICATION_CLICKED:return"notification_open";case ti.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function eo(){return(eo=(0,k.Z)(function*(w,D){const x=D.data;if(!x.isFirebaseMessaging)return;w.onMessageHandler&&x.messageType===ti.PUSH_RECEIVED&&("function"==typeof w.onMessageHandler?w.onMessageHandler(_l(x)):w.onMessageHandler.next(_l(x)));const N=x.data;Hh(N)&&"1"===N[Vh]&&(yield _i(w,x.messageType,N))})).apply(this,arguments)}const to="@firebase/messaging",no=w=>{const D=new ga(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),w.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Cl(w,D){return eo.apply(this,arguments)}(D,x)),D},uc=w=>{const D=w.getProvider("messaging").getImmediate();return{getToken:N=>function lc(w,D){return _a.apply(this,arguments)}(D,N)}};function va(){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,k.Z)(function*(){try{yield(0,le.eu)()}catch{return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Gh(){(0,ce._registerComponent)(new pe.wA("messaging",no,"PUBLIC")),(0,ce._registerComponent)(new pe.wA("messaging-internal",uc,"PRIVATE")),(0,ce.registerVersion)(to,"0.12.4"),(0,ce.registerVersion)(to,"0.12.4","esm2017")}();const En="analytics",wl="firebase_id",hc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Cs="https://www.googletagmanager.com/gtag/js",Mn=new he.Yd("@firebase/analytics"),br=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Ro(w){if(!w.startsWith(Cs)){const D=br.create("invalid-gtag-resource",{gtagURL:w});return Mn.warn(D.message),""}return w}function ws(w){return Promise.all(w.map(D=>D.catch(x=>x)))}function Ia(w,D){const x=function fc(w,D){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(w,D)),x}("firebase-js-sdk-policy",{createScriptURL:Ro}),N=document.createElement("script"),z=`${Cs}?l=${w}&id=${D}`;N.src=x?x?.createScriptURL(z):z,N.async=!0,document.head.appendChild(N)}function Il(w,D,x,N,z,Y){return El.apply(this,arguments)}function El(){return(El=(0,k.Z)(function*(w,D,x,N,z,Y){const fe=N[z];try{if(fe)yield D[fe];else{const ze=(yield ws(x)).find(ht=>ht.measurementId===z);ze&&(yield D[ze.appId])}}catch(Ze){Mn.error(Ze)}w("config",z,Y)})).apply(this,arguments)}function Wh(w,D,x,N,z){return nd.apply(this,arguments)}function nd(){return(nd=(0,k.Z)(function*(w,D,x,N,z){try{let Y=[];if(z&&z.send_to){let fe=z.send_to;Array.isArray(fe)||(fe=[fe]);const Ze=yield ws(x);for(const ze of fe){const ht=Ze.find(Nt=>Nt.measurementId===ze),Je=ht&&D[ht.appId];if(!Je){Y=[];break}Y.push(Je)}}0===Y.length&&(Y=Object.values(D)),yield Promise.all(Y),w("event",N,z||{})}catch(Y){Mn.error(Y)}})).apply(this,arguments)}function Yh(w){const D=window.document.getElementsByTagName("script");for(const x of Object.values(D))if(x.src&&x.src.includes(Cs)&&x.src.includes(w))return x;return null}const Xn=new class pc{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function gc(w){return new Headers({Accept:"application/json","x-goog-api-key":w})}function yi(w){return rd.apply(this,arguments)}function rd(){return(rd=(0,k.Z)(function*(w){var D;const{appId:x,apiKey:N}=w,z={method:"GET",headers:gc(N)},Y=hc.replace("{app-id}",x),fe=yield fetch(Y,z);if(200!==fe.status&&304!==fe.status){let Ze="";try{const ze=yield fe.json();null!==(D=ze.error)&&void 0!==D&&D.message&&(Ze=ze.error.message)}catch{}throw br.create("config-fetch-failed",{httpStatus:fe.status,responseMessage:Ze})}return fe.json()})).apply(this,arguments)}function Qh(w){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,k.Z)(function*(w,D=Xn,x){const{appId:N,apiKey:z,measurementId:Y}=w.options;if(!N)throw br.create("no-app-id");if(!z){if(Y)return{measurementId:Y,appId:N};throw br.create("no-api-key")}const fe=D.getThrottleMetadata(N)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new id;return setTimeout((0,k.Z)(function*(){Ze.abort()}),void 0!==x?x:6e4),ki({appId:N,apiKey:z,measurementId:Y},fe,Ze,D)})).apply(this,arguments)}function ki(w,D,x){return bl.apply(this,arguments)}function bl(){return(bl=(0,k.Z)(function*(w,{throttleEndTimeMillis:D,backoffCount:x},N,z=Xn){var Y;const{appId:fe,measurementId:Ze}=w;try{yield Dl(N,D)}catch(ze){if(Ze)return Mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${ze?.message}]`),{appId:fe,measurementId:Ze};throw ze}try{const ze=yield yi(w);return z.deleteThrottleMetadata(fe),ze}catch(ze){const ht=ze;if(!ko(ht)){if(z.deleteThrottleMetadata(fe),Ze)return Mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${ht?.message}]`),{appId:fe,measurementId:Ze};throw ze}const Je=503===Number(null===(Y=ht?.customData)||void 0===Y?void 0:Y.httpStatus)?(0,le.$s)(x,z.intervalMillis,30):(0,le.$s)(x,z.intervalMillis),Nt={throttleEndTimeMillis:Date.now()+Je,backoffCount:x+1};return z.setThrottleMetadata(fe,Nt),Mn.debug(`Calling attemptFetch again in ${Je} millis`),ki(w,Nt,N,z)}})).apply(this,arguments)}function Dl(w,D){return new Promise((x,N)=>{const z=Math.max(D-Date.now(),0),Y=setTimeout(x,z);w.addEventListener(()=>{clearTimeout(Y),N(br.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function ko(w){if(!(w instanceof le.ZR&&w.customData))return!1;const D=Number(w.customData.httpStatus);return 429===D||500===D||503===D||504===D}class id{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let sd,od;function Jh(){return(Jh=(0,k.Z)(function*(w,D,x,N,z){if(z&&z.global)w("event",x,N);else{const Y=yield D;w("event",x,Object.assign(Object.assign({},N),{send_to:Y}))}})).apply(this,arguments)}function Cc(w){od=w}function wc(w){sd=w}function Kt(){return so.apply(this,arguments)}function so(){return(so=(0,k.Z)(function*(){if(!(0,le.hl)())return Mn.warn(br.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(w){return Mn.warn(br.create("indexeddb-unavailable",{errorInfo:w?.toString()}).message),!1}return!0})).apply(this,arguments)}function Rr(){return(Rr=(0,k.Z)(function*(w,D,x,N,z,Y,fe){var Ze;const ze=Qh(w);ze.then(Gn=>{x[Gn.measurementId]=Gn.appId,w.options.measurementId&&Gn.measurementId!==w.options.measurementId&&Mn.warn(`The measurement ID in the local Firebase config (${w.options.measurementId}) does not match the measurement ID fetched from the server (${Gn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Gn=>Mn.error(Gn)),D.push(ze);const ht=Kt().then(Gn=>{if(Gn)return N.getId()}),[Je,Nt]=yield Promise.all([ze,ht]);Yh(Y)||Ia(Y,Je.measurementId),od&&(z("consent","default",od),Cc(void 0)),z("js",new Date);const Ci=null!==(Ze=fe?.config)&&void 0!==Ze?Ze:{};return Ci.origin="firebase",Ci.update=!0,null!=Nt&&(Ci[wl]=Nt),z("config",Je.measurementId,Ci),sd&&(z("set",sd),wc(void 0)),Je.measurementId})).apply(this,arguments)}class Es{constructor(D){this.app=D}_delete(){return delete Dr[this.app.options.appId],Promise.resolve()}}let Dr={},ad=[];const Sl={};let bs,dr,Al="dataLayer",Ic=!1;function Ec(w,D,x){!function ef(){const w=[];if((0,le.ru)()&&w.push("This is a browser extension environment."),(0,le.zI)()||w.push("Cookies are not available."),w.length>0){const D=w.map((N,z)=>`(${z+1}) ${N}`).join(" "),x=br.create("invalid-analytics-context",{errorInfo:D});Mn.warn(x.message)}}();const N=w.options.appId;if(!N)throw br.create("no-app-id");if(!w.options.apiKey){if(!w.options.measurementId)throw br.create("no-api-key");Mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${w.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Dr[N])throw br.create("already-exists",{id:N});if(!Ic){!function hn(w){let D=[];Array.isArray(window[w])?D=window[w]:window[w]=D}(Al);const{wrappedGtag:Y,gtagCore:fe}=function Kh(w,D,x,N,z){let Y=function(...fe){window[N].push(arguments)};return window[z]&&"function"==typeof window[z]&&(Y=window[z]),window[z]=function Zh(w,D,x,N){function Y(){return(Y=(0,k.Z)(function*(fe,...Ze){try{if("event"===fe){const[ze,ht]=Ze;yield Wh(w,D,x,ze,ht)}else if("config"===fe){const[ze,ht]=Ze;yield Il(w,D,x,N,ze,ht)}else if("consent"===fe){const[ze]=Ze;w("consent","update",ze)}else if("get"===fe){const[ze,ht,Je]=Ze;w("get",ze,ht,Je)}else if("set"===fe){const[ze]=Ze;w("set",ze)}else w(fe,...Ze)}catch(ze){Mn.error(ze)}})).apply(this,arguments)}return function z(fe){return Y.apply(this,arguments)}}(Y,w,D,x),{gtagCore:Y,wrappedGtag:window[z]}}(Dr,ad,Sl,Al,"gtag");dr=Y,bs=fe,Ic=!0}return Dr[N]=function Is(w,D,x,N,z,Y,fe){return Rr.apply(this,arguments)}(w,ad,Sl,D,bs,Al,x),new Es(w)}function Ml(){return xl.apply(this,arguments)}function xl(){return(xl=(0,k.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}const Tc="@firebase/analytics";!function rf(){(0,ce._registerComponent)(new pe.wA(En,(D,{options:x})=>Ec(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ce._registerComponent)(new pe.wA("analytics-internal",function w(D){try{const x=D.getProvider(En).getImmediate();return{logEvent:(N,z,Y)=>function tr(w,D,x,N){w=(0,le.m9)(w),function gg(w,D,x,N,z){return Jh.apply(this,arguments)}(dr,Dr[w.app.options.appId],D,x,N).catch(z=>Mn.error(z))}(x,N,z,Y)}}catch(x){throw br.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ce.registerVersion)(Tc,"0.10.0"),(0,ce.registerVersion)(Tc,"0.10.0","esm2017")}();var ts=L(4408),_g=L(7565);const Ol=new class oo extends _g.v{}(class Ta extends ts.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,N=0){return null!=N&&N>0||null==N&&this.delay>0?super.requestAsyncId(D,x,N):(D.flush(this),0)}});var No=L(4986),sf=L(8505),ao=L(9468),co=L(5363);const vi=new d.GfV("7.6.1"),Sc="__angularfire_symbol__analyticsIsSupportedValue",Ac="__angularfire_symbol__analyticsIsSupported",Fo="__angularfire_symbol__remoteConfigIsSupportedValue",Rl="__angularfire_symbol__remoteConfigIsSupported",Lo="__angularfire_symbol__messagingIsSupportedValue",ld="__angularfire_symbol__messagingIsSupported";function H_(w,D,x){if(D){if(1===D.length)return D[0];const Y=D.filter(fe=>fe.app===x);if(1===Y.length)return Y[0]}return x.container.getProvider(w).getImmediate({optional:!0})}globalThis[Ac]||(globalThis[Ac]=Ml().then(w=>globalThis[Sc]=w).catch(()=>globalThis[Sc]=!1)),globalThis[ld]||(globalThis[ld]=va().then(w=>globalThis[Lo]=w).catch(()=>globalThis[Lo]=!1)),globalThis[Rl]||(globalThis[Rl]=$r().then(w=>globalThis[Fo]=w).catch(()=>globalThis[Fo]=!1));const ud=(w,D)=>{const x=D?[D]:(0,ee.C6)(),N=[];return x.forEach(z=>{z.container.getProvider(w).instances.forEach(fe=>{N.includes(fe)||N.push(fe)})}),N};function Bo(){}class vg{constructor(D,x=Ol){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,N){const z=this.zone;return this.delegate.schedule(function(fe){z.runGuarded(()=>{D.apply(this,[fe])})},x,N)}}class $_{constructor(D){this.zone=D,this.task=null}call(D,x){const N=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bo,{},Bo,Bo)),x.pipe((0,sf.b)({next:N,complete:N,error:N})).subscribe(D).add(N)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Cg=(()=>{class w{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new vg(Zone.current)),this.insideAngular=x.run(()=>new vg(Zone.current,No.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(x){return new(x||w)(d.LFG(d.R0b))},w.\u0275prov=d.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function Sa(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function dd(w){return Sa(),function cf(w){return function(x){return(x=x.lift(new $_(w.ngZone))).pipe((0,ao.R)(w.outsideAngular),(0,co.Q)(w.insideAngular))}}(Sa())(w)}},2090:(gt,Me,L)=>{L.d(Me,{$s:()=>qi,BH:()=>_e,G6:()=>Gi,L:()=>ge,LL:()=>me,Pz:()=>Ie,Sg:()=>qe,UG:()=>re,US:()=>pe,ZB:()=>K,ZR:()=>xe,aH:()=>Le,b$:()=>Ht,eu:()=>te,hl:()=>ie,jU:()=>xt,m9:()=>jr,ne:()=>Jt,pd:()=>cr,r3:()=>jn,ru:()=>ct,tV:()=>G,uI:()=>tt,vZ:()=>Br,w1:()=>fs,xO:()=>Co,xb:()=>hi,z$:()=>He,zI:()=>Te,zd:()=>fi});const ce=function(U){const V=[];let W=0;for(let ue=0;ue<U.length;ue++){let J=U.charCodeAt(ue);J<128?V[W++]=J:J<2048?(V[W++]=J>>6|192,V[W++]=63&J|128):55296==(64512&J)&&ue+1<U.length&&56320==(64512&U.charCodeAt(ue+1))?(J=65536+((1023&J)<<10)+(1023&U.charCodeAt(++ue)),V[W++]=J>>18|240,V[W++]=J>>12&63|128,V[W++]=J>>6&63|128,V[W++]=63&J|128):(V[W++]=J>>12|224,V[W++]=J>>6&63|128,V[W++]=63&J|128)}return V},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,V){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,ue=[];for(let J=0;J<U.length;J+=3){const We=U[J],St=J+1<U.length,Lt=St?U[J+1]:0,on=J+2<U.length,Ue=on?U[J+2]:0;let pn=(15&Lt)<<2|Ue>>6,wr=63&Ue;on||(wr=64,St||(pn=64)),ue.push(W[We>>2],W[(3&We)<<4|Lt>>4],W[pn],W[wr])}return ue.join("")},encodeString(U,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(U):this.encodeByteArray(ce(U),V)},decodeString(U,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(U):function(U){const V=[];let W=0,ue=0;for(;W<U.length;){const J=U[W++];if(J<128)V[ue++]=String.fromCharCode(J);else if(J>191&&J<224){const We=U[W++];V[ue++]=String.fromCharCode((31&J)<<6|63&We)}else if(J>239&&J<365){const on=((7&J)<<18|(63&U[W++])<<12|(63&U[W++])<<6|63&U[W++])-65536;V[ue++]=String.fromCharCode(55296+(on>>10)),V[ue++]=String.fromCharCode(56320+(1023&on))}else{const We=U[W++],St=U[W++];V[ue++]=String.fromCharCode((15&J)<<12|(63&We)<<6|63&St)}}return V.join("")}(this.decodeStringToByteArray(U,V))},decodeStringToByteArray(U,V){this.init_();const W=V?this.charToByteMapWebSafe_:this.charToByteMap_,ue=[];for(let J=0;J<U.length;){const We=W[U.charAt(J++)],Lt=J<U.length?W[U.charAt(J)]:0;++J;const Ue=J<U.length?W[U.charAt(J)]:64;++J;const _t=J<U.length?W[U.charAt(J)]:64;if(++J,null==We||null==Lt||null==Ue||null==_t)throw new he;ue.push(We<<2|Lt>>4),64!==Ue&&(ue.push(Lt<<4&240|Ue>>2),64!==_t&&ue.push(Ue<<6&192|_t))}return ue},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}};class he extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ge=function(U){return function(U){const V=ce(U);return pe.encodeByteArray(V,!0)}(U).replace(/\./g,"")},G=function(U){try{return pe.decodeString(U,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function K(U,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return V}for(const W in V)!V.hasOwnProperty(W)||!$e(W)||(U[W]=K(U[W],V[W]));return U}function $e(U){return"__proto__"!==U}const ye=()=>{try{return function Re(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if(typeof document>"u")return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=U&&G(U[1]);return V&&JSON.parse(V)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},Le=()=>{var U;return null===(U=ye())||void 0===U?void 0:U.config},Ie=U=>{var V;return null===(V=ye())||void 0===V?void 0:V[`_${U}`]};class _e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,W)=>{this.resolve=V,this.reject=W})}wrapCallback(V){return(W,ue)=>{W?this.reject(W):this.resolve(ue),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(W):V(W,ue))}}}function qe(U,V){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ue=V||"demo-project",J=U.iat||0,We=U.sub||U.user_id;if(!We)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const St=Object.assign({iss:`https://securetoken.google.com/${ue}`,aud:ue,iat:J,exp:J+3600,auth_time:J,sub:We,user_id:We,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(St)),""].join(".")}function He(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function tt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function re(){var U;const V=null===(U=ye())||void 0===U?void 0:U.forceEnvironment;if("node"===V)return!0;if("browser"===V)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function xt(){return"object"==typeof self&&self.self===self}function ct(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Ht(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function fs(){const U=He();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function Gi(){return!re()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function te(){return new Promise((U,V)=>{try{let W=!0;const ue="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(ue);J.onsuccess=()=>{J.result.close(),W||self.indexedDB.deleteDatabase(ue),U(!0)},J.onupgradeneeded=()=>{W=!1},J.onerror=()=>{var We;V((null===(We=J.error)||void 0===We?void 0:We.message)||"")}}catch(W){V(W)}})}function Te(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class xe extends Error{constructor(V,W,ue){super(W),this.code=V,this.customData=ue,this.name="FirebaseError",Object.setPrototypeOf(this,xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,me.prototype.create)}}class me{constructor(V,W,ue){this.service=V,this.serviceName=W,this.errors=ue}create(V,...W){const ue=W[0]||{},J=`${this.service}/${V}`,We=this.errors[V],St=We?function lt(U,V){return U.replace(Pt,(W,ue)=>{const J=V[ue];return null!=J?String(J):`<${ue}?>`})}(We,ue):"Error";return new xe(J,`${this.serviceName}: ${St} (${J}).`,ue)}}const Pt=/\{\$([^}]+)}/g;function jn(U,V){return Object.prototype.hasOwnProperty.call(U,V)}function hi(U){for(const V in U)if(Object.prototype.hasOwnProperty.call(U,V))return!1;return!0}function Br(U,V){if(U===V)return!0;const W=Object.keys(U),ue=Object.keys(V);for(const J of W){if(!ue.includes(J))return!1;const We=U[J],St=V[J];if(Ti(We)&&Ti(St)){if(!Br(We,St))return!1}else if(We!==St)return!1}for(const J of ue)if(!W.includes(J))return!1;return!0}function Ti(U){return null!==U&&"object"==typeof U}function Co(U){const V=[];for(const[W,ue]of Object.entries(U))Array.isArray(ue)?ue.forEach(J=>{V.push(encodeURIComponent(W)+"="+encodeURIComponent(J))}):V.push(encodeURIComponent(W)+"="+encodeURIComponent(ue));return V.length?"&"+V.join("&"):""}function fi(U){const V={};return U.replace(/^\?/,"").split("&").forEach(ue=>{if(ue){const[J,We]=ue.split("=");V[decodeURIComponent(J)]=decodeURIComponent(We)}}),V}function cr(U){const V=U.indexOf("?");if(!V)return"";const W=U.indexOf("#",V);return U.substring(V,W>0?W:void 0)}function Jt(U,V){const W=new nt(U,V);return W.subscribe.bind(W)}class nt{constructor(V,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{V(this)}).catch(ue=>{this.error(ue)})}next(V){this.forEachObserver(W=>{W.next(V)})}error(V){this.forEachObserver(W=>{W.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,W,ue){let J;if(void 0===V&&void 0===W&&void 0===ue)throw new Error("Missing Observer.");J=function fn(U,V){if("object"!=typeof U||null===U)return!1;for(const W of V)if(W in U&&"function"==typeof U[W])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:W,complete:ue},void 0===J.next&&(J.next=zi),void 0===J.error&&(J.error=zi),void 0===J.complete&&(J.complete=zi);const We=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch{}}),this.observers.push(J),We}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,V)}sendOne(V,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{W(this.observers[V])}catch(ue){typeof console<"u"&&console.error&&console.error(ue)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zi(){}function qi(U,V=1e3,W=2){const ue=V*Math.pow(W,U),J=Math.round(.5*ue*(Math.random()-.5)*2);return Math.min(144e5,ue+J)}function jr(U){return U&&U._delegate?U._delegate:U}},7789:(gt,Me,L)=>{var d=L(4650);let ee=null;function k(){return ee}const he=new d.OlP("DocumentToken");let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ge(){return(0,d.LFG)(H)}()},providedIn:"platform"}),n})(),H=(()=>{class n extends Ee{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){K()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){K()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function $e(){return new H((0,d.LFG)(he))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function De(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function st(n){return n&&"?"!==n[0]?"?"+n:n}let we=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(mt)},providedIn:"root"}),n})();const ye=new d.OlP("appBaseHref");let mt=(()=>{class n extends we{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(he).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+st(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,c){const u=this.prepareExternalUrl(i+st(c));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,c){const u=this.prepareExternalUrl(i+st(c));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ee),d.LFG(ye,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Le=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=De(qe(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+st(r))}normalize(t){return n.stripTrailingSlash(function _e(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+st(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+st(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=st,n.joinWithSlash=Re,n.stripTrailingSlash=De,n.\u0275fac=function(t){return new(t||n)(d.LFG(we))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ie(){return new Le((0,d.LFG)(we))}()},providedIn:"root"}),n})();function qe(n){return n.replace(/\/index.html$/,"")}var tt=(()=>((tt=tt||{})[tt.Decimal=0]="Decimal",tt[tt.Percent=1]="Percent",tt[tt.Currency=2]="Currency",tt[tt.Scientific=3]="Scientific",tt))(),at=(()=>((at=at||{})[at.Decimal=0]="Decimal",at[at.Group=1]="Group",at[at.List=2]="List",at[at.PercentSign=3]="PercentSign",at[at.PlusSign=4]="PlusSign",at[at.MinusSign=5]="MinusSign",at[at.Exponential=6]="Exponential",at[at.SuperscriptingExponent=7]="SuperscriptingExponent",at[at.PerMille=8]="PerMille",at[at.Infinity=9]="Infinity",at[at.NaN=10]="NaN",at[at.TimeSeparator=11]="TimeSeparator",at[at.CurrencyDecimal=12]="CurrencyDecimal",at[at.CurrencyGroup=13]="CurrencyGroup",at))();function Pt(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===at.CurrencyDecimal)return t[d.wAp.NumberSymbols][at.Decimal];if(e===at.CurrencyGroup)return t[d.wAp.NumberSymbols][at.Group]}return r}const Lt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function zt(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function ia(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(c)}return null}let tn=(()=>{class n{constructor(t,r,i,c){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=c,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Jc{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let dn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,c,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Jc(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===c?void 0:c);else if(null!==c){const g=r.get(c);r.move(g,u),Ns(g,i)}});for(let i=0,c=r.length;i<c;i++){const g=r.get(i).context;g.index=i,g.count=c,g.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ns(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ns(n,e){n.context.$implicit=e.item}let Jn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ou,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ur("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ur("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Ou{constructor(){this.$implicit=null,this.ngIf=null}}function ur(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Hu=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function sa(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function Be(n,e,t){return function se(n,e,t,r,i,c,u=!1){let g="",v=!1;if(isFinite(n)){let E=function en(n){let r,i,c,u,g,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(c=e.search(/e/i))>0?(i<0&&(i=c),i+=+e.slice(c+1),e=e.substring(0,c)):i<0&&(i=e.length),c=0;"0"===e.charAt(c);c++);if(c===(g=e.length))r=[0],i=1;else{for(g--;"0"===e.charAt(g);)g--;for(i-=c,r=[],u=0;c<=g;c++,u++)r[u]=Number(e.charAt(c))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);u&&(E=function Vt(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(E));let M=e.minInt,P=e.minFrac,B=e.maxFrac;if(c){const wt=c.match(Lt);if(null===wt)throw new Error(`${c} is not a valid digit info`);const It=wt[1],Ft=wt[3],Zt=wt[5];null!=It&&(M=zt(It)),null!=Ft&&(P=zt(Ft)),null!=Zt?B=zt(Zt):null!=Ft&&P>B&&(B=P)}!function Dn(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const c=Math.min(Math.max(e,i),t);let u=c+n.integerLen,g=r[u];if(u>0){r.splice(Math.max(n.integerLen,u));for(let P=u;P<r.length;P++)r[P]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,u=c+1),r[0]=0;for(let P=1;P<u;P++)r[P]=0}if(g>=5)if(u-1<0){for(let P=0;P>u;P--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[u-1]++;for(;i<Math.max(0,c);i++)r.push(0);let v=0!==c;const E=e+n.integerLen,M=r.reduceRight(function(P,B,q,ae){return ae[q]=(B+=P)<10?B:B-10,v&&(0===ae[q]&&q>=E?ae.pop():v=!1),B>=10?1:0},0);M&&(r.unshift(M),n.integerLen++)}(E,P,B);let q=E.digits,ae=E.integerLen;const Oe=E.exponent;let Se=[];for(v=q.every(wt=>!wt);ae<M;ae++)q.unshift(0);for(;ae<0;ae++)q.unshift(0);ae>0?Se=q.splice(ae,q.length):(Se=q,q=[0]);const et=[];for(q.length>=e.lgSize&&et.unshift(q.splice(-e.lgSize,q.length).join(""));q.length>e.gSize;)et.unshift(q.splice(-e.gSize,q.length).join(""));q.length&&et.unshift(q.join("")),g=et.join(Pt(t,r)),Se.length&&(g+=Pt(t,i)+Se.join("")),Oe&&(g+=Pt(t,at.Exponential)+"+"+Oe)}else g=Pt(t,at.Infinity);return g=n<0&&!v?e.negPre+g+e.negSuf:e.posPre+g+e.posSuf,g}(n,function Dt(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],c=r[1],u=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],g=u[0],v=u[1]||"";t.posPre=g.substring(0,g.indexOf("#"));for(let M=0;M<v.length;M++){const P=v.charAt(M);"0"===P?t.minFrac=t.maxFrac=M+1:"#"===P?t.maxFrac=M+1:t.posSuf+=P}const E=g.split(",");if(t.gSize=E[1]?E[1].length:0,t.lgSize=E[2]||E[1]?(E[2]||E[1]).length:0,c){const M=i.length-t.posPre.length-t.posSuf.length,P=c.indexOf("#");t.negPre=c.substring(0,P).replace(/'/g,""),t.negSuf=c.slice(P+M).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function ln(n,e){return(0,d.cg1)(n)[d.wAp.NumberFormats][e]}(e,tt.Decimal),Pt(e,at.MinusSign)),e,at.Group,at.Decimal,t)}(function rl(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(c){throw function vn(n,e){return new d.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.soG,16))},n.\u0275pipe=d.Yjl({name:"number",type:n,pure:!0,standalone:!0}),n})();let il=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Ka="browser";function Ya(n){return"server"===n}class oa{}class _l extends class jh extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){ee||(ee=n)}(new _l)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ac(){return oc=oc||document.querySelector("base"),oc?oc.getAttribute("href"):null}();return null==t?null:function Hh(n){cc=cc||document.createElement("a"),cc.setAttribute("href",n);const e=cc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){oc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ia(document.cookie,e)}}let cc,oc=null;const xo=new d.OlP("TRANSITION_ID"),yl=[{provide:d.ip1,useFactory:function td(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<i.length;c++)r.remove(i[c])})}},deps:[xo,he,d.zs3],multi:!0}];let $h=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Zi=new d.OlP("EventManagerPlugins");let ma=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let c=0;c<i.length;c++){const u=i[c];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zi),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class vs{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Xs=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ki=(()=>{class n extends Xs{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(c=>{const u=this._doc.createElement("style");u.textContent=c,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(lc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(lc))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function lc(n){k().remove(n)}const _a={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_i=/%COMP%/g;function no(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?no(n,i,t):(i=i.replace(_i,n),t.push(i))}return t}function uc(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let va=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Oo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ro(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new zh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=no(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ma),d.LFG(Ki),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Oo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(_a[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ca(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ca(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const c=_a[i];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=_a[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,uc(r)):this.eventManager.addEventListener(e,t,uc(r))}}function Ca(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ro extends Oo{constructor(e,t,r,i){super(e),this.component=r;const c=no(i+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr=function to(n){return"_ngcontent-%COMP%".replace(_i,n)}(i+"-"+r.id),this.hostAttr=function ya(n){return"_nghost-%COMP%".replace(_i,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class zh extends Oo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=no(i.id,i.styles,[]);for(let u=0;u<c.length;u++){const g=document.createElement("style");g.textContent=c[u],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let dc=(()=>{class n extends vs{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Qi=["alt","control","meta","shift"],pg={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},En={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wl=(()=>{class n extends vs{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const c=n.parseEventName(r),u=n.eventCallback(c.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,c.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const c=n._normalizeKey(r.pop());let u="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),u="code."),Qi.forEach(E=>{const M=r.indexOf(E);M>-1&&(r.splice(M,1),u+=E+".")}),u+=c,0!=r.length||0===c.length)return null;const v={};return v.domEventName=i,v.fullKey=u,v}static matchEventFullKeyCode(t,r){let i=pg[t.key]||t.key,c="";return r.indexOf("code.")>-1&&(i=t.code,c="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Qi.forEach(u=>{u!==i&&(0,En[u])(t)&&(c+=u+".")}),c+=i,c===r)}static eventCallback(t,r,i){return c=>{n.matchEventFullKeyCode(c,t)&&i.runGuarded(()=>r(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const fc=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:Ka},{provide:d.g9A,useValue:function io(){_l.makeCurrent()},multi:!0},{provide:he,useFactory:function Ro(){return(0,d.RDi)(document),document},deps:[]}]),Ia=new d.OlP(""),hn=[{provide:d.rWj,useClass:class ga{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const c=e.findTestabilityInTree(r,i);if(null==c)throw new Error("Could not find testability for element.");return c},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let c=i.length,u=!1;const g=function(v){u=u||v,c--,0==c&&r(u)};i.forEach(function(v){v.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Il=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function br(){return new d.qLn},deps:[]},{provide:Zi,useClass:dc,multi:!0,deps:[he,d.R0b,d.Lbi]},{provide:Zi,useClass:wl,multi:!0,deps:[he]},{provide:va,useClass:va,deps:[ma,Ki,d.AFp]},{provide:d.FYo,useExisting:va},{provide:Xs,useExisting:Ki},{provide:Ki,useClass:Ki,deps:[he]},{provide:ma,useClass:ma,deps:[Zi,d.R0b]},{provide:oa,useClass:$h,deps:[]},[]];let El=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:xo,useExisting:d.AFp},yl]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ia,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Il,...hn],imports:[il,d.hGG]}),n})(),Yh=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Kh(){return new Yh((0,d.LFG)(he))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Kt=L(7579),so=L(4408),Is=L(727);const Rr={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Rr;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(c=>{t=void 0,n(c)});return new Is.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=Rr;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Rr;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var Dr=L(7565);const Sl=new class ad extends Dr.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class Es extends so.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Rr.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:c}=e;null!=t&&(null===(i=c[c.length-1])||void 0===i?void 0:i.id)!==t&&(Rr.cancelAnimationFrame(t),e._scheduled=void 0)}});let bs,Da=1;const dr={};function Ic(n){return n in dr&&(delete dr[n],!0)}const Vn={setImmediate(n){const e=Da++;return dr[e]=!0,bs||(bs=Promise.resolve()),bs.then(()=>Ic(e)&&n()),e},clearImmediate(n){Ic(n)}},{setImmediate:Ec,clearImmediate:cd}=Vn,Ji={setImmediate(...n){const{delegate:e}=Ji;return(e?.setImmediate||Ec)(...n)},clearImmediate(n){const{delegate:e}=Ji;return(e?.clearImmediate||cd)(n)},delegate:void 0};new class xl extends Dr.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class Ml extends so.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Ji.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:c}=e;null!=t&&(null===(i=c[c.length-1])||void 0===i?void 0:i.id)!==t&&(Ji.clearImmediate(t),e._scheduled=void 0)}});var Xi=L(4986),er=L(4482),es=L(8421),$n=L(5403),tr=L(9751),Dc=L(3532);function Pl(n=0,e,t=Xi.P){let r=-1;return null!=e&&((0,Dc.K)(e)?t=e:r=e),new tr.y(i=>{let c=function Tc(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;c<0&&(c=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},c)})}let ts;try{ts=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ts=!1}let No,Fo,Ta=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Fh(n){return n===Ka}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ts)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ao(n){return function sf(){if(null==No&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>No=!0}))}finally{No=No||!1}return No}()?n:!!n.capture}function Lo(n){if(function Rl(){if(null==Fo){const n=typeof document<"u"?document.head:null;Fo=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Fo}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Vo(n){return n.composedPath?n.composedPath()[0]:n.target}let Vs=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Kt.x,this._changeListener=c=>{this._change.next(c)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const c=this._getWindow();c.addEventListener("resize",this._changeListener),c.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,c=i.getBoundingClientRect();return{top:-c.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-c.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(function rf(n,e=Xi.z){return function nf(n){return(0,er.e)((e,t)=>{let r=!1,i=null,c=null,u=!1;const g=()=>{if(c?.unsubscribe(),c=null,r){r=!1;const E=i;i=null,t.next(E)}u&&t.complete()},v=()=>{c=null,u&&t.complete()};e.subscribe((0,$n.x)(t,E=>{r=!0,i=E,c||(0,es.Xf)(n(E)).subscribe(c=(0,$n.x)(t,g,v))},()=>{u=!0,(!r||!c||c.closed)&&t.complete()}))})}(()=>Pl(n,e))}(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ta),d.LFG(d.R0b),d.LFG(he,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Y(n){return null!=n&&"false"!=`${n}`}function Je(n){return n instanceof d.SBq?n.nativeElement:n}var Vl=L(6451),_D=L(5032);function xc(n){return(0,er.e)((e,t)=>{(0,es.Xf)(n).subscribe((0,$n.x)(t,()=>t.complete(),_D.Z)),!t.closed&&e.subscribe(t)})}var Ot=L(4004),Bl=L(515);function If(n){return n<=0?()=>Bl.E:(0,er.e)((e,t)=>{let r=0;e.subscribe((0,$n.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}var Jg=L(8189),Cd=L(3269),nr=L(8996);function Xg(...n){return function yD(){return(0,Jg.J)(1)}()((0,nr.D)(n,(0,Cd.yG)(n)))}function Ul(...n){const e=(0,Cd.yG)(n);return(0,er.e)((t,r)=>{(e?Xg(n,t,e):Xg(n,t)).subscribe(r)})}var kr=L(8505);function mr(n,e){return(0,er.e)((t,r)=>{let i=null,c=0,u=!1;const g=()=>u&&!i&&r.complete();t.subscribe((0,$n.x)(r,v=>{i?.unsubscribe();let E=0;const M=c++;(0,es.Xf)(n(v,M)).subscribe(i=(0,$n.x)(r,P=>r.next(e?e(v,P,M,E++):P),()=>{i=null,g()}))},()=>{u=!0,g()}))})}const vD=new d.OlP("cdk-dir-doc",{providedIn:"root",factory:function wy(){return(0,d.f3M)(he)}}),Ef=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let wD=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new d.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function CD(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?Ef.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(vD,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Iy(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function wd(n,e){const t=e?"":"none";Iy(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function q0(n,e,t){Iy(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function Pa(n,e){return e&&"none"!=e?n+" "+e:n}function $o(n){const e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function Ey(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}function W0(n){const e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function Z0(n,e,t){const{top:r,bottom:i,left:c,right:u}=n;return t>=r&&t<=i&&e>=c&&e<=u}function Id(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function ED(n,e,t,r){const{top:i,right:c,bottom:u,left:g,width:v,height:E}=n,M=v*e,P=E*e;return r>i-P&&r<u+P&&t>g-M&&t<c+M}class by{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:W0(t)})})}handleScroll(e){const t=Vo(e),r=this.positions.get(t);if(!r)return null;const i=r.scrollPosition;let c,u;if(t===this._document){const E=this.getViewportScrollPosition();c=E.top,u=E.left}else c=t.scrollTop,u=t.scrollLeft;const g=i.top-c,v=i.left-u;return this.positions.forEach((E,M)=>{E.clientRect&&t!==M&&t.contains(M)&&Id(E.clientRect,g,v)}),i.top=c,i.left=u,{top:g,left:v}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function bD(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return"canvas"===r?K0(n,e):("input"===r||"select"===r||"textarea"===r)&&Ty(n,e),Dy("canvas",n,e,K0),Dy("input, textarea, select",n,e,Ty),e}function Dy(n,e,t,r){const i=e.querySelectorAll(n);if(i.length){const c=t.querySelectorAll(n);for(let u=0;u<i.length;u++)r(i[u],c[u])}}let DD=0;function Ty(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${DD++}`)}function K0(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}const Y0=ao({passive:!0}),rs=ao({passive:!1}),em=new Set(["position"]);class SD{constructor(e,t,r,i,c,u){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=c,this._dragDropRegistry=u,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new Kt.x,this._pointerMoveSubscription=Is.w0.EMPTY,this._pointerUpSubscription=Is.w0.EMPTY,this._scrollSubscription=Is.w0.EMPTY,this._resizeSubscription=Is.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new Kt.x,this.started=new Kt.x,this.released=new Kt.x,this.ended=new Kt.x,this.entered=new Kt.x,this.exited=new Kt.x,this.dropped=new Kt.x,this.moved=this._moveEvents,this._pointerDown=g=>{if(this.beforeStarted.next(),this._handles.length){const v=this._getTargetHandle(g);v&&!this._disabledHandles.has(v)&&!this.disabled&&this._initializeDragSequence(v,g)}else this.disabled||this._initializeDragSequence(this._rootElement,g)},this._pointerMove=g=>{const v=this._getPointerPositionOnPage(g);if(!this._hasStartedDragging){if(Math.abs(v.x-this._pickupPositionOnPage.x)+Math.abs(v.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const q=Date.now()>=this._dragStartTime+this._getDragStartDelay(g),ae=this._dropContainer;if(!q)return void this._endDragSequence(g);(!ae||!ae.isDragging()&&!ae.isReceiving())&&(g.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(g)))}return}g.preventDefault();const E=this._getConstrainedPointerPosition(v);if(this._hasMoved=!0,this._lastKnownPointerPosition=v,this._updatePointerDirectionDelta(E),this._dropContainer)this._updateActiveDropContainer(E,v);else{const M=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,P=this._activeTransform;P.x=E.x-M.x+this._passiveTransform.x,P.y=E.y-M.y+this._passiveTransform.y,this._applyRootElementTransform(P.x,P.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:E,event:g,distance:this._getDragDistance(E),delta:this._pointerDirectionDelta})})},this._pointerUp=g=>{this._endDragSequence(g)},this._nativeDragStart=g=>{if(this._handles.length){const v=this._getTargetHandle(g);v&&!this._disabledHandles.has(v)&&!this.disabled&&g.preventDefault()}else this.disabled||g.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new by(r),u.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=Y(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(r=>wd(r,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>Je(r)),this._handles.forEach(r=>wd(r,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=Je(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,rs),t.addEventListener("touchstart",this._pointerDown,Y0),t.addEventListener("dragstart",this._nativeDragStart,rs)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Je(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),wd(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),wd(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){bf(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const r=this._rootElement,i=r.parentNode,c=this._placeholder=this._createPlaceholderElement(),u=this._anchor=this._anchor||this._document.createComment(""),g=this._getShadowRoot();i.insertBefore(u,r),this._initialTransform=r.style.transform||"",this._preview=this._createPreviewElement(),q0(r,!1,em),this._document.body.appendChild(i.replaceChild(c,r)),this._getPreviewInsertionPoint(i,g).appendChild(this._preview),this.started.next({source:this,event:e}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const r=this.isDragging(),i=bf(t),c=!i&&0!==t.button,u=this._rootElement,g=Vo(t),v=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),E=i?function uD(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(t):function Qg(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(t);if(g&&g.draggable&&"mousedown"===t.type&&t.preventDefault(),r||c||v||E)return;if(this._handles.length){const B=u.style;this._rootElementTapHighlight=B.webkitTapHighlightColor||"",B.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(B=>this._updateOnScroll(B)),this._boundaryElement&&(this._boundaryRect=W0(this._boundaryElement));const M=this._previewTemplate;this._pickupPositionInElement=M&&M.template&&!M.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,e,t);const P=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:P.x,y:P.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){q0(this._rootElement,!0,em),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),c=this._getDragDistance(i),u=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:c,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:u,distance:c,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,u,c,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let c=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!c&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(c=this._initialContainer),c&&c!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=c,this._dropContainer.enter(this,e,t,c===this._initialContainer&&c.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:c,currentIndex:c.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,r=e?e.template:null;let i;if(r&&e){const c=e.matchSize?this._initialClientRect:null,u=e.viewContainer.createEmbeddedView(r,e.context);u.detectChanges(),i=Sy(u,this._document),this._previewRef=u,e.matchSize?J0(i,c):i.style.transform=tm(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=bD(this._rootElement),J0(i,this._initialClientRect),this._initialTransform&&(i.style.transform=this._initialTransform);return Iy(i.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},em),wd(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(c=>i.classList.add(c)):i.classList.add(t)),i}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function ID(n){const e=getComputedStyle(n),t=Ey(e,"transition-property"),r=t.find(g=>"transform"===g||"all"===g);if(!r)return 0;const i=t.indexOf(r),c=Ey(e,"transition-duration"),u=Ey(e,"transition-delay");return $o(c[i])+$o(u[i])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{const i=u=>{(!u||Vo(u)===this._preview&&"transform"===u.propertyName)&&(this._preview?.removeEventListener("transitionend",i),r(),clearTimeout(c))},c=setTimeout(i,1.5*t);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=Sy(this._placeholderRef,this._document)):r=bD(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(e,t,r){const i=t===this._rootElement?null:t,c=i?i.getBoundingClientRect():e,u=bf(r)?r.targetTouches[0]:r,g=this._getViewportScrollPosition();return{x:c.left-e.left+(u.pageX-c.left-g.left),y:c.top-e.top+(u.pageY-c.top-g.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),r=bf(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,c=r.pageY-t.top;if(this._ownerSVGElement){const u=this._ownerSVGElement.getScreenCTM();if(u){const g=this._ownerSVGElement.createSVGPoint();return g.x=i,g.y=c,g.matrixTransform(u.inverse())}}return{x:i,y:c}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialClientRect):e;if("x"===this.lockAxis||"x"===t?i=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(r=this._pickupPositionOnPage.x),this._boundaryRect){const{x:c,y:u}=this._pickupPositionInElement,g=this._boundaryRect,{width:v,height:E}=this._getPreviewRect(),M=g.top+u,P=g.bottom-(E-u);r=Q0(r,g.left+c,g.right-(v-c)),i=Q0(i,M,P)}return{x:r,y:i}}_updatePointerDirectionDelta(e){const{x:t,y:r}=e,i=this._pointerDirectionDelta,c=this._pointerPositionAtLastDirectionChange,u=Math.abs(t-c.x),g=Math.abs(r-c.y);return u>this._config.pointerDirectionChangeThreshold&&(i.x=t>c.x?1:-1,c.x=t),g>this._config.pointerDirectionChangeThreshold&&(i.y=r>c.y?1:-1,c.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,wd(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,rs),e.removeEventListener("touchstart",this._pointerDown,Y0),e.removeEventListener("dragstart",this._nativeDragStart,rs)}_applyRootElementTransform(e,t){const r=tm(e,t),i=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=i.transform&&"none"!=i.transform?i.transform:""),i.transform=Pa(r,this._initialTransform)}_applyPreviewTransform(e,t){const r=this._previewTemplate?.template?void 0:this._initialTransform,i=tm(e,t);this._preview.style.transform=Pa(i,r)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===r.width&&0===r.height)return;const c=i.left-r.left,u=r.right-i.right,g=i.top-r.top,v=r.bottom-i.bottom;i.width>r.width?(c>0&&(e+=c),u>0&&(e-=u)):e=0,i.height>r.height?(g>0&&(t+=g),v>0&&(t-=v)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:bf(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const r=Vo(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&Id(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Lo(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const r=this._previewContainer||"global";if("parent"===r)return e;if("global"===r){const i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return Je(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function tm(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function Q0(n,e,t){return Math.max(e,Math.min(t,n))}function bf(n){return"t"===n.type[0]}function Sy(n,e){const t=n.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function J0(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=tm(e.left,e.top)}function Ed(n,e){return Math.max(0,Math.min(e,n))}class X0{constructor(e,t){this._element=e,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,r,i){const c=this._itemPositions,u=this._getItemIndexFromPointerPosition(e,t,r,i);if(-1===u&&c.length>0)return null;const g="horizontal"===this.orientation,v=c.findIndex(Se=>Se.drag===e),E=c[u],P=E.clientRect,B=v>u?1:-1,q=this._getItemOffsetPx(c[v].clientRect,P,B),ae=this._getSiblingOffsetPx(v,c,B),Oe=c.slice();return function AD(n,e,t){const r=Ed(e,n.length-1),i=Ed(t,n.length-1);if(r===i)return;const c=n[r],u=i<r?-1:1;for(let g=r;g!==i;g+=u)n[g]=n[g+u];n[i]=c}(c,v,u),c.forEach((Se,et)=>{if(Oe[et]===Se)return;const wt=Se.drag===e,It=wt?q:ae,Ft=wt?e.getPlaceholderElement():Se.drag.getRootElement();Se.offset+=It,g?(Ft.style.transform=Pa(`translate3d(${Math.round(Se.offset)}px, 0, 0)`,Se.initialTransform),Id(Se.clientRect,0,It)):(Ft.style.transform=Pa(`translate3d(0, ${Math.round(Se.offset)}px, 0)`,Se.initialTransform),Id(Se.clientRect,It,0))}),this._previousSwap.overlaps=Z0(P,t,r),this._previousSwap.drag=E.drag,this._previousSwap.delta=g?i.x:i.y,{previousIndex:v,currentIndex:u}}enter(e,t,r,i){const c=null==i||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,u=this._activeDraggables,g=u.indexOf(e),v=e.getPlaceholderElement();let E=u[c];if(E===e&&(E=u[c+1]),!E&&(null==c||-1===c||c<u.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(E=u[0]),g>-1&&u.splice(g,1),E&&!this._dragDropRegistry.isDragging(E)){const M=E.getRootElement();M.parentElement.insertBefore(v,M),u.splice(c,0,e)}else Je(this._element).appendChild(v),u.push(e);v.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{const t=e.getRootElement();if(t){const r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{Id(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}_cacheItemPositions(){const e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:W0(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getItemOffsetPx(e,t,r){const i="horizontal"===this.orientation;let c=i?t.left-e.left:t.top-e.top;return-1===r&&(c+=i?t.width-e.width:t.height-e.height),c}_getSiblingOffsetPx(e,t,r){const i="horizontal"===this.orientation,c=t[e].clientRect,u=t[e+-1*r];let g=c[i?"width":"height"]*r;if(u){const v=i?"left":"top",E=i?"right":"bottom";-1===r?g-=u.clientRect[v]-c[E]:g+=c[v]-u.clientRect[E]}return g}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const r=this._itemPositions,i="horizontal"===this.orientation;if(r[0].drag!==this._activeDraggables[0]){const u=r[r.length-1].clientRect;return i?e>=u.right:t>=u.bottom}{const u=r[0].clientRect;return i?e<=u.left:t<=u.top}}_getItemIndexFromPointerPosition(e,t,r,i){const c="horizontal"===this.orientation,u=this._itemPositions.findIndex(({drag:g,clientRect:v})=>{if(g===e)return!1;if(i){const E=c?i.x:i.y;if(g===this._previousSwap.drag&&this._previousSwap.overlaps&&E===this._previousSwap.delta)return!1}return c?t>=Math.floor(v.left)&&t<Math.floor(v.right):r>=Math.floor(v.top)&&r<Math.floor(v.bottom)});return-1!==u&&this._sortPredicate(u,e)?u:-1}}class MD{constructor(e,t,r,i,c){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=c,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new Kt.x,this.entered=new Kt.x,this.exited=new Kt.x,this.dropped=new Kt.x,this.sorted=new Kt.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Is.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new Kt.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function mD(n=0,e=Xi.z){return n<0&&(n=0),Pl(n,n,e)}(0,Sl).pipe(xc(this._stopScrollTimers)).subscribe(()=>{const u=this._scrollNode,g=this.autoScrollStep;1===this._verticalScrollDirection?u.scrollBy(0,-g):2===this._verticalScrollDirection&&u.scrollBy(0,g),1===this._horizontalScrollDirection?u.scrollBy(-g,0):2===this._horizontalScrollDirection&&u.scrollBy(g,0)})},this.element=Je(e),this._document=r,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new by(r),this._sortStrategy=new X0(this.element,t),this._sortStrategy.withSortPredicate((u,g)=>this.sortPredicate(u,g,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),null==i&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,c,u,g,v={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:c,distance:u,dropPoint:g,event:v})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>-1===e.indexOf(i))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){const t=Je(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._clientRect||!ED(this._clientRect,.05,t,r))return;const c=this._sortStrategy.sort(e,t,r,i);c&&this.sorted.next({previousIndex:c.previousIndex,currentIndex:c.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=0,c=0;if(this._parentPositions.positions.forEach((u,g)=>{g===this._document||!u.clientRect||r||ED(u.clientRect,.05,e,t)&&([i,c]=function nw(n,e,t,r){const i=My(e,r),c=tw(e,t);let u=0,g=0;if(i){const v=n.scrollTop;1===i?v>0&&(u=1):n.scrollHeight-v>n.clientHeight&&(u=2)}if(c){const v=n.scrollLeft;1===c?v>0&&(g=1):n.scrollWidth-v>n.clientWidth&&(g=2)}return[u,g]}(g,u.clientRect,e,t),(i||c)&&(r=g))}),!i&&!c){const{width:u,height:g}=this._viewportRuler.getViewportSize(),v={width:u,height:g,top:0,right:u,bottom:g,left:0};i=My(v,t),c=tw(v,e),r=window}r&&(i!==this._verticalScrollDirection||c!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=c,this._scrollNode=r,(i||c)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=Je(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=Je(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;const e=Je(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return null!=this._clientRect&&Z0(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._clientRect||!Z0(this._clientRect,t,r)||!this.enterPredicate(e,this))return!1;const i=this._getShadowRoot().elementFromPoint(t,r);if(!i)return!1;const c=Je(this.element);return i===c||c.contains(i)}_startReceiving(e,t){const r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=Lo(Je(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function My(n,e){const{top:t,bottom:r,height:i}=n,c=.05*i;return e>=t-c&&e<=t+c?1:e>=r-c&&e<=r+c?2:0}function tw(n,e){const{left:t,right:r,width:i}=n,c=.05*i;return e>=t-c&&e<=t+c?1:e>=r-c&&e<=r+c?2:0}const nm=ao({passive:!1,capture:!0});let xD=(()=>{class n{constructor(t,r){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=i=>i.isDragging(),this.pointerMove=new Kt.x,this.pointerUp=new Kt.x,this.scroll=new Kt.x,this._preventDefaultWhileDragging=i=>{this._activeDragInstances.length>0&&i.preventDefault()},this._persistentTouchmoveListener=i=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&i.preventDefault(),this.pointerMove.next(i))},this._document=r}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,nm)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,nm)}startDragging(t,r){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const i=r.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:c=>this.pointerUp.next(c),options:!0}).set("scroll",{handler:c=>this.scroll.next(c),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:nm}),i||this._globalListeners.set("mousemove",{handler:c=>this.pointerMove.next(c),options:nm}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((c,u)=>{this._document.addEventListener(u,c.handler,c.options)})})}}stopDragging(t){const r=this._activeDragInstances.indexOf(t);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const r=[this.scroll];return t&&t!==this._document&&r.push(new tr.y(i=>this._ngZone.runOutsideAngular(()=>{const u=g=>{this._activeDragInstances.length&&i.next(g)};return t.addEventListener("scroll",u,!0),()=>{t.removeEventListener("scroll",u,!0)}}))),(0,Vl.T)(...r)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,r)=>{this._document.removeEventListener(r,t.handler,t.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(he))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hP={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let xy=(()=>{class n{constructor(t,r,i,c){this._document=t,this._ngZone=r,this._viewportRuler=i,this._dragDropRegistry=c}createDrag(t,r=hP){return new SD(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new MD(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(d.R0b),d.LFG(Vs),d.LFG(xD))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Py=new d.OlP("CDK_DRAG_PARENT"),Oy=new d.OlP("CDK_DRAG_CONFIG"),gP=new d.OlP("CdkDropList"),PD=new d.OlP("CdkDragHandle"),iw=new d.OlP("CdkDragPlaceholder"),OD=new d.OlP("CdkDragPreview");let sw=(()=>{class n{constructor(t,r,i,c,u,g,v,E,M,P,B){this.element=t,this.dropContainer=r,this._ngZone=c,this._viewContainerRef=u,this._dir=v,this._changeDetectorRef=M,this._selfHandle=P,this._parentDrag=B,this._destroyed=new Kt.x,this.started=new d.vpe,this.released=new d.vpe,this.ended=new d.vpe,this.entered=new d.vpe,this.exited=new d.vpe,this.dropped=new d.vpe,this.moved=new tr.y(q=>{const ae=this._dragRef.moved.pipe((0,Ot.U)(Oe=>({source:this,pointerPosition:Oe.pointerPosition,event:Oe.event,delta:Oe.delta,distance:Oe.distance}))).subscribe(q);return()=>{ae.unsubscribe()}}),this._dragRef=E.createDrag(t,{dragStartThreshold:g&&null!=g.dragStartThreshold?g.dragStartThreshold:5,pointerDirectionChangeThreshold:g&&null!=g.pointerDirectionChangeThreshold?g.pointerDirectionChangeThreshold:5,zIndex:g?.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),g&&this._assignDefaults(g),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=Y(t),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(If(1),xc(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=n._dragInstances.indexOf(this);t>-1&&n._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let r=t;this.rootElementSelector&&(r=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):Je(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const r=this._dir,i=this.dragStartDelay,c=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,u=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof i&&i?i:function fe(n,e=0){return function Ze(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(c).withPreviewTemplate(u).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(If(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let r=this.element.nativeElement.parentElement;for(;r;){if(r.classList.contains("cdk-drag")){t.withParent(n._dragInstances.find(i=>i.element.nativeElement===r)?._dragRef||null);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){const{lockAxis:r,dragStartDelay:i,constrainPosition:c,previewClass:u,boundaryElement:g,draggingDisabled:v,rootElementSelector:E,previewContainer:M}=t;this.disabled=v??!1,this.dragStartDelay=i||0,r&&(this.lockAxis=r),c&&(this.constrainPosition=c),u&&(this.previewClass=u),g&&(this.boundaryElement=g),E&&(this.rootElementSelector=E),M&&(this.previewContainer=M)}_setupHandlesListener(){this._handles.changes.pipe(Ul(this._handles),(0,kr.b)(t=>{const r=t.filter(i=>i._parentDrag===this).map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),mr(t=>(0,Vl.T)(...t.map(r=>r._stateChanges.pipe(Ul(r))))),xc(this._destroyed)).subscribe(t=>{const r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}}return n._dragInstances=[],n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(gP,12),d.Y36(he),d.Y36(d.R0b),d.Y36(d.s_b),d.Y36(Oy,8),d.Y36(wD,8),d.Y36(xy),d.Y36(d.sBO),d.Y36(PD,10),d.Y36(Py,12))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkDrag",""]],contentQueries:function(t,r,i){if(1&t&&(d.Suo(i,OD,5),d.Suo(i,iw,5),d.Suo(i,PD,5)),2&t){let c;d.iGM(c=d.CRH())&&(r._previewTemplate=c.first),d.iGM(c=d.CRH())&&(r._placeholderTemplate=c.first),d.iGM(c=d.CRH())&&(r._handles=c)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,r){2&t&&d.ekj("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[d._Bn([{provide:Py,useExisting:n}]),d.TTD]}),n})(),rm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[xy],imports:[N]}),n})();const{isArray:kD}=Array,{getPrototypeOf:ow,prototype:ND,keys:FD}=Object;function aw(n){if(1===n.length){const e=n[0];if(kD(e))return{args:e,keys:null};if(function LD(n){return n&&"object"==typeof n&&ow(n)===ND}(e)){const t=FD(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:VD}=Array;function lw(n){return(0,Ot.U)(e=>function cw(n,e){return VD(e)?n(...e):n(e)}(n,e))}function Ry(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let im=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Dd=(()=>{class n extends im{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const Bs=new d.OlP("NgValueAccessor"),BD={provide:Bs,useExisting:(0,d.Gpc)(()=>dw),multi:!0};let dw=(()=>{class n extends Dd{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(c){return r.onChange(c.target.checked)})("blur",function(){return r.onTouched()})},features:[d._Bn([BD]),d.qOj]}),n})();const Td={provide:Bs,useExisting:(0,d.Gpc)(()=>Go),multi:!0},fw=new d.OlP("CompositionEventMode");let Go=(()=>{class n extends im{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function hw(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(fw,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(c){return r._handleInput(c.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(c){return r._compositionEnd(c.target.value)})},features:[d._Bn([Td]),d.qOj]}),n})();function Oa(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Gr=new d.OlP("NgValidators"),wi=new d.OlP("NgAsyncValidators");function Sd(n){return null}function $D(n){return null!=n}function gw(n){return(0,d.QGY)(n)?(0,nr.D)(n):n}function mw(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function _w(n,e){return e.map(t=>t(n))}function Fy(n){return n.map(e=>function GD(n){return!n.validate}(e)?e:t=>e.validate(t))}function Ly(n){return null!=n?function zD(n){if(!n)return null;const e=n.filter($D);return 0==e.length?null:function(t){return mw(_w(t,e))}}(Fy(n)):null}function cm(n){return null!=n?function qD(n){if(!n)return null;const e=n.filter($D);return 0==e.length?null:function(t){return function uw(...n){const e=(0,Cd.jO)(n),{args:t,keys:r}=aw(n),i=new tr.y(c=>{const{length:u}=t;if(!u)return void c.complete();const g=new Array(u);let v=u,E=u;for(let M=0;M<u;M++){let P=!1;(0,es.Xf)(t[M]).subscribe((0,$n.x)(c,B=>{P||(P=!0,E--),g[M]=B},()=>v--,void 0,()=>{(!v||!P)&&(E||c.next(r?Ry(r,g):g),c.complete())}))}});return e?i.pipe(lw(e)):i}(_w(t,e).map(gw)).pipe((0,Ot.U)(mw))}}(Fy(n)):null}function Vy(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function vw(n){return n?Array.isArray(n)?n:[n]:[]}function By(n,e){return Array.isArray(n)?n.includes(e):n===e}function WD(n,e){const t=vw(e);return vw(n).forEach(i=>{By(t,i)||t.push(i)}),t}function ZD(n,e){return vw(e).filter(t=>!By(n,t))}class KD{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ly(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class is extends KD{get formDirective(){return null}get path(){return null}}class jl extends KD{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Ss=(()=>{class n extends class YD{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(jl,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})();const Pc="VALID",Pf="INVALID",$l="PENDING",Gl="DISABLED";function zy(n){return Array.isArray(n)?Ly(n):n||null}function Cw(n){return Array.isArray(n)?cm(n):n||null}function qy(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function fm(n,e){(function Zy(n,e){const t=function yw(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Vy(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function lm(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Vy(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();xd(e._rawValidators,i),xd(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function nT(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Dw(n,e)})}(n,e),function Tw(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function bw(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Dw(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Ew(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function xd(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Dw(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Rw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function kw(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Yy={provide:jl,useExisting:(0,d.Gpc)(()=>qo)},zo=(()=>Promise.resolve())();let qo=(()=>{class n extends jl{constructor(t,r,i,c,u){super(),this._changeDetectorRef=u,this.control=new class extends class Iw{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=zy(this._rawValidators),this._composedAsyncValidatorFn=Cw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Pc}get invalid(){return this.status===Pf}get pending(){return this.status==$l}get disabled(){return this.status===Gl}get enabled(){return this.status!==Gl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=zy(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Cw(e)}addValidators(e){this.setValidators(WD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(WD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ZD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ZD(e,this._rawAsyncValidators))}hasValidator(e){return By(this._rawValidators,e)}hasAsyncValidator(e){return By(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=$l,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Gl,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Pc,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pc||this.status===$l)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gl:Pc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=$l,this._hasOwnPendingAsyncValidator=!0;const t=gw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Gl:this.errors?Pf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($l)?$l:this._anyControlsHaveStatus(Pf)?Pf:Pc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qy(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,r){super(function Of(n){return(qy(n)?n.validators:n)||null}(t),function Rf(n,e){return(qy(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qy(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=kw(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Rw(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Rw(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){kw(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Pw(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(c=>{c.constructor===Go?t=c:function sT(n){return Object.getPrototypeOf(n.constructor)===Dd}(c)?r=c:i=c}),i||r||t||null}(0,c)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function kf(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){fm(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){zo.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,d.D6c)(r);zo.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function hm(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(is,9),d.Y36(Gr,10),d.Y36(wi,10),d.Y36(Bs,10),d.Y36(d.sBO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([Yy]),d.qOj,d.TTD]}),n})();const Vf={provide:Bs,useExisting:(0,d.Gpc)(()=>Bf),multi:!0};let Bf=(()=>{class n extends Dd{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(c){return r.onChange(c.target.value)})("blur",function(){return r.onTouched()})},features:[d._Bn([Vf]),d.qOj]}),n})(),Vw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();let fr=(()=>{class n{constructor(){this._validator=Sd}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Sd,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const Us={provide:Gr,useExisting:(0,d.Gpc)(()=>Nd),multi:!0};let Nd=(()=>{class n extends fr{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function kd(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>function sm(n){return e=>{if(Oa(e.value)||Oa(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[d._Bn([Us]),d.qOj]}),n})(),qw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Vw]}),n})(),Ww=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[qw]}),n})();var ss=L(2011);function Et(...n){const e=(0,Cd.yG)(n);return(0,nr.D)(n,e)}var Nr=L(4976);function tv(){return(0,er.e)((n,e)=>{let t,r=!1;n.subscribe((0,$n.x)(e,i=>{const c=t;t=i,r&&e.next([c,i]),r=!0}))})}function nv(n,e,t,r,i){return(c,u)=>{let g=t,v=e,E=0;c.subscribe((0,$n.x)(u,M=>{const P=E++;v=g?n(v,M,P):(g=!0,M),r&&u.next(v)},i&&(()=>{g&&u.next(v),u.complete()})))}}function Yl(n,e){return(0,er.e)(nv(n,e,arguments.length>=2,!0))}var jd=L(4671);function rv(n,e){return n===e}function Wo(n,e){return(0,er.e)((t,r)=>{let i=0;t.subscribe((0,$n.x)(r,c=>n.call(e,c,i++)&&r.next(c)))})}L(2644);var Xe,iv=L(3942),ve=L(5861),Ql=L(6881),Gf=L(4859),ka=L(1877),an=L(2090),Qw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},po={},sv=sv||{},Ut=Qw||self;function Jl(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Hd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ym="closure_uid_"+(1e9*Math.random()>>>0),Xw=0;function eI(n,e,t){return n.call.apply(n.bind,arguments)}function tI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function si(n,e,t){return(si=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?eI:tI).apply(null,arguments)}function zf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function oi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,c){for(var u=Array(arguments.length-2),g=2;g<arguments.length;g++)u[g-2]=arguments[g];return e.prototype[i].apply(r,u)}}function Rc(){this.s=this.s,this.o=this.o}Rc.prototype.s=!1,Rc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Jw(n){Object.prototype.hasOwnProperty.call(n,ym)&&n[ym]||(n[ym]=++Xw)}(this)},Rc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ov=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function av(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Sr(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Jl(r)){const i=n.length||0,c=r.length||0;n.length=i+c;for(let u=0;u<c;u++)n[i+u]=r[u]}else n.push(r)}}function ai(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ai.prototype.h=function(){this.defaultPrevented=!0};var xT=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",()=>{},e),Ut.removeEventListener("test",()=>{},e)}catch{}return n}();function qf(n){return/^[\s\xa0]*$/.test(n)}function Wf(){var n=Ut.navigator;return n&&(n=n.userAgent)?n:""}function Zo(n){return-1!=Wf().indexOf(n)}function vm(n){return vm[" "](n),n}vm[" "]=function(){};var Zf,n,$d=Zo("Opera"),Gd=Zo("Trident")||Zo("MSIE"),rI=Zo("Edge"),Cm=rI||Gd,iI=Zo("Gecko")&&!(-1!=Wf().toLowerCase().indexOf("webkit")&&!Zo("Edge"))&&!(Zo("Trident")||Zo("MSIE"))&&!Zo("Edge"),sI=-1!=Wf().toLowerCase().indexOf("webkit")&&!Zo("Edge");function PT(){var n=Ut.document;return n?n.documentMode:void 0}e:{var Kf="",js=(n=Wf(),iI?/rv:([^\);]+)(\)|;)/.exec(n):rI?/Edge\/([\d\.]+)/.exec(n):Gd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):sI?/WebKit\/(\S+)/.exec(n):$d?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(js&&(Kf=js?js[1]:""),Gd){var cv=PT();if(null!=cv&&cv>parseFloat(Kf)){Zf=String(cv);break e}}Zf=Kf}var mo=Ut.document&&Gd&&(PT()||parseInt(Zf,10))||void 0;function Li(n,e){if(ai.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(iI){e:{try{vm(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:oI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Li.$.h.call(this)}}oi(Li,ai);var oI={2:"touch",3:"pen",4:"mouse"};Li.prototype.h=function(){Li.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var zd="closure_listenable_"+(1e6*Math.random()|0),OT=0;function RT(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++OT,this.fa=this.ia=!1}function wm(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function uv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function qd(n){const e={};for(const t in n)e[t]=n[t];return e}const aI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let c=0;c<aI.length;c++)t=aI[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Im(n){this.src=n,this.g={},this.h=0}function Em(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],i=ov(r,e);(c=0<=i)&&Array.prototype.splice.call(r,i,1),c&&(wm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function bm(n,e,t,r){for(var i=0;i<n.length;++i){var c=n[i];if(!c.fa&&c.listener==e&&c.capture==!!t&&c.la==r)return i}return-1}Im.prototype.add=function(n,e,t,r,i){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var u=bm(n,e,r,i);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new RT(e,this.src,c,!!r,i)).ia=t,n.push(e)),e};var Wd="closure_lm_"+(1e6*Math.random()|0),fv={};function pv(n,e,t,r,i){if(r&&r.once)return Yf(n,e,t,r,i);if(Array.isArray(e)){for(var c=0;c<e.length;c++)pv(n,e[c],t,r,i);return null}return t=Mm(t),n&&n[zd]?n.O(e,t,Hd(r)?!!r.capture:!!r,i):gv(n,e,t,!1,r,i)}function gv(n,e,t,r,i,c){if(!e)throw Error("Invalid event type");var u=Hd(i)?!!i.capture:!!i,g=Sm(n);if(g||(n[Wd]=g=new Im(n)),(t=g.add(e,t,r,u,c)).proxy)return t;if(r=function mv(){const e=cI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)xT||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(_v(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Yf(n,e,t,r,i){if(Array.isArray(e)){for(var c=0;c<e.length;c++)Yf(n,e[c],t,r,i);return null}return t=Mm(t),n&&n[zd]?n.P(e,t,Hd(r)?!!r.capture:!!r,i):gv(n,e,t,!0,r,i)}function Dm(n,e,t,r,i){if(Array.isArray(e))for(var c=0;c<e.length;c++)Dm(n,e[c],t,r,i);else r=Hd(r)?!!r.capture:!!r,t=Mm(t),n&&n[zd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=bm(c=n.g[e],t,r,i))&&(wm(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=Sm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=bm(e,t,r,i)),(t=-1<n?e[n]:null)&&Tm(t))}function Tm(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[zd])Em(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(_v(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Sm(e))?(Em(t,n),0==t.h&&(t.src=null,e[Wd]=null)):wm(n)}}}function _v(n){return n in fv?fv[n]:fv[n]="on"+n}function cI(n,e){if(n.fa)n=!0;else{e=new Li(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Tm(n),n=t.call(r,e)}return n}function Sm(n){return(n=n[Wd])instanceof Im?n:null}var Am="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mm(n){return"function"==typeof n?n:(n[Am]||(n[Am]=function(e){return n.handleEvent(e)}),n[Am])}function Fr(){Rc.call(this),this.i=new Im(this),this.S=this,this.J=null}function ci(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new ai(e,n);else if(e instanceof ai)e.target=e.target||n;else{var i=e;hv(e=new ai(r,n),i)}if(i=!0,t)for(var c=t.length-1;0<=c;c--){var u=e.g=t[c];i=xm(u,r,!0,e)&&i}if(i=xm(u=e.g=n,r,!0,e)&&i,i=xm(u,r,!1,e)&&i,t)for(c=0;c<t.length;c++)i=xm(u=e.g=t[c],r,!1,e)&&i}function xm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,c=0;c<e.length;++c){var u=e[c];if(u&&!u.fa&&u.capture==t){var g=u.listener,v=u.la||u.src;u.ia&&Em(n.i,u),i=!1!==g.call(v,r)&&i}}return i&&!r.defaultPrevented}oi(Fr,Rc),Fr.prototype[zd]=!0,Fr.prototype.removeEventListener=function(n,e,t,r){Dm(this,n,e,t,r)},Fr.prototype.N=function(){if(Fr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)wm(t[r]);delete n.g[e],n.h--}}this.J=null},Fr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Fr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var yv=Ut.JSON.stringify;function NT(){var n=vv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var lI=new class kT{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new LT,n=>n.reset());class LT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function VT(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function BT(n){Ut.setTimeout(()=>{throw n},0)}let Qf,Jf=!1,vv=new class FT{constructor(){this.h=this.g=null}add(e,t){const r=lI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},uI=()=>{const n=Ut.Promise.resolve(void 0);Qf=()=>{n.then(UT)}};var UT=()=>{for(var n;n=NT();){try{n.h.call(n.g)}catch(t){BT(t)}var e=lI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Jf=!1};function Pm(n,e){Fr.call(this),this.h=n||1,this.g=e||Ut,this.j=si(this.qb,this),this.l=Date.now()}function Cv(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function wv(n,e,t){if("function"==typeof n)t&&(n=si(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=si(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function Iv(n){n.g=wv(()=>{n.g=null,n.i&&(n.i=!1,Iv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}oi(Pm,Fr),(Xe=Pm.prototype).ga=!1,Xe.T=null,Xe.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ci(this,"tick"),this.ga&&(Cv(this),this.start()))}},Xe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.N=function(){Pm.$.N.call(this),Cv(this),delete this.g};class dI extends Rc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Iv(this)}N(){super.N(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zd(n){Rc.call(this),this.h=n,this.g={}}oi(Zd,Rc);var Ev=[];function bv(n,e,t,r){Array.isArray(t)||(t&&(Ev[0]=t.toString()),t=Ev);for(var i=0;i<t.length;i++){var c=pv(e,t[i],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function Dv(n){uv(n.g,function(e,t){this.g.hasOwnProperty(t)&&Tm(e)},n),n.g={}}function Xf(){this.g=!0}function Xl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function eu(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var c=i[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var u=1;u<i.length;u++)i[u]=""}}}return yv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Zd.prototype.N=function(){Zd.$.N.call(this),Dv(this)},Zd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xf.prototype.Ea=function(){this.g=!1},Xf.prototype.info=function(){};var tu={},gI=null;function Na(){return gI=gI||new Fr}function jT(n){ai.call(this,tu.Ta,n)}function nu(n){const e=Na();ci(e,new jT(e))}function HT(n,e){ai.call(this,tu.STAT_EVENT,n),this.stat=e}function Ii(n){const e=Na();ci(e,new HT(e,n))}function Tv(n,e){ai.call(this,tu.Ua,n),this.size=e}function Om(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}tu.Ta="serverreachability",oi(jT,ai),tu.STAT_EVENT="statevent",oi(HT,ai),tu.Ua="timingevent",oi(Tv,ai);var Mt={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},mI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Sv(){}function ru(){}Sv.prototype.h=null;var qn,ep={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Kd(){ai.call(this,"d")}function Yd(){ai.call(this,"c")}function Av(){}function Qd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Zd(this),this.P=$T,this.V=new Pm(n=Cm?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Mv}function Mv(){this.i=null,this.g="",this.h=!1}oi(Kd,ai),oi(Yd,ai),oi(Av,Sv),Av.prototype.g=function(){return new XMLHttpRequest},Av.prototype.i=function(){return{}},qn=new Av;var $T=45e3,Rm={},tp={};function km(n,e,t){n.L=1,n.v=Vm(La(e)),n.s=t,n.S=!0,xv(n,null)}function xv(n,e){n.G=Date.now(),Fa(n),n.A=La(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),eh(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Mv,n.g=Km(n.l,t?e:null,!n.s),0<n.O&&(n.M=new dI(si(n.Pa,n,n.g),n.O)),bv(n.U,n.g,"readystatechange",n.nb),e=n.I?qd(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),nu(),function hI(n,e,t,r,i,c){n.info(function(){if(n.g)if(c)for(var u="",g=c.split("&"),v=0;v<g.length;v++){var E=g[v].split("=");if(1<E.length){var M=E[0];E=E[1];var P=M.split("_");u=2<=P.length&&"type"==P[1]?u+(M+"=")+E+"&":u+(M+"=redacted&")}}else u=null;else u=c;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.W,n.s)}function yI(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function vI(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=GT(n,t),i==tp){4==e&&(n.o=4,Ii(14),r=!1),Xl(n.j,n.m,null,"[Incomplete Response]");break}if(i==Rm){n.o=4,Ii(15),Xl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Xl(n.j,n.m,i,null),Fm(n,i)}yI(n)&&i!=tp&&i!=Rm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Wm(e),e.M=!0,Ii(11))):(Xl(n.j,n.m,t,"[Invalid Chunked Response]"),Ko(n),np(n))}function GT(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?tp:(t=Number(e.substring(t,r)),isNaN(t)?Rm:(r+=1)+t>e.length?tp:(e=e.slice(r,r+t),n.C=r+t,e))}function Fa(n){n.Y=Date.now()+n.P,CI(n,n.P)}function CI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Om(si(n.lb,n),e)}function Nm(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function np(n){0==n.l.H||n.J||HI(n.l,n)}function Ko(n){Nm(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Cv(n.V),Dv(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Fm(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||kv(t.i,n)))if(!n.K&&kv(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;lp(t),$m(t)}Uv(t),Ii(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Om(si(t.ib,t),6e3));if(1>=SI(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Fc(t,11)}else if((n.K||t.g==n)&&lp(t),!qf(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.V=E[0],E=E[1],2==t.H)if("c"==E[0]){t.K=E[1],t.pa=E[2];const M=E[3];null!=M&&(t.ra=M,t.l.info("VER="+t.ra));const P=E[4];null!=P&&(t.Ga=P,t.l.info("SVER="+t.Ga));const B=E[5];null!=B&&"number"==typeof B&&0<B&&(t.L=r=1.5*B,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const q=n.g;if(q){const ae=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ae){var c=r.i;c.g||-1==ae.indexOf("spdy")&&-1==ae.indexOf("quic")&&-1==ae.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(su(c,c.h),c.h=null))}if(r.F){const Oe=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;Oe&&(r.Da=Oe,Pn(r.I,r.F,Oe))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=$I(r,r.J?r.pa:null,r.Y),u.K){AI(r.i,u);var g=u,v=r.L;v&&g.setTimeout(v),g.B&&(Nm(g),Fa(g)),r.g=u}else qm(r);0<t.j.length&&rh(t)}else"stop"!=E[0]&&"close"!=E[0]||Fc(t,7);else 3==t.H&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?Fc(t,7):Bv(t):"noop"!=E[0]&&t.h&&t.h.Aa(E),t.A=0)}nu()}catch{}}function EI(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Jl(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function II(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Jl(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function wI(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Jl(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,c=0;c<i;c++)e.call(void 0,r[c],t&&t[c],n)}(Xe=Qd.prototype).setTimeout=function(n){this.P=n},Xe.nb=function(n){n=n.target;const e=this.M;e&&3==Yo(n)?e.l():this.Pa(n)},Xe.Pa=function(n){try{if(n==this.g)e:{const M=Yo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>M)&&(3!=M||Cm||this.g&&(this.h.h||this.g.ja()||Lv(this.g)))){this.J||4!=M||7==e||nu(),Nm(this);var t=this.g.da();this.ca=t;t:if(yI(this)){var r=Lv(this.g);n="";var i=r.length,c=4==Yo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ko(this),np(this);var u="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function fI(n,e,t,r,i,c,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+c+" "+u})}(this.j,this.u,this.A,this.m,this.W,M,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var g,v=this.g;if((g=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qf(g)){var E=g;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Ii(12),Ko(this),np(this);break e}Xl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fm(this,t)}this.S?(vI(this,M,u),Cm&&this.i&&3==M&&(bv(this.U,this.V,"tick",this.mb),this.V.start())):(Xl(this.j,this.m,u,null),Fm(this,u)),4==M&&Ko(this),this.i&&!this.J&&(4==M?HI(this.l,this):(this.i=!1,Fa(this)))}else(function LI(n){const e={};n=(n.g&&2<=Yo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(qf(n[r]))continue;var t=VT(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const c=e[i]||[];e[i]=c,c.push(t)}!function dv(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Ii(12)):(this.o=0,Ii(13)),Ko(this),np(this)}}}catch{}},Xe.mb=function(){if(this.g){var n=Yo(this.g),e=this.g.ja();this.C<e.length&&(Nm(this),vI(this,n,e),this.i&&4!=n&&Fa(this))}},Xe.cancel=function(){this.J=!0,Ko(this)},Xe.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function pI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(nu(),Ii(17)),Ko(this),this.o=2,np(this)):CI(this,this.Y-n)};var Jd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function iu(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof iu){this.h=n.h,Lm(this,n.j),this.s=n.s,this.g=n.g,ip(this,n.m),this.l=n.l;var e=n.i,t=new kc;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Pv(this,t),this.o=n.o}else n&&(e=String(n).match(Jd))?(this.h=!1,Lm(this,e[1]||"",!0),this.s=Xd(e[2]||""),this.g=Xd(e[3]||"",!0),ip(this,e[4]),this.l=Xd(e[5]||"",!0),Pv(this,e[6]||"",!0),this.o=Xd(e[7]||"")):(this.h=!1,this.i=new kc(null,this.h))}function La(n){return new iu(n)}function Lm(n,e,t){n.j=t?Xd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ip(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Pv(n,e,t){e instanceof kc?(n.i=e,function WT(n,e){e&&!n.j&&(Nc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(DI(this,r),eh(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=sp(e,PP)),n.i=new kc(e,n.h))}function Pn(n,e,t){n.i.set(e,t)}function Vm(n){return Pn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Xd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function sp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,zT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function zT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}iu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(sp(e,qT,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(sp(e,qT,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(sp(t,"/"==t.charAt(0)?xP:MP,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",sp(t,bI)),n.join("")};var qT=/[#\/\?@]/g,MP=/[#\?:]/g,xP=/[#\?]/g,PP=/[#\?@]/g,bI=/#/g;function kc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Nc(n){n.g||(n.g=new Map,n.h=0,n.i&&function rp(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var c=n[t].substring(0,r);i=n[t].substring(r+1)}else c=n[t];e(c,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function DI(n,e){Nc(n),e=th(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Ov(n,e){return Nc(n),e=th(n,e),n.g.has(e)}function eh(n,e,t){DI(n,e),0<t.length&&(n.i=null,n.g.set(th(n,e),av(t)),n.h+=t.length)}function th(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function TI(n){this.l=n||KT,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ka&&Ut.g.Ka()&&Ut.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=kc.prototype).add=function(n,e){Nc(this),this.i=null,n=th(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){Nc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Xe.ta=function(){Nc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let c=0;c<i.length;c++)t.push(e[r])}return t},Xe.Z=function(n){Nc(this);let e=[];if("string"==typeof n)Ov(this,n)&&(e=e.concat(this.g.get(th(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Xe.set=function(n,e){return Nc(this),this.i=null,Ov(this,n=th(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const c=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var i=c;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var KT=10;function Rv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function SI(n){return n.h?1:n.g?n.g.size:0}function kv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function su(n,e){n.g?n.g.add(e):n.h=e}function AI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Nv(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return av(n.i)}function MI(){this.g=new class{stringify(n){return Ut.JSON.stringify(n,void 0)}parse(n){return Ut.JSON.parse(n,void 0)}}}function QT(n,e,t){const r=t||"";try{EI(n,function(i,c){let u=i;Hd(i)&&(u=yv(i)),e.push(r+c+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Bm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ou(n){this.l=n.fc||null,this.j=n.ob||!1}function Um(n,e){Fr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=jm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}TI.prototype.cancel=function(){if(this.i=Nv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},oi(ou,Sv),ou.prototype.g=function(){return new Um(this.l,this.j)},ou.prototype.i=function(n){return function(){return n}}({}),oi(Um,Fr);var jm=0;function Fv(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function op(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ap(n)}function ap(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=Um.prototype).open=function(n,e){if(this.readyState!=jm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ap(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ut).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,op(this)),this.readyState=jm},Xe.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ap(this)),this.g&&(this.readyState=3,ap(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ut.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Fv(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Xe.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?op(this):ap(this),3==this.readyState&&Fv(this)}},Xe.Za=function(n){this.g&&(this.response=this.responseText=n,op(this))},Xe.Ya=function(n){this.g&&(this.response=n,op(this))},Xe.ka=function(){this.g&&op(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Um.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var JT=Ut.JSON.parse;function Wn(n){Fr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=PI,this.L=this.M=!1}oi(Wn,Fr);var PI="",OI=/^https?$/i,XT=["POST","PUT"];function RI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,kI(n),Hm(n)}function kI(n){n.F||(n.F=!0,ci(n,"complete"),ci(n,"error"))}function NI(n){if(n.h&&typeof sv<"u"&&(!n.C[1]||4!=Yo(n)||2!=n.da()))if(n.v&&4==Yo(n))wv(n.La,0,n);else if(ci(n,"readystatechange"),4==Yo(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var i=String(n.I).match(Jd)[1]||null;!i&&Ut.self&&Ut.self.location&&(i=Ut.self.location.protocol.slice(0,-1)),r=!OI.test(i?i.toLowerCase():"")}t=r}if(t)ci(n,"complete"),ci(n,"success");else{n.m=6;try{var c=2<Yo(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.da()+"]",kI(n)}}finally{Hm(n)}}}function Hm(n,e){if(n.g){FI(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||ci(n,"ready");try{t.onreadystatechange=r}catch{}}}function FI(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function Yo(n){return n.g?n.g.readyState:0}function Lv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case PI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function VI(n){let e="";return uv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Vv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=VI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Pn(n,e,t))}function nh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function BI(n){this.Ga=0,this.j=[],this.l=new Xf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=nh("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=nh("baseRetryDelayMs",5e3,n),this.hb=nh("retryDelaySeedMs",1e4,n),this.eb=nh("forwardChannelMaxRetries",2,n),this.xa=nh("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new TI(n&&n.concurrentRequestLimit),this.Ja=new MI,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Bv(n){if(Gm(n),3==n.H){var e=n.W++,t=La(n.I);if(Pn(t,"SID",n.K),Pn(t,"RID",e),Pn(t,"TYPE","terminate"),cp(n,t),(e=new Qd(n,n.l,e)).L=2,e.v=Vm(La(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon)try{t=Ut.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=Km(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Fa(e)}Zm(n)}function $m(n){n.g&&(Wm(n),n.g.cancel(),n.g=null)}function Gm(n){$m(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),lp(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function rh(n){if(!Rv(n.i)&&!n.m){n.m=!0;var e=n.Na;Qf||uI(),Jf||(Qf(),Jf=!0),vv.add(e,n),n.C=0}}function zm(n,e){var t;t=e?e.m:n.W++;const r=La(n.I);Pn(r,"SID",n.K),Pn(r,"RID",t),Pn(r,"AID",n.V),cp(n,r),n.o&&n.s&&Vv(r,n.o,n.s),t=new Qd(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=jI(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),su(n.i,t),km(t,r,e)}function cp(n,e){n.na&&uv(n.na,function(t,r){Pn(e,r,t)}),n.h&&EI({},function(t,r){Pn(e,r,t)})}function jI(n,e,t){t=Math.min(n.j.length,t);var r=n.h?si(n.h.Va,n.h,n):null;e:{var i=n.j;let c=-1;for(;;){const u=["count="+t];-1==c?0<t?(c=i[0].g,u.push("ofs="+c)):c=0:u.push("ofs="+c);let g=!0;for(let v=0;v<t;v++){let E=i[v].g;const M=i[v].map;if(E-=c,0>E)c=Math.max(0,i[v].g-100),g=!1;else try{QT(M,u,"req"+E+"_")}catch{r&&r(M)}}if(g){r=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function qm(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Qf||uI(),Jf||(Qf(),Jf=!0),vv.add(e,n),n.A=0}}function Uv(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Om(si(n.Ma,n),tS(n,n.A)),n.A++,0))}function Wm(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function au(n){n.g=new Qd(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=La(n.wa);Pn(e,"RID","rpc"),Pn(e,"SID",n.K),Pn(e,"AID",n.V),Pn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Pn(e,"TO",n.qa),Pn(e,"TYPE","xmlhttp"),cp(n,e),n.o&&n.s&&Vv(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Vm(La(e)),t.s=null,t.S=!0,xv(t,n)}function lp(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function HI(n,e){var t=null;if(n.g==e){lp(n),Wm(n),n.g=null;var r=2}else{if(!kv(n.i,e))return;t=e.F,AI(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;ci(r=Na(),new Tv(r,t)),rh(n)}else qm(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function UI(n,e){return!(SI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Om(si(n.Na,n,e),tS(n,n.C)),n.C++,0)))}(n,e)||2==r&&Uv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Fc(n,5);break;case 4:Fc(n,10);break;case 3:Fc(n,6);break;default:Fc(n,2)}}function tS(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Fc(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=si(n.pb,n);t||(t=new iu("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||Lm(t,"https"),Vm(t)),function xI(n,e){const t=new Xf;if(Ut.Image){const r=new Image;r.onload=zf(Bm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=zf(Bm,t,r,"TestLoadImage: error",!1,e),r.onabort=zf(Bm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=zf(Bm,t,r,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ii(2);n.H=0,n.h&&n.h.za(e),Zm(n),Gm(n)}function Zm(n){if(n.H=0,n.ma=[],n.h){const e=Nv(n.i);(0!=e.length||0!=n.j.length)&&(Sr(n.ma,e),Sr(n.ma,n.j),n.i.i.length=0,av(n.j),n.j.length=0),n.h.ya()}}function $I(n,e,t){var r=t instanceof iu?La(t):new iu(t);if(""!=r.g)e&&(r.g=e+"."+r.g),ip(r,r.m);else{var i=Ut.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var c=new iu(null);r&&Lm(c,r),e&&(c.g=e),i&&ip(c,i),t&&(c.l=t),r=c}return e=n.Da,(t=n.F)&&e&&Pn(r,t,e),Pn(r,"VER",n.ra),cp(n,r),r}function Km(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Wn(t&&n.Ha&&!n.va?new ou({ob:!0}):n.va)).Oa(n.J),e}function GI(){}function up(){if(Gd&&!(10<=Number(mo)))throw Error("Environmental error: no available transport.")}function Vi(n,e){Fr.call(this),this.g=new BI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!qf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qf(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new cu(this)}function jv(n){Kd.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Hv(){Yd.call(this),this.status=1}function cu(n){this.g=n}function _o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function $v(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var c=n.g[3],u=(e=n.g[0])+(c^(t=n.g[1])&((i=n.g[2])^c))+r[0]+3614090360&4294967295;u=(t=(i=(c=(e=(t=(i=(c=(e=(t=(i=(c=(e=(t=(i=(c=(e=(t=(i=(c=(e=(t=(i=(c=(e=(t=(i=(c=(e=(t=(i=(c=(e=(t=(i=(c=(e=(t=(i=(c=(e=(t=(i=(c=(e=(t=(i=(c=(e=(t=(i=(c=(e=(t=(i=(c=(e=(t=(i=(c=(e=t+(u<<7&4294967295|u>>>25))+((u=c+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^c&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(c^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(c^t&(i^c))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=c+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^c&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(c^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(c^t&(i^c))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=c+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^c&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(c^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(c^t&(i^c))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=c+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^c&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(c^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(i^c&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=c+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(c^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(c^e&(i^c))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^c&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=c+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(c^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(c^e&(i^c))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^c&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=c+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(c^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(c^e&(i^c))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^c&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=c+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(c^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(c^e&(i^c))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^i^c)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=c+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=i+(c^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^c^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^c)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=c+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=i+(c^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^c^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^c)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=c+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=i+(c^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^c^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^c)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=c+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=i+(c^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^c^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(i^(t|~c))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=c+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(c|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(c^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~c))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=c+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(c|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(c^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~c))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=c+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(c|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(c^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((c=(e=t+((u=e+(i^(t|~c))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=c+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((i=c+((u=i+(e^(c|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+c&4294967295}function Cn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var c=0|n[i];r&&c==e||(t[i]=c,r=!1)}this.g=t}(Xe=Wn.prototype).Oa=function(n){this.M=n},Xe.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():qn.g(),this.C=function _I(n){return n.h||(n.h=n.i())}(this.u?this.u:qn),this.g.onreadystatechange=si(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(c){return void RI(this,c)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const c of r.keys())t.set(c,r.get(c))}r=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),i=Ut.FormData&&n instanceof Ut.FormData,!(0<=ov(XT,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,u]of t)this.g.setRequestHeader(c,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{FI(this),0<this.B&&((this.L=function eS(n){return Gd&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=si(this.ua,this)):this.A=wv(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){RI(this,c)}},Xe.ua=function(){typeof sv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ci(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ci(this,"complete"),ci(this,"abort"),Hm(this))},Xe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hm(this,!0)),Wn.$.N.call(this)},Xe.La=function(){this.s||(this.G||this.v||this.l?NI(this):this.kb())},Xe.kb=function(){NI(this)},Xe.isActive=function(){return!!this.g},Xe.da=function(){try{return 2<Yo(this)?this.g.status:-1}catch{return-1}},Xe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Xe.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),JT(e)}},Xe.Ia=function(){return this.m},Xe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=BI.prototype).ra=8,Xe.H=1,Xe.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Qd(this,this.l,n);let c=this.s;if(this.U&&(c?(c=qd(c),hv(c,this.U)):c=this.U),null!==this.o||this.O||(i.I=c,c=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=jI(this,i,e),Pn(t=La(this.I),"RID",n),Pn(t,"CVER",22),this.F&&Pn(t,"X-HTTP-Session-Id",this.F),cp(this,t),c&&(this.O?e="headers="+encodeURIComponent(String(VI(c)))+"&"+e:this.o&&Vv(t,this.o,c)),su(this.i,i),this.bb&&Pn(t,"TYPE","init"),this.P?(Pn(t,"$req",e),Pn(t,"SID","null"),i.aa=!0,km(i,t,null)):km(i,t,e),this.H=2}}else 3==this.H&&(n?zm(this,n):0==this.j.length||Rv(this.i)||zm(this))},Xe.Ma=function(){if(this.u=null,au(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Om(si(this.jb,this),n)}},Xe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ii(10),$m(this),au(this))},Xe.ib=function(){null!=this.v&&(this.v=null,$m(this),Uv(this),Ii(19))},Xe.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ii(2)):(this.l.info("Failed to ping google.com"),Ii(1))},Xe.isActive=function(){return!!this.h&&this.h.isActive(this)},(Xe=GI.prototype).Ba=function(){},Xe.Aa=function(){},Xe.za=function(){},Xe.ya=function(){},Xe.isActive=function(){return!0},Xe.Va=function(){},up.prototype.g=function(n,e){return new Vi(n,e)},oi(Vi,Fr),Vi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ii(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=$I(n,null,n.Y),rh(n)},Vi.prototype.close=function(){Bv(this.g)},Vi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=yv(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&rh(e)},Vi.prototype.N=function(){this.g.h=null,delete this.j,Bv(this.g),delete this.g,Vi.$.N.call(this)},oi(jv,Kd),oi(Hv,Yd),oi(cu,GI),cu.prototype.Ba=function(){ci(this.g,"a")},cu.prototype.Aa=function(n){ci(this.g,new jv(n))},cu.prototype.za=function(n){ci(this.g,new Hv)},cu.prototype.ya=function(){ci(this.g,"b")},oi(_o,function zI(){this.blockSize=-1}),_o.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},_o.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,c=0;c<e;){if(0==i)for(;c<=t;)$v(this,n,c),c+=this.blockSize;if("string"==typeof n){for(;c<e;)if(r[i++]=n.charCodeAt(c++),i==this.blockSize){$v(this,r),i=0;break}}else for(;c<e;)if(r[i++]=n[c++],i==this.blockSize){$v(this,r),i=0;break}}this.h=i,this.i+=e},_o.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var nS={};function Ym(n){return-128<=n&&128>n?function nI(n,e){var t=nS;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Cn([0|e],0>e?-1:0)}):new Cn([0|n],0>n?-1:0)}function Va(n){if(isNaN(n)||!isFinite(n))return ih;if(0>n)return li(Va(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=zv;return new Cn(e,0)}var zv=4294967296,ih=Ym(0),qI=Ym(1),rS=Ym(16777216);function Ba(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Hs(n){return-1==n.h}function li(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Cn(t,~n.h).add(qI)}function dp(n,e){return n.add(li(e))}function Qm(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function hp(n,e){this.g=n,this.h=e}function Jm(n,e){if(Ba(e))throw Error("division by zero");if(Ba(n))return new hp(ih,ih);if(Hs(n))return e=Jm(li(n),e),new hp(li(e.g),li(e.h));if(Hs(e))return e=Jm(n,li(e)),new hp(li(e.g),e.h);if(30<n.g.length){if(Hs(n)||Hs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=qI,r=e;0>=r.X(n);)t=WI(t),r=WI(r);var i=sh(t,1),c=sh(r,1);for(r=sh(r,2),t=sh(t,2);!Ba(r);){var u=c.add(r);0>=u.X(n)&&(i=i.add(t),c=u),r=sh(r,1),t=sh(t,1)}return e=dp(n,i.R(e)),new hp(i,e)}for(i=ih;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(c=Va(t)).R(e);Hs(u)||0<u.X(n);)u=(c=Va(t-=r)).R(e);Ba(c)&&(c=qI),i=i.add(c),n=dp(n,u)}return new hp(i,n)}function WI(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Cn(t,n.h)}function sh(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],c=0;c<r;c++)i[c]=0<e?n.D(c+t)>>>e|n.D(c+t+1)<<32-e:n.D(c+t);return new Cn(i,n.h)}(Xe=Cn.prototype).ea=function(){if(Hs(this))return-li(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:zv+r)*e,e*=zv}return n},Xe.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ba(this))return"0";if(Hs(this))return"-"+li(this).toString(n);for(var e=Va(Math.pow(n,6)),t=this,r="";;){var i=Jm(t,e).g,c=((0<(t=dp(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ba(t=i))return c+r;for(;6>c.length;)c="0"+c;r=c+r}},Xe.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Xe.X=function(n){return Hs(n=dp(this,n))?-1:Ba(n)?0:1},Xe.abs=function(){return Hs(this)?li(this):this},Xe.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var c=r+(65535&this.D(i))+(65535&n.D(i)),u=(c>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=u>>>16,t[i]=(u&=65535)<<16|(c&=65535)}return new Cn(t,-2147483648&t[t.length-1]?-1:0)},Xe.R=function(n){if(Ba(this)||Ba(n))return ih;if(Hs(this))return Hs(n)?li(this).R(li(n)):li(li(this).R(n));if(Hs(n))return li(this.R(li(n)));if(0>this.X(rS)&&0>n.X(rS))return Va(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var c=this.D(r)>>>16,u=65535&this.D(r),g=n.D(i)>>>16,v=65535&n.D(i);t[2*r+2*i]+=u*v,Qm(t,2*r+2*i),t[2*r+2*i+1]+=c*v,Qm(t,2*r+2*i+1),t[2*r+2*i+1]+=u*g,Qm(t,2*r+2*i+1),t[2*r+2*i+2]+=c*g,Qm(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Cn(t,0)},Xe.gb=function(n){return Jm(this,n).h},Xe.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Cn(t,this.h&n.h)},Xe.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Cn(t,this.h|n.h)},Xe.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Cn(t,this.h^n.h)},up.prototype.createWebChannel=up.prototype.g,Vi.prototype.send=Vi.prototype.u,Vi.prototype.open=Vi.prototype.m,Vi.prototype.close=Vi.prototype.close,Mt.NO_ERROR=0,Mt.TIMEOUT=8,Mt.HTTP_ERROR=6,mI.COMPLETE="complete",ru.EventType=ep,ep.OPEN="a",ep.CLOSE="b",ep.ERROR="c",ep.MESSAGE="d",Fr.prototype.listen=Fr.prototype.O,Wn.prototype.listenOnce=Wn.prototype.P,Wn.prototype.getLastError=Wn.prototype.Sa,Wn.prototype.getLastErrorCode=Wn.prototype.Ia,Wn.prototype.getStatus=Wn.prototype.da,Wn.prototype.getResponseJson=Wn.prototype.Wa,Wn.prototype.getResponseText=Wn.prototype.ja,Wn.prototype.send=Wn.prototype.ha,Wn.prototype.setWithCredentials=Wn.prototype.Oa,_o.prototype.digest=_o.prototype.l,_o.prototype.reset=_o.prototype.reset,_o.prototype.update=_o.prototype.j,Cn.prototype.add=Cn.prototype.add,Cn.prototype.multiply=Cn.prototype.R,Cn.prototype.modulo=Cn.prototype.gb,Cn.prototype.compare=Cn.prototype.X,Cn.prototype.toNumber=Cn.prototype.ea,Cn.prototype.toString=Cn.prototype.toString,Cn.prototype.getBits=Cn.prototype.D,Cn.fromNumber=Va,Cn.fromString=function Gv(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return li(Gv(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Va(Math.pow(e,8)),r=ih,i=0;i<n.length;i+=8){var c=Math.min(8,n.length-i),u=parseInt(n.substring(i,i+c),e);8>c?(c=Va(Math.pow(e,c)),r=r.R(c).add(Va(u))):r=(r=r.R(t)).add(Va(u))}return r};var iS=po.createWebChannelTransport=function(){return new up},sS=po.getStatEventTarget=function(){return Na()},qv=po.ErrorCode=Mt,fp=po.EventType=mI,ZI=po.Event=tu,Wv=po.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},KI=po.FetchXmlHttpFactory=ou,pp=po.WebChannel=ru,YI=po.XhrIo=Wn,QI=po.Md5=_o,oh=po.Integer=Cn;const oS="@firebase/firestore";class zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zr.UNAUTHENTICATED=new zr(null),zr.GOOGLE_CREDENTIALS=new zr("google-credentials-uid"),zr.FIRST_PARTY=new zr("first-party-uid"),zr.MOCK_USER=new zr("mock-user");let lu="9.23.0";const Lc=new ka.Yd("@firebase/firestore");function Zv(){return Lc.logLevel}function Ve(n,...e){if(Lc.logLevel<=ka.in.DEBUG){const t=e.map($s);Lc.debug(`Firestore (${lu}): ${n}`,...t)}}function _r(n,...e){if(Lc.logLevel<=ka.in.ERROR){const t=e.map($s);Lc.error(`Firestore (${lu}): ${n}`,...t)}}function os(n,...e){if(Lc.logLevel<=ka.in.WARN){const t=e.map($s);Lc.warn(`Firestore (${lu}): ${n}`,...t)}}function $s(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${lu}) INTERNAL ASSERTION FAILED: `+n;throw _r(e),new Error(e)}function pt(n,e){n||it()}function Qe(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends an.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class mp{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zr.UNAUTHENTICATED))}shutdown(){}}class lS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class JI{constructor(e){this.t=e,this.currentUser=zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const c=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let u=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new pr,e.enqueueRetryable(()=>c(this.currentUser))};const g=()=>{const E=u;e.enqueueRetryable((0,ve.Z)(function*(){yield E.promise,yield c(r.currentUser)}))},v=E=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(E=>v(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?v(E):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new pr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt("string"==typeof r.accessToken),new mp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pt(null===e||"string"==typeof e),new zr(e)}}class XI{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=zr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Kv{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new XI(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uS{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=c=>{null!=c.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.T;return this.T=c.token,Ve("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const i=c=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.I.onInit(c=>i(c)),setTimeout(()=>{if(!this.appCheck){const c=this.I.getImmediate({optional:!0});c?i(c):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pt("string"==typeof t.token),this.T=t.token,new Yv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function RP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Xm{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=RP(40);for(let c=0;c<i.length;++c)r.length<20&&i[c]<t&&(r+=e.charAt(i[c]%e.length))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function uu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function e_(n){return n+"\0"}class On{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new On(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new On(0,0))}static max(){return new Ct(new On(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class _p{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===_p.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _p?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const c=e.get(i),u=t.get(i);if(c<u)return-1;if(c>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class rn extends _p{construct(e,t,r){return new rn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new rn(t)}static emptyPath(){return new rn([])}}const dS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends _p{construct(e,t,r){return new rr(e,t,r)}static isValidIdentifier(e){return dS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const c=()=>{if(0===r.length)throw new Pe(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const g=e[i];if("\\"===g){if(i+1===e.length)throw new Pe(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[i+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Pe(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,i+=2}else"`"===g?(u=!u,i++):"."!==g||u?(r+=g,i++):(c(),i++)}if(c(),u)throw new Pe(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(t)}static emptyPath(){return new rr([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(rn.fromString(e))}static fromName(e){return new Ke(rn.fromString(e).popFirst(5))}static empty(){return new Ke(rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new rn(e.slice()))}}class yp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function t_(n){return n.fields.find(e=>2===e.kind)}function Vc(n){return n.fields.filter(e=>2!==e.kind)}yp.UNKNOWN_ID=-1;class n_{constructor(e,t){this.fieldPath=e,this.kind=t}}class ah{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ah(0,Ms.min())}}function nE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ct.fromTimestamp(1e9===r?new On(t+1,0):new On(t,r));return new Ms(i,Ke.empty(),e)}function Qv(n){return new Ms(n.readTime,n.key,-1)}class Ms{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ms(Ct.min(),Ke.empty(),-1)}static max(){return new Ms(Ct.max(),Ke.empty(),-1)}}function ui(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}const du="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Bc(n){return iE.apply(this,arguments)}function iE(){return iE=(0,ve.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==du)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),iE.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,i)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,c=0,u=!1;e.forEach(g=>{++i,g.next(()=>{++c,u&&c===i&&t()},v=>r(v))}),u=!0,c===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,c)=>{r.push(t.call(this,i,c))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const c=e.length,u=new Array(c);let g=0;for(let v=0;v<c;v++){const E=v;t(e[E]).next(M=>{u[E]=M,++g,g===c&&r(u)},M=>i(M))}})}static doWhile(e,t){return new oe((r,i)=>{const c=()=>{!0===e()?t().next(()=>{c()},i):r()};c()})}}class vp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new pr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new wp(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=Jv(r.target.error);this.v.reject(new wp(e,i))}}static open(e,t,r,i){try{return new vp(t,e.transaction(i,r))}catch(c){throw new wp(t,c)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new hS(t)}}class Gs{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Gs.S((0,an.z$)())&&_r("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),Uc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,an.hl)())return!1;if(Gs.C())return!0;const e=(0,an.z$)(),t=Gs.S(e),r=0<t&&t<10,i=Gs.N(e),c=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=u=>{r(u.target.result)},c.onblocked=()=>{i(new wp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=u=>{const g=u.target.error;i("VersionError"===g.name?new Pe(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Pe(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new wp(e,g))},c.onupgradeneeded=u=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.V.O(u.target.result,c.transaction,u.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var c=this;return(0,ve.Z)(function*(){const u="readonly"===t;let g=0;for(;;){++g;try{c.db=yield c.$(e);const v=vp.open(c.db,e,u?"readonly":"readwrite",r),E=i(v).next(M=>(v.P(),M)).catch(M=>(v.abort(M),oe.reject(M))).toPromise();return E.catch(()=>{}),yield v.R,E}catch(v){const E=v,M="FirebaseError"!==E.name&&g<3;if(Ve("SimpleDb","Transaction failed with error:",E.message,"Retrying:",M),c.close(),!M)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Cp{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Uc(this.L.delete())}}class wp extends Pe{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Qo(n){return"IndexedDbTransactionError"===n.name}class hS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Uc(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),Uc(this.store.add(e))}get(e){return Uc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),Uc(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),Uc(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),c=[];return this.W(i,(u,g)=>{c.push(g)}).next(()=>c)}{const i=this.store.getAll(r.range);return new oe((c,u)=>{i.onerror=g=>{u(g.target.error)},i.onsuccess=g=>{c(g.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((i,c)=>{r.onerror=u=>{c(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}J(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(c,u,g)=>g.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new oe((r,i)=>{t.onerror=c=>{const u=Jv(c.target.error);i(u)},t.onsuccess=c=>{const u=c.target.result;u?e(u.primaryKey,u.value).next(g=>{g?u.continue():r()}):r()}})}W(e,t){const r=[];return new oe((i,c)=>{e.onerror=u=>{c(u.target.error)},e.onsuccess=u=>{const g=u.target.result;if(!g)return void i();const v=new Cp(g),E=t(g.primaryKey,g.value,v);if(E instanceof oe){const M=E.catch(P=>(v.done(),oe.reject(P)));r.push(M)}v.isDone?i():null===v.K?g.continue():g.continue(v.K)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Uc(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Jv(r.target.error);t(i)}})}let sE=!1;function Jv(n){const e=Gs.S((0,an.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sE||(sE=!0,setTimeout(()=>{throw r},0)),r}}return n}class fS{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Qo(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Bc(r)}yield t.et(6e4)}))}}class Xv{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,c=!0;return oe.doWhile(()=>!0===c&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Ve("IndexBackiller",`Processing collection: ${u}`),this.it(e,u,i).next(g=>{i-=g,r.add(u)});c=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(c=>{const u=c.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.rt(i,c)).next(g=>(Ve("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>u.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,c)=>{const u=Qv(c);ui(u,r)>0&&(r=u)}),new Ms(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let as=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function ch(n){return null==n}function jc(n){return 0===n&&1/n==-1/0}function r_(n){return"number"==typeof n&&Number.isInteger(n)&&!jc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Bi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=aE(e)),e=oE(n.get(t),e);return aE(e)}function oE(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const c=n.charAt(i);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function aE(n){return n+"\x01\x01"}function yo(n){const e=n.length;if(pt(e>=2),2===e)return pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),rn.emptyPath();const t=e-2,r=[];let i="";for(let c=0;c<e;){const u=n.indexOf("\x01",c);switch((u<0||u>t)&&it(),n.charAt(u+1)){case"\x01":const g=n.substring(c,u);let v;0===i.length?v=g:(i+=g,v=i,i=""),r.push(v);break;case"\x10":i+=n.substring(c,u),i+="\0";break;case"\x11":i+=n.substring(c,u+1);break;default:it()}c=u+2}return new rn(r)}const hu=["userId","batchId"];function i_(n,e){return[n,Bi(e)]}function eC(n,e,t){return[n,Bi(e),t]}const tC={},kP=["prefixPath","collectionGroup","readTime","documentId"],pS=["prefixPath","collectionGroup","documentId"],NP=["collectionGroup","readTime","prefixPath","documentId"],gS=["canonicalId","targetId"],mS=["targetId","path"],_S=["path","targetId"],cE=["collectionId","parent"],lE=["indexId","uid"],yS=["uid","sequenceNumber"],uE=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dE=["indexId","uid","orderedDocumentKey"],vS=["userId","collectionPath","documentId"],CS=["userId","collectionPath","largestBatchId"],hE=["userId","collectionGroup","largestBatchId"],fE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pE=[...fE,"documentOverlays"],nC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rC=nC,gE=[...rC,"indexConfiguration","indexState","indexEntries"];class iC extends rE{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function qr(n,e){const t=Qe(n);return Gs.M(t.ht,e)}function wS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ua(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Bn{constructor(e,t){this.comparator=e,this.root=t||Ei.EMPTY}insert(e,t){return new Bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ei.BLACK,null,null))}remove(e){return new Bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ei.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sC(this.root,e,this.comparator,!1)}getReverseIterator(){return new sC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sC(this.root,e,this.comparator,!0)}}class sC{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&i&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ei{constructor(e,t,r,i,c){this.key=e,this.value=t,this.color=r??Ei.RED,this.left=i??Ei.EMPTY,this.right=c??Ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,c){return new Ei(e??this.key,t??this.value,r??this.color,i??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const c=r(e,i.key);return i=c<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===c?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ei.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ei.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Ei.EMPTY=null,Ei.RED=!0,Ei.BLACK=!1,Ei.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ei(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zn{constructor(e){this.comparator=e,this.data=new Bn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ES(this.data.getIterator())}getIteratorFrom(e){return new ES(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(i,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Zn(this.comparator);return t.data=e,t}}class ES{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ip(n){return n.hasNext()?n.getNext():void 0}class xs{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new xs([])}unionWith(e){let t=new Zn(rr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new xs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ep extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ar{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Ep("Invalid base64 string: "+i):i}}(e);return new Ar(t)}static fromUint8Array(e){const t=function(r){let i="";for(let c=0;c<r.length;++c)i+=String.fromCharCode(r[c]);return i}(e);return new Ar(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ar.EMPTY_BYTE_STRING=new Ar("");const s_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ja(n){if(pt(!!n),"string"==typeof n){let e=0;const t=s_.exec(n);if(pt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ir(n.seconds),nanos:ir(n.nanos)}}function ir(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Hc(n){return"string"==typeof n?Ar.fromBase64String(n):Ar.fromUint8Array(n)}function lh(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function bp(n){const e=n.mapValue.fields.__previous_value__;return lh(e)?bp(e):e}function Dp(n){const e=ja(n.mapValue.fields.__local_write_time__.timestampValue);return new On(e.seconds,e.nanos)}class bS{constructor(e,t,r,i,c,u,g,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=E}}class fu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new fu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof fu&&e.projectId===this.projectId&&e.database===this.database}}const pu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},o_={nullValue:"NULL_VALUE"};function $c(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lh(n)?4:_E(n)?9007199254740991:10:it()}function Ps(n,e){if(n===e)return!0;const t=$c(n);if(t!==$c(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dp(n).isEqual(Dp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const c=ja(r.timestampValue),u=ja(i.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Hc(n.bytesValue).isEqual(Hc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ir(r.geoPointValue.latitude)===ir(i.geoPointValue.latitude)&&ir(r.geoPointValue.longitude)===ir(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ir(r.integerValue)===ir(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const c=ir(r.doubleValue),u=ir(i.doubleValue);return c===u?jc(c)===jc(u):isNaN(c)&&isNaN(u)}return!1}(n,e);case 9:return uu(n.arrayValue.values||[],e.arrayValue.values||[],Ps);case 10:return function(r,i){const c=r.mapValue.fields||{},u=i.mapValue.fields||{};if(wS(c)!==wS(u))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(void 0===u[g]||!Ps(c[g],u[g])))return!1;return!0}(n,e);default:return it()}var i}function Tp(n,e){return void 0!==(n.values||[]).find(t=>Ps(t,e))}function gu(n,e){if(n===e)return 0;const t=$c(n),r=$c(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(i,c){const u=ir(i.integerValue||i.doubleValue),g=ir(c.integerValue||c.doubleValue);return u<g?-1:u>g?1:u===g?0:isNaN(u)?isNaN(g)?0:-1:1}(n,e);case 3:return DS(n.timestampValue,e.timestampValue);case 4:return DS(Dp(n),Dp(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(i,c){const u=Hc(i),g=Hc(c);return u.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(i,c){const u=i.split("/"),g=c.split("/");for(let v=0;v<u.length&&v<g.length;v++){const E=Bt(u[v],g[v]);if(0!==E)return E}return Bt(u.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,c){const u=Bt(ir(i.latitude),ir(c.latitude));return 0!==u?u:Bt(ir(i.longitude),ir(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,c){const u=i.values||[],g=c.values||[];for(let v=0;v<u.length&&v<g.length;++v){const E=gu(u[v],g[v]);if(E)return E}return Bt(u.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,c){if(i===pu.mapValue&&c===pu.mapValue)return 0;if(i===pu.mapValue)return 1;if(c===pu.mapValue)return-1;const u=i.fields||{},g=Object.keys(u),v=c.fields||{},E=Object.keys(v);g.sort(),E.sort();for(let M=0;M<g.length&&M<E.length;++M){const P=Bt(g[M],E[M]);if(0!==P)return P;const B=gu(u[g[M]],v[E[M]]);if(0!==B)return B}return Bt(g.length,E.length)}(n.mapValue,e.mapValue);default:throw it()}}function DS(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=ja(n),r=ja(e),i=Bt(t.seconds,r.seconds);return 0!==i?i:Bt(t.nanos,r.nanos)}function Sp(n){return oC(n)}function oC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ja(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Hc(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",c=!0;for(const u of r.values||[])c?c=!1:i+=",",i+=oC(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let c="{",u=!0;for(const g of i)u?u=!1:c+=",",c+=`${g}:${oC(r.fields[g])}`;return c+"}"}(n.mapValue):it();var e}function mu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mE(n){return!!n&&"integerValue"in n}function Ap(n){return!!n&&"arrayValue"in n}function aC(n){return!!n&&"nullValue"in n}function cC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lC(n){return!!n&&"mapValue"in n}function Ui(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ua(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ui(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ui(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _E(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function uC(n){return"nullValue"in n?o_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?mu(fu.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function TS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?mu(fu.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?pu:it()}function Os(n,e){const t=gu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function yE(n,e){const t=gu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Lr{constructor(e){this.value=e}static empty(){return new Lr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!lC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ui(t)}setAll(e){let t=rr.emptyPath(),r={},i=[];e.forEach((u,g)=>{if(!t.isImmediateParentOf(g)){const v=this.getFieldsMap(t);this.applyChanges(v,r,i),r={},i=[],t=g.popLast()}u?r[g.lastSegment()]=Ui(u):i.push(g.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,i)}delete(e){const t=this.field(e.popLast());lC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ps(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];lC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ua(t,(i,c)=>e[i]=c);for(const i of r)delete e[i]}clone(){return new Lr(Ui(this.value))}}function vE(n){const e=[];return Ua(n.fields,(t,r)=>{const i=new rr([t]);if(lC(r)){const c=vE(r.mapValue).fields;if(0===c.length)e.push(i);else for(const u of c)e.push(i.child(u))}else e.push(i)}),new xs(e)}class Un{constructor(e,t,r,i,c,u,g){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=c,this.data=u,this.documentState=g}static newInvalidDocument(e){return new Un(e,0,Ct.min(),Ct.min(),Ct.min(),Lr.empty(),0)}static newFoundDocument(e,t,r,i){return new Un(e,1,t,Ct.min(),r,i,0)}static newNoDocument(e,t){return new Un(e,2,t,Ct.min(),Ct.min(),Lr.empty(),0)}static newUnknownDocument(e,t){return new Un(e,3,t,Ct.min(),Ct.min(),Lr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ct.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Jo{constructor(e,t){this.position=e,this.inclusive=t}}function dC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const c=e[i],u=n.position[i];if(r=c.field.isKeyField()?Ke.comparator(Ke.fromName(u.referenceValue),t.key):gu(u,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return r}function hC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ps(n.position[t],e.position[t]))return!1;return!0}class uh{constructor(e,t="asc"){this.field=e,this.dir=t}}function CE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class fC{}class Yt extends fC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new AS(e,t,r):"array-contains"===t?new EE(e,r):"in"===t?new xS(e,r):"not-in"===t?new bE(e,r):"array-contains-any"===t?new PS(e,r):new Yt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new LP(e,r):new MS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(gu(t,this.value)):null!==t&&$c(this.value)===$c(t)&&this.matchesComparison(gu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class _n extends fC{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new _n(e,t)}matches(e){return dh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function dh(n){return"and"===n.op}function Mp(n){return"or"===n.op}function Xo(n){return pC(n)&&dh(n)}function pC(n){for(const e of n.filters)if(e instanceof _n)return!1;return!0}function xp(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+Sp(n.value);if(Xo(n))return n.filters.map(e=>xp(e)).join(",");{const e=n.filters.map(t=>xp(t)).join(",");return`${n.op}(${e})`}}function ea(n,e){return n instanceof Yt?(t=n,(r=e)instanceof Yt&&t.op===r.op&&t.field.isEqual(r.field)&&Ps(t.value,r.value)):n instanceof _n?function(t,r){return r instanceof _n&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,c,u)=>i&&ea(c,r.filters[u]),!0)}(n,e):void it();var t,r}function wE(n,e){const t=n.filters.concat(e);return _n.create(t,n.op)}function SS(n){return n instanceof Yt?`${(e=n).field.canonicalString()} ${e.op} ${Sp(e.value)}`:n instanceof _n?function(e){return e.op.toString()+" {"+e.getFilters().map(SS).join(" ,")+"}"}(n):"Filter";var e}class AS extends Yt{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class LP extends Yt{constructor(e,t){super(e,"in",t),this.keys=IE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class MS extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=IE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function IE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class EE extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ap(t)&&Tp(t.arrayValue,this.value)}}class xS extends Yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Tp(this.value.arrayValue,t)}}class bE extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Tp(this.value.arrayValue,t)}}class PS extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ap(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Tp(this.value.arrayValue,r))}}class DE{constructor(e,t=null,r=[],i=[],c=null,u=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=c,this.startAt=u,this.endAt=g,this.dt=null}}function TE(n,e=null,t=[],r=[],i=null,c=null,u=null){return new DE(n,e,t,r,i,c,u)}function Ha(n){const e=Qe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>xp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),ch(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Sp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Sp(r)).join(",")),e.dt=t}return e.dt}function hh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!CE(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ea(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hC(n.startAt,e.startAt)&&hC(n.endAt,e.endAt)}function Pp(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Op(n,e){return n.filters.filter(t=>t instanceof Yt&&t.field.isEqual(e))}function gC(n,e,t){let r=o_,i=!0;for(const c of Op(n,e)){let u=o_,g=!0;switch(c.op){case"<":case"<=":u=uC(c.value);break;case"==":case"in":case">=":u=c.value;break;case">":u=c.value,g=!1;break;case"!=":case"not-in":u=o_}Os({value:r,inclusive:i},{value:u,inclusive:g})<0&&(r=u,i=g)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const u=t.position[c];Os({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function mC(n,e,t){let r=pu,i=!0;for(const c of Op(n,e)){let u=pu,g=!0;switch(c.op){case">=":case">":u=TS(c.value),g=!1;break;case"==":case"in":case"<=":u=c.value;break;case"<":u=c.value,g=!1;break;case"!=":case"not-in":u=pu}yE({value:r,inclusive:i},{value:u,inclusive:g})>0&&(r=u,i=g)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const u=t.position[c];yE({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class vo{constructor(e,t=null,r=[],i=[],c=null,u="F",g=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=c,this.limitType=u,this.startAt=g,this.endAt=v,this.wt=null,this._t=null}}function Rp(n,e,t,r,i,c,u,g){return new vo(n,e,t,r,i,c,u,g)}function _u(n){return new vo(n)}function SE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function c_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function kp(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function _C(n){return null!==n.collectionGroup}function yu(n){const e=Qe(n);if(null===e.wt){e.wt=[];const t=kp(e),r=c_(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new uh(t)),e.wt.push(new uh(rr.keyField(),"asc"));else{let i=!1;for(const c of e.explicitOrderBy)e.wt.push(c),c.field.isKeyField()&&(i=!0);if(!i){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new uh(rr.keyField(),c))}}}return e.wt}function cs(n){const e=Qe(n);if(!e._t)if("F"===e.limitType)e._t=TE(e.path,e.collectionGroup,yu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of yu(e))t.push(new uh(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new Jo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Jo(e.startAt.position,e.startAt.inclusive):null;e._t=TE(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function AE(n,e){e.getFirstInequalityField(),kp(n);const t=n.filters.concat([e]);return new vo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Np(n,e,t){return new vo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fp(n,e){return hh(cs(n),cs(e))&&n.limitType===e.limitType}function ME(n){return`${Ha(cs(n))}|lt:${n.limitType}`}function yC(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>SS(r)).join(", ")}]`),ch(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Sp(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Sp(r)).join(",")),`Target(${t})`}(cs(n))}; limitType=${n.limitType})`}function l_(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ke.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of yu(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,c,u){const g=dC(i,c,u);return i.inclusive?g<=0:g<0}(t.startAt,yu(t),r)||t.endAt&&!function(i,c,u){const g=dC(i,c,u);return i.inclusive?g>=0:g>0}(t.endAt,yu(t),r)));var t,r}function OS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RS(n){return(e,t)=>{let r=!1;for(const i of yu(n)){const c=VP(i,e,t);if(0!==c)return c;r=r||i.field.isKeyField()}return 0}}function VP(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(i,c,u){const g=c.data.field(i),v=u.data.field(i);return null!==g&&null!==v?gu(g,v):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}class Gc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,c]of r)if(this.equalsFn(i,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<i.length;c++)if(this.equalsFn(i[c][0],e))return void(i[c]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ua(this.inner,(t,r)=>{for(const[i,c]of r)e(i,c)})}isEmpty(){return IS(this.inner)}size(){return this.innerSize}}const kS=new Bn(Ke.comparator);function di(){return kS}const xE=new Bn(Ke.comparator);function Lp(...n){let e=xE;for(const t of n)e=e.insert(t.key,t);return e}function vC(n){let e=xE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bi(){return vu()}function CC(){return vu()}function vu(){return new Gc(n=>n.toString(),(n,e)=>n.isEqual(e))}const wC=new Bn(Ke.comparator),NS=new Zn(Ke.comparator);function jt(...n){let e=NS;for(const t of n)e=e.add(t);return e}const IC=new Zn(Bt);function fh(){return IC}function FS(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jc(e)?"-0":e}}function LS(n){return{integerValue:""+n}}function VS(n,e){return r_(e)?LS(e):FS(n,e)}class EC{constructor(){this._=void 0}}function PE(n,e,t){return n instanceof ph?function(r,i){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&lh(i)&&(i=bp(i)),i&&(c.fields.__previous_value__=i),{mapValue:c}}(t,e):n instanceof Cu?bC(n,e):n instanceof zc?DC(n,e):function(r,i){const c=OE(r,i),u=RE(c)+RE(r.gt);return mE(c)&&mE(r.gt)?LS(u):FS(r.serializer,u)}(n,e)}function BS(n,e,t){return n instanceof Cu?bC(n,e):n instanceof zc?DC(n,e):t}function OE(n,e){return n instanceof gh?mE(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ph extends EC{}class Cu extends EC{constructor(e){super(),this.elements=e}}function bC(n,e){const t=TC(e);for(const r of n.elements)t.some(i=>Ps(i,r))||t.push(r);return{arrayValue:{values:t}}}class zc extends EC{constructor(e){super(),this.elements=e}}function DC(n,e){let t=TC(e);for(const r of n.elements)t=t.filter(i=>!Ps(i,r));return{arrayValue:{values:t}}}class gh extends EC{constructor(e,t){super(),this.serializer=e,this.gt=t}}function RE(n){return ir(n.integerValue||n.doubleValue)}function TC(n){return Ap(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class wu{constructor(e,t){this.field=e,this.transform=t}}class kE{constructor(e,t){this.version=e,this.transformResults=t}}class Rn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function u_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class d_{}function US(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new mh(n.key,Rn.none()):new Bp(n.key,n.data,Rn.none());{const t=n.data,r=Lr.empty();let i=new Zn(rr.comparator);for(let c of e.fields)if(!i.has(c)){let u=t.field(c);null===u&&c.length>1&&(c=c.popLast(),u=t.field(c)),null===u?r.delete(c):r.set(c,u),i=i.add(c)}return new qc(n.key,r,new xs(i.toArray()),Rn.none())}}function UP(n,e,t){n instanceof Bp?function(r,i,c){const u=r.value.clone(),g=$S(r.fieldTransforms,i,c.transformResults);u.setAll(g),i.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(n,e,t):n instanceof qc?function(r,i,c){if(!u_(r.precondition,i))return void i.convertToUnknownDocument(c.version);const u=$S(r.fieldTransforms,i,c.transformResults),g=i.data;g.setAll(HS(r)),g.setAll(u),i.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Vp(n,e,t,r){return n instanceof Bp?function(i,c,u,g){if(!u_(i.precondition,c))return u;const v=i.value.clone(),E=GS(i.fieldTransforms,g,c);return v.setAll(E),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof qc?function(i,c,u,g){if(!u_(i.precondition,c))return u;const v=GS(i.fieldTransforms,g,c),E=c.data;return E.setAll(HS(i)),E.setAll(v),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(M=>M.field))}(n,e,t,r):(u=t,u_(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u);var c,u}function jS(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),c=OE(r.transform,i||null);null!=c&&(null===t&&(t=Lr.empty()),t.set(r.field,c))}return t||null}function NE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&uu(t,r,(i,c)=>function BP(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Cu&&r instanceof Cu||t instanceof zc&&r instanceof zc?uu(t.elements,r.elements,Ps):t instanceof gh&&r instanceof gh?Ps(t.gt,r.gt):t instanceof ph&&r instanceof ph);var t,r}(i,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Bp extends d_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qc extends d_{constructor(e,t,r,i,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function HS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function $S(n,e,t){const r=new Map;pt(n.length===t.length);for(let i=0;i<t.length;i++){const c=n[i],u=c.transform,g=e.data.field(c.field);r.set(c.field,BS(u,g,t[i]))}return r}function GS(n,e,t){const r=new Map;for(const i of n){const c=i.transform,u=t.data.field(i.field);r.set(i.field,PE(c,u,e))}return r}class mh extends d_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FE extends d_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class LE{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const c=this.mutations[i];c.key.isEqual(e.key)&&UP(c,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Vp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=CC();return this.mutations.forEach(i=>{const c=e.get(i.key),u=c.overlayedDocument;let g=this.applyToLocalView(u,c.mutatedFields);g=t.has(i.key)?null:g;const v=US(u,g);null!==v&&r.set(i.key,v),u.isValidDocument()||u.convertToNoDocument(Ct.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jt())}isEqual(e){return this.batchId===e.batchId&&uu(this.mutations,e.mutations,(t,r)=>NE(t,r))&&uu(this.baseMutations,e.baseMutations,(t,r)=>NE(t,r))}}class VE{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){pt(e.mutations.length===r.length);let i=wC;const c=e.mutations;for(let u=0;u<c.length;u++)i=i.insert(c[u].key,r[u].version);return new VE(e,t,r,i)}}class BE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class HP{constructor(e,t){this.count=e,this.unchangedNames=t}}var s,o;function a(n){switch(n){default:return it();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function l(n){if(void 0===n)return _r("GRPC error has no .code"),de.UNKNOWN;switch(n){case s.OK:return de.OK;case s.CANCELLED:return de.CANCELLED;case s.UNKNOWN:return de.UNKNOWN;case s.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case s.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case s.INTERNAL:return de.INTERNAL;case s.UNAVAILABLE:return de.UNAVAILABLE;case s.UNAUTHENTICATED:return de.UNAUTHENTICATED;case s.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case s.NOT_FOUND:return de.NOT_FOUND;case s.ALREADY_EXISTS:return de.ALREADY_EXISTS;case s.PERMISSION_DENIED:return de.PERMISSION_DENIED;case s.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case s.ABORTED:return de.ABORTED;case s.OUT_OF_RANGE:return de.OUT_OF_RANGE;case s.UNIMPLEMENTED:return de.UNIMPLEMENTED;case s.DATA_LOSS:return de.DATA_LOSS;default:return it()}}(o=s||(s={}))[o.OK=0]="OK",o[o.CANCELLED=1]="CANCELLED",o[o.UNKNOWN=2]="UNKNOWN",o[o.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",o[o.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",o[o.NOT_FOUND=5]="NOT_FOUND",o[o.ALREADY_EXISTS=6]="ALREADY_EXISTS",o[o.PERMISSION_DENIED=7]="PERMISSION_DENIED",o[o.UNAUTHENTICATED=16]="UNAUTHENTICATED",o[o.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",o[o.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",o[o.ABORTED=10]="ABORTED",o[o.OUT_OF_RANGE=11]="OUT_OF_RANGE",o[o.UNIMPLEMENTED=12]="UNIMPLEMENTED",o[o.INTERNAL=13]="INTERNAL",o[o.UNAVAILABLE=14]="UNAVAILABLE",o[o.DATA_LOSS=15]="DATA_LOSS";class h{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return m}static getOrCreateInstance(){return null===m&&(m=new h),m}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let m=null;function y(){return new TextEncoder}const I=new oh([4294967295,4294967295],0);function b(n){const e=y().encode(n),t=new QI;return t.update(e),new Uint8Array(t.digest())}function S(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new oh([t,r],0),new oh([i,c],0)]}class R{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new F(`Invalid padding: ${t}`);if(r<0)throw new F(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new F(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new F(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=oh.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(oh.fromNumber(r)));return 1===i.compare(I)&&(i=new oh([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=b(e),[r,i]=S(t);for(let c=0;c<this.hashCount;c++){const u=this.Et(r,i,c);if(!this.At(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new R(c,i,t);return r.forEach(g=>u.insert(g)),u}insert(e){if(0===this.It)return;const t=b(e),[r,i]=S(t);for(let c=0;c<this.hashCount;c++){const u=this.Et(r,i,c);this.Rt(u)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class F extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ${constructor(e,t,r,i,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,X.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new $(Ct.min(),i,new Bn(Bt),di(),jt())}}class X{constructor(e,t,r,i,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new X(r,t,jt(),jt(),jt())}}class Ce{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class je{constructor(e,t){this.targetId=e,this.Vt=t}}class Ye{constructor(e,t,r=Ar.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class ft{constructor(){this.St=0,this.Dt=kt(),this.Ct=Ar.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=jt(),t=jt(),r=jt();return this.Dt.forEach((i,c)=>{switch(c){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:it()}}),new X(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=kt()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Rt{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=di(),this.zt=ke(),this.Wt=new Bn(Bt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,c=this.se(r);if(c){const u=c.target;if(Pp(u))if(0===i){const g=new Ke(u.path);this.Yt(r,g,Un.newNoDocument(g,Ct.min()))}else pt(1===i);else{const g=this.ie(r);if(g!==i){const v=this.re(e,g);0!==v&&(this.ee(r),this.Wt=this.Wt.insert(r,2===v?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=h.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(E,M,P){var B,q,ae,Oe,Se,et;const wt={localCacheCount:M,existenceFilterCount:P.count},It=P.unchangedNames;return It&&(wt.bloomFilter={applied:0===E,hashCount:null!==(B=It?.hashCount)&&void 0!==B?B:0,bitmapLength:null!==(Oe=null===(ae=null===(q=It?.bits)||void 0===q?void 0:q.bitmap)||void 0===ae?void 0:ae.length)&&void 0!==Oe?Oe:0,padding:null!==(et=null===(Se=It?.bits)||void 0===Se?void 0:Se.padding)&&void 0!==et?et:0}),wt}(v,g,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:c="",padding:u=0},hashCount:g=0}=r;let v,E;try{v=Hc(c).toUint8Array()}catch(M){if(M instanceof Ep)return os("Decoding the base64 bloom filter in existence filter failed ("+M.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw M}try{E=new R(v,u,g)}catch(M){return os(M instanceof F?"BloomFilter error: ":"Applying bloom filter failed: ",M),1}return 0===E.It?1:i!==t-this.oe(e.targetId,E)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(c=>{const u=this.Gt.ue(),g=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;t.vt(g)||(this.Yt(e,c,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((c,u)=>{const g=this.se(u);if(g){if(c.current&&Pp(g.target)){const v=new Ke(g.target.path);null!==this.jt.get(v)||this.ae(u,v)||this.Yt(u,v,Un.newNoDocument(v,e))}c.Mt&&(t.set(u,c.Ot()),c.Ft())}});let r=jt();this.zt.forEach((c,u)=>{let g=!0;u.forEachWhile(v=>{const E=this.se(v);return!E||"TargetPurposeLimboResolution"===E.purpose||(g=!1,!1)}),g&&(r=r.add(c))}),this.jt.forEach((c,u)=>u.setReadTime(e));const i=new $(e,t,this.Wt,this.jt,r);return this.jt=di(),this.zt=ke(),this.Wt=new Bn(Bt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new ft,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Zn(Bt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new ft),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function ke(){return new Bn(Ke.comparator)}function kt(){return new Bn(Ke.comparator)}const mn={asc:"ASCENDING",desc:"DESCENDING"},Kn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Iu={and:"AND",or:"OR"};class SC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Up(n,e){return n.useProto3Json||ch(e)?e:{value:e}}function Wc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function h_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function AC(n,e){return Wc(n,e.toTimestamp())}function sr(n){return pt(!!n),Ct.fromTimestamp(function(e){const t=ja(e);return new On(t.seconds,t.nanos)}(n))}function jp(n,e){return(t=n,new rn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function f_(n){const e=rn.fromString(n);return pt(QP(e)),e}function Eu(n,e){return jp(n.databaseId,e.path)}function Zc(n,e){const t=f_(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(GP(t))}function zS(n,e){return jp(n.databaseId,e)}function $P(n){const e=f_(n);return 4===e.length?rn.emptyPath():GP(e)}function MC(n){return new rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GP(n){return pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function zP(n,e,t){return{name:Eu(n,e),fields:t.value.mapValue.fields}}function qP(n,e,t){const r=Zc(n,e.name),i=sr(e.updateTime),c=e.createTime?sr(e.createTime):Ct.min(),u=new Lr({mapValue:{fields:e.fields}}),g=Un.newFoundDocument(r,i,c,u);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function xC(n,e){let t;if(e instanceof Bp)t={update:zP(n,e.key,e.value)};else if(e instanceof mh)t={delete:Eu(n,e.key)};else if(e instanceof qc)t={update:zP(n,e.key,e.data),updateMask:TN(e.fieldMask)};else{if(!(e instanceof FE))return it();t={verify:Eu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,c){const u=c.transform;if(u instanceof ph)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Cu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof zc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof gh)return{fieldPath:c.field.canonicalString(),increment:u.gt};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:AC(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:it()),t;var i}function qS(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Rn.updateTime(sr(i.updateTime)):void 0!==i.exists?Rn.exists(i.exists):Rn.none():Rn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(c,u){let g=null;"setToServerValue"in u?(pt("REQUEST_TIME"===u.setToServerValue),g=new ph):"appendMissingElements"in u?g=new Cu(u.appendMissingElements.values||[]):"removeAllFromArray"in u?g=new zc(u.removeAllFromArray.values||[]):"increment"in u?g=new gh(c,u.increment):it();const v=rr.fromServerFormat(u.fieldPath);return new wu(v,g)}(n,i)):[];var i;if(e.update){const i=Zc(n,e.update.name),c=new Lr({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new xs((e.updateMask.fieldPaths||[]).map(E=>rr.fromServerFormat(E)));return new qc(i,c,u,t,r)}return new Bp(i,c,t,r)}if(e.delete){const i=Zc(n,e.delete);return new mh(i,t)}if(e.verify){const i=Zc(n,e.verify);return new FE(i,t)}return it()}function WP(n,e){return{documents:[zS(n,e.path)]}}function WS(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=zS(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=zS(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(v){if(0!==v.length)return YP(_n.create(v,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const c=function(v){if(0!==v.length)return v.map(E=>{return{field:_h((M=E).field),direction:EN(M.dir)};var M})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=Up(n,e.limit);var g,v;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function ZP(n){let e=$P(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){pt(1===r);const M=t.from[0];M.allDescendants?i=M.collectionId:e=e.child(M.collectionId)}let c=[];t.where&&(c=function(M){const P=KP(M);return P instanceof _n&&Xo(P)?P.getFilters():[P]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(M=>{return new uh(p_((P=M).field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction));var P}));let g=null;t.limit&&(g=function(M){let P;return P="object"==typeof M?M.value:M,ch(P)?null:P}(t.limit));let v=null;var M;t.startAt&&(v=new Jo((M=t.startAt).values||[],!!M.before));let E=null;return t.endAt&&(E=function(M){return new Jo(M.values||[],!M.before)}(t.endAt)),Rp(e,i,u,c,g,"F",v,E)}function KP(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=p_(e.unaryFilter.field);return Yt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=p_(e.unaryFilter.field);return Yt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=p_(e.unaryFilter.field);return Yt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=p_(e.unaryFilter.field);return Yt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return it()}}(n):void 0!==n.fieldFilter?Yt.create(p_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return _n.create(e.compositeFilter.filters.map(t=>KP(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return it()}}(e.compositeFilter.op))}(n):it();var e}function EN(n){return mn[n]}function bN(n){return Kn[n]}function DN(n){return Iu[n]}function _h(n){return{fieldPath:n.canonicalString()}}function p_(n){return rr.fromServerFormat(n.fieldPath)}function YP(n){return n instanceof Yt?function(e){if("=="===e.op){if(cC(e.value))return{unaryFilter:{field:_h(e.field),op:"IS_NAN"}};if(aC(e.value))return{unaryFilter:{field:_h(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(cC(e.value))return{unaryFilter:{field:_h(e.field),op:"IS_NOT_NAN"}};if(aC(e.value))return{unaryFilter:{field:_h(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_h(e.field),op:bN(e.op),value:e.value}}}(n):n instanceof _n?function(e){const t=e.getFilters().map(r=>YP(r));return 1===t.length?t[0]:{compositeFilter:{op:DN(e.op),filters:t}}}(n):it()}function TN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QP(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class bu{constructor(e,t,r,i,c=Ct.min(),u=Ct.min(),g=Ar.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new bu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new bu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class JP{constructor(e){this.fe=e}}function XP(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:UE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Eu(i=n.fe,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:Wc(i,c.version.toTimestamp()),createTime:Wc(i,c.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Hp(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:Hp(e.version)}}var i,c;return r}function UE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Hp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $p(n){const e=new On(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function Gp(n,e){const t=(e.baseMutations||[]).map(c=>qS(n.fe,c));for(let c=0;c<e.mutations.length-1;++c){const u=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(u.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>qS(n.fe,c)),i=On.fromMillis(e.localWriteTimeMs);return new LE(e.batchId,i,t,r)}function PC(n){const e=$p(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?$p(n.lastLimboFreeSnapshotVersion):Ct.min();let r;var i;return void 0!==n.query.documents?(pt(1===(i=n.query).documents.length),r=cs(_u($P(i.documents[0])))):r=cs(ZP(n.query)),new bu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ar.fromBase64String(n.resumeToken))}function eO(n,e){const t=Hp(e.snapshotVersion),r=Hp(e.lastLimboFreeSnapshotVersion);let i;i=Pp(e.target)?WP(n.fe,e.target):WS(n.fe,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ha(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ZS(n){const e=ZP({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Np(e,e.limit,"L"):e}function KS(n,e){return new BE(e.largestBatchId,qS(n.fe,e.overlayMutation))}function tO(n,e){const t=e.path.lastSegment();return[n,Bi(e.path.popLast()),t]}function nO(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Hp(r.readTime),documentKey:Bi(r.documentKey.path),largestBatchId:r.largestBatchId}}class AN{getBundleMetadata(e,t){return rO(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:$p(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return rO(e).put({bundleId:(r=t).id,createTime:Hp(sr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return iO(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:ZS(i.bundledQuery),readTime:$p(i.readTime)};var i})}saveNamedQuery(e,t){return iO(e).put({name:(r=t).name,readTime:Hp(sr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function rO(n){return qr(n,"bundles")}function iO(n){return qr(n,"namedQueries")}class jE{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new jE(e,t.uid||"")}getOverlay(e,t){return OC(e).get(tO(this.userId,t)).next(r=>r?KS(this.serializer,r):null)}getOverlays(e,t){const r=bi();return oe.forEach(t,i=>this.getOverlay(e,i).next(c=>{null!==c&&r.set(i,c)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((c,u)=>{const g=new BE(t,u);i.push(this.we(e,g))}),oe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Bi(u.getCollectionPath())));const c=[];return i.forEach(u=>{const g=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);c.push(OC(e).J("collectionPathOverlayIndex",g))}),oe.waitFor(c)}getOverlaysForCollection(e,t,r){const i=bi(),c=Bi(t),u=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return OC(e).j("collectionPathOverlayIndex",u).next(g=>{for(const v of g){const E=KS(this.serializer,v);i.set(E.getKey(),E)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const c=bi();let u;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return OC(e).X({index:"collectionGroupOverlayIndex",range:g},(v,E,M)=>{const P=KS(this.serializer,E);c.size()<i||P.largestBatchId===u?(c.set(P.getKey(),P),u=P.largestBatchId):M.done()}).next(()=>c)}we(e,t){return OC(e).put(function(r,i,c){const[u,g,v]=tO(i,c.mutation.key);return{userId:i,collectionPath:g,documentId:v,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:xC(r.fe,c.mutation)}}(this.serializer,this.userId,t))}}function OC(n){return qr(n,"documentOverlays")}class zp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(ir(e.integerValue));else if("doubleValue"in e){const r=ir(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),jc(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Hc(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?_E(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):it()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Ke.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function MN(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function sO(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const c=MN(255&t[i]);if(r+=c,8!==c)break}return r}(n);return Math.ceil(e/8)}zp.Ve=new zp;class xN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=sO(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=sO(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,i,!1),new Uint8Array(c.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class PN{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class ON{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class RC{constructor(){this.je=new xN,this.ze=new PN(this.je),this.We=new ON(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class qp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new qp(this.indexId,this.documentKey,this.arrayValue,r)}}function yh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=oO(n.arrayValue,e.arrayValue),0!==t?t:(t=oO(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function oO(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class RN{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){pt(e.collectionGroup===this.collectionId);const t=t_(e);if(void 0!==t&&!this.en(t))return!1;const r=Vc(e);let i=new Set,c=0,u=0;for(;c<r.length&&this.en(r[c]);++c)i=i.add(r[c].fieldPath.canonicalString());if(c===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const g=r[c];if(!this.nn(this.Ze,g)||!this.sn(this.Ye[u++],g))return!1}++c}for(;c<r.length;++c){const g=r[c];if(u>=this.Ye.length||!this.sn(this.Ye[u++],g))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function aO(n){var e,t;if(pt(n instanceof Yt||n instanceof _n),n instanceof Yt){if(n instanceof xS){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(c=>Yt.create(n.field,"==",c)))||[];return _n.create(i,"or")}return n}const r=n.filters.map(i=>aO(i));return _n.create(r,n.op)}function kN(n){if(0===n.getFilters().length)return[];const e=JS(aO(n));return pt(cO(e)),YS(e)||QS(e)?[e]:e.getFilters()}function YS(n){return n instanceof Yt}function QS(n){return n instanceof _n&&Xo(n)}function cO(n){return YS(n)||QS(n)||function(e){if(e instanceof _n&&Mp(e)){for(const t of e.getFilters())if(!YS(t)&&!QS(t))return!1;return!0}return!1}(n)}function JS(n){if(pt(n instanceof Yt||n instanceof _n),n instanceof Yt)return n;if(1===n.filters.length)return JS(n.filters[0]);const e=n.filters.map(r=>JS(r));let t=_n.create(e,n.op);return t=HE(t),cO(t)?t:(pt(t instanceof _n),pt(dh(t)),pt(t.filters.length>1),t.filters.reduce((r,i)=>XS(r,i)))}function XS(n,e){let t;return pt(n instanceof Yt||n instanceof _n),pt(e instanceof Yt||e instanceof _n),t=n instanceof Yt?e instanceof Yt?_n.create([n,e],"and"):lO(n,e):e instanceof Yt?lO(e,n):function(r,i){if(pt(r.filters.length>0&&i.filters.length>0),dh(r)&&dh(i))return wE(r,i.getFilters());const c=Mp(r)?r:i,u=Mp(r)?i:r,g=c.filters.map(v=>XS(v,u));return _n.create(g,"or")}(n,e),HE(t)}function lO(n,e){if(dh(e))return wE(e,n.getFilters());{const t=e.filters.map(r=>XS(n,r));return _n.create(t,"or")}}function HE(n){if(pt(n instanceof Yt||n instanceof _n),n instanceof Yt)return n;const e=n.getFilters();if(1===e.length)return HE(e[0]);if(pC(n))return n;const t=e.map(i=>HE(i)),r=[];return t.forEach(i=>{i instanceof Yt?r.push(i):i instanceof _n&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:_n.create(r,n.op)}class NN{constructor(){this.rn=new eA}addToCollectionParentIndex(e,t){return this.rn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Ms.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Ms.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class eA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Zn(rn.comparator),c=!i.has(r);return this.index[t]=i.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zn(rn.comparator)).toArray()}}const $E=new Uint8Array(0);class FN{constructor(e,t){this.user=e,this.databaseId=t,this.on=new eA,this.un=new Gc(r=>Ha(r),(r,i)=>hh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const c={collectionId:r,parent:Bi(i)};return uO(e).put(c)}return oe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[e_(t),""],!1,!0);return uO(e).j(i).next(c=>{for(const u of c){if(u.collectionId!==t)break;r.push(yo(u.parent))}return r})}addFieldIndex(e,t){const r=GE(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var u;delete i.indexId;const c=r.add(i);if(t.indexState){const u=NC(e);return c.next(g=>{u.put(nO(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const r=GE(e),i=NC(e),c=kC(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=kC(e);let i=!0;const c=new Map;return oe.forEach(this.cn(t),u=>this.an(e,u).next(g=>{i&&(i=!!g),c.set(u,g)})).next(()=>{if(i){let u=jt();const g=[];return oe.forEach(c,(v,E)=>{var M;Ve("IndexedDbIndexManager",`Using index ${M=v,`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(It=>`${It.fieldPath}:${It.kind}`).join(",")}`} to execute ${Ha(t)}`);const P=function(It,Ft){const Zt=t_(Ft);if(void 0===Zt)return null;for(const cn of Op(It,Zt.fieldPath))switch(cn.op){case"array-contains-any":return cn.value.arrayValue.values||[];case"array-contains":return[cn.value]}return null}(E,v),B=function(It,Ft){const Zt=new Map;for(const cn of Vc(Ft))for(const hs of Op(It,cn.fieldPath))switch(hs.op){case"==":case"in":Zt.set(cn.fieldPath.canonicalString(),hs.value);break;case"not-in":case"!=":return Zt.set(cn.fieldPath.canonicalString(),hs.value),Array.from(Zt.values())}return null}(E,v),q=function(It,Ft){const Zt=[];let cn=!0;for(const hs of Vc(Ft)){const cg=0===hs.kind?gC(It,hs.fieldPath,It.startAt):mC(It,hs.fieldPath,It.startAt);Zt.push(cg.value),cn&&(cn=cg.inclusive)}return new Jo(Zt,cn)}(E,v),ae=function(It,Ft){const Zt=[];let cn=!0;for(const hs of Vc(Ft)){const cg=0===hs.kind?mC(It,hs.fieldPath,It.endAt):gC(It,hs.fieldPath,It.endAt);Zt.push(cg.value),cn&&(cn=cg.inclusive)}return new Jo(Zt,cn)}(E,v),Oe=this.hn(v,E,q),Se=this.hn(v,E,ae),et=this.ln(v,E,B),wt=this.fn(v.indexId,P,Oe,q.inclusive,Se,ae.inclusive,et);return oe.forEach(wt,It=>r.H(It,t.limit).next(Ft=>{Ft.forEach(Zt=>{const cn=Ke.fromSegments(Zt.documentKey);u.has(cn)||(u=u.add(cn),g.push(cn))})}))}).next(()=>g)}return oe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:kN(_n.create(e.filters,"and")).map(r=>TE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,c,u,g){const v=(null!=t?t.length:1)*Math.max(r.length,c.length),E=v/(null!=t?t.length:1),M=[];for(let P=0;P<v;++P){const B=t?this.dn(t[P/E]):$E,q=this.wn(e,B,r[P%E],i),ae=this._n(e,B,c[P%E],u),Oe=g.map(Se=>this.wn(e,B,Se,!0));M.push(...this.createRange(q,ae,Oe))}return M}wn(e,t,r,i){const c=new qp(e,Ke.empty(),t,r);return i?c:c.Je()}_n(e,t,r,i){const c=new qp(e,Ke.empty(),t,r);return i?c.Je():c}an(e,t){const r=new RN(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(c=>{let u=null;for(const g of c)r.tn(g)&&(!u||g.fields.length>u.fields.length)&&(u=g);return u})}getIndexType(e,t){let r=2;const i=this.cn(t);return oe.forEach(i,c=>this.an(e,c).next(u=>{u?0!==r&&u.fields.length<function(g){let v=new Zn(rr.comparator),E=!1;for(const M of g.filters)for(const P of M.getFlattenedFilters())P.field.isKeyField()||("array-contains"===P.op||"array-contains-any"===P.op?E=!0:v=v.add(P.field));for(const M of g.orderBy)M.field.isKeyField()||(v=v.add(M.field));return v.size+(E?1:0)}(c)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new RC;for(const i of Vc(e)){const c=t.data.field(i.fieldPath);if(null==c)return null;const u=r.He(i.kind);zp.Ve._e(c,u)}return r.Qe()}dn(e){const t=new RC;return zp.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new RC;return zp.Ve._e(mu(this.databaseId,t),r.He(function(i){const c=Vc(i);return 0===c.length?0:c[c.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new RC);let c=0;for(const u of Vc(e)){const g=r[c++];for(const v of i)if(this.yn(t,u.fieldPath)&&Ap(g))i=this.pn(i,u,g);else{const E=v.He(u.kind);zp.Ve._e(g,E)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],c=[];for(const u of r.arrayValue.values||[])for(const g of i){const v=new RC;v.seed(g.Qe()),zp.Ve._e(u,v.He(t.kind)),c.push(v)}return c}yn(e,t){return!!e.filters.find(r=>r instanceof Yt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=GE(e),i=NC(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(c=>{const u=[];return oe.forEach(c,g=>i.get([g.indexId,this.uid]).next(v=>{u.push(function(E,M){const P=M?new ah(M.sequenceNumber,new Ms($p(M.readTime),new Ke(yo(M.documentKey)),M.largestBatchId)):ah.empty(),B=E.fields.map(([q,ae])=>new n_(rr.fromServerFormat(q),ae));return new yp(E.indexId,E.collectionGroup,B,P)}(g,v))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const c=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==c?c:Bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=GE(e),c=NC(e);return this.Tn(e).next(u=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>oe.forEach(g,v=>c.put(nO(v.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(i,c)=>{const u=r.get(i.collectionGroup);return(u?oe.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(g=>(r.set(i.collectionGroup,g),oe.forEach(g,v=>this.En(e,i,v).next(E=>{const M=this.An(c,v);return E.isEqual(M)?oe.resolve():this.vn(e,c,v,E,M)}))))})}Rn(e,t,r,i){return kC(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return kC(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=kC(e);let c=new Zn(yh);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(u,g)=>{c=c.add(new qp(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>c)}An(e,t){let r=new Zn(yh);const i=this.mn(t,e);if(null==i)return r;const c=t_(t);if(null!=c){const u=e.data.field(c.fieldPath);if(Ap(u))for(const g of u.arrayValue.values||[])r=r.add(new qp(t.indexId,e.key,this.dn(g),i))}else r=r.add(new qp(t.indexId,e.key,$E,i));return r}vn(e,t,r,i,c){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(g,v,E,M,P){const B=g.getIterator(),q=v.getIterator();let ae=Ip(B),Oe=Ip(q);for(;ae||Oe;){let Se=!1,et=!1;if(ae&&Oe){const wt=E(ae,Oe);wt<0?et=!0:wt>0&&(Se=!0)}else null!=ae?et=!0:Se=!0;Se?(M(Oe),Oe=Ip(q)):et?(P(ae),ae=Ip(B)):(ae=Ip(B),Oe=Ip(q))}}(i,c,yh,g=>{u.push(this.Rn(e,t,r,g))},g=>{u.push(this.Pn(e,t,r,g))}),oe.waitFor(u)}Tn(e){let t=1;return NC(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,c)=>{c.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,g)=>yh(u,g)).filter((u,g,v)=>!g||0!==yh(u,v[g-1]));const i=[];i.push(e);for(const u of r){const g=yh(u,e),v=yh(u,t);if(0===g)i[0]=e.Je();else if(g>0&&v<0)i.push(u),i.push(u.Je());else if(v>0)break}i.push(t);const c=[];for(let u=0;u<i.length;u+=2){if(this.bn(i[u],i[u+1]))return[];c.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,$E,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,$E,[]]))}return c}bn(e,t){return yh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dO)}getMinOffset(e,t){return oe.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||it())).next(dO)}}function uO(n){return qr(n,"collectionParents")}function kC(n){return qr(n,"indexEntries")}function GE(n){return qr(n,"indexConfiguration")}function NC(n){return qr(n,"indexState")}function dO(n){pt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;ui(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ms(e.readTime,e.documentKey,t)}const hO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ls{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ls(e,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fO(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),c=[],u=IDBKeyRange.only(t.batchId);let g=0;const v=r.X({range:u},(M,P,B)=>(g++,B.delete()));c.push(v.next(()=>{pt(1===g)}));const E=[];for(const M of t.mutations){const P=eC(e,M.key.path,t.batchId);c.push(i.delete(P)),E.push(M.key)}return oe.waitFor(c).next(()=>E)}function zE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}ls.DEFAULT_COLLECTION_PERCENTILE=10,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ls.DEFAULT=new ls(41943040,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ls.DISABLED=new ls(-1,0,0);class qE{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){pt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new qE(c,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vh(e).X({index:"userMutationsIndex",range:r},(i,c,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const c=g_(e),u=vh(e);return u.add({}).next(g=>{pt("number"==typeof g);const v=new LE(g,t,r,i),E=function(B,q,ae){const Oe=ae.baseMutations.map(et=>xC(B.fe,et)),Se=ae.mutations.map(et=>xC(B.fe,et));return{userId:q,batchId:ae.batchId,localWriteTimeMs:ae.localWriteTime.toMillis(),baseMutations:Oe,mutations:Se}}(this.serializer,this.userId,v),M=[];let P=new Zn((B,q)=>Bt(B.canonicalString(),q.canonicalString()));for(const B of i){const q=eC(this.userId,B.key.path,g);P=P.add(B.key.path.popLast()),M.push(u.put(E)),M.push(c.put(q,tC))}return P.forEach(B=>{M.push(this.indexManager.addToCollectionParentIndex(e,B))}),e.addOnCommittedListener(()=>{this.Vn[g]=v.keys()}),oe.waitFor(M).next(()=>v)})}lookupMutationBatch(e,t){return vh(e).get(t).next(r=>r?(pt(r.userId===this.userId),Gp(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?oe.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return vh(e).X({index:"userMutationsIndex",range:i},(u,g,v)=>{g.userId===this.userId&&(pt(g.batchId>=r),c=Gp(this.serializer,g)),v.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return vh(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,c,u)=>{r=c.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vh(e).j("userMutationsIndex",t).next(r=>r.map(i=>Gp(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=i_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),c=[];return g_(e).X({range:i},(u,g,v)=>{const[E,M,P]=u,B=yo(M);if(E===this.userId&&t.path.isEqual(B))return vh(e).get(P).next(q=>{if(!q)throw it();pt(q.userId===this.userId),c.push(Gp(this.serializer,q))});v.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zn(Bt);const i=[];return t.forEach(c=>{const u=i_(this.userId,c.path),g=IDBKeyRange.lowerBound(u),v=g_(e).X({range:g},(E,M,P)=>{const[B,q,ae]=E,Oe=yo(q);B===this.userId&&c.path.isEqual(Oe)?r=r.add(ae):P.done()});i.push(v)}),oe.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,c=i_(this.userId,r),u=IDBKeyRange.lowerBound(c);let g=new Zn(Bt);return g_(e).X({range:u},(v,E,M)=>{const[P,B,q]=v,ae=yo(B);P===this.userId&&r.isPrefixOf(ae)?ae.length===i&&(g=g.add(q)):M.done()}).next(()=>this.Dn(e,g))}Dn(e,t){const r=[],i=[];return t.forEach(c=>{i.push(vh(e).get(c).next(u=>{if(null===u)throw it();pt(u.userId===this.userId),r.push(Gp(this.serializer,u))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return fO(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return g_(e).X({range:r},(c,u,g)=>{if(c[0]===this.userId){const v=yo(c[1]);i.push(v)}else g.done()}).next(()=>{pt(0===i.length)})})}containsKey(e,t){return pO(e,this.userId,t)}xn(e){return gO(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pO(n,e,t){const r=i_(e,t.path),i=r[1],c=IDBKeyRange.lowerBound(r);let u=!1;return g_(n).X({range:c,Y:!0},(g,v,E)=>{const[M,P,B]=g;M===e&&P===i&&(u=!0),E.done()}).next(()=>u)}function vh(n){return qr(n,"mutations")}function g_(n){return qr(n,"documentMutations")}function gO(n){return qr(n,"mutationQueues")}class Wp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Wp(0)}static Mn(){return new Wp(-1)}}class LN{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Wp(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Ct.fromTimestamp(new On(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>m_(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(pt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const c=[];return m_(e).X((u,g)=>{const v=PC(g);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(i++,c.push(this.removeTargetData(e,v)))}).next(()=>oe.waitFor(c)).next(()=>i)}forEachTarget(e,t){return m_(e).X((r,i)=>{const c=PC(i);t(c)})}$n(e){return mO(e).get("targetGlobalKey").next(t=>(pt(null!==t),t))}On(e,t){return mO(e).put("targetGlobalKey",t)}Fn(e,t){return m_(e).put(eO(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ha(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return m_(e).X({range:i,index:"queryTargetsIndex"},(u,g,v)=>{const E=PC(g);hh(t,E.target)&&(c=E,v.done())}).next(()=>c)}addMatchingKeys(e,t,r){const i=[],c=Ch(e);return t.forEach(u=>{const g=Bi(u.path);i.push(c.put({targetId:r,path:g})),i.push(this.referenceDelegate.addReference(e,r,u))}),oe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ch(e);return oe.forEach(t,c=>{const u=Bi(c.path);return oe.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=Ch(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ch(e);let c=jt();return i.X({range:r,Y:!0},(u,g,v)=>{const E=yo(u[1]),M=new Ke(E);c=c.add(M)}).next(()=>c)}containsKey(e,t){const r=Bi(t.path),i=IDBKeyRange.bound([r],[e_(r)],!1,!0);let c=0;return Ch(e).X({index:"documentTargetsIndex",Y:!0,range:i},([u,g],v,E)=>{0!==u&&(c++,E.done())}).next(()=>c>0)}le(e,t){return m_(e).get(t).next(r=>r?PC(r):null)}}function m_(n){return qr(n,"targets")}function mO(n){return qr(n,"targetGlobal")}function Ch(n){return qr(n,"targetDocuments")}function _O([n,e],[t,r]){const i=Bt(n,t);return 0===i?Bt(e,r):i}class VN{constructor(e){this.Ln=e,this.buffer=new Zn(_O),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();_O(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Qo(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Bc(r)}yield t.Qn(3e5)}))}}class BN{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(as.ct);const r=new VN(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(hO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hO):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,c,u,g,v,E;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(P=>(P>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),i=this.params.maximumSequenceNumbersToCollect):i=P,u=Date.now(),this.nthSequenceNumber(e,i))).next(P=>(r=P,g=Date.now(),this.removeTargets(e,r,t))).next(P=>(c=P,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(P=>(E=Date.now(),Zv()<=ka.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-M}ms\n\tDetermined least recently used ${i} in `+(g-u)+`ms\n\tRemoved ${c} targets in `+(v-g)+`ms\n\tRemoved ${P} documents in `+(E-v)+`ms\nTotal Duration: ${E-M}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:c,documentsRemoved:P})))}}class UN{constructor(e,t){this.db=e,this.garbageCollector=function vO(n,e){return new BN(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return WE(e,r)}removeReference(e,t,r){return WE(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return WE(e,t)}Xn(e,t){return function(r,i){let c=!1;return gO(r).Z(u=>pO(r,u,i).next(g=>(g&&(c=!0),oe.resolve(!g)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let c=0;return this.Yn(e,(u,g)=>{if(g<=t){const v=this.Xn(e,u).next(E=>{if(!E)return c++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Ct.min()),Ch(e).delete([0,Bi(u.path)])))});i.push(v)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return WE(e,t)}Yn(e,t){const r=Ch(e);let i,c=as.ct;return r.X({index:"documentTargetsIndex"},([u,g],{path:v,sequenceNumber:E})=>{0===u?(c!==as.ct&&t(new Ke(yo(i)),c),c=E,i=v):c=as.ct}).next(()=>{c!==as.ct&&t(new Ke(yo(i)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function WE(n,e){return Ch(n).put((r=n.currentSequenceNumber,{targetId:0,path:Bi(e.path),sequenceNumber:r}));var r}class CO{constructor(){this.changes=new Gc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Zp(e).put(r)}removeEntry(e,t,r){return Zp(e).delete(function(i,c){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],UE(c),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Un.newInvalidDocument(t);return Zp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(FC(t))},(i,c)=>{r=this.ts(t,c)}).next(()=>r)}es(e,t){let r={size:0,document:Un.newInvalidDocument(t)};return Zp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(FC(t))},(i,c)=>{r={document:this.ts(t,c),size:zE(c)}}).next(()=>r)}getEntries(e,t){let r=di();return this.ns(e,t,(i,c)=>{const u=this.ts(i,c);r=r.insert(i,u)}).next(()=>r)}ss(e,t){let r=di(),i=new Bn(Ke.comparator);return this.ns(e,t,(c,u)=>{const g=this.ts(c,u);r=r.insert(c,g),i=i.insert(c,zE(u))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return oe.resolve();let i=new Zn(bO);t.forEach(v=>i=i.add(v));const c=IDBKeyRange.bound(FC(i.first()),FC(i.last())),u=i.getIterator();let g=u.getNext();return Zp(e).X({index:"documentKeyIndex",range:c},(v,E,M)=>{const P=Ke.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;g&&bO(g,P)<0;)r(g,null),g=u.getNext();g&&g.isEqual(P)&&(r(g,E),g=u.hasNext()?u.getNext():null),g?M.G(FC(g)):M.done()}).next(()=>{for(;g;)r(g,null),g=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const c=t.path,u=[c.popLast().toArray(),c.lastSegment(),UE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zp(e).j(IDBKeyRange.bound(u,g,!0)).next(v=>{let E=di();for(const M of v){const P=this.ts(Ke.fromSegments(M.prefixPath.concat(M.collectionGroup,M.documentId)),M);P.isFoundDocument()&&(l_(t,P)||i.has(P.key))&&(E=E.insert(P.key,P))}return E})}getAllFromCollectionGroup(e,t,r,i){let c=di();const u=EO(t,r),g=EO(t,Ms.max());return Zp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,g,!0)},(v,E,M)=>{const P=this.ts(Ke.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);c=c.insert(P.key,P),c.size===i&&M.done()}).next(()=>c)}newChangeBuffer(e){return new HN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return IO(e).get("remoteDocumentGlobalKey").next(t=>(pt(!!t),t))}Zn(e,t){return IO(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function SN(n,e){let t;if(e.document)t=qP(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=$p(e.noDocument.readTime);t=Un.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=Ke.fromSegments(e.unknownDocument.path),i=$p(e.unknownDocument.version);t=Un.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new On(r[0],r[1]);return Ct.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Ct.min()))return r}return Un.newInvalidDocument(e)}}function wO(n){return new jN(n)}class HN extends CO{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Gc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Zn((c,u)=>Bt(c.canonicalString(),u.canonicalString()));return this.changes.forEach((c,u)=>{const g=this.us.get(c);if(t.push(this.os.removeEntry(e,c,g.readTime)),u.isValidDocument()){const v=XP(this.os.serializer,u);i=i.add(c.path.popLast()),r+=zE(v)-g.size,t.push(this.os.addEntry(e,c,v))}else if(r-=g.size,this.trackRemovals){const v=XP(this.os.serializer,u.convertToNoDocument(Ct.min()));t.push(this.os.addEntry(e,c,v))}}),i.forEach(c=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.os.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((c,u)=>{this.us.set(c,{size:u,readTime:r.get(c).readTime})}),r))}}function IO(n){return qr(n,"remoteDocumentGlobal")}function Zp(n){return qr(n,"remoteDocumentsV14")}function FC(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function EO(n,e){const t=e.documentKey.path.toArray();return[n,UE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function bO(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let c=0;c<t.length-2&&c<r.length-2;++c)if(i=Bt(t[c],r[c]),i)return i;return i=Bt(t.length,r.length),i||(i=Bt(t[t.length-2],r[r.length-2]),i||Bt(t[t.length-1],r[r.length-1]))}class $N{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class DO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Vp(r.mutation,i,xs.empty(),On.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=jt()){const i=bi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(c=>{let u=Lp();return c.forEach((g,v)=>{u=u.insert(g,v.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=bi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,jt()))}populateOverlays(e,t,r){const i=[];return r.forEach(c=>{t.has(c)||i.push(c)}),this.documentOverlayCache.getOverlays(e,i).next(c=>{c.forEach((u,g)=>{t.set(u,g)})})}computeViews(e,t,r,i){let c=di();const u=vu(),g=vu();return t.forEach((v,E)=>{const M=r.get(E.key);i.has(E.key)&&(void 0===M||M.mutation instanceof qc)?c=c.insert(E.key,E):void 0!==M?(u.set(E.key,M.mutation.getFieldMask()),Vp(M.mutation,E,M.mutation.getFieldMask(),On.now())):u.set(E.key,xs.empty())}),this.recalculateAndSaveOverlays(e,c).next(v=>(v.forEach((E,M)=>u.set(E,M)),t.forEach((E,M)=>{var P;return g.set(E,new $N(M,null!==(P=u.get(E))&&void 0!==P?P:null))}),g))}recalculateAndSaveOverlays(e,t){const r=vu();let i=new Bn((u,g)=>u-g),c=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const g of u)g.keys().forEach(v=>{const E=t.get(v);if(null===E)return;let M=r.get(v)||xs.empty();M=g.applyToLocalView(E,M),r.set(v,M);const P=(i.get(g.batchId)||jt()).add(v);i=i.insert(g.batchId,P)})}).next(()=>{const u=[],g=i.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),E=v.key,M=v.value,P=CC();M.forEach(B=>{if(!c.has(B)){const q=US(t.get(B),r.get(B));null!==q&&P.set(B,q),c=c.add(B)}}),u.push(this.documentOverlayCache.saveOverlays(e,E,P))}return oe.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):_C(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(c=>{const u=i-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-c.size):oe.resolve(bi());let g=-1,v=c;return u.next(E=>oe.forEach(E,(M,P)=>(g<P.largestBatchId&&(g=P.largestBatchId),c.get(M)?oe.resolve():this.remoteDocumentCache.getEntry(e,M).next(B=>{v=v.insert(M,B)}))).next(()=>this.populateOverlays(e,E,c)).next(()=>this.computeViews(e,v,E,jt())).next(M=>({batchId:g,changes:vC(M)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=Lp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let c=Lp();return this.indexManager.getCollectionParents(e,i).next(u=>oe.forEach(u,g=>{const v=(E=t,M=g.child(i),new vo(M,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,M;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(E=>{E.forEach((M,P)=>{c=c.insert(M,P)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(i=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(c=>{i.forEach((g,v)=>{const E=v.getKey();null===c.get(E)&&(c=c.insert(E,Un.newInvalidDocument(E)))});let u=Lp();return c.forEach((g,v)=>{const E=i.get(g);void 0!==E&&Vp(E.mutation,v,xs.empty(),On.now()),l_(t,v)&&(u=u.insert(g,v))}),u})}}class GN{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return oe.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:sr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:ZS(r.bundledQuery),readTime:sr(r.readTime)}),oe.resolve();var r}}class zN{constructor(){this.overlays=new Bn(Ke.comparator),this.ls=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=bi();return oe.forEach(t,i=>this.getOverlay(e,i).next(c=>{null!==c&&r.set(i,c)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,c)=>{this.we(e,t,c)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(c=>this.overlays=this.overlays.remove(c)),this.ls.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=bi(),c=t.length+1,u=new Ke(t.child("")),g=this.overlays.getIteratorFrom(u);for(;g.hasNext();){const v=g.getNext().value,E=v.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===c&&v.largestBatchId>r&&i.set(v.getKey(),v)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let c=new Bn((E,M)=>E-M);const u=this.overlays.getIterator();for(;u.hasNext();){const E=u.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let M=c.get(E.largestBatchId);null===M&&(M=bi(),c=c.insert(E.largestBatchId,M)),M.set(E.getKey(),E)}}const g=bi(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((E,M)=>g.set(E,M)),!(g.size()>=i)););return oe.resolve(g)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new BE(t,r));let c=this.ls.get(t);void 0===c&&(c=jt(),this.ls.set(t,c)),this.ls.set(t,c.add(r.key))}}class tA{constructor(){this.fs=new Zn(Di.ds),this.ws=new Zn(Di._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Di(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Di(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ke(new rn([])),r=new Di(t,e),i=new Di(t,e+1),c=[];return this.ws.forEachInRange([r,i],u=>{this.ys(u),c.push(u.key)}),c}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ke(new rn([])),r=new Di(t,e),i=new Di(t,e+1);let c=jt();return this.ws.forEachInRange([r,i],u=>{c=c.add(u.key)}),c}containsKey(e){const t=new Di(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Di{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ke.comparator(e.key,t.key)||Bt(e.As,t.As)}static _s(e,t){return Bt(e.As,t.As)||Ke.comparator(e.key,t.key)}}class qN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Zn(Di.ds)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const c=this.vs;this.vs++;const u=new LE(c,t,r,i);this.mutationQueue.push(u);for(const g of i)this.Rs=this.Rs.add(new Di(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return oe.resolve(u)}lookupMutationBatch(e,t){return oe.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),c=i<0?0:i;return oe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Di(t,0),i=new Di(t,Number.POSITIVE_INFINITY),c=[];return this.Rs.forEachInRange([r,i],u=>{const g=this.Ps(u.As);c.push(g)}),oe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zn(Bt);return t.forEach(i=>{const c=new Di(i,0),u=new Di(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([c,u],g=>{r=r.add(g.As)})}),oe.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let c=r;Ke.isDocumentKey(c)||(c=c.child(""));const u=new Di(new Ke(c),0);let g=new Zn(Bt);return this.Rs.forEachWhile(v=>{const E=v.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(g=g.add(v.As)),!0)},u),oe.resolve(this.Vs(g))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){pt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return oe.forEach(t.mutations,i=>{const c=new Di(i.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Di(t,0),i=this.Rs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class WN{constructor(e){this.Ds=e,this.docs=new Bn(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),c=i?i.size:0,u=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():Un.newInvalidDocument(t))}getEntries(e,t){let r=di();return t.forEach(i=>{const c=this.docs.get(i);r=r.insert(i,c?c.document.mutableCopy():Un.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let c=di();const u=t.path,g=new Ke(u.child("")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:E,value:{document:M}}=v.getNext();if(!u.isPrefixOf(E.path))break;E.path.length>u.length+1||ui(Qv(M),r)<=0||(i.has(M.key)||l_(t,M))&&(c=c.insert(M.key,M.mutableCopy()))}return oe.resolve(c)}getAllFromCollectionGroup(e,t,r,i){it()}Cs(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ZN(this)}getSize(e){return oe.resolve(this.size)}}class ZN extends CO{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class KN{constructor(e){this.persistence=e,this.xs=new Gc(t=>Ha(t),hh),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Ns=0,this.ks=new tA,this.targetCount=0,this.Ms=Wp.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),oe.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Wp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Fn(t),oe.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const c=[];return this.xs.forEach((u,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.xs.delete(u),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),i++)}),oe.waitFor(c).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,c=[];return i&&t.forEach(u=>{c.push(i.markPotentiallyOrphaned(e,u))}),oe.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.ks.containsKey(t))}}class nA{constructor(e,t){this.$s={},this.overlays={},this.Os=new as(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new KN(this),this.indexManager=new NN,this.remoteDocumentCache=new WN(r=>this.referenceDelegate.Ls(r)),this.serializer=new JP(t),this.qs=new GN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new qN(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new YN(this.Os.next());return this.referenceDelegate.Us(),r(i).next(c=>this.referenceDelegate.Ks(i).next(()=>c)).toPromise().then(c=>(i.raiseOnCommittedEvent(),c))}Gs(e,t){return oe.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class YN extends rE{constructor(e){super(),this.currentSequenceNumber=e}}class ZE{constructor(e){this.persistence=e,this.Qs=new tA,this.js=null}static zs(e){return new ZE(e)}get Ws(){if(this.js)return this.js;throw it()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(c=>this.Ws.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ws,r=>{const i=Ke.fromPath(r);return this.Hs(e,i).next(c=>{c||t.removeEntry(i,Ct.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return oe.or([()=>oe.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class QN{constructor(e){this.serializer=e}O(e,t,r,i){const c=new vp("createOrUpgrade",t);var g;r<1&&i>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hu,{unique:!0}),g.createObjectStore("documentMutations"),TO(e),function(g){g.createObjectStore("remoteDocuments")}(e));let u=oe.resolve();return r<3&&i>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),TO(e)),u=u.next(()=>function(g){const v=g.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",E)}(c))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(g,v){return v.store("mutations").j().next(E=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hu,{unique:!0});const M=v.store("mutations"),P=E.map(B=>M.put(B));return oe.waitFor(P)})}(e,c))),u=u.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Ys(c))),r<6&&i>=6&&(u=u.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(c)))),r<7&&i>=7&&(u=u.next(()=>this.Zs(c))),r<8&&i>=8&&(u=u.next(()=>this.ti(e,c))),r<9&&i>=9&&(u=u.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.ei(c))),r<11&&i>=11&&(u=u.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(g){const v=g.createObjectStore("documentOverlays",{keyPath:vS});v.createIndex("collectionPathOverlayIndex",CS,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",hE,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(g){const v=g.createObjectStore("remoteDocumentsV14",{keyPath:kP});v.createIndex("documentKeyIndex",pS),v.createIndex("collectionGroupIndex",NP)}(e)).next(()=>this.ni(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.si(e,c))),r<15&&i>=15&&(u=u.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:lE}).createIndex("sequenceNumberIndex",yS,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:uE}).createIndex("documentKeyIndex",dE,{unique:!1})}(e))),u}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=zE(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>oe.forEach(i,c=>{const u=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",u).next(g=>oe.forEach(g,v=>{pt(v.userId===c.userId);const E=Gp(this.serializer,v);return fO(e,c.userId,E).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const c=[];return r.X((u,g)=>{const v=new rn(u),E=[0,Bi(v)];c.push(t.get(E).next(M=>M?oe.resolve():t.put({targetId:0,path:Bi(v),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>oe.waitFor(c))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:cE});const r=t.store("collectionParents"),i=new eA,c=u=>{if(i.add(u)){const g=u.lastSegment(),v=u.popLast();return r.put({collectionId:g,parent:Bi(v)})}};return t.store("remoteDocuments").X({Y:!0},(u,g)=>{const v=new rn(u);return c(v.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([u,g,v],E)=>{const M=yo(g);return c(M.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const c=PC(i),u=eO(this.serializer,c);return t.put(u)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((c,u)=>{const g=t.store("remoteDocumentsV14"),v=(E=u,E.document?new Ke(rn.fromString(E.document.name).popFirst(5)):E.noDocument?Ke.fromSegments(E.noDocument.path):E.unknownDocument?Ke.fromSegments(E.unknownDocument.path):it()).path.toArray();var E;const M={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(g.put(M))}).next(()=>oe.waitFor(i))}si(e,t){const r=t.store("mutations"),i=wO(this.serializer),c=new nA(ZE.zs,this.serializer.fe);return r.j().next(u=>{const g=new Map;return u.forEach(v=>{var E;let M=null!==(E=g.get(v.userId))&&void 0!==E?E:jt();Gp(this.serializer,v).keys().forEach(P=>M=M.add(P)),g.set(v.userId,M)}),oe.forEach(g,(v,E)=>{const M=new zr(E),P=jE.de(this.serializer,M),B=c.getIndexManager(M),q=qE.de(M,this.serializer,B,c.referenceDelegate);return new DO(i,q,P,B).recalculateAndSaveOverlaysForDocumentKeys(new iC(t,as.ct),v).next()})})}}function TO(n){n.createObjectStore("targetDocuments",{keyPath:mS}).createIndex("documentTargetsIndex",_S,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gS,{unique:!0}),n.createObjectStore("targetGlobal")}const rA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class iA{constructor(e,t,r,i,c,u,g,v,E,M,P=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=c,this.window=u,this.document=g,this.ri=E,this.oi=M,this.ui=P,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=B=>Promise.resolve(),!iA.D())throw new Pe(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UN(this,i),this.di=t+"main",this.serializer=new JP(v),this.wi=new Gs(this.di,this.ui,new QN(this.serializer)),this.Bs=new LN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=wO(this.serializer),this.qs=new AN,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===M&&_r("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(de.FAILED_PRECONDITION,rA);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new as(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>YE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Qo(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return LC(e).get("owner").next(t=>oe.resolve(this.Ri(t)))}Pi(e){return YE(e).delete(this.clientId)}bi(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=qr(r,"clientMetadata");return i.j().next(c=>{const u=e.Si(c,18e5),g=c.filter(v=>-1===u.indexOf(v));return oe.forEach(g,v=>i.delete(v.clientId)).next(()=>g)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?oe.resolve(!0):LC(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Pe(de.FAILED_PRECONDITION,rA);return!1}}return!(!this.networkEnabled||!this.inForeground)||YE(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,g=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new iC(t,as.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>YE(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return qE.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new FN(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return jE.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",c=15===(u=this.ui)?gE:14===u?rC:13===u?nC:12===u?pE:11===u?fE:void it();var u;let g;return this.wi.runTransaction(e,i,c,v=>(g=new iC(v,this.Os?this.Os.next():as.ct),"readwrite-primary"===t?this.Ti(g).next(E=>!!E||this.Ei(g)).next(E=>{if(!E)throw _r(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Pe(de.FAILED_PRECONDITION,du);return r(g)}).next(E=>this.vi(g).next(()=>E)):this.Oi(g).next(()=>r(g)))).then(v=>(g.raiseOnCommittedEvent(),v))}Oi(e){return LC(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(de.FAILED_PRECONDITION,rA)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return LC(e).put("owner",t)}static D(){return Gs.D()}Ai(e){const t=LC(e);return t.get("owner").next(r=>this.Ri(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(_r(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,an.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _r("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){_r("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function LC(n){return qr(n,"owner")}function YE(n){return qr(n,"clientMetadata")}function sA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class oA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=jt(),i=jt();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}return new oA(e,t.fromCache,r,i)}}class SO{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(c=>c||this.Gi(e,t,i,r)).next(c=>c||this.Qi(e,t))}Ki(e,t){if(SE(t))return oe.resolve(null);let r=cs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Np(t,null,"F"),r=cs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const u=jt(...c);return this.Ui.getDocuments(e,u).next(g=>this.indexManager.getMinOffset(e,r).next(v=>{const E=this.ji(t,g);return this.zi(t,E,u,v.readTime)?this.Ki(e,Np(t,null,"F")):this.Wi(e,E,t,v)}))})))}Gi(e,t,r,i){return SE(t)||i.isEqual(Ct.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(c=>{const u=this.ji(t,c);return this.zi(t,u,r,i)?this.Qi(e,t):(Zv()<=ka.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yC(t)),this.Wi(e,u,t,nE(i,-1)))})}ji(e,t){let r=new Zn(RS(e));return t.forEach((i,c)=>{l_(e,c)&&(r=r.add(c))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(i)>0)}Qi(e,t){return Zv()<=ka.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",yC(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ms.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(c=>(t.forEach(u=>{c=c.insert(u.key,u)}),c))}}class JN{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Bn(Bt),this.Yi=new Gc(c=>Ha(c),hh),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DO(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function AO(n,e,t,r){return new JN(n,e,t,r)}function MO(n,e){return aA.apply(this,arguments)}function aA(){return aA=(0,ve.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(c=>(i=c,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(c=>{const u=[],g=[];let v=jt();for(const E of i){u.push(E.batchId);for(const M of E.mutations)v=v.add(M.key)}for(const E of c){g.push(E.batchId);for(const M of E.mutations)v=v.add(M.key)}return t.localDocuments.getDocuments(r,v).next(E=>({er:E,removedBatchIds:u,addedBatchIds:g}))})})}),aA.apply(this,arguments)}function XN(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),c=t.Zi.newChangeBuffer({trackRemovals:!0});return function(u,g,v,E){const M=v.batch,P=M.keys();let B=oe.resolve();return P.forEach(q=>{B=B.next(()=>E.getEntry(g,q)).next(ae=>{const Oe=v.docVersions.get(q);pt(null!==Oe),ae.version.compareTo(Oe)<0&&(M.applyToRemoteDocument(ae,v),ae.isValidDocument()&&(ae.setReadTime(v.commitVersion),E.addEntry(ae)))})}),B.next(()=>u.mutationQueue.removeMutationBatch(g,M))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let g=jt();for(let v=0;v<u.mutationResults.length;++v)u.mutationResults[v].transformResults.length>0&&(g=g.add(u.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function xO(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function eF(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const u=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const g=[];e.targetChanges.forEach((M,P)=>{const B=i.get(P);if(!B)return;g.push(t.Bs.removeMatchingKeys(c,M.removedDocuments,P).next(()=>t.Bs.addMatchingKeys(c,M.addedDocuments,P)));let q=B.withSequenceNumber(c.currentSequenceNumber);var ae,Oe,Se;null!==e.targetMismatches.get(P)?q=q.withResumeToken(Ar.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):M.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(M.resumeToken,r)),i=i.insert(P,q),Oe=q,Se=M,(0===(ae=B).resumeToken.approximateByteSize()||Oe.snapshotVersion.toMicroseconds()-ae.snapshotVersion.toMicroseconds()>=3e8||Se.addedDocuments.size+Se.modifiedDocuments.size+Se.removedDocuments.size>0)&&g.push(t.Bs.updateTargetData(c,q))});let v=di(),E=jt();if(e.documentUpdates.forEach(M=>{e.resolvedLimboDocuments.has(M)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(c,M))}),g.push(PO(c,u,e.documentUpdates).next(M=>{v=M.nr,E=M.sr})),!r.isEqual(Ct.min())){const M=t.Bs.getLastRemoteSnapshotVersion(c).next(P=>t.Bs.setTargetsMetadata(c,c.currentSequenceNumber,r));g.push(M)}return oe.waitFor(g).next(()=>u.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,v,E)).next(()=>v)}).then(c=>(t.Ji=i,c))}function PO(n,e,t){let r=jt(),i=jt();return t.forEach(c=>r=r.add(c)),e.getEntries(n,r).next(c=>{let u=di();return t.forEach((g,v)=>{const E=c.get(g);v.isFoundDocument()!==E.isFoundDocument()&&(i=i.add(g)),v.isNoDocument()&&v.version.isEqual(Ct.min())?(e.removeEntry(g,v.readTime),u=u.insert(g,v)):!E.isValidDocument()||v.version.compareTo(E.version)>0||0===v.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(v),u=u.insert(g,v)):Ve("LocalStore","Ignoring outdated watch update for ",g,". Current version:",E.version," Watch version:",v.version)}),{nr:u,sr:i}})}function tF(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function __(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(c=>c?(i=c,oe.resolve(i)):t.Bs.allocateTargetId(r).next(u=>(i=new bu(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function y_(n,e,t){return cA.apply(this,arguments)}function cA(){return cA=(0,ve.Z)(function*(n,e,t){const r=Qe(n),i=r.Ji.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Qo(u))throw u;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),cA.apply(this,arguments)}function QE(n,e,t){const r=Qe(n);let i=Ct.min(),c=jt();return r.persistence.runTransaction("Execute query","readonly",u=>function(g,v,E){const M=Qe(g),P=M.Yi.get(E);return void 0!==P?oe.resolve(M.Ji.get(P)):M.Bs.getTargetData(v,E)}(r,u,cs(e)).next(g=>{if(g)return i=g.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(u,g.targetId).next(v=>{c=v})}).next(()=>r.Hi.getDocumentsMatchingQuery(u,e,t?i:Ct.min(),t?c:jt())).next(g=>(kO(r,OS(e),g),{documents:g,ir:c})))}function OO(n,e){const t=Qe(n),r=Qe(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",c=>r.le(c,e).next(u=>u?u.target:null))}function RO(n,e){const t=Qe(n),r=t.Xi.get(e)||Ct.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,nE(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(kO(t,e,i),i))}function kO(n,e,t){let r=n.Xi.get(e)||Ct.min();t.forEach((i,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),n.Xi.set(e,r)}function lA(){return lA=(0,ve.Z)(function*(n,e,t,r){const i=Qe(n);let c=jt(),u=di();for(const E of t){const M=e.rr(E.metadata.name);E.document&&(c=c.add(M));const P=e.ur(E);P.setReadTime(e.cr(E.metadata.readTime)),u=u.insert(M,P)}const g=i.Zi.newChangeBuffer({trackRemovals:!0}),v=yield __(i,(E=r,cs(_u(rn.fromString(`__bundle__/docs/${E}`)))));var E;return i.persistence.runTransaction("Apply bundle documents","readwrite",E=>PO(E,g,u).next(M=>(g.apply(E),M)).next(M=>i.Bs.removeMatchingKeysForTargetId(E,v.targetId).next(()=>i.Bs.addMatchingKeys(E,c,v.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(E,M.nr,M.sr)).next(()=>M.nr)))}),lA.apply(this,arguments)}function rF(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,ve.Z)(function*(n,e,t=jt()){const r=yield __(n,cs(ZS(e.bundledQuery))),i=Qe(n);return i.persistence.runTransaction("Save named query","readwrite",c=>{const u=sr(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.qs.saveNamedQuery(c,e);const g=r.withResumeToken(Ar.EMPTY_BYTE_STRING,u);return i.Ji=i.Ji.insert(g.targetId,g),i.Bs.updateTargetData(c,g).next(()=>i.Bs.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>i.Bs.addMatchingKeys(c,t,r.targetId)).next(()=>i.qs.saveNamedQuery(c,e))})}),uA.apply(this,arguments)}function NO(n,e){return`firestore_clients_${n}_${e}`}function FO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function dA(n,e){return`firestore_targets_${n}_${e}`}class JE{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let c,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(c=new Pe(i.error.code,i.error.message))),u?new JE(e,t,i.state,c):(_r("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class VC{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(i=new Pe(r.error.code,r.error.message))),c?new VC(e,r.state,i):(_r("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class XE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,c=fh();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=r_(r.activeTargetIds[u]),c=c.add(r.activeTargetIds[u]);return i?new XE(e,c):(_r("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class hA{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new hA(t.clientId,t.onlineState):(_r("SharedClientState",`Failed to parse online state: ${e}`),null)}}class fA{constructor(){this.activeTargetIds=fh()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pA{constructor(e,t,r,i,c){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Bn(Bt),this.started=!1,this.yr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.pr=NO(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new fA),this.Tr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const c=e.getItem(NO(e.persistenceKey,i));if(c){const u=XE.ar(i,c);u&&(e.gr=e.gr.insert(u.clientId,u))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(dA(this.persistenceKey,e));if(r){const i=VC.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(dA(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void _r("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(c){let u=as.ct;if(null!=c)try{const g=JSON.parse(c);pt("number"==typeof g),u=g}catch(g){_r("SharedClientState","Failed to read sequence number from WebStorage",g)}return u}(r.newValue);i!==as.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(c=>t.syncEngine.Qr(c)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new JE(this.currentUser,e,t,r),c=FO(this.persistenceKey,this.currentUser,e);this.setItem(c,i.hr())}Cr(e){const t=FO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=dA(this.persistenceKey,e),c=new VC(e,t,r);this.setItem(i,c.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return XE.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return JE.ar(new zr(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return VC.ar(i,t)}br(e){return hA.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),c=this.Sr(r),u=[],g=[];return c.forEach(v=>{i.has(v)||u.push(v)}),i.forEach(v=>{c.has(v)||g.push(v)}),this.syncEngine.Wr(u,g).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=fh();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class LO{constructor(){this.Hr=new fA,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new fA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iF{Yr(e){}shutdown(){}}class VO{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let eb=null;function gA(){return null===eb?eb=268435456+Math.round(2147483648*Math.random()):eb++,"0x"+eb.toString(16)}const sF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oF{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const us="WebChannelConnection";class aF extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,c){const u=gA(),g=this.To(e,t);Ve("RestConnection",`Sending RPC '${e}' ${u}:`,g,r);const v={};return this.Eo(v,i,c),this.Ao(e,g,v,r).then(E=>(Ve("RestConnection",`Received RPC '${e}' ${u}: `,E),E),E=>{throw os("RestConnection",`RPC '${e}' ${u} failed with error: `,E,"url: ",g,"request:",r),E})}vo(e,t,r,i,c,u){return this.Io(e,t,r,i,c)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+lu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,c)=>e[c]=i),r&&r.headers.forEach((i,c)=>e[c]=i)}To(e,t){return`${this.mo}/v1/${t}:${sF[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const c=gA();return new Promise((u,g)=>{const v=new YI;v.setWithCredentials(!0),v.listenOnce(fp.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case qv.NO_ERROR:const M=v.getResponseJson();Ve(us,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(M)),u(M);break;case qv.TIMEOUT:Ve(us,`RPC '${e}' ${c} timed out`),g(new Pe(de.DEADLINE_EXCEEDED,"Request time out"));break;case qv.HTTP_ERROR:const P=v.getStatus();if(Ve(us,`RPC '${e}' ${c} failed with status:`,P,"response text:",v.getResponseText()),P>0){let B=v.getResponseJson();Array.isArray(B)&&(B=B[0]);const q=B?.error;if(q&&q.status&&q.message){const ae=function(Oe){const Se=Oe.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(Se)>=0?Se:de.UNKNOWN}(q.status);g(new Pe(ae,q.message))}else g(new Pe(de.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new Pe(de.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Ve(us,`RPC '${e}' ${c} completed.`)}});const E=JSON.stringify(i);Ve(us,`RPC '${e}' ${c} sending request:`,i),v.send(t,"POST",E,r,15)})}Ro(e,t,r){const i=gA(),c=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=iS(),g=sS(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;void 0!==E&&(v.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(v.xmlHttpFactory=new KI({})),this.Eo(v.initMessageHeaders,t,r),v.encodeInitMessageHeaders=!0;const M=c.join("");Ve(us,`Creating RPC '${e}' stream ${i}: ${M}`,v);const P=u.createWebChannel(M,v);let B=!1,q=!1;const ae=new oF({ro:Se=>{q?Ve(us,`Not sending because RPC '${e}' stream ${i} is closed:`,Se):(B||(Ve(us,`Opening RPC '${e}' stream ${i} transport.`),P.open(),B=!0),Ve(us,`RPC '${e}' stream ${i} sending:`,Se),P.send(Se))},oo:()=>P.close()}),Oe=(Se,et,wt)=>{Se.listen(et,It=>{try{wt(It)}catch(Ft){setTimeout(()=>{throw Ft},0)}})};return Oe(P,pp.EventType.OPEN,()=>{q||Ve(us,`RPC '${e}' stream ${i} transport opened.`)}),Oe(P,pp.EventType.CLOSE,()=>{q||(q=!0,Ve(us,`RPC '${e}' stream ${i} transport closed`),ae.wo())}),Oe(P,pp.EventType.ERROR,Se=>{q||(q=!0,os(us,`RPC '${e}' stream ${i} transport errored:`,Se),ae.wo(new Pe(de.UNAVAILABLE,"The operation could not be completed")))}),Oe(P,pp.EventType.MESSAGE,Se=>{var et;if(!q){const wt=Se.data[0];pt(!!wt);const It=wt,Ft=It.error||(null===(et=It[0])||void 0===et?void 0:et.error);if(Ft){Ve(us,`RPC '${e}' stream ${i} received error:`,Ft);const Zt=Ft.status;let cn=function(cg){const uN=s[cg];if(void 0!==uN)return l(uN)}(Zt),hs=Ft.message;void 0===cn&&(cn=de.INTERNAL,hs="Unknown error status: "+Zt+" with message "+Ft.message),q=!0,ae.wo(new Pe(cn,hs)),P.close()}else Ve(us,`RPC '${e}' stream ${i} received:`,wt),ae._o(wt)}}),Oe(g,ZI.STAT_EVENT,Se=>{Se.stat===Wv.PROXY?Ve(us,`RPC '${e}' stream ${i} detected buffering proxy`):Se.stat===Wv.NOPROXY&&Ve(us,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{ae.fo()},0),ae}}function BO(){return typeof window<"u"?window:null}function tb(){return typeof document<"u"?document:null}function BC(n){return new SC(n,!0)}class mA{constructor(e,t,r=1e3,i=1.5,c=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=c,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class UO{constructor(e,t,r,i,c,u,g,v){this.ii=e,this.$o=r,this.Oo=i,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new mA(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ve.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ve.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(_r(t.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Pe(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,ve.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cF extends UO{constructor(e,t,r,i,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=c}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function CN(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:it(),i=e.targetChange.targetIds||[],c=function(v,E){return v.useProto3Json?(pt(void 0===E||"string"==typeof E),Ar.fromBase64String(E||"")):(pt(void 0===E||E instanceof Uint8Array),Ar.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,g=u&&function(v){const E=void 0===v.code?de.UNKNOWN:l(v.code);return new Pe(E,v.message||"")}(u);t=new Ye(r,i,c,g||null)}else if("documentChange"in e){const r=e.documentChange,i=Zc(n,r.document.name),c=sr(r.document.updateTime),u=r.document.createTime?sr(r.document.createTime):Ct.min(),g=new Lr({mapValue:{fields:r.document.fields}}),v=Un.newFoundDocument(i,c,u,g);t=new Ce(r.targetIds||[],r.removedTargetIds||[],v.key,v)}else if("documentDelete"in e){const r=e.documentDelete,i=Zc(n,r.document),c=r.readTime?sr(r.readTime):Ct.min(),u=Un.newNoDocument(i,c);t=new Ce([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Zc(n,r.document);t=new Ce([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return it();{const r=e.filter,{count:i=0,unchangedNames:c}=r,u=new HP(i,c);t=new je(r.targetId,u)}}var v;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ct.min();const c=i.targetChange;return c.targetIds&&c.targetIds.length?Ct.min():c.readTime?sr(c.readTime):Ct.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=MC(this.serializer),t.addTarget=function(i,c){let u;const g=c.target;if(u=Pp(g)?{documents:WP(i,g)}:{query:WS(i,g)},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=h_(i,c.resumeToken);const v=Up(i,c.expectedCount);null!==v&&(u.expectedCount=v)}else if(c.snapshotVersion.compareTo(Ct.min())>0){u.readTime=Wc(i,c.snapshotVersion.toTimestamp());const v=Up(i,c.expectedCount);null!==v&&(u.expectedCount=v)}return u}(this.serializer,e);const r=function IN(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return it()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=MC(this.serializer),t.removeTarget=e,this.Wo(t)}}class lF extends UO{constructor(e,t,r,i,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=c,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function wN(n,e){return n&&n.length>0?(pt(void 0!==e),n.map(t=>function(r,i){let c=sr(r.updateTime?r.updateTime:i);return c.isEqual(Ct.min())&&(c=sr(i)),new kE(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=sr(e.commitTime);return this.listener.cu(r,t)}return pt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=MC(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>xC(this.serializer,r))};this.Wo(t)}}class uF extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Pe(de.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,c])=>this.connection.Io(e,t,r,i,c)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(de.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.vo(e,t,r,c,u,i)).catch(c=>{throw"FirebaseError"===c.name?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Pe(de.UNKNOWN,c.toString())})}terminate(){this.lu=!0}}class hF{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(_r(t),this.mu=!1):Ve("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class fF{constructor(e,t,r,i,c){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=c,this.Pu.Yr(g=>{r.enqueueAndForget((0,ve.Z)(function*(){var v;wh(u)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,ve.Z)(function*(E){const M=Qe(E);M.vu.add(4),yield v_(M),M.bu.set("Unknown"),M.vu.delete(4),yield UC(M)}),function(E){return v.apply(this,arguments)})(u))}))}),this.bu=new hF(r,i)}}function UC(n){return yA.apply(this,arguments)}function yA(){return yA=(0,ve.Z)(function*(n){if(wh(n))for(const e of n.Ru)yield e(!0)}),yA.apply(this,arguments)}function v_(n){return vA.apply(this,arguments)}function vA(){return vA=(0,ve.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),vA.apply(this,arguments)}function nb(n,e){const t=Qe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),IA(t)?wA(t):w_(t).Ko()&&CA(t,e))}function jC(n,e){const t=Qe(n),r=w_(t);t.Au.delete(e),r.Ko()&&jO(t,e),0===t.Au.size&&(r.Ko()?r.jo():wh(t)&&t.bu.set("Unknown"))}function CA(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ct.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}w_(n).su(e)}function jO(n,e){n.Vu.qt(e),w_(n).iu(e)}function wA(n){n.Vu=new Rt({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),w_(n).start(),n.bu.gu()}function IA(n){return wh(n)&&!w_(n).Uo()&&n.Au.size>0}function wh(n){return 0===Qe(n).vu.size}function HO(n){n.Vu=void 0}function pF(n){return EA.apply(this,arguments)}function EA(){return EA=(0,ve.Z)(function*(n){n.Au.forEach((e,t)=>{CA(n,e)})}),EA.apply(this,arguments)}function gF(n,e){return bA.apply(this,arguments)}function bA(){return bA=(0,ve.Z)(function*(n,e){HO(n),IA(n)?(n.bu.Iu(e),wA(n)):n.bu.set("Unknown")}),bA.apply(this,arguments)}function mF(n,e,t){return DA.apply(this,arguments)}function DA(){return DA=(0,ve.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof Ye&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(i,c){const u=c.cause;for(const g of c.targetIds)i.Au.has(g)&&(yield i.remoteSyncer.rejectListen(g,u),i.Au.delete(g),i.Vu.removeTarget(g))}),function(i,c){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rb(n,r)}else if(e instanceof Ce?n.Vu.Ht(e):e instanceof je?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Ct.min()))try{const r=yield xO(n.localStore);t.compareTo(r)>=0&&(yield function(i,c){const u=i.Vu.ce(c);return u.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const E=i.Au.get(v);E&&i.Au.set(v,E.withResumeToken(g.resumeToken,c))}}),u.targetMismatches.forEach((g,v)=>{const E=i.Au.get(g);if(!E)return;i.Au.set(g,E.withResumeToken(Ar.EMPTY_BYTE_STRING,E.snapshotVersion)),jO(i,g);const M=new bu(E.target,g,v,E.sequenceNumber);CA(i,M)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield rb(n,r)}var r}),DA.apply(this,arguments)}function rb(n,e,t){return TA.apply(this,arguments)}function TA(){return TA=(0,ve.Z)(function*(n,e,t){if(!Qo(e))throw e;n.vu.add(1),yield v_(n),n.bu.set("Offline"),t||(t=()=>xO(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield UC(n)}))}),TA.apply(this,arguments)}function $O(n,e){return e().catch(t=>rb(n,t,e))}function C_(n){return SA.apply(this,arguments)}function SA(){return SA=(0,ve.Z)(function*(n){const e=Qe(n),t=Ih(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;_F(e);)try{const i=yield tF(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,yF(e,i)}catch(i){yield rb(e,i)}GO(e)&&zO(e)}),SA.apply(this,arguments)}function _F(n){return wh(n)&&n.Eu.length<10}function yF(n,e){n.Eu.push(e);const t=Ih(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function GO(n){return wh(n)&&!Ih(n).Uo()&&n.Eu.length>0}function zO(n){Ih(n).start()}function vF(n){return AA.apply(this,arguments)}function AA(){return AA=(0,ve.Z)(function*(n){Ih(n).hu()}),AA.apply(this,arguments)}function CF(n){return MA.apply(this,arguments)}function MA(){return MA=(0,ve.Z)(function*(n){const e=Ih(n);for(const t of n.Eu)e.uu(t.mutations)}),MA.apply(this,arguments)}function wF(n,e,t){return xA.apply(this,arguments)}function xA(){return xA=(0,ve.Z)(function*(n,e,t){const r=n.Eu.shift(),i=VE.from(r,e,t);yield $O(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield C_(n)}),xA.apply(this,arguments)}function IF(n,e){return PA.apply(this,arguments)}function PA(){return PA=(0,ve.Z)(function*(n,e){var t;e&&Ih(n).ou&&(yield(t=(0,ve.Z)(function*(r,i){if(a(c=i.code)&&c!==de.ABORTED){const u=r.Eu.shift();Ih(r).Qo(),yield $O(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield C_(r)}var c}),function(r,i){return t.apply(this,arguments)})(n,e)),GO(n)&&zO(n)}),PA.apply(this,arguments)}function qO(n,e){return OA.apply(this,arguments)}function OA(){return OA=(0,ve.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=wh(t);t.vu.add(3),yield v_(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield UC(t)}),OA.apply(this,arguments)}function RA(n,e){return kA.apply(this,arguments)}function kA(){return kA=(0,ve.Z)(function*(n,e){const t=Qe(n);e?(t.vu.delete(2),yield UC(t)):e||(t.vu.add(2),yield v_(t),t.bu.set("Unknown"))}),kA.apply(this,arguments)}function w_(n){return n.Su||(n.Su=function(e,t,r){const i=Qe(e);return i.fu(),new cF(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:pF.bind(null,n),ao:gF.bind(null,n),nu:mF.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Su.Qo(),IA(n)?wA(n):n.bu.set("Unknown")):(yield n.Su.stop(),HO(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Ih(n){return n.Du||(n.Du=function(e,t,r){const i=Qe(e);return i.fu(),new lF(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:vF.bind(null,n),ao:IF.bind(null,n),au:CF.bind(null,n),cu:wF.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Du.Qo(),yield C_(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class NA{constructor(e,t,r,i,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=c,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,c){const u=Date.now()+r,g=new NA(e,t,u,i,c);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function I_(n,e){if(_r("AsyncQueue",`${e}: ${n}`),Qo(n))return new Pe(de.UNAVAILABLE,`${e}: ${n}`);throw n}class E_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=Lp(),this.sortedSet=new Bn(this.comparator)}static emptySet(e){return new E_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof E_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,c=r.getNext().key;if(!i.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new E_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class WO{constructor(){this.Cu=new Bn(Ke.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):it():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class b_{constructor(e,t,r,i,c,u,g,v,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=E}static fromInitialDocuments(e,t,r,i,c){const u=[];return t.forEach(g=>{u.push({type:0,doc:g})}),new b_(e,t,E_.emptySet(t),u,r,i,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class EF{constructor(){this.Nu=void 0,this.listeners=[]}}class bF{constructor(){this.queries=new Gc(e=>ME(e),Fp),this.onlineState="Unknown",this.ku=new Set}}function FA(n,e){return LA.apply(this,arguments)}function LA(){return LA=(0,ve.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1,c=t.queries.get(r);if(c||(i=!0,c=new EF),i)try{c.Nu=yield t.onListen(r)}catch(u){const g=I_(u,`Initialization of query '${yC(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,c),c.listeners.push(e),e.Mu(t.onlineState),c.Nu&&e.$u(c.Nu)&&UA(t)}),LA.apply(this,arguments)}function VA(n,e){return BA.apply(this,arguments)}function BA(){return BA=(0,ve.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1;const c=t.queries.get(r);if(c){const u=c.listeners.indexOf(e);u>=0&&(c.listeners.splice(u,1),i=0===c.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),BA.apply(this,arguments)}function DF(n,e){const t=Qe(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const g of u.listeners)g.$u(i)&&(r=!0);u.Nu=i}}r&&UA(t)}function TF(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const c of i.listeners)c.onError(t);r.queries.delete(e)}function UA(n){n.ku.forEach(e=>{e.next()})}class jA{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new b_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=b_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class SF{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class ZO{constructor(e){this.serializer=e}rr(e){return Zc(this.serializer,e)}ur(e){return e.metadata.exists?qP(this.serializer,e.document,!1):Un.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return sr(e)}}class AF{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=KO(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=rn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new ZO(this.serializer);for(const i of e)if(i.metadata.queries){const c=r.rr(i.metadata.name);for(const u of i.metadata.queries){const g=(t.get(u)||jt()).add(c);t.set(u,g)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function nF(n,e,t,r){return lA.apply(this,arguments)}(e.localStore,new ZO(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield rF(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function KO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class YO{constructor(e){this.key=e}}class QO{constructor(e){this.key=e}}class JO{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=jt(),this.mutatedKeys=jt(),this.tc=RS(e),this.ec=new E_(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new WO,i=t?t.ec:this.ec;let c=t?t.mutatedKeys:this.mutatedKeys,u=i,g=!1;const v="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,E="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((M,P)=>{const B=i.get(M),q=l_(this.query,P)?P:null,ae=!!B&&this.mutatedKeys.has(B.key),Oe=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Se=!1;B&&q?B.data.isEqual(q.data)?ae!==Oe&&(r.track({type:3,doc:q}),Se=!0):this.rc(B,q)||(r.track({type:2,doc:q}),Se=!0,(v&&this.tc(q,v)>0||E&&this.tc(q,E)<0)&&(g=!0)):!B&&q?(r.track({type:0,doc:q}),Se=!0):B&&!q&&(r.track({type:1,doc:B}),Se=!0,(v||E)&&(g=!0)),Se&&(q?(u=u.add(q),c=Oe?c.add(M):c.delete(M)):(u=u.delete(M),c=c.delete(M)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const M="F"===this.query.limitType?u.last():u.first();u=u.delete(M.key),c=c.delete(M.key),r.track({type:1,doc:M})}return{ec:u,ic:r,zi:g,mutatedKeys:c}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const c=e.ic.xu();c.sort((E,M)=>function(P,B){const q=ae=>{switch(ae){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return q(P)-q(B)}(E.type,M.type)||this.tc(E.doc,M.doc)),this.oc(r);const u=t?this.uc():[],g=0===this.Zu.size&&this.current?1:0,v=g!==this.Xu;return this.Xu=g,0!==c.length||v?{snapshot:new b_(this.query,e.ec,i,c,e.mutatedKeys,0===g,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:u}:{cc:u}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new WO,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=jt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new QO(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new YO(r))}),t}hc(e){this.Yu=e.ir,this.Zu=jt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return b_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class MF{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class xF{constructor(e){this.key=e,this.fc=!1}}class PF{constructor(e,t,r,i,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.dc={},this.wc=new Gc(g=>ME(g),Fp),this._c=new Map,this.mc=new Set,this.gc=new Bn(Ke.comparator),this.yc=new Map,this.Ic=new tA,this.Tc={},this.Ec=new Map,this.Ac=Wp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function OF(n,e){return HA.apply(this,arguments)}function HA(){return HA=(0,ve.Z)(function*(n,e){const t=dM(n);let r,i;const c=t.wc.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),i=c.view.lc();else{const u=yield __(t.localStore,cs(e)),g=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield $A(t,e,r,"current"===g,u.resumeToken),t.isPrimaryClient&&nb(t.remoteStore,u)}return i}),HA.apply(this,arguments)}function $A(n,e,t,r,i){return GA.apply(this,arguments)}function GA(){return GA=(0,ve.Z)(function*(n,e,t,r,i){n.Rc=(P,B,q)=>{return(ae=(0,ve.Z)(function*(Oe,Se,et,wt){let It=Se.view.sc(et);It.zi&&(It=yield QE(Oe.localStore,Se.query,!1).then(({documents:cn})=>Se.view.sc(cn,It)));const Ft=wt&&wt.targetChanges.get(Se.targetId),Zt=Se.view.applyChanges(It,Oe.isPrimaryClient,Ft);return eM(Oe,Se.targetId,Zt.cc),Zt.snapshot}),function(Oe,Se,et,wt){return ae.apply(this,arguments)})(n,P,B,q);var ae};const c=yield QE(n.localStore,e,!0),u=new JO(e,c.ir),g=u.sc(c.documents),v=X.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),E=u.applyChanges(g,n.isPrimaryClient,v);eM(n,t,E.cc);const M=new MF(e,t,u);return n.wc.set(e,M),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),E.snapshot}),GA.apply(this,arguments)}function RF(n,e){return zA.apply(this,arguments)}function zA(){return zA=(0,ve.Z)(function*(n,e){const t=Qe(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(c=>!Fp(c,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield y_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),jC(t.remoteStore,r.targetId),D_(t,r.targetId)}).catch(Bc))):(D_(t,r.targetId),yield y_(t.localStore,r.targetId,!0))}),zA.apply(this,arguments)}function qA(){return qA=(0,ve.Z)(function*(n,e,t){const r=hM(n);try{const i=yield function(c,u){const g=Qe(c),v=On.now(),E=u.reduce((B,q)=>B.add(q.key),jt());let M,P;return g.persistence.runTransaction("Locally write mutations","readwrite",B=>{let q=di(),ae=jt();return g.Zi.getEntries(B,E).next(Oe=>{q=Oe,q.forEach((Se,et)=>{et.isValidDocument()||(ae=ae.add(Se))})}).next(()=>g.localDocuments.getOverlayedDocuments(B,q)).next(Oe=>{M=Oe;const Se=[];for(const et of u){const wt=jS(et,M.get(et.key).overlayedDocument);null!=wt&&Se.push(new qc(et.key,wt,vE(wt.value.mapValue),Rn.exists(!0)))}return g.mutationQueue.addMutationBatch(B,v,Se,u)}).next(Oe=>{P=Oe;const Se=Oe.applyToLocalDocumentSet(M,ae);return g.documentOverlayCache.saveOverlays(B,Oe.batchId,Se)})}).then(()=>({batchId:P.batchId,changes:vC(M)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,u,g){let v=c.Tc[c.currentUser.toKey()];v||(v=new Bn(Bt)),v=v.insert(u,g),c.Tc[c.currentUser.toKey()]=v}(r,i.batchId,t),yield Du(r,i.changes),yield C_(r.remoteStore)}catch(i){const c=I_(i,"Failed to persist write");t.reject(c)}}),qA.apply(this,arguments)}function XO(n,e){return WA.apply(this,arguments)}function WA(){return WA=(0,ve.Z)(function*(n,e){const t=Qe(n);try{const r=yield eF(t.localStore,e);e.targetChanges.forEach((i,c)=>{const u=t.yc.get(c);u&&(pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.fc=!0:i.modifiedDocuments.size>0?pt(u.fc):i.removedDocuments.size>0&&(pt(u.fc),u.fc=!1))}),yield Du(t,r,e)}catch(r){yield Bc(r)}}),WA.apply(this,arguments)}function eR(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((c,u)=>{const g=u.view.Mu(e);g.snapshot&&i.push(g.snapshot)}),function(c,u){const g=Qe(c);g.onlineState=u;let v=!1;g.queries.forEach((E,M)=>{for(const P of M.listeners)P.Mu(u)&&(v=!0)}),v&&UA(g)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function NF(n,e,t){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,ve.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),c=i&&i.key;if(c){let u=new Bn(Ke.comparator);u=u.insert(c,Un.newNoDocument(c,Ct.min()));const g=jt().add(c),v=new $(Ct.min(),new Map,new Bn(Bt),u,g);yield XO(r,v),r.gc=r.gc.remove(c),r.yc.delete(e),tM(r)}else yield y_(r.localStore,e,!1).then(()=>D_(r,e,t)).catch(Bc)}),ZA.apply(this,arguments)}function FF(n,e){return KA.apply(this,arguments)}function KA(){return KA=(0,ve.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=yield XN(t.localStore,e);XA(t,r,null),JA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Du(t,i)}catch(i){yield Bc(i)}}),KA.apply(this,arguments)}function LF(n,e,t){return YA.apply(this,arguments)}function YA(){return YA=(0,ve.Z)(function*(n,e,t){const r=Qe(n);try{const i=yield function(c,u){const g=Qe(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let E;return g.mutationQueue.lookupMutationBatch(v,u).next(M=>(pt(null!==M),E=M.keys(),g.mutationQueue.removeMutationBatch(v,M))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,E,u)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E)).next(()=>g.localDocuments.getDocuments(v,E))})}(r.localStore,e);XA(r,e,t),JA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Du(r,i)}catch(i){yield Bc(i)}}),YA.apply(this,arguments)}function QA(){return QA=(0,ve.Z)(function*(n,e){const t=Qe(n);wh(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const u=Qe(c);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>u.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=I_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),QA.apply(this,arguments)}function JA(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function XA(n,e,t){const r=Qe(n);let i=r.Tc[r.currentUser.toKey()];if(i){const c=i.get(e);c&&(t?c.reject(t):c.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function D_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||tR(n,r)})}function tR(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(jC(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),tM(n))}function eM(n,e,t){for(const r of t)r instanceof YO?(n.Ic.addReference(r.key,e),BF(n,r)):r instanceof QO?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||tR(n,r.key)):it()}function BF(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.mc.add(r),tM(n))}function tM(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ke(rn.fromString(e)),r=n.Ac.next();n.yc.set(r,new xF(t)),n.gc=n.gc.insert(t,r),nb(n.remoteStore,new bu(cs(_u(t.path)),r,"TargetPurposeLimboResolution",as.ct))}}function Du(n,e,t){return nM.apply(this,arguments)}function nM(){return nM=(0,ve.Z)(function*(n,e,t){const r=Qe(n),i=[],c=[],u=[];var g;r.wc.isEmpty()||(r.wc.forEach((g,v)=>{u.push(r.Rc(v,e,t).then(E=>{if((E||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,E?.fromCache?"not-current":"current"),E){i.push(E);const M=oA.Li(v.targetId,E);c.push(M)}}))}),yield Promise.all(u),r.dc.nu(i),yield(g=(0,ve.Z)(function*(v,E){const M=Qe(v);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>oe.forEach(E,B=>oe.forEach(B.Fi,q=>M.persistence.referenceDelegate.addReference(P,B.targetId,q)).next(()=>oe.forEach(B.Bi,q=>M.persistence.referenceDelegate.removeReference(P,B.targetId,q)))))}catch(P){if(!Qo(P))throw P;Ve("LocalStore","Failed to update sequence numbers: "+P)}for(const P of E){const B=P.targetId;if(!P.fromCache){const q=M.Ji.get(B),Oe=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);M.Ji=M.Ji.insert(B,Oe)}}}),function(v,E){return g.apply(this,arguments)})(r.localStore,c))}),nM.apply(this,arguments)}function UF(n,e){return rM.apply(this,arguments)}function rM(){return rM=(0,ve.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield MO(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(u=>{u.forEach(g=>{g.reject(new Pe(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Du(t,r.er)}var i}),rM.apply(this,arguments)}function jF(n,e){const t=Qe(n),r=t.yc.get(e);if(r&&r.fc)return jt().add(r.key);{let i=jt();const c=t._c.get(e);if(!c)return i;for(const u of c){const g=t.wc.get(u);i=i.unionWith(g.view.nc)}return i}}function HF(n,e){return iM.apply(this,arguments)}function iM(){return iM=(0,ve.Z)(function*(n,e){const t=Qe(n),r=yield QE(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&eM(t,e.targetId,i.cc),i}),iM.apply(this,arguments)}function $F(n,e){return sM.apply(this,arguments)}function sM(){return sM=(0,ve.Z)(function*(n,e){const t=Qe(n);return RO(t.localStore,e).then(r=>Du(t,r))}),sM.apply(this,arguments)}function GF(n,e,t,r){return oM.apply(this,arguments)}function oM(){return oM=(0,ve.Z)(function*(n,e,t,r){const i=Qe(n),c=yield function(u,g){const v=Qe(u),E=Qe(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",M=>E.Sn(M,g).next(P=>P?v.localDocuments.getDocuments(M,P):oe.resolve(null)))}(i.localStore,e);var g;null!==c?("pending"===t?yield C_(i.remoteStore):"acknowledged"===t||"rejected"===t?(XA(i,e,r||null),JA(i,e),g=e,Qe(Qe(i.localStore).mutationQueue).Cn(g)):it(),yield Du(i,c)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),oM.apply(this,arguments)}function aM(){return aM=(0,ve.Z)(function*(n,e){const t=Qe(n);if(dM(t),hM(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield nR(t,r.toArray());t.vc=!0,yield RA(t.remoteStore,!0);for(const c of i)nb(t.remoteStore,c)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((c,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(D_(t,u),y_(t.localStore,u,!0))),jC(t.remoteStore,u)}),yield i,yield nR(t,r),function(c){const u=Qe(c);u.yc.forEach((g,v)=>{jC(u.remoteStore,v)}),u.Ic.Ts(),u.yc=new Map,u.gc=new Bn(Ke.comparator)}(t),t.vc=!1,yield RA(t.remoteStore,!1)}}),aM.apply(this,arguments)}function nR(n,e,t){return cM.apply(this,arguments)}function cM(){return cM=(0,ve.Z)(function*(n,e,t){const r=Qe(n),i=[],c=[];for(const u of e){let g;const v=r._c.get(u);if(v&&0!==v.length){g=yield __(r.localStore,cs(v[0]));for(const E of v){const M=r.wc.get(E),P=yield HF(r,M);P.snapshot&&c.push(P.snapshot)}}else{const E=yield OO(r.localStore,u);g=yield __(r.localStore,E),yield $A(r,rR(E),u,!1,g.resumeToken)}i.push(g)}return r.dc.nu(c),i}),cM.apply(this,arguments)}function rR(n){return Rp(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function qF(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).$i()}function WF(n,e,t,r){return lM.apply(this,arguments)}function lM(){return lM=(0,ve.Z)(function*(n,e,t,r){const i=Qe(n);if(i.vc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const c=i._c.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const u=yield RO(i.localStore,OS(c[0])),g=$.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ar.EMPTY_BYTE_STRING);yield Du(i,u,g);break}case"rejected":yield y_(i.localStore,e,!0),D_(i,e,r);break;default:it()}}),lM.apply(this,arguments)}function ZF(n,e,t){return uM.apply(this,arguments)}function uM(){return uM=(0,ve.Z)(function*(n,e,t){const r=dM(n);if(r.vc){for(const i of e){if(r._c.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const c=yield OO(r.localStore,i),u=yield __(r.localStore,c);yield $A(r,rR(c),u.targetId,!1,u.resumeToken),nb(r.remoteStore,u)}for(const i of t)r._c.has(i)&&(yield y_(r.localStore,i,!1).then(()=>{jC(r.remoteStore,i),D_(r,i)}).catch(Bc))}}),uM.apply(this,arguments)}function dM(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=XO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NF.bind(null,e),e.dc.nu=DF.bind(null,e.eventManager),e.dc.Pc=TF.bind(null,e.eventManager),e}function hM(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LF.bind(null,e),e}class HC{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.serializer=BC(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return AO(this.persistence,new SO,e.initialUser,this.serializer)}createPersistence(e){return new nA(ZE.zs,this.serializer)}createSharedClientState(e){return new LO}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class fM extends HC{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield hM(r.Vc.syncEngine),yield C_(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return AO(this.persistence,new SO,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new yO(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Xv(t,this.persistence);return new fS(e.asyncQueue,r)}createPersistence(e){const t=sA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ls.withCacheSize(this.cacheSizeBytes):ls.DEFAULT;return new iA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,BO(),tb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new LO}}class iR extends fM{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof pA&&(r.sharedClientState.syncEngine={jr:GF.bind(null,i),zr:WF.bind(null,i),Wr:ZF.bind(null,i),$i:qF.bind(null,i),Qr:$F.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var c=(0,ve.Z)(function*(u){yield function zF(n,e){return aM.apply(this,arguments)}(r.Vc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const t=BO();if(!pA.D(t))throw new Pe(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=sA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new pA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class T_{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>eR(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=UF.bind(null,r.syncEngine),yield RA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new bF}createDatastore(e){const t=BC(e.databaseInfo.databaseId),r=new aF(e.databaseInfo);return new uF(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,c=g=>eR(this.syncEngine,g,0),u=VO.D()?new VO:new iF,new fF(t,r,i,c,u);var t,r,i,c,u}createSyncEngine(e,t){return function(r,i,c,u,g,v,E){const M=new PF(r,i,c,u,g,v);return E&&(M.vc=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=Qe(t);Ve("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield v_(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function sR(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ib{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):_r("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class QF{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new pr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const c=yield e.$c(i);return new SF(JSON.parse(c),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ve.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class JF{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(c,u){const g=Qe(c),v=MC(g.serializer)+"/documents",E={documents:u.map(q=>Eu(g.serializer,q))},M=yield g.vo("BatchGetDocuments",v,E,u.length),P=new Map;M.forEach(q=>{const ae=function vN(n,e){return"found"in e?function(t,r){pt(!!r.found);const i=Zc(t,r.found.name),c=sr(r.found.updateTime),u=r.found.createTime?sr(r.found.createTime):Ct.min(),g=new Lr({mapValue:{fields:r.found.fields}});return Un.newFoundDocument(i,c,u,g)}(n,e):"missing"in e?function(t,r){pt(!!r.missing),pt(!!r.readTime);const i=Zc(t,r.missing),c=sr(r.readTime);return Un.newNoDocument(i,c)}(n,e):it()}(g.serializer,q);P.set(ae.key.toString(),ae)});const B=[];return u.forEach(q=>{const ae=P.get(q.toString());pt(!!ae),B.push(ae)}),B}),function(c,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new mh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const c=Ke.fromPath(i);e.mutations.push(new FE(c,e.precondition(c)))}),yield(r=(0,ve.Z)(function*(i,c){const u=Qe(i),g=MC(u.serializer)+"/documents",v={writes:c.map(E=>xC(u.serializer,E))};yield u.Io("Commit",g,v)}),function(i,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=Ct.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ct.min())?Rn.exists(!1):Rn.updateTime(t):Rn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ct.min()))throw new Pe(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rn.updateTime(t)}return Rn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class XF{constructor(e,t,r,i,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=c,this.Bc=r.maxAttempts,this.qo=new mA(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ve.Z)(function*(){const t=new JF(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(c=>{e.Uc(c)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!ch(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!a(t)}return!1}}class eL{constructor(e,t,r,i){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=zr.UNAUTHENTICATED,this.clientId=Xm.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,ve.Z)(function*(g){Ve("FirestoreClient","Received user=",g.uid),yield c.authCredentialListener(g),c.user=g});return function(g){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Ve("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=I_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function sb(n,e){return pM.apply(this,arguments)}function pM(){return pM=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(c){r.isEqual(c)||(yield MO(e.localStore,c),r=c)});return function(c){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),pM.apply(this,arguments)}function gM(n,e){return mM.apply(this,arguments)}function mM(){return mM=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield _M(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>qO(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,c)=>qO(e.remoteStore,c)),n._onlineComponents=e}),mM.apply(this,arguments)}function oR(n){return"FirebaseError"===n.name?n.code===de.FAILED_PRECONDITION||n.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function _M(n){return yM.apply(this,arguments)}function yM(){return yM=(0,ve.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ve("FirestoreClient","Using user provided OfflineComponentProvider");try{yield sb(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!oR(t))throw t;os("Error using user provided cache. Falling back to memory cache: "+t),yield sb(n,new HC)}}else Ve("FirestoreClient","Using default OfflineComponentProvider"),yield sb(n,new HC);return n._offlineComponents}),yM.apply(this,arguments)}function ob(n){return vM.apply(this,arguments)}function vM(){return vM=(0,ve.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ve("FirestoreClient","Using user provided OnlineComponentProvider"),yield gM(n,n._uninitializedComponentsProvider._online)):(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield gM(n,new T_))),n._onlineComponents}),vM.apply(this,arguments)}function aR(n){return _M(n).then(e=>e.persistence)}function ab(n){return _M(n).then(e=>e.localStore)}function cR(n){return ob(n).then(e=>e.remoteStore)}function CM(n){return ob(n).then(e=>e.syncEngine)}function S_(n){return wM.apply(this,arguments)}function wM(){return wM=(0,ve.Z)(function*(n){const e=yield ob(n),t=e.eventManager;return t.onListen=OF.bind(null,e.syncEngine),t.onUnlisten=RF.bind(null,e.syncEngine),t}),wM.apply(this,arguments)}function uR(n,e,t={}){const r=new pr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,c,u,g,v){const E=new ib({next:P=>{c.enqueueAndForget(()=>VA(i,M));const B=P.docs.has(u);!B&&P.fromCache?v.reject(new Pe(de.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&P.fromCache&&g&&"server"===g.source?v.reject(new Pe(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(P)},error:P=>v.reject(P)}),M=new jA(_u(u.path),E,{includeMetadataChanges:!0,Ku:!0});return FA(i,M)}(yield S_(n),n.asyncQueue,e,t,r)})),r.promise}function dR(n,e,t={}){const r=new pr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,c,u,g,v){const E=new ib({next:P=>{c.enqueueAndForget(()=>VA(i,M)),P.fromCache&&"server"===g.source?v.reject(new Pe(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(P)},error:P=>v.reject(P)}),M=new jA(u,E,{includeMetadataChanges:!0,Ku:!0});return FA(i,M)}(yield S_(n),n.asyncQueue,e,t,r)})),r.promise}function hR(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const fR=new Map;function IM(n,e,t){if(!t)throw new Pe(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function pR(n,e,t,r){if(!0===e&&!0===r)throw new Pe(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gR(n){if(!Ke.isDocumentKey(n))throw new Pe(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mR(n){if(Ke.isDocumentKey(n))throw new Pe(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cb(n);throw new Pe(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _R(n,e){if(e<=0)throw new Pe(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class yR{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=hR(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Pe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Pe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Pe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $C{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yR({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pe(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new cS;switch(t.type){case"firstParty":return new Kv(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Pe(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=fR.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),fR.delete(e),t.terminate())}(this),Promise.resolve()}}class or{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class ji{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ji(this.firestore,e,this._query)}}class Kc extends ji{constructor(e,t,r){super(e,t,_u(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new Ke(e))}withConverter(e){return new Kc(this.firestore,e,this._path)}}function CR(n,e,...t){if(n=(0,an.m9)(n),IM("collection","path",e),n instanceof $C){const r=rn.fromString(e,...t);return mR(r),new Kc(n,null,r)}{if(!(n instanceof or||n instanceof Kc))throw new Pe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return mR(r),new Kc(n.firestore,null,r)}}function lb(n,e,...t){if(n=(0,an.m9)(n),1===arguments.length&&(e=Xm.A()),IM("doc","path",e),n instanceof $C){const r=rn.fromString(e,...t);return gR(r),new or(n,null,new Ke(r))}{if(!(n instanceof or||n instanceof Kc))throw new Pe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return gR(r),new or(n.firestore,n instanceof Kc?n.converter:null,new Ke(r))}}function wR(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),(n instanceof or||n instanceof Kc)&&(e instanceof or||e instanceof Kc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function EM(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),n instanceof ji&&e instanceof ji&&n.firestore===e.firestore&&Fp(n._query,e._query)&&n.converter===e.converter}class uL{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new mA(this,"async_queue_retry"),this.Xc=()=>{const t=tb();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=tb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=tb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new pr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Qo(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,_r("INTERNAL UNHANDLED ERROR: ",function(c){let u=c.message||"";return c.stack&&(u=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),u}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=NA.createAndSchedule(this,e,t,r,c=>this.na(c));return this.zc.push(i),i}Zc(){this.Wc&&it()}verifyOperationInProgress(){}sa(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function bM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class dL{constructor(){this._progressObserver={},this._taskCompletionResolver=new pr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ar extends $C{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new uL,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||IR(this),this._firestoreClient.terminate()}}function Vr(n){return n._firestoreClient||IR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function IR(n){var e,t,r;const i=n._freezeSettings(),c=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new bS(n._databaseId,g,n._persistenceKey,(E=i).host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,hR(E.experimentalLongPollingOptions),E.useFetchStreams));var g,E;n._firestoreClient=new eL(n._authCredentials,n._appCheckCredentials,n._queue,c),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function ER(n,e,t){const r=new pr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield sb(n,t),yield gM(n,e),r.resolve()}catch(i){const c=i;if(!oR(c))throw c;os("Error enabling indexeddb cache. Falling back to memory cache: "+c),r.reject(c)}})).then(()=>r.promise)}function bR(n){if(n._initialized||n._terminated)throw new Pe(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Yc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yc(Ar.fromBase64String(e))}catch(t){throw new Pe(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yc(Ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Tu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Kp{constructor(e){this._methodName=e}}class ub{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const IL=/^__.*__$/;class EL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new qc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bp(e,this.data,t,this.fieldTransforms)}}class DR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new qc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function TR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class db{constructor(e,t,r,i,c,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===c&&this.ua(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new db(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return pb(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(TR(this.ca)&&IL.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class bL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||BC(e)}ya(e,t,r,i=!1){return new db({ca:e,methodName:t,ga:r,path:rr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yp(n){const e=n._freezeSettings(),t=BC(n._databaseId);return new bL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hb(n,e,t,r,i,c={}){const u=n.ya(c.merge||c.mergeFields?2:0,e,t,i);AM("Data must be an object, but it was:",u,r);const g=MR(r,u);let v,E;if(c.merge)v=new xs(u.fieldMask),E=u.fieldTransforms;else if(c.mergeFields){const M=[];for(const P of c.mergeFields){const B=qC(e,P,t);if(!u.contains(B))throw new Pe(de.INVALID_ARGUMENT,`Field '${B}' is specified in your field mask but missing from your input data.`);PR(M,B)||M.push(B)}v=new xs(M),E=u.fieldTransforms.filter(P=>v.covers(P.field))}else v=null,E=u.fieldTransforms;return new EL(new Lr(g),v,E)}class zC extends Kp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zC}}function SR(n,e,t){return new db({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class DM extends Kp{_toFieldTransform(e){return new wu(e.path,new ph)}isEqual(e){return e instanceof DM}}class DL extends Kp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=SR(this,e,!0),r=this.pa.map(c=>Qp(c,t)),i=new Cu(r);return new wu(e.path,i)}isEqual(e){return this===e}}class TL extends Kp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=SR(this,e,!0),r=this.pa.map(c=>Qp(c,t)),i=new zc(r);return new wu(e.path,i)}isEqual(e){return this===e}}class SL extends Kp{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new gh(e.serializer,VS(e.serializer,this.Ia));return new wu(e.path,t)}isEqual(e){return this===e}}function TM(n,e,t,r){const i=n.ya(1,e,t);AM("Data must be an object, but it was:",i,r);const c=[],u=Lr.empty();Ua(r,(v,E)=>{const M=fb(e,v,t);E=(0,an.m9)(E);const P=i.da(M);if(E instanceof zC)c.push(M);else{const B=Qp(E,P);null!=B&&(c.push(M),u.set(M,B))}});const g=new xs(c);return new DR(u,g,i.fieldTransforms)}function SM(n,e,t,r,i,c){const u=n.ya(1,e,t),g=[qC(e,r,t)],v=[i];if(c.length%2!=0)throw new Pe(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let B=0;B<c.length;B+=2)g.push(qC(e,c[B])),v.push(c[B+1]);const E=[],M=Lr.empty();for(let B=g.length-1;B>=0;--B)if(!PR(E,g[B])){const q=g[B];let ae=v[B];ae=(0,an.m9)(ae);const Oe=u.da(q);if(ae instanceof zC)E.push(q);else{const Se=Qp(ae,Oe);null!=Se&&(E.push(q),M.set(q,Se))}}const P=new xs(E);return new DR(M,P,u.fieldTransforms)}function AR(n,e,t,r=!1){return Qp(t,n.ya(r?4:3,e))}function Qp(n,e){if(xR(n=(0,an.m9)(n)))return AM("Unsupported field value:",e,n),MR(n,e);if(n instanceof Kp)return function(t,r){if(!TR(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let c=0;for(const u of t){let g=Qp(u,r.wa(c));null==g&&(g={nullValue:"NULL_VALUE"}),i.push(g),c++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,an.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return VS(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=On.fromDate(t);return{timestampValue:Wc(r.serializer,i)}}if(t instanceof On){const i=new On(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Wc(r.serializer,i)}}if(t instanceof ub)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Yc)return{bytesValue:h_(r.serializer,t._byteString)};if(t instanceof or){const i=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(i))throw r._a(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:jp(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${cb(t)}`)}(n,e)}function MR(n,e){const t={};return IS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ua(n,(r,i)=>{const c=Qp(i,e.ha(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function xR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof On||n instanceof ub||n instanceof Yc||n instanceof or||n instanceof Kp)}function AM(n,e,t){if(!xR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=cb(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function qC(n,e,t){if((e=(0,an.m9)(e))instanceof Tu)return e._internalPath;if("string"==typeof e)return fb(n,e);throw pb("Field path arguments must be of type string or ",n,!1,void 0,t)}const AL=new RegExp("[~\\*/\\[\\]]");function fb(n,e,t){if(e.search(AL)>=0)throw pb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Tu(...e.split("."))._internalPath}catch{throw pb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pb(n,e,t,r,i){const c=r&&!r.isEmpty(),u=void 0!==i;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(c||u)&&(v+=" (found",c&&(v+=` in field ${r}`),u&&(v+=` in document ${i}`),v+=")"),new Pe(de.INVALID_ARGUMENT,g+n+v)}function PR(n,e){return n.some(t=>t.isEqual(e))}class WC{constructor(e,t,r,i,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ML(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ML extends WC{data(){return super.data()}}function gb(n,e){return"string"==typeof e?fb(n,e):e instanceof Tu?e._internalPath:e._delegate._internalPath}function OR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class MM{}class ZC extends MM{}function Eh(n,e,...t){let r=[];e instanceof MM&&r.push(e),r=r.concat(t),function(i){const c=i.filter(g=>g instanceof A_).length,u=i.filter(g=>g instanceof KC).length;if(c>1||c>0&&u>0)throw new Pe(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class KC extends ZC{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new KC(e,t,r)}_apply(e){const t=this._parse(e);return FR(e._query,t),new ji(e.firestore,e.converter,AE(e._query,t))}_parse(e){const t=Yp(e.firestore);return function(i,c,u,g,v,E,M){let P;if(v.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){NR(M,E);const B=[];for(const q of M)B.push(kR(g,i,q));P={arrayValue:{values:B}}}else P=kR(g,i,M)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||NR(M,E),P=AR(u,"where",M,"in"===E||"not-in"===E);return Yt.create(v,E,P)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class A_ extends MM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new A_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:_n.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let c=r;const u=i.getFlattenedFilters();for(const g of u)FR(c,g),c=AE(c,g)}(e._query,t),new ji(e.firestore,e.converter,AE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class xM extends ZC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xM(e,t)}_apply(e){const t=function(r,i,c){if(null!==r.startAt)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new uh(i,c);return function(g,v){if(null===c_(g)){const E=kp(g);null!==E&&LR(0,E,v.field)}}(r,u),u}(e._query,this._field,this._direction);return new ji(e.firestore,e.converter,function(r,i){const c=r.explicitOrderBy.concat([i]);return new vo(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class mb extends ZC{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new mb(e,t,r)}_apply(e){return new ji(e.firestore,e.converter,Np(e._query,this._limit,this._limitType))}}class _b extends ZC{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new _b(e,t,r)}_apply(e){const t=RR(e,this.type,this._docOrFields,this._inclusive);return new ji(e.firestore,e.converter,(i=t,new vo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class yb extends ZC{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new yb(e,t,r)}_apply(e){const t=RR(e,this.type,this._docOrFields,this._inclusive);return new ji(e.firestore,e.converter,(i=t,new vo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function RR(n,e,t,r){if(t[0]=(0,an.m9)(t[0]),t[0]instanceof WC)return function(i,c,u,g,v){if(!g)throw new Pe(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const E=[];for(const M of yu(i))if(M.field.isKeyField())E.push(mu(c,g.key));else{const P=g.data.field(M.field);if(lh(P))throw new Pe(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===P){const B=M.field.canonicalString();throw new Pe(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${B}' (used as the orderBy) does not exist.`)}E.push(P)}return new Jo(E,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Yp(n.firestore);return function(c,u,g,v,E,M){const P=c.explicitOrderBy;if(E.length>P.length)throw new Pe(de.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const B=[];for(let q=0;q<E.length;q++){const ae=E[q];if(P[q].field.isKeyField()){if("string"!=typeof ae)throw new Pe(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof ae}`);if(!_C(c)&&-1!==ae.indexOf("/"))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${ae}' contains a slash.`);const Oe=c.path.child(rn.fromString(ae));if(!Ke.isDocumentKey(Oe))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Oe}' is not because it contains an odd number of segments.`);const Se=new Ke(Oe);B.push(mu(u,Se))}else{const Oe=AR(g,v,ae);B.push(Oe)}}return new Jo(B,M)}(n._query,n.firestore._databaseId,i,e,t,r)}}function kR(n,e,t){if("string"==typeof(t=(0,an.m9)(t))){if(""===t)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_C(e)&&-1!==t.indexOf("/"))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(rn.fromString(t));if(!Ke.isDocumentKey(r))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mu(n,new Ke(r))}if(t instanceof or)return mu(n,t._key);throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cb(t)}.`)}function NR(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FR(n,e){if(e.isInequality()){const r=kp(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const c=c_(n);null!==c&&LR(0,i,c)}const t=function(r,i){for(const c of r)for(const u of c.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Pe(de.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function LR(n,e,t){if(!t.isEqual(e))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class PM{convertValue(e,t="none"){switch($c(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ua(e,(i,c)=>{r[i]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new ub(ir(e.latitude),ir(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=bp(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Dp(e));default:return null}}convertTimestamp(e){const t=ja(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=rn.fromString(e);pt(QP(r));const i=new fu(r.get(1),r.get(3)),c=new Ke(r.popFirst(5));return i.isEqual(t)||_r(`Document ${c} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function vb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class VL extends PM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,t)}}class Jp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Su extends WC{constructor(e,t,r,i,c,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new YC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(gb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class YC extends Su{data(e={}){return super.data(e)}}class bh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Jp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new YC(this._firestore,this._userDataWriter,r.key,r,new Jp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new YC(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Jp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const g=new YC(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Jp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,E=-1;return 0!==u.type&&(v=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),1!==u.type&&(c=c.add(u.doc),E=c.indexOf(u.doc.key)),{type:UL(u.type),doc:g,oldIndex:v,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function UL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function BR(n,e){return n instanceof Su&&e instanceof Su?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof bh&&e instanceof bh&&n._firestore===e._firestore&&EM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Dh extends PM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,t)}}function UR(n,e,t){n=sn(n,or);const r=sn(n.firestore,ar),i=vb(n.converter,e,t);return M_(r,[hb(Yp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Rn.none())])}function jR(n,e,t,...r){n=sn(n,or);const i=sn(n.firestore,ar),c=Yp(i);let u;return u="string"==typeof(e=(0,an.m9)(e))||e instanceof Tu?SM(c,"updateDoc",n._key,e,t,r):TM(c,"updateDoc",n._key,e),M_(i,[u.toMutation(n._key,Rn.exists(!0))])}function HR(n,...e){var t,r,i;n=(0,an.m9)(n);let c={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||bM(e[u])||(c=e[u],u++);const g={includeMetadataChanges:c.includeMetadataChanges};if(bM(e[u])){const P=e[u];e[u]=null===(t=P.next)||void 0===t?void 0:t.bind(P),e[u+1]=null===(r=P.error)||void 0===r?void 0:r.bind(P),e[u+2]=null===(i=P.complete)||void 0===i?void 0:i.bind(P)}let v,E,M;if(n instanceof or)E=sn(n.firestore,ar),M=_u(n._key.path),v={next:P=>{e[u]&&e[u](OM(E,n,P))},error:e[u+1],complete:e[u+2]};else{const P=sn(n,ji);E=sn(P.firestore,ar),M=P._query;const B=new Dh(E);v={next:q=>{e[u]&&e[u](new bh(E,B,P,q))},error:e[u+1],complete:e[u+2]},OR(n._query)}return function(P,B,q,ae){const Oe=new ib(ae),Se=new jA(B,Oe,q);return P.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return FA(yield S_(P),Se)})),()=>{Oe.Dc(),P.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return VA(yield S_(P),Se)}))}}(Vr(E),M,g,v)}function M_(n,e){return function(t,r){const i=new pr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function kF(n,e,t){return qA.apply(this,arguments)}(yield CM(t),r,i)})),i.promise}(Vr(n),e)}function OM(n,e,t){const r=t.docs.get(e._key),i=new Dh(n);return new Su(n,i,e._key,r,new Jp(t.hasPendingWrites,t.fromCache),e.converter)}const s2={maxAttempts:5};class $R{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yp(e)}set(e,t,r){this._verifyNotCommitted();const i=Th(e,this._firestore),c=vb(i.converter,t,r),u=hb(this._dataReader,"WriteBatch.set",i._key,c,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,Rn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const c=Th(e,this._firestore);let u;return u="string"==typeof(t=(0,an.m9)(t))||t instanceof Tu?SM(this._dataReader,"WriteBatch.update",c._key,t,r,i):TM(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(u.toMutation(c._key,Rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Th(e,this._firestore);return this._mutations=this._mutations.concat(new mh(t._key,Rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Th(n,e){if((n=(0,an.m9)(n)).firestore!==e)throw new Pe(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class o2 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Yp(e)}get(e){const t=Th(e,this._firestore),r=new VL(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return it();const c=i[0];if(c.isFoundDocument())return new WC(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new WC(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const i=Th(e,this._firestore),c=vb(i.converter,t,r),u=hb(this._dataReader,"Transaction.set",i._key,c,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const c=Th(e,this._firestore);let u;return u="string"==typeof(t=(0,an.m9)(t))||t instanceof Tu?SM(this._dataReader,"Transaction.update",c._key,t,r,i):TM(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,u),this}delete(e){const t=Th(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Th(e,this._firestore),r=new Dh(this._firestore);return super.get(e).then(i=>new Su(this._firestore,r,t._key,i._document,new Jp(!1,!1),t.converter))}}function RM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function zR(){if(typeof Uint8Array>"u")throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function qR(){if(!function FP(){return typeof atob<"u"}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){lu=Ql.SDK_VERSION,(0,Ql._registerComponent)(new Gf.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const c=t.getProvider("app").getImmediate(),u=new ar(new JI(t.getProvider("auth-internal")),new uS(t.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Pe(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fu(g.options.projectId,v)}(c,r),c);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,Ql.registerVersion)(oS,"3.13.0",n),(0,Ql.registerVersion)(oS,"3.13.0","esm2017")}();class QC{constructor(e){this._delegate=e}static fromBase64String(e){return qR(),new QC(Yc.fromBase64String(e))}static fromUint8Array(e){return zR(),new QC(Yc.fromUint8Array(e))}toBase64(){return qR(),this._delegate.toBase64()}toUint8Array(){return zR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function kM(n){return function g2(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class m2{enableIndexedDbPersistence(e,t){return function fL(n,e){bR(n=sn(n,ar));const t=Vr(n);if(t._uninitializedComponentsProvider)throw new Pe(de.FAILED_PRECONDITION,"SDK cache is already specified.");os("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new T_;return ER(t,i,new fM(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function pL(n){bR(n=sn(n,ar));const e=Vr(n);if(e._uninitializedComponentsProvider)throw new Pe(de.FAILED_PRECONDITION,"SDK cache is already specified.");os("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new T_;return ER(e,r,new iR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function gL(n){if(n._initialized&&!n._terminated)throw new Pe(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new pr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!Gs.D())return Promise.resolve();const i=r+"main";yield Gs.delete(i)}),function(r){return t.apply(this,arguments)})(sA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class WR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof fu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&os("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function vR(n,e,t,r={}){var i;const c=(n=sn(n,$C))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==c.host&&c.host!==u&&os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},c),{host:u,ssl:!1})),r.mockUserToken){let g,v;if("string"==typeof r.mockUserToken)g=r.mockUserToken,v=zr.MOCK_USER;else{g=(0,an.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Pe(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new zr(E)}n._authCredentials=new lS(new mp(g,v))}}(this._delegate,e,t,r)}enableNetwork(){return function _L(n){return function tL(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield aR(n),t=yield cR(n);return e.setNetworkEnabled(!0),function(r){const i=Qe(r);return i.vu.delete(0),UC(i)}(t)}))}(Vr(n=sn(n,ar)))}(this._delegate)}disableNetwork(){return function yL(n){return function nL(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield aR(n),t=yield cR(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const c=Qe(i);c.vu.add(0),yield v_(c),c.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Vr(n=sn(n,ar)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,pR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function mL(n){return function(e){const t=new pr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function VF(n,e){return QA.apply(this,arguments)}(yield CM(e),t)})),t.promise}(Vr(n=sn(n,ar)))}(this._delegate)}onSnapshotsInSync(e){return function KL(n,e){return function sL(n,e){const t=new ib(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield S_(n),i=t,Qe(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield S_(n),i=t,void Qe(r).ku.delete(i);var r,i}))}}(Vr(n=sn(n,ar)),bM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new x_(this,CR(this._delegate,e))}catch(t){throw Rs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ta(this,lb(this._delegate,e))}catch(t){throw Rs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ks(this,function lL(n,e){if(n=sn(n,$C),IM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ji(n,null,(t=e,new vo(rn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Rs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function a2(n,e,t){n=sn(n,ar);const r=Object.assign(Object.assign({},s2),t);return function(i){if(i.maxAttempts<1)throw new Pe(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,c,u){const g=new pr;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const v=yield function lR(n){return ob(n).then(e=>e.datastore)}(i);new XF(i.asyncQueue,v,u,c,g).run()})),g.promise}(Vr(n),i=>e(new o2(n,i)),r)}(this._delegate,t=>e(new ZR(this,t)))}batch(){return Vr(this._delegate),new KR(new $R(this._delegate,e=>M_(this._delegate,e)))}loadBundle(e){return function vL(n,e){const t=Vr(n=sn(n,ar)),r=new dL;return function oL(n,e,t,r){const i=function(c,u){let g;return g="string"==typeof c?y().encode(c):c,v=function(v,E){if(v instanceof Uint8Array)return sR(v,E);if(v instanceof ArrayBuffer)return sR(new Uint8Array(v),E);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new QF(v,u);var v}(t,BC(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function KF(n,e,t){const r=Qe(n);var i;(i=(0,ve.Z)(function*(c,u,g){try{const v=yield u.getMetadata();if(yield function(B,q){const ae=Qe(B),Oe=sr(q.createTime);return ae.persistence.runTransaction("hasNewerBundle","readonly",Se=>ae.qs.getBundleMetadata(Se,q.id)).then(Se=>!!Se&&Se.createTime.compareTo(Oe)>=0)}(c.localStore,v))return yield u.close(),g._completeWith({taskState:"Success",documentsLoaded:(B=v).totalDocuments,bytesLoaded:B.totalBytes,totalDocuments:B.totalDocuments,totalBytes:B.totalBytes}),Promise.resolve(new Set);g._updateProgress(KO(v));const E=new AF(v,c.localStore,u.serializer);let M=yield u.bc();for(;M;){const B=yield E.zu(M);B&&g._updateProgress(B),M=yield u.bc()}const P=yield E.complete();return yield Du(c,P.Ju,void 0),yield function(B,q){const ae=Qe(B);return ae.persistence.runTransaction("Save bundle","readwrite",Oe=>ae.qs.saveBundleMetadata(Oe,q))}(c.localStore,v),g._completeWith(P.progress),Promise.resolve(P.Hu)}catch(v){return os("SyncEngine",`Loading bundle failed with ${v}`),g._failWith(v),Promise.resolve(new Set)}var B}),function(c,u,g){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield CM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function CL(n,e){return function aL(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const i=Qe(t);return i.persistence.runTransaction("Get named query","readonly",c=>i.qs.getNamedQuery(c,r))}(yield ab(n),e)}))}(Vr(n=sn(n,ar)),e).then(t=>t?new ji(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ks(this,t):null)}}class Cb extends PM{constructor(e){super(),this.firestore=e}convertBytes(e){return new QC(new Yc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ta.forKey(t,this.firestore,null)}}class ZR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Cb(e)}get(e){const t=eg(e);return this._delegate.get(t).then(r=>new JC(this._firestore,new Su(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=eg(e);return r?(RM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const c=eg(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...i),this}delete(e){const t=eg(e);return this._delegate.delete(t),this}}class KR{constructor(e){this._delegate=e}set(e,t,r){const i=eg(e);return r?(RM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const c=eg(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...i),this}delete(e){const t=eg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Xp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new YC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new XC(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Xp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let c=i.get(t);return c||(c=new Xp(e,new Cb(e),t),i.set(t,c)),c}}Xp.INSTANCES=new WeakMap;class ta{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ta(t,new or(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new ta(t,new or(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new x_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new x_(this.firestore,CR(this._delegate,e))}catch(t){throw Rs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,an.m9)(e))instanceof or&&wR(this._delegate,e)}set(e,t){t=RM("DocumentReference.set",t);try{return t?UR(this._delegate,e,t):UR(this._delegate,e)}catch(r){throw Rs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?jR(this._delegate,e):jR(this._delegate,e,t,...r)}catch(i){throw Rs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function WL(n){return M_(sn(n.firestore,ar),[new mh(n._key,Rn.none())])}(this._delegate)}onSnapshot(...e){const t=YR(e),r=QR(e,i=>new JC(this.firestore,new Su(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return HR(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function HL(n){n=sn(n,or);const e=sn(n.firestore,ar),t=Vr(e),r=new Dh(e);return function rL(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,c,u){try{const g=yield function(v,E){const M=Qe(v);return M.persistence.runTransaction("read document","readonly",P=>M.localDocuments.getDocument(P,E))}(i,c);g.isFoundDocument()?u.resolve(g):g.isNoDocument()?u.resolve(null):u.reject(new Pe(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const v=I_(g,`Failed to get document '${c} from cache`);u.reject(v)}}),function(i,c,u){return r.apply(this,arguments)})(yield ab(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Su(e,r,n._key,i,new Jp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function $L(n){n=sn(n,or);const e=sn(n.firestore,ar);return uR(Vr(e),n._key,{source:"server"}).then(t=>OM(e,n,t))}(this._delegate):function jL(n){n=sn(n,or);const e=sn(n.firestore,ar);return uR(Vr(e),n._key).then(t=>OM(e,n,t))}(this._delegate),t.then(r=>new JC(this.firestore,new Su(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ta(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}function Rs(n,e,t){return n.message=n.message.replace(e,t),n}function YR(n){for(const e of n)if("object"==typeof e&&!kM(e))return e;return{}}function QR(n,e){var t,r;let i;return i=kM(n[0])?n[0]:kM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{i.next&&i.next(e(c))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class JC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ta(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return BR(this._delegate,e._delegate)}}class XC extends JC{data(e){const t=this._delegate.data(e);return function gp(n,e){n||it()}(void 0!==t),t}}class ks{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cb(e)}where(e,t,r){try{return new ks(this.firestore,Eh(this._delegate,function xL(n,e,t){const r=e,i=gb("where",n);return KC._create(i,r,t)}(e,t,r)))}catch(i){throw Rs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ks(this.firestore,Eh(this._delegate,function PL(n,e="asc"){const t=e,r=gb("orderBy",n);return xM._create(r,t)}(e,t)))}catch(r){throw Rs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ks(this.firestore,Eh(this._delegate,function OL(n){return _R("limit",n),mb._create("limit",n,"F")}(e)))}catch(t){throw Rs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ks(this.firestore,Eh(this._delegate,function RL(n){return _R("limitToLast",n),mb._create("limitToLast",n,"L")}(e)))}catch(t){throw Rs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ks(this.firestore,Eh(this._delegate,function kL(...n){return _b._create("startAt",n,!0)}(...e)))}catch(t){throw Rs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ks(this.firestore,Eh(this._delegate,function NL(...n){return _b._create("startAfter",n,!1)}(...e)))}catch(t){throw Rs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ks(this.firestore,Eh(this._delegate,function FL(...n){return yb._create("endBefore",n,!1)}(...e)))}catch(t){throw Rs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ks(this.firestore,Eh(this._delegate,function LL(...n){return yb._create("endAt",n,!0)}(...e)))}catch(t){throw Rs(t,"endAt()","Query.endAt()")}}isEqual(e){return EM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function zL(n){n=sn(n,ji);const e=sn(n.firestore,ar),t=Vr(e),r=new Dh(e);return function iL(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,c,u){try{const g=yield QE(i,c,!0),v=new JO(c,g.ir),E=v.sc(g.documents),M=v.applyChanges(E,!1);u.resolve(M.snapshot)}catch(g){const v=I_(g,`Failed to execute query '${c} against cache`);u.reject(v)}}),function(i,c,u){return r.apply(this,arguments)})(yield ab(n),e,t);var r})),t.promise}(t,n._query).then(i=>new bh(e,r,n,i))}(this._delegate):"server"===e?.source?function qL(n){n=sn(n,ji);const e=sn(n.firestore,ar),t=Vr(e),r=new Dh(e);return dR(t,n._query,{source:"server"}).then(i=>new bh(e,r,n,i))}(this._delegate):function GL(n){n=sn(n,ji);const e=sn(n.firestore,ar),t=Vr(e),r=new Dh(e);return OR(n._query),dR(t,n._query).then(i=>new bh(e,r,n,i))}(this._delegate),t.then(r=>new NM(this.firestore,new bh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=YR(e),r=QR(e,i=>new NM(this.firestore,new bh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return HR(this._delegate,t,r)}withConverter(e){return new ks(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}class y2{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new XC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class NM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ks(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new XC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new y2(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new XC(this._firestore,r))})}isEqual(e){return BR(this._delegate,e._delegate)}}class x_ extends ks{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ta(this.firestore,e):null}doc(e){try{return new ta(this.firestore,void 0===e?lb(this._delegate):lb(this._delegate,e))}catch(t){throw Rs(t,"doc()","CollectionReference.doc()")}}add(e){return function ZL(n,e){const t=sn(n.firestore,ar),r=lb(n),i=vb(n.converter,e);return M_(t,[hb(Yp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Rn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ta(this.firestore,t))}isEqual(e){return wR(this._delegate,e._delegate)}withConverter(e){return new x_(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}function eg(n){return sn(n,or)}class FM{constructor(...e){this._delegate=new Tu(...e)}static documentId(){return new FM(rr.keyField().canonicalString())}isEqual(e){return(e=(0,an.m9)(e))instanceof Tu&&this._delegate._internalPath.isEqual(e._internalPath)}}class tg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function l2(){return new DM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new tg(e)}static delete(){const e=function c2(){return new zC("deleteField")}();return e._methodName="FieldValue.delete",new tg(e)}static arrayUnion(...e){const t=function u2(...n){return new DL("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new tg(t)}static arrayRemove(...e){const t=function d2(...n){return new TL("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new tg(t)}static increment(e){const t=function h2(n){return new SL("increment",n)}(e);return t._methodName="FieldValue.increment",new tg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const v2={Firestore:WR,GeoPoint:ub,Timestamp:On,Blob:QC,Transaction:ZR,WriteBatch:KR,DocumentReference:ta,DocumentSnapshot:JC,Query:ks,QueryDocumentSnapshot:XC,QuerySnapshot:NM,CollectionReference:x_,FieldPath:FM,FieldValue:tg,setLogLevel:function _2(n){!function aS(n){Lc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function w2(n){(function C2(n,e){n.INTERNAL.registerComponent(new Gf.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},v2)))})(n,(e,t)=>new WR(e,t,new m2)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(iv.Z);var wb=L(5363),I2=L(6063);class E2 extends Kt.x{constructor(e=1/0,t=1/0,r=I2.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:c,_windowTime:u}=this;t||(r.push(e),!i&&r.push(c.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,c=i.slice();for(let u=0;u<c.length&&!e.closed;u+=r?1:2)e.next(c[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,c=(i?1:2)*e;if(e<1/0&&c<r.length&&r.splice(0,r.length-c),!i){const u=t.now();let g=0;for(let v=1;v<r.length&&r[v]<=u;v+=2)g=v;g&&r.splice(0,g+1)}}}var b2=L(3099);function JR(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,b2.B)({connector:()=>new E2(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Ib=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Eb(n){return(0,er.e)((e,t)=>{let r=!1;e.subscribe((0,$n.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function XR(n=T2){return(0,er.e)((e,t)=>{let r=!1;e.subscribe((0,$n.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function T2(){return new Ib}function Au(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Wo((i,c)=>n(i,c,r)):jd.y,If(1),t?Eb(e):XR(()=>new Ib))}var LM=L(576);function e1(n,e){return(0,LM.m)(e)?mr(()=>n,e):mr(()=>n)}var VM=L(9468);L(259);const UM=new Map,n1={activated:!1,tokenObservers:[]},P2={initialized:!1,enabled:!1};function Mr(n){return UM.get(n)||Object.assign({},n1)}function Db(){return P2}class L2{constructor(e,t,r,i,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=i,i>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new an.BH,yield function V2(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new an.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Hi=new an.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function HM(n){if(!Mr(n).activated)throw Hi.create("use-before-activation",{appName:n.name})}function Ab(n,e){return GM.apply(this,arguments)}function GM(){return GM=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const P=yield i.getHeartbeatsHeader();P&&(r["X-Firebase-Client"]=P)}const c={method:"POST",body:JSON.stringify(e),headers:r};let u,g;try{u=yield fetch(n,c)}catch(P){throw Hi.create("fetch-network-error",{originalErrorMessage:P?.message})}if(200!==u.status)throw Hi.create("fetch-status-error",{httpStatus:u.status});try{g=yield u.json()}catch(P){throw Hi.create("fetch-parse-error",{originalErrorMessage:P?.message})}const v=g.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw Hi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const E=1e3*Number(v[1]),M=Date.now();return{token:g.token,expireTimeMillis:M+E,issuedAtTimeMillis:M}}),GM.apply(this,arguments)}function s1(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const e0="firebase-app-check-store";let Mb=null;function a1(){return Mb||(Mb=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Hi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(e0,{keyPath:"compositeKey"})}}catch(t){e(Hi.create("storage-open",{originalErrorMessage:t?.message}))}}),Mb)}function zM(){return zM=(0,ve.Z)(function*(n,e){const r=(yield a1()).transaction(e0,"readwrite"),c=r.objectStore(e0).put({compositeKey:n,value:e});return new Promise((u,g)=>{c.onsuccess=v=>{u()},r.onerror=v=>{var E;g(Hi.create("storage-set",{originalErrorMessage:null===(E=v.target.error)||void 0===E?void 0:E.message}))}})}),zM.apply(this,arguments)}const t0=new ka.Yd("@firebase/app-check");function ZM(n,e){return(0,an.hl)()?function z2(n,e){return function c1(n,e){return zM.apply(this,arguments)}(function u1(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{t0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function YM(){return Db().enabled}function QM(){return JM.apply(this,arguments)}function JM(){return JM=(0,ve.Z)(function*(){const n=Db();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),JM.apply(this,arguments)}const Q2={error:"UNKNOWN_ERROR"};function J2(n){return an.US.encodeString(JSON.stringify(n),!1)}function xb(n){return XM.apply(this,arguments)}function XM(){return XM=(0,ve.Z)(function*(n,e=!1){const t=n.app;HM(t);const r=Mr(t);let c,i=r.token;if(i&&!P_(i)&&(r.token=void 0,i=void 0),!i){const v=yield r.cachedTokenPromise;v&&(P_(v)?i=v:yield ZM(t,void 0))}if(!e&&i&&P_(i))return{token:i.token};let g,u=!1;if(YM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ab(s1(t,yield QM()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const v=yield r.exchangeTokenPromise;return yield ZM(t,v),r.token=v,{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield Mr(t).exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?t0.warn(v.message):t0.error(v),c=v}return i?c?g=P_(i)?{token:i.token,internalError:c}:p1(c):(g={token:i.token},r.token=i,yield ZM(t,i)):g=p1(c),u&&f1(t,g),g}),XM.apply(this,arguments)}function ex(){return ex=(0,ve.Z)(function*(n){const e=n.app;HM(e);const{provider:t}=Mr(e);if(YM()){const r=yield QM(),{token:i}=yield Ab(s1(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),ex.apply(this,arguments)}function nx(n,e){const t=Mr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function h1(n){const{app:e}=n,t=Mr(e);let r=t.tokenRefresher;r||(r=function X2(n){const{app:e}=n;return new L2((0,ve.Z)(function*(){let r;if(r=Mr(e).token?yield xb(n,!0):yield xb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Mr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function f1(n,e){const t=Mr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function P_(n){return n.expireTimeMillis-Date.now()>0}function p1(n){return{token:J2(Q2),error:n}}class eV{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Mr(this.app);for(const t of e)nx(this.app,t.next);return Promise.resolve()}}const I1="app-check-internal";!function pV(){(0,Ql._registerComponent)(new Gf.wA("app-check",n=>function tV(n,e){return new eV(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(I1).initialize()})),(0,Ql._registerComponent)(new Gf.wA(I1,n=>function nV(n){return{getToken:e=>xb(n,e),getLimitedUseToken:()=>function d1(n){return ex.apply(this,arguments)}(n),addTokenListener:e=>function tx(n,e,t,r){const{app:i}=n,c=Mr(i);if(c.tokenObservers=[...c.tokenObservers,{next:t,error:r,type:e}],c.token&&P_(c.token)){const g=c.token;Promise.resolve().then(()=>{t({token:g.token}),h1(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>h1(n))}(n,"INTERNAL",e),removeTokenListener:e=>nx(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ql.registerVersion)("@firebase/app-check","0.8.0")}();class ox{constructor(){return(0,Nr.vb)("app-check")}}typeof window<"u"&&window;var vV=L(9260);const b1=new d.OlP("angularfire2.auth.use-emulator"),D1=new d.OlP("angularfire2.auth.settings"),T1=new d.OlP("angularfire2.auth.tenant-id"),S1=new d.OlP("angularfire2.auth.langugage-code"),A1=new d.OlP("angularfire2.auth.use-device-language"),M1=new d.OlP("angularfire.auth.persistence"),x1=(n,e,t,r,i,c,u,g)=>(0,ss.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=i,c&&v.useDeviceLanguage(),u)for(const[E,M]of Object.entries(u))v.settings[E]=M;return g&&v.setPersistence(g),v},[t,r,i,c,u,g]);let P1=(()=>{class n{constructor(t,r,i,c,u,g,v,E,M,P,B,q){const ae=new Kt.x,Oe=Et(void 0).pipe((0,wb.Q)(u.outsideAngular),mr(()=>c.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,2644)))),(0,Ot.U)(()=>(0,ss.on)(t,c,r)),(0,Ot.U)(Se=>x1(Se,c,g,E,M,P,v,B)),JR({bufferSize:1,refCount:!1}));if(Ya(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Et(null);else{Oe.pipe(Au()).subscribe();const et=Oe.pipe(mr(Ft=>Ft.getRedirectResult().then(Zt=>Zt,()=>null)),Nr.iC,JR({bufferSize:1,refCount:!1})),wt=Oe.pipe(mr(Ft=>new tr.y(Zt=>({unsubscribe:c.runOutsideAngular(()=>Ft.onAuthStateChanged(cn=>Zt.next(cn),cn=>Zt.error(cn),()=>Zt.complete()))})))),It=Oe.pipe(mr(Ft=>new tr.y(Zt=>({unsubscribe:c.runOutsideAngular(()=>Ft.onIdTokenChanged(cn=>Zt.next(cn),cn=>Zt.error(cn),()=>Zt.complete()))}))));this.authState=et.pipe(e1(wt),(0,VM.R)(u.outsideAngular),(0,wb.Q)(u.insideAngular)),this.user=et.pipe(e1(It),(0,VM.R)(u.outsideAngular),(0,wb.Q)(u.insideAngular)),this.idToken=this.user.pipe(mr(Ft=>Ft?(0,nr.D)(Ft.getIdToken()):Et(null))),this.idTokenResult=this.user.pipe(mr(Ft=>Ft?(0,nr.D)(Ft.getIdTokenResult()):Et(null))),this.credential=(0,Vl.T)(et,ae,this.authState.pipe(Wo(Ft=>!Ft))).pipe((0,Ot.U)(Ft=>Ft?.user?Ft:null),(0,VM.R)(u.outsideAngular),(0,wb.Q)(u.insideAngular))}return(0,ss.pX)(this,Oe,c,{spy:{apply:(Se,et,wt)=>{(Se.startsWith("signIn")||Se.startsWith("createUser"))&&wt.then(It=>ae.next(It))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ss.Dh),d.LFG(ss.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Nr.HU),d.LFG(b1,8),d.LFG(D1,8),d.LFG(T1,8),d.LFG(S1,8),d.LFG(A1,8),d.LFG(M1,8),d.LFG(ox,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function O1(n,e){return function wV(n,e=Xi.z){return new tr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function cx(n,e){return O1(n,e).pipe((0,Ot.U)(t=>({payload:t,type:"query"})))}function Ob(n,e){return cx(n,e).pipe(Ul(void 0),tv(),(0,Ot.U)(([t,r])=>{const i=r.payload.docChanges(),c=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,g)=>{const v=i.find(M=>M.doc.ref.isEqual(u.ref)),E=t?.payload.docs.find(M=>M.ref.isEqual(u.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(u.metadata)||!v&&E&&JSON.stringify(E.metadata)===JSON.stringify(u.metadata)||c.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:u}})}),c}))}function R1(n,e,t){return Ob(n,t).pipe(Yl((r,i)=>function EV(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function bV(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return lx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return lx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return lx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(c=>c.payload),e),[]),function Yw(n,e=jd.y){return n=n??rv,(0,er.e)((t,r)=>{let i,c=!0;t.subscribe((0,$n.x)(r,u=>{const g=e(u);(c||!n(i,g))&&(c=!1,i=g,r.next(u))}))})}(),(0,Ot.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function lx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function k1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class N1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Ob(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ot.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ul(void 0),tv(),Wo(([r,i])=>i.length>0||!r),(0,Ot.U)(([r,i])=>i),Nr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Yl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=k1(e);return R1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nr.iC)}valueChanges(e={}){return cx(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Nr.iC)}get(e){return(0,nr.D)(this.query.get(e)).pipe(Nr.iC)}add(e){return this.ref.add(e)}doc(e){return new F1(this.ref.doc(e),this.afs)}}class F1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:c}=B1(r,t);return new N1(i,c,this.afs)}snapshotChanges(){return function IV(n,e){return O1(n,e).pipe(Ul(void 0),tv(),(0,Ot.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Nr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ot.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,nr.D)(this.ref.get(e)).pipe(Nr.iC)}}class DV{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Ob(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Wo(t=>t.length>0),Nr.iC):Ob(this.query,this.afs.schedulers.outsideAngular).pipe(Nr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Yl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=k1(e);return R1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nr.iC)}valueChanges(e={}){return cx(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Nr.iC)}get(e){return(0,nr.D)(this.query.get(e)).pipe(Nr.iC)}}const L1=new d.OlP("angularfire2.enableFirestorePersistence"),V1=new d.OlP("angularfire2.firestore.persistenceSettings"),TV=new d.OlP("angularfire2.firestore.settings"),SV=new d.OlP("angularfire2.firestore.use-emulator");function B1(n,e=(t=>t)){return{query:e(n),ref:n}}let ng=(()=>{class n{constructor(t,r,i,c,u,g,v,E,M,P,B,q,ae,Oe,Se,et,wt){this.schedulers=v;const It=(0,ss.on)(t,g,r),Ft=M;P&&x1(It,g,B,ae,Oe,Se,q,et),[this.firestore,this.persistenceEnabled$]=(0,ss.cc)(`${It.name}.firestore`,"AngularFirestore",It.name,()=>{const Zt=g.runOutsideAngular(()=>It.firestore());if(c&&Zt.settings(c),Ft&&Zt.useEmulator(...Ft),i&&!Ya(u)){const cn=()=>{try{return(0,nr.D)(Zt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(hs){return typeof console<"u"&&console.warn(hs),Et(!1)}};return[Zt,g.runOutsideAngular(cn)]}return[Zt,Et(!1)]},[c,Ft,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:u}=B1(i,r),g=this.schedulers.ngZone.run(()=>c);return new N1(g,u,this)}collectionGroup(t,r){const i=r||(u=>u),c=this.firestore.collectionGroup(t);return new DV(i(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new F1(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ss.Dh),d.LFG(ss.xv,8),d.LFG(L1,8),d.LFG(TV,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Nr.HU),d.LFG(V1,8),d.LFG(SV,8),d.LFG(P1,8),d.LFG(b1,8),d.LFG(D1,8),d.LFG(T1,8),d.LFG(S1,8),d.LFG(A1,8),d.LFG(M1,8),d.LFG(ox,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),AV=(()=>{class n{constructor(){vV.Z.registerVersion("angularfire",Nr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:L1,useValue:!0},{provide:V1,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[ng]}),n})();const U1_firebaseConfig={apiKey:"AIzaSyAHtpqMrZx0oid8hoRXPAS__mAXsPPW4W0",authDomain:"desktop-bde01.firebaseapp.com",databaseURL:"https://desktop-bde01.firebaseio.com",projectId:"desktop-bde01",storageBucket:"desktop-bde01.appspot.com",messagingSenderId:"764699675424",appId:"1:764699675424:web:7db63c839b0287bc836545"};class $a extends Kt.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var MV=L(9672);function j1(...n){const e=(0,Cd.yG)(n),t=(0,Cd.jO)(n),{args:r,keys:i}=aw(n);if(0===r.length)return(0,nr.D)([],e);const c=new tr.y(function xV(n,e,t=jd.y){return r=>{H1(e,()=>{const{length:i}=n,c=new Array(i);let u=i,g=i;for(let v=0;v<i;v++)H1(e,()=>{const E=(0,nr.D)(n[v],e);let M=!1;E.subscribe((0,$n.x)(r,P=>{c[v]=P,M||(M=!0,g--),g||r.next(t(c.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>Ry(i,u):jd.y));return t?c.pipe(lw(t)):c}function H1(n,e,t){n?(0,MV.f)(t,n,e):e()}function $1(n){return new tr.y(e=>{(0,es.Xf)(n()).subscribe(e)})}var PV=L(9635);function n0(n,e){const t=(0,LM.m)(n)?n:()=>n,r=i=>i.error(t());return new tr.y(e?i=>e.schedule(r,0,i):r)}function ux(){return(0,er.e)((n,e)=>{let t=null;n._refCount++;const r=(0,$n.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,c=t;t=null,i&&(!c||i===c)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class G1 extends tr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,er.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Is.w0;const t=this.getSubject();e.add(this.source.subscribe((0,$n.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Is.w0.EMPTY)}return e}refCount(){return ux()(this)}}var zs=L(5577);function rg(n,e){return(0,LM.m)(e)?(0,zs.z)(n,e,1):(0,zs.z)(n,1)}function Sh(n){return(0,er.e)((e,t)=>{let c,r=null,i=!1;r=e.subscribe((0,$n.x)(t,void 0,void 0,u=>{c=(0,es.Xf)(n(u,Sh(n)(e))),r?(r.unsubscribe(),r=null,c.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,c.subscribe(t))})}function dx(n){return n<=0?()=>Bl.E:(0,er.e)((e,t)=>{let r=[];e.subscribe((0,$n.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function z1(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Wo((i,c)=>n(i,c,r)):jd.y,dx(1),t?Eb(e):XR(()=>new Ib))}function hx(n){return(0,er.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Wt="primary",r0=Symbol("RouteTitle");class kV{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function O_(n){return new kV(n)}function NV(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let c=0;c<r.length;c++){const u=r[c],g=n[c];if(u.startsWith(":"))i[u.substring(1)]=g;else if(u!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Qc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let c=0;c<t.length;c++)if(i=t[c],!q1(n[i],e[i]))return!1;return!0}function q1(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,c)=>r[c]===i)}return n===e}function W1(n){return Array.prototype.concat.apply([],n)}function Z1(n){return n.length>0?n[n.length-1]:null}function $i(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ah(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,nr.D)(Promise.resolve(n)):Et(n)}const VV={exact:function Q1(n,e,t){if(!sg(n.segments,e.segments)||!Rb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Q1(n.children[r],e.children[r],t))return!1;return!0},subset:J1},K1={exact:function BV(n,e){return Qc(n,e)},subset:function UV(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>q1(n[t],e[t]))},ignored:()=>!0};function Y1(n,e,t){return VV[t.paths](n.root,e.root,t.matrixParams)&&K1[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function J1(n,e,t){return X1(n,e,e.segments,t)}function X1(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!sg(i,t)||e.hasChildren()||!Rb(i,t,r))}if(n.segments.length===t.length){if(!sg(n.segments,t)||!Rb(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!J1(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(sg(n.segments,i)&&Rb(n.segments,i,r)&&n.children[Wt])&&X1(n.children[Wt],e,c,r)}}function Rb(n,e,t){return e.every((r,i)=>K1[t](n[i].parameters,r.parameters))}class ig{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=O_(this.queryParams)),this._queryParamMap}toString(){return $V.serialize(this)}}class Qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,$i(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kb(this)}}class s0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=O_(this.parameters)),this._parameterMap}toString(){return rk(this)}}function sg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ek=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new px},providedIn:"root"}),n})();class px{parse(e){const t=new JV(e);return new ig(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${o0(e.root,!0)}`,r=function qV(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Nb(t)}=${Nb(i)}`).join("&"):`${Nb(t)}=${Nb(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function GV(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const $V=new px;function kb(n){return n.segments.map(e=>rk(e)).join("/")}function o0(n,e){if(!n.hasChildren())return kb(n);if(e){const t=n.children[Wt]?o0(n.children[Wt],!1):"",r=[];return $i(n.children,(i,c)=>{c!==Wt&&r.push(`${c}:${o0(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function HV(n,e){let t=[];return $i(n.children,(r,i)=>{i===Wt&&(t=t.concat(e(r,i)))}),$i(n.children,(r,i)=>{i!==Wt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Wt?[o0(n.children[Wt],!1)]:[`${i}:${o0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Wt]?`${kb(n)}/${t[0]}`:`${kb(n)}/(${t.join("//")})`}}function tk(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nb(n){return tk(n).replace(/%3B/gi,";")}function gx(n){return tk(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fb(n){return decodeURIComponent(n)}function nk(n){return Fb(n.replace(/\+/g,"%20"))}function rk(n){return`${gx(n.path)}${function zV(n){return Object.keys(n).map(e=>`;${gx(e)}=${gx(n[e])}`).join("")}(n.parameters)}`}const WV=/^[^\/()?;=#]+/;function Lb(n){const e=n.match(WV);return e?e[0]:""}const ZV=/^[^=?&#]+/,YV=/^[^&#]+/;class JV{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Wt]=new Qt(e,t)),r}parseSegment(){const e=Lb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new s0(Fb(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Lb(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Lb(this.remaining);i&&(r=i,this.capture(r))}e[Fb(t)]=Fb(r)}parseQueryParam(e){const t=function KV(n){const e=n.match(ZV);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function QV(n){const e=n.match(YV);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=nk(t),c=nk(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(c)}else e[i]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Lb(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let c;r.indexOf(":")>-1?(c=r.slice(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=Wt);const u=this.parseChildren();t[c]=1===Object.keys(u).length?u[Wt]:new Qt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function mx(n){return n.segments.length>0?new Qt([],{[Wt]:n}):n}function Vb(n){const e={};for(const r of Object.keys(n.children)){const c=Vb(n.children[r]);(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function XV(n){if(1===n.numberOfChildren&&n.children[Wt]){const e=n.children[Wt];return new Qt(n.segments.concat(e.segments),e.children)}return n}(new Qt(n.segments,e))}function og(n){return n instanceof ig}function nB(n,e,t,r,i){if(0===t.length)return R_(e.root,e.root,e.root,r,i);const c=function ok(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new sk(!0,0,n);let e=0,t=!1;const r=n.reduce((i,c,u)=>{if("object"==typeof c&&null!=c){if(c.outlets){const g={};return $i(c.outlets,(v,E)=>{g[E]="string"==typeof v?v.split("/"):v}),[...i,{outlets:g}]}if(c.segmentPath)return[...i,c.segmentPath]}return"string"!=typeof c?[...i,c]:0===u?(c.split("/").forEach((g,v)=>{0==v&&"."===g||(0==v&&""===g?t=!0:".."===g?e++:""!=g&&i.push(g))}),i):[...i,c]},[]);return new sk(t,e,r)}(t);return c.toRoot()?R_(e.root,e.root,new Qt([],{}),r,i):function u(v){const E=function iB(n,e,t,r){if(n.isAbsolute)return new k_(e.root,!0,0);if(-1===r)return new k_(t,t===e.root,0);return function ak(n,e,t){let r=n,i=e,c=t;for(;c>i;){if(c-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new k_(r,!1,i-c)}(t,r+(a0(n.commands[0])?0:1),n.numberOfDoubleDots)}(c,e,n.snapshot?._urlSegment,v),M=E.processChildren?l0(E.segmentGroup,E.index,c.commands):yx(E.segmentGroup,E.index,c.commands);return R_(e.root,E.segmentGroup,M,r,i)}(n.snapshot?._lastPathIndex)}function a0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function c0(n){return"object"==typeof n&&null!=n&&n.outlets}function R_(n,e,t,r,i){let u,c={};r&&$i(r,(v,E)=>{c[E]=Array.isArray(v)?v.map(M=>`${M}`):`${v}`}),u=n===e?t:ik(n,e,t);const g=mx(Vb(u));return new ig(g,c,i)}function ik(n,e,t){const r={};return $i(n.children,(i,c)=>{r[c]=i===e?t:ik(i,e,t)}),new Qt(n.segments,r)}class sk{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&a0(r[0]))throw new d.vHH(4003,!1);const i=r.find(c0);if(i&&i!==Z1(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class k_{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function yx(n,e,t){if(n||(n=new Qt([],{})),0===n.segments.length&&n.hasChildren())return l0(n,e,t);const r=function oB(n,e,t){let r=0,i=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return c;const u=n.segments[i],g=t[r];if(c0(g))break;const v=`${g}`,E=r<t.length-1?t[r+1]:null;if(i>0&&void 0===v)break;if(v&&E&&"object"==typeof E&&void 0===E.outlets){if(!lk(v,E,u))return c;r+=2}else{if(!lk(v,{},u))return c;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new Qt(n.segments.slice(0,r.pathIndex),{});return c.children[Wt]=new Qt(n.segments.slice(r.pathIndex),n.children),l0(c,0,i)}return r.match&&0===i.length?new Qt(n.segments,{}):r.match&&!n.hasChildren()?vx(n,e,t):r.match?l0(n,0,i):vx(n,e,t)}function l0(n,e,t){if(0===t.length)return new Qt(n.segments,{});{const r=function sB(n){return c0(n[0])?n[0].outlets:{[Wt]:n}}(t),i={};return $i(r,(c,u)=>{"string"==typeof c&&(c=[c]),null!==c&&(i[u]=yx(n.children[u],e,c))}),$i(n.children,(c,u)=>{void 0===r[u]&&(i[u]=c)}),new Qt(n.segments,i)}}function vx(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const c=t[i];if(c0(c)){const v=aB(c.outlets);return new Qt(r,v)}if(0===i&&a0(t[0])){r.push(new s0(n.segments[e].path,ck(t[0]))),i++;continue}const u=c0(c)?c.outlets[Wt]:`${c}`,g=i<t.length-1?t[i+1]:null;u&&g&&a0(g)?(r.push(new s0(u,ck(g))),i+=2):(r.push(new s0(u,{})),i++)}return new Qt(r,{})}function aB(n){const e={};return $i(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=vx(new Qt([],{}),0,t))}),e}function ck(n){const e={};return $i(n,(t,r)=>e[r]=`${t}`),e}function lk(n,e,t){return n==t.path&&Qc(e,t.parameters)}class Mu{constructor(e,t){this.id=e,this.url=t}}class uk extends Mu{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class u0 extends Mu{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Bb extends Mu{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class dk extends Mu{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cB extends Mu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lB extends Mu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uB extends Mu{constructor(e,t,r,i,c){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=c,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class dB extends Mu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hB extends Mu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fB{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class pB{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gB{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mB{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _B{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yB{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hk{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Cx(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Cx(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=wx(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return wx(e,this._root).map(t=>t.value)}}function Cx(n,e){if(n===e.value)return e;for(const t of e.children){const r=Cx(n,t);if(r)return r}return null}function wx(n,e){if(n===e.value)return[e];for(const t of e.children){const r=wx(n,t);if(r.length)return r.unshift(e),r}return[]}class xu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function N_(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class fk extends hk{constructor(e,t){super(e),this.snapshot=t,Ix(this,e)}toString(){return this.snapshot.toString()}}function pk(n,e){const t=function CB(n,e){const u=new Ub([],{},{},"",{},Wt,e,null,n.root,-1,{});return new mk("",new xu(u,[]))}(n,e),r=new $a([new s0("",{})]),i=new $a({}),c=new $a({}),u=new $a({}),g=new $a(""),v=new ag(r,i,u,g,c,Wt,e,t.root);return v.snapshot=t.root,new fk(new xu(v,[]),t)}class ag{constructor(e,t,r,i,c,u,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=c,this.outlet=u,this.component=g,this.title=this.data?.pipe((0,Ot.U)(E=>E[r0]))??Et(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ot.U)(e=>O_(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ot.U)(e=>O_(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function gk(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],c=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(c.component)break;r--}}return function wB(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ub{constructor(e,t,r,i,c,u,g,v,E,M,P,B){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=c,this.outlet=u,this.component=g,this.title=this.data?.[r0],this.routeConfig=v,this._urlSegment=E,this._lastPathIndex=M,this._correctedLastPathIndex=B??M,this._resolve=P}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=O_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=O_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class mk extends hk{constructor(e,t){super(t),this.url=e,Ix(this,t)}toString(){return _k(this._root)}}function Ix(n,e){e.value._routerState=n,e.children.forEach(t=>Ix(n,t))}function _k(n){const e=n.children.length>0?` { ${n.children.map(_k).join(", ")} } `:"";return`${n.value}${e}`}function Ex(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Qc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Qc(e.params,t.params)||n.params.next(t.params),function FV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Qc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Qc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function bx(n,e){const t=Qc(n.params,e.params)&&function jV(n,e){return sg(n,e)&&n.every((t,r)=>Qc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||bx(n.parent,e.parent))}function d0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function EB(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return d0(n,r,i);return d0(n,r)})}(n,e,t);return new xu(r,i)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const u=c.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(g=>d0(n,g)),u}}const r=function bB(n){return new ag(new $a(n.url),new $a(n.params),new $a(n.queryParams),new $a(n.fragment),new $a(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(c=>d0(n,c));return new xu(r,i)}}const Dx="ngNavigationCancelingError";function yk(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=og(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=vk(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function vk(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Dx]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Ck(n){return wk(n)&&og(n.url)}function wk(n){return n&&n[Dx]}class DB{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new h0,this.attachRef=null}}let h0=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new DB,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jb=!1;let Ik=(()=>{class n{constructor(t,r,i,c,u){this.parentContexts=t,this.location=r,this.changeDetector=c,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||Wt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,jb);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,jb);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,jb);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,jb);this._activatedRoute=t;const i=this.location,u=t._futureSnapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,v=new TB(t,g,i.injector);if(r&&function SB(n){return!!n.resolveComponentFactory}(r)){const E=r.resolveComponentFactory(u);this.activated=i.createComponent(E,i.length,v)}else this.activated=i.createComponent(u,{index:i.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(h0),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class TB{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ag?this.route:e===h0?this.childContexts:this.parent.get(e,t)}}let Ek=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Ik],encapsulation:2}),n})();function bk(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Sx(n){const e=n.children&&n.children.map(Sx),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Wt&&(t.component=Ek),t}function na(n){return n.outlet||Wt}function Dk(n,e){const t=n.filter(r=>na(r)===e);return t.push(...n.filter(r=>na(r)!==e)),t}function f0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class OB{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ex(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=N_(t);e.children.forEach(c=>{const u=c.value.outlet;this.deactivateRoutes(c,i[u],r),delete i[u]}),$i(i,(c,u)=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const i=e.value,c=t?t.value:null;if(i===c)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,c=N_(e);for(const u of Object.keys(c))this.deactivateRouteAndItsChildren(c[u],i);if(r&&r.outlet){const u=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,c=N_(e);for(const u of Object.keys(c))this.deactivateRouteAndItsChildren(c[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=N_(t);e.children.forEach(c=>{this.activateRoutes(c,i[c.value.outlet],r),this.forwardEvent(new yB(c.value.snapshot))}),e.children.length&&this.forwardEvent(new mB(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,c=t?t.value:null;if(Ex(i),i===c)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const g=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(g.contexts),u.attachRef=g.componentRef,u.route=g.route.value,u.outlet&&u.outlet.attach(g.componentRef,g.route.value),Ex(g.route.value),this.activateChildRoutes(e,null,u.children)}else{const g=f0(i.snapshot),v=g?.get(d._Vd)??null;u.attachRef=null,u.route=i,u.resolver=v,u.injector=g,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class Tk{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Hb{constructor(e,t){this.component=e,this.route=t}}function RB(n,e,t){const r=n._root;return p0(r,e?e._root:null,t,[r.value])}function F_(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function p0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const c=N_(e);return n.children.forEach(u=>{(function NB(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,u=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(u&&c.routeConfig===u.routeConfig){const v=function FB(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!sg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!sg(n.url,e.url)||!Qc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bx(n,e)||!Qc(n.queryParams,e.queryParams);default:return!bx(n,e)}}(u,c,c.routeConfig.runGuardsAndResolvers);v?i.canActivateChecks.push(new Tk(r)):(c.data=u.data,c._resolvedData=u._resolvedData),p0(n,e,c.component?g?g.children:null:t,r,i),v&&g&&g.outlet&&g.outlet.isActivated&&i.canDeactivateChecks.push(new Hb(g.outlet.component,u))}else u&&g0(e,g,i),i.canActivateChecks.push(new Tk(r)),p0(n,null,c.component?g?g.children:null:t,r,i)})(u,c[u.value.outlet],t,r.concat([u.value]),i),delete c[u.value.outlet]}),$i(c,(u,g)=>g0(u,t.getContext(g),i)),i}function g0(n,e,t){const r=N_(n),i=n.value;$i(r,(c,u)=>{g0(c,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Hb(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function m0(n){return"function"==typeof n}function Ax(n){return n instanceof Ib||"EmptyError"===n?.name}const $b=Symbol("INITIAL_VALUE");function L_(){return mr(n=>j1(n.map(e=>e.pipe(If(1),Ul($b)))).pipe((0,Ot.U)(e=>{for(const t of e)if(!0!==t){if(t===$b)return $b;if(!1===t||t instanceof ig)return t}return!0}),Wo(e=>e!==$b),If(1)))}function Sk(n){return(0,PV.z)((0,kr.b)(e=>{if(og(e))throw yk(0,e)}),(0,Ot.U)(e=>!0===e))}const Mx={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ak(n,e,t,r,i){const c=xx(n,e,t);return c.matched?function XB(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Et(i.map(u=>{const g=F_(u,n);return Ah(function HB(n){return n&&m0(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(L_(),Sk()):Et(!0)}(r=bk(e,r),e,t).pipe((0,Ot.U)(u=>!0===u?c:{...Mx})):Et(c)}function xx(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Mx}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||NV)(t,n,e);if(!i)return{...Mx};const c={};$i(i.posParams,(g,v)=>{c[v]=g.path});const u=i.consumed.length>0?{...c,...i.consumed[i.consumed.length-1].parameters}:c;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function Gb(n,e,t,r,i="corrected"){if(t.length>0&&function nU(n,e,t){return t.some(r=>zb(n,e,r)&&na(r)!==Wt)}(n,t,r)){const u=new Qt(e,function tU(n,e,t,r){const i={};i[Wt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&na(c)!==Wt){const u=new Qt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[na(c)]=u}return i}(n,e,r,new Qt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function rU(n,e,t){return t.some(r=>zb(n,e,r))}(n,t,r)){const u=new Qt(n.segments,function eU(n,e,t,r,i,c){const u={};for(const g of r)if(zb(n,t,g)&&!i[na(g)]){const v=new Qt([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===c?n.segments.length:e.length,u[na(g)]=v}return{...i,...u}}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const c=new Qt(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function zb(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Mk(n,e,t,r){return!!(na(n)===r||r!==Wt&&zb(e,t,n))&&("**"===n.path||xx(e,n,t).matched)}function xk(n,e,t){return 0===e.length&&!n.children[t]}const qb=!1;class Wb{constructor(e){this.segmentGroup=e||null}}class Pk{constructor(e){this.urlTree=e}}function _0(n){return n0(new Wb(n))}function Ok(n){return n0(new Pk(n))}class aU{constructor(e,t,r,i,c){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=c,this.allowRedirects=!0}apply(){const e=Gb(this.urlTree.root,[],[],this.config).segmentGroup,t=new Qt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Wt).pipe((0,Ot.U)(c=>this.createUrlTree(Vb(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Sh(c=>{if(c instanceof Pk)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof Wb?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Wt).pipe((0,Ot.U)(i=>this.createUrlTree(Vb(i),e.queryParams,e.fragment))).pipe(Sh(i=>{throw i instanceof Wb?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,qb)}createUrlTree(e,t,r){const i=mx(e);return new ig(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ot.U)(c=>new Qt([],c))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const c of Object.keys(r.children))"primary"===c?i.unshift(c):i.push(c);return(0,nr.D)(i).pipe(rg(c=>{const u=r.children[c],g=Dk(t,c);return this.expandSegmentGroup(e,g,u,c).pipe((0,Ot.U)(v=>({segment:v,outlet:c})))}),Yl((c,u)=>(c[u.outlet]=u.segment,c),{}),z1())}expandSegment(e,t,r,i,c,u){return(0,nr.D)(r).pipe(rg(g=>this.expandSegmentAgainstRoute(e,t,r,g,i,c,u).pipe(Sh(E=>{if(E instanceof Wb)return Et(null);throw E}))),Au(g=>!!g),Sh((g,v)=>{if(Ax(g))return xk(t,i,c)?Et(new Qt([],{})):_0(t);throw g}))}expandSegmentAgainstRoute(e,t,r,i,c,u,g){return Mk(i,t,c,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,c,u):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,c,u):_0(t):_0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,c,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,c,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const c=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ok(c):this.lineralizeSegments(r,c).pipe((0,zs.z)(u=>{const g=new Qt(u,{});return this.expandSegment(e,g,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,c,u){const{matched:g,consumedSegments:v,remainingSegments:E,positionalParamSegments:M}=xx(t,i,c);if(!g)return _0(t);const P=this.applyRedirectCommands(v,i.redirectTo,M);return i.redirectTo.startsWith("/")?Ok(P):this.lineralizeSegments(i,P).pipe((0,zs.z)(B=>this.expandSegment(e,t,r,B.concat(E),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,c){return"**"===r.path?(e=bk(r,e),r.loadChildren?(r._loadedRoutes?Et({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Ot.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new Qt(i,{})))):Et(new Qt(i,{}))):Ak(t,r,i,e).pipe(mr(({matched:u,consumedSegments:g,remainingSegments:v})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,zs.z)(M=>{const P=M.injector??e,B=M.routes,{segmentGroup:q,slicedSegments:ae}=Gb(t,g,v,B),Oe=new Qt(q.segments,q.children);if(0===ae.length&&Oe.hasChildren())return this.expandChildren(P,B,Oe).pipe((0,Ot.U)(It=>new Qt(g,It)));if(0===B.length&&0===ae.length)return Et(new Qt(g,{}));const Se=na(r)===c;return this.expandSegment(P,Oe,B,ae,Se?Wt:c,!0).pipe((0,Ot.U)(wt=>new Qt(g.concat(wt.segments),wt.children)))})):_0(t)))}getChildConfig(e,t,r){return t.children?Et({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Et({routes:t._loadedRoutes,injector:t._loadedInjector}):function JB(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Et(!0):Et(i.map(u=>{const g=F_(u,n);return Ah(function VB(n){return n&&m0(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(L_(),Sk())}(e,t,r).pipe((0,zs.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,kr.b)(c=>{t._loadedRoutes=c.routes,t._loadedInjector=c.injector})):function sU(n){return n0(vk(qb,3))}())):Et({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Et(r);if(i.numberOfChildren>1||!i.children[Wt])return n0(new d.vHH(4e3,qb));i=i.children[Wt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const c=this.createSegmentGroup(e,t.root,r,i);return new ig(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return $i(e,(i,c)=>{if("string"==typeof i&&i.startsWith(":")){const g=i.substring(1);r[c]=t[g]}else r[c]=i}),r}createSegmentGroup(e,t,r,i){const c=this.createSegments(e,t.segments,r,i);let u={};return $i(t.children,(g,v)=>{u[v]=this.createSegmentGroup(e,g,r,i)}),new Qt(c,u)}createSegments(e,t,r,i){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,i):this.findOrReturn(c,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,qb);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class lU{}class hU{constructor(e,t,r,i,c,u,g,v){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=c,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=g,this.urlSerializer=v}recognize(){const e=Gb(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Wt).pipe((0,Ot.U)(t=>{if(null===t)return null;const r=new Ub([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Wt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new xu(r,t),c=new mk(this.url,i);return this.inheritParamsAndData(c._root),c}))}inheritParamsAndData(e){const t=e.value,r=gk(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,nr.D)(Object.keys(r.children)).pipe(rg(i=>{const c=r.children[i],u=Dk(t,i);return this.processSegmentGroup(e,u,c,i)}),Yl((i,c)=>i&&c?(i.push(...c),i):null),function OV(n,e=!1){return(0,er.e)((t,r)=>{let i=0;t.subscribe((0,$n.x)(r,c=>{const u=n(c,i++);(u||e)&&r.next(c),!u&&r.complete()}))})}(i=>null!==i),Eb(null),z1(),(0,Ot.U)(i=>{if(null===i)return null;const c=Rk(i);return function fU(n){n.sort((e,t)=>e.value.outlet===Wt?-1:t.value.outlet===Wt?1:e.value.outlet.localeCompare(t.value.outlet))}(c),c}))}processSegment(e,t,r,i,c){return(0,nr.D)(t).pipe(rg(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,c)),Au(u=>!!u),Sh(u=>{if(Ax(u))return xk(r,i,c)?Et([]):Et(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,c){if(t.redirectTo||!Mk(t,r,i,c))return Et(null);let u;if("**"===t.path){const g=i.length>0?Z1(i).parameters:{},v=Nk(r)+i.length;u=Et({snapshot:new Ub(i,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Lk(t),na(t),t.component??t._loadedComponent??null,t,kk(r),v,Vk(t),v),consumedSegments:[],remainingSegments:[]})}else u=Ak(r,t,i,e).pipe((0,Ot.U)(({matched:g,consumedSegments:v,remainingSegments:E,parameters:M})=>{if(!g)return null;const P=Nk(r)+v.length;return{snapshot:new Ub(v,M,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Lk(t),na(t),t.component??t._loadedComponent??null,t,kk(r),P,Vk(t),P),consumedSegments:v,remainingSegments:E}}));return u.pipe(mr(g=>{if(null===g)return Et(null);const{snapshot:v,consumedSegments:E,remainingSegments:M}=g;e=t._injector??e;const P=t._loadedInjector??e,B=function pU(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:q,slicedSegments:ae}=Gb(r,E,M,B.filter(Se=>void 0===Se.redirectTo),this.relativeLinkResolution);if(0===ae.length&&q.hasChildren())return this.processChildren(P,B,q).pipe((0,Ot.U)(Se=>null===Se?null:[new xu(v,Se)]));if(0===B.length&&0===ae.length)return Et([new xu(v,[])]);const Oe=na(t)===c;return this.processSegment(P,B,q,ae,Oe?Wt:c).pipe((0,Ot.U)(Se=>null===Se?null:[new xu(v,Se)]))}))}}function gU(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Rk(n){const e=[],t=new Set;for(const r of n){if(!gU(r)){e.push(r);continue}const i=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Rk(r.children);e.push(new xu(r.value,i))}return e.filter(r=>!t.has(r))}function kk(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Nk(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Lk(n){return n.data||{}}function Vk(n){return n.resolve||{}}function Bk(n){return"string"==typeof n.title||null===n.title}function Px(n){return mr(e=>{const t=n(e);return t?(0,nr.D)(t).pipe((0,Ot.U)(()=>e)):Et(e)})}let Uk=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(c=>c.outlet===Wt);return r}getResolvedTitleForRoute(t){return t.data[r0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(jk)},providedIn:"root"}),n})(),jk=(()=>{class n extends Uk{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Yh))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class EU{}class DU extends class bU{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ox=new d.OlP("",{providedIn:"root",factory:()=>({})}),Rx=new d.OlP("ROUTES");let $k=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Et(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ah(t.loadComponent()).pipe((0,kr.b)(c=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=c}),hx(()=>{this.componentLoaders.delete(t)})),i=new G1(r,()=>new Kt.x).pipe(ux());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Et({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const c=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Ot.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,E,M=!1;Array.isArray(g)?E=g:(v=g.create(t).injector,E=W1(v.get(Rx,[],d.XFs.Self|d.XFs.Optional)));return{routes:E.map(Sx),injector:v}}),hx(()=>{this.childrenLoaders.delete(r)})),u=new G1(c,()=>new Kt.x).pipe(ux());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return Ah(t()).pipe((0,zs.z)(r=>r instanceof d.YKP||Array.isArray(r)?Et(r):(0,nr.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class SU{}class AU{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function MU(n){throw n}function xU(n,e,t){return e.parse("/")}const PU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},OU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ds=(()=>{class n{constructor(t,r,i,c,u,g,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=c,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Kt.x,this.errorHandler=MU,this.malformedUriErrorHandler=xU,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Et(void 0),this.urlHandlingStrategy=new AU,this.routeReuseStrategy=new DU,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get($k),this.configLoader.onLoadEndListener=B=>this.triggerEvent(new pB(B)),this.configLoader.onLoadStartListener=B=>this.triggerEvent(new fB(B)),this.ngModule=u.get(d.h0i),this.console=u.get(d.c2e);const P=u.get(d.R0b);this.isNgZoneEnabled=P instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function LV(){return new ig(new Qt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=pk(this.currentUrlTree,this.rootComponentType),this.transitions=new $a({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Wo(i=>0!==i.id),(0,Ot.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),mr(i=>{let c=!1,u=!1;return Et(i).pipe((0,kr.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),mr(g=>{const v=this.browserUrlTree.toString(),E=!this.navigated||g.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return zk(g.source)&&(this.browserUrlTree=g.extractedUrl),Et(g).pipe(mr(P=>{const B=this.transitions.getValue();return r.next(new uk(P.id,this.serializeUrl(P.extractedUrl),P.source,P.restoredState)),B!==this.transitions.getValue()?Bl.E:Promise.resolve(P)}),function cU(n,e,t,r){return mr(i=>function oU(n,e,t,r,i){return new aU(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Ot.U)(c=>({...i,urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,kr.b)(P=>{this.currentNavigation={...this.currentNavigation,finalUrl:P.urlAfterRedirects},i.urlAfterRedirects=P.urlAfterRedirects}),function _U(n,e,t,r,i,c){return(0,zs.z)(u=>function dU(n,e,t,r,i,c,u="emptyOnly",g="legacy"){return new hU(n,e,t,r,i,u,g,c).recognize().pipe(mr(v=>null===v?function uU(n){return new tr.y(e=>e.error(n))}(new lU):Et(v)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i,c).pipe((0,Ot.U)(g=>({...u,targetSnapshot:g}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,kr.b)(P=>{if(i.targetSnapshot=P.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!P.extras.skipLocationChange){const q=this.urlHandlingStrategy.merge(P.urlAfterRedirects,P.rawUrl);this.setBrowserUrl(q,P)}this.browserUrlTree=P.urlAfterRedirects}const B=new cB(P.id,this.serializeUrl(P.extractedUrl),this.serializeUrl(P.urlAfterRedirects),P.targetSnapshot);r.next(B)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:B,extractedUrl:q,source:ae,restoredState:Oe,extras:Se}=g,et=new uk(B,this.serializeUrl(q),ae,Oe);r.next(et);const wt=pk(q,this.rootComponentType).snapshot;return Et(i={...g,targetSnapshot:wt,urlAfterRedirects:q,extras:{...Se,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=g.rawUrl,g.resolve(null),Bl.E}),(0,kr.b)(g=>{const v=new lB(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),(0,Ot.U)(g=>i={...g,guards:RB(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),function GB(n,e){return(0,zs.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:c,canDeactivateChecks:u}}=t;return 0===u.length&&0===c.length?Et({...t,guardsResult:!0}):function zB(n,e,t,r){return(0,nr.D)(n).pipe((0,zs.z)(i=>function QB(n,e,t,r,i){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return c&&0!==c.length?Et(c.map(g=>{const v=f0(e)??i,E=F_(g,v);return Ah(function jB(n){return n&&m0(n.canDeactivate)}(E)?E.canDeactivate(n,e,t,r):v.runInContext(()=>E(n,e,t,r))).pipe(Au())})).pipe(L_()):Et(!0)}(i.component,i.route,t,e,r)),Au(i=>!0!==i,!0))}(u,r,i,n).pipe((0,zs.z)(g=>g&&function LB(n){return"boolean"==typeof n}(g)?function qB(n,e,t,r){return(0,nr.D)(e).pipe(rg(i=>Xg(function ZB(n,e){return null!==n&&e&&e(new gB(n)),Et(!0)}(i.route.parent,r),function WB(n,e){return null!==n&&e&&e(new _B(n)),Et(!0)}(i.route,r),function YB(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(u=>function kB(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>$1(()=>Et(u.guards.map(v=>{const E=f0(u.node)??t,M=F_(v,E);return Ah(function UB(n){return n&&m0(n.canActivateChild)}(M)?M.canActivateChild(r,n):E.runInContext(()=>M(r,n))).pipe(Au())})).pipe(L_())));return Et(c).pipe(L_())}(n,i.path,t),function KB(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Et(!0);const i=r.map(c=>$1(()=>{const u=f0(e)??t,g=F_(c,u);return Ah(function BB(n){return n&&m0(n.canActivate)}(g)?g.canActivate(e,n):u.runInContext(()=>g(e,n))).pipe(Au())}));return Et(i).pipe(L_())}(n,i.route,t))),Au(i=>!0!==i,!0))}(r,c,n,e):Et(g)),(0,Ot.U)(g=>({...t,guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,kr.b)(g=>{if(i.guardsResult=g.guardsResult,og(g.guardsResult))throw yk(0,g.guardsResult);const v=new uB(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(v)}),Wo(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",3),!1)),Px(g=>{if(g.guards.canActivateChecks.length)return Et(g).pipe((0,kr.b)(v=>{const E=new dB(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(E)}),mr(v=>{let E=!1;return Et(v).pipe(function yU(n,e){return(0,zs.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Et(t);let c=0;return(0,nr.D)(i).pipe(rg(u=>function vU(n,e,t,r){const i=n.routeConfig,c=n._resolve;return void 0!==i?.title&&!Bk(i)&&(c[r0]=i.title),function CU(n,e,t,r){const i=function wU(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Et({});const c={};return(0,nr.D)(i).pipe((0,zs.z)(u=>function IU(n,e,t,r){const i=f0(e)??r,c=F_(n,i);return Ah(c.resolve?c.resolve(e,t):i.runInContext(()=>c(e,t)))}(n[u],e,t,r).pipe(Au(),(0,kr.b)(g=>{c[u]=g}))),dx(1),function RV(n){return(0,Ot.U)(()=>n)}(c),Sh(u=>Ax(u)?Bl.E:n0(u)))}(c,n,e,r).pipe((0,Ot.U)(u=>(n._resolvedData=u,n.data=gk(n,t).resolve,i&&Bk(i)&&(n.data[r0]=i.title),null)))}(u.route,r,n,e)),(0,kr.b)(()=>c++),dx(1),(0,zs.z)(u=>c===i.length?Et(t):Bl.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,kr.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),(0,kr.b)(v=>{const E=new hB(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(E)}))}),Px(g=>{const v=E=>{const M=[];E.routeConfig?.loadComponent&&!E.routeConfig._loadedComponent&&M.push(this.configLoader.loadComponent(E.routeConfig).pipe((0,kr.b)(P=>{E.component=P}),(0,Ot.U)(()=>{})));for(const P of E.children)M.push(...v(P));return M};return j1(v(g.targetSnapshot.root)).pipe(Eb(),If(1))}),Px(()=>this.afterPreactivation()),(0,Ot.U)(g=>{const v=function IB(n,e,t){const r=d0(n,e._root,t?t._root:void 0);return new fk(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return i={...g,targetRouterState:v}}),(0,kr.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,Ot.U)(r=>(new OB(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,kr.b)({next(){c=!0},complete(){c=!0}}),hx(()=>{c||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Sh(g=>{if(u=!0,wk(g)){Ck(g)||(this.navigated=!0,this.restoreHistory(i,!0));const v=new Bb(i.id,this.serializeUrl(i.extractedUrl),g.message,g.cancellationCode);if(r.next(v),Ck(g)){const E=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),M={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||zk(i.source)};this.scheduleNavigation(E,"imperative",null,M,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const v=new dk(i.id,this.serializeUrl(i.extractedUrl),g,i.targetSnapshot??void 0);r.next(v);try{i.resolve(this.errorHandler(g))}catch(E){i.reject(E)}}return Bl.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},c=t.state?.navigationId?t.state:null;if(c){const g={...c};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(i.state=g)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,c,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Sx),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:c,fragment:u,queryParamsHandling:g,preserveFragment:v}=r,E=i||this.routerState.root,M=v?this.currentUrlTree.fragment:u;let P=null;switch(g){case"merge":P={...this.currentUrlTree.queryParams,...c};break;case"preserve":P=this.currentUrlTree.queryParams;break;default:P=c||null}return null!==P&&(P=this.removeEmptyProps(P)),nB(E,this.currentUrlTree,t,P,M??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=og(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function kU(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...PU}:!1===r?{...OU}:r,og(t))return Y1(this.currentUrlTree,t,i);const c=this.parseUrl(t);return Y1(this.currentUrlTree,c,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const c=t[i];return null!=c&&(r[i]=c),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new u0(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,c,u){if(this.disposed)return Promise.resolve(!1);let g,v,E;u?(g=u.resolve,v=u.reject,E=u.promise):E=new Promise((B,q)=>{g=B,v=q});const M=++this.navigationId;let P;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),P=i&&i.\u0275routerPageId?i.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):P=0,this.setTransition({id:M,targetPageId:P,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:g,reject:v,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(B=>Promise.reject(B))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),c={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",c):this.location.go(i,"",c)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const c=new Bb(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(c),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Gk(){const n=(0,d.f3M)(ek),e=(0,d.f3M)(h0),t=(0,d.f3M)(Le),r=(0,d.f3M)(d.zs3),i=(0,d.f3M)(d.Sil),c=(0,d.f3M)(Rx,{optional:!0})??[],u=(0,d.f3M)(Ox,{optional:!0})??{},g=(0,d.f3M)(jk),v=(0,d.f3M)(Uk,{optional:!0}),E=(0,d.f3M)(SU,{optional:!0}),M=(0,d.f3M)(EU,{optional:!0}),P=new ds(null,n,e,t,r,i,W1(c));return E&&(P.urlHandlingStrategy=E),M&&(P.routeReuseStrategy=M),P.titleStrategy=v??g,function RU(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,P),P}()},providedIn:"root"}),n})();function zk(n){return"imperative"!==n}class Jk{}class Xk{}class Pu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),c=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,c),this.headers.has(c)?this.headers.get(c).push(u):this.headers.set(c,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Pu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Pu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Pu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const c=e.value;if(c){let u=this.headers.get(t);if(!u)return;u=u.filter(g=>-1===c.indexOf(g)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class HU{encodeKey(e){return eN(e)}encodeValue(e){return eN(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const GU=/%(\d[a-f0-9])/gi,zU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function eN(n){return encodeURIComponent(n).replace(GU,(e,t)=>zU[t]??e)}function Qb(n){return`${n}`}class Mh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new HU,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function $U(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const c=i.indexOf("="),[u,g]=-1==c?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,c)),e.decodeValue(i.slice(c+1))],v=t.get(u)||[];v.push(g),t.set(u,v)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Qb):[Qb(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(c=>{t.push({param:r,value:c,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Mh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Qb(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Qb(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class qU{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function tN(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function nN(n){return typeof Blob<"u"&&n instanceof Blob}function rN(n){return typeof FormData<"u"&&n instanceof FormData}class y0{constructor(e,t,r,i){let c;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function WU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,c=i):c=r,c&&(this.reportProgress=!!c.reportProgress,this.withCredentials=!!c.withCredentials,c.responseType&&(this.responseType=c.responseType),c.headers&&(this.headers=c.headers),c.context&&(this.context=c.context),c.params&&(this.params=c.params)),this.headers||(this.headers=new Pu),this.context||(this.context=new qU),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+u}}else this.params=new Mh,this.urlWithParams=t}serializeBody(){return null===this.body?null:tN(this.body)||nN(this.body)||rN(this.body)||function ZU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Mh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||rN(this.body)?null:nN(this.body)?this.body.type||null:tN(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Mh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,E=e.params||this.params;const M=e.context??this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((P,B)=>P.set(B,e.setHeaders[B]),v)),e.setParams&&(E=Object.keys(e.setParams).reduce((P,B)=>P.set(B,e.setParams[B]),E)),new y0(t,r,c,{params:E,headers:v,context:M,reportProgress:g,responseType:i,withCredentials:u})}}var Wr=(()=>((Wr=Wr||{})[Wr.Sent=0]="Sent",Wr[Wr.UploadProgress=1]="UploadProgress",Wr[Wr.ResponseHeader=2]="ResponseHeader",Wr[Wr.DownloadProgress=3]="DownloadProgress",Wr[Wr.Response=4]="Response",Wr[Wr.User=5]="User",Wr))();class Bx{constructor(e,t=200,r="OK"){this.headers=e.headers||new Pu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ux extends Bx{constructor(e={}){super(e),this.type=Wr.ResponseHeader}clone(e={}){return new Ux({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Jb extends Bx{constructor(e={}){super(e),this.type=Wr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Jb({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class iN extends Bx{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function jx(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let sN=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let c;if(t instanceof y0)c=t;else{let v,E;v=i.headers instanceof Pu?i.headers:new Pu(i.headers),i.params&&(E=i.params instanceof Mh?i.params:new Mh({fromObject:i.params})),c=new y0(t,r,void 0!==i.body?i.body:null,{headers:v,context:i.context,params:E,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=Et(c).pipe(rg(v=>this.handler.handle(v)));if(t instanceof y0||"events"===i.observe)return u;const g=u.pipe(Wo(v=>v instanceof Jb));switch(i.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return g.pipe((0,Ot.U)(v=>{if(null!==v.body&&!(v.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return v.body}));case"blob":return g.pipe((0,Ot.U)(v=>{if(null!==v.body&&!(v.body instanceof Blob))throw new Error("Response is not a Blob.");return v.body}));case"text":return g.pipe((0,Ot.U)(v=>{if(null!==v.body&&"string"!=typeof v.body)throw new Error("Response is not a string.");return v.body}));default:return g.pipe((0,Ot.U)(v=>v.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Mh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,jx(i,r))}post(t,r,i={}){return this.request("POST",t,jx(i,r))}put(t,r,i={}){return this.request("PUT",t,jx(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Jk))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class oN{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const aN=new d.OlP("HTTP_INTERCEPTORS");let KU=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const YU=/^\)\]\}',?\n/;let cN=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new tr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((q,ae)=>i.setRequestHeader(q,ae.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const q=t.detectContentTypeHeader();null!==q&&i.setRequestHeader("Content-Type",q)}if(t.responseType){const q=t.responseType.toLowerCase();i.responseType="json"!==q?q:"text"}const c=t.serializeBody();let u=null;const g=()=>{if(null!==u)return u;const q=i.statusText||"OK",ae=new Pu(i.getAllResponseHeaders()),Oe=function QU(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return u=new Ux({headers:ae,status:i.status,statusText:q,url:Oe}),u},v=()=>{let{headers:q,status:ae,statusText:Oe,url:Se}=g(),et=null;204!==ae&&(et=typeof i.response>"u"?i.responseText:i.response),0===ae&&(ae=et?200:0);let wt=ae>=200&&ae<300;if("json"===t.responseType&&"string"==typeof et){const It=et;et=et.replace(YU,"");try{et=""!==et?JSON.parse(et):null}catch(Ft){et=It,wt&&(wt=!1,et={error:Ft,text:et})}}wt?(r.next(new Jb({body:et,headers:q,status:ae,statusText:Oe,url:Se||void 0})),r.complete()):r.error(new iN({error:et,headers:q,status:ae,statusText:Oe,url:Se||void 0}))},E=q=>{const{url:ae}=g(),Oe=new iN({error:q,status:i.status||0,statusText:i.statusText||"Unknown Error",url:ae||void 0});r.error(Oe)};let M=!1;const P=q=>{M||(r.next(g()),M=!0);let ae={type:Wr.DownloadProgress,loaded:q.loaded};q.lengthComputable&&(ae.total=q.total),"text"===t.responseType&&!!i.responseText&&(ae.partialText=i.responseText),r.next(ae)},B=q=>{let ae={type:Wr.UploadProgress,loaded:q.loaded};q.lengthComputable&&(ae.total=q.total),r.next(ae)};return i.addEventListener("load",v),i.addEventListener("error",E),i.addEventListener("timeout",E),i.addEventListener("abort",E),t.reportProgress&&(i.addEventListener("progress",P),null!==c&&i.upload&&i.upload.addEventListener("progress",B)),i.send(c),r.next({type:Wr.Sent}),()=>{i.removeEventListener("error",E),i.removeEventListener("abort",E),i.removeEventListener("load",v),i.removeEventListener("timeout",E),t.reportProgress&&(i.removeEventListener("progress",P),null!==c&&i.upload&&i.upload.removeEventListener("progress",B)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oa))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Hx=new d.OlP("XSRF_COOKIE_NAME"),$x=new d.OlP("XSRF_HEADER_NAME");class lN{}let JU=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ia(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(d.Lbi),d.LFG(Hx))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Gx=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const c=this.tokenService.getToken();return null!==c&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,c)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(lN),d.LFG($x))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),XU=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(aN,[]);this.chain=r.reduceRight((i,c)=>new oN(i,c),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Xk),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ej=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Gx,useClass:KU}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Hx,useValue:t.cookieName}:[],t.headerName?{provide:$x,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Gx,{provide:aN,useExisting:Gx,multi:!0},{provide:lN,useClass:JU},{provide:Hx,useValue:"XSRF-TOKEN"},{provide:$x,useValue:"X-XSRF-TOKEN"}]}),n})(),tj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[sN,{provide:Jk,useClass:XU},cN,{provide:Xk,useExisting:cN}],imports:[ej.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})(),v0=(()=>{class n{constructor(t){this.store=t,this.Show_Detail=!0,this.Array_Person=[],this.Array_Total_Orders=[],this.Array_Copyed_Objects=[],this.Delivery=0,this.FoodMenu=this.store.collection("FoodMenu").valueChanges({idField:"id"})}Add_Item(t,r){t.Items.unshift({index:parseInt(r),Item_Name:"",Item_Price:0,Item_Count:0}),this.Update_FoodMenu(t)}Update_FoodMenu(t){this.store.collection("FoodMenu").doc(t.id).update(t)}Get_FoodMenu(){this.FoodMenu.subscribe(t=>{this.Array_Person=t,this.Total_Orders()})}Total_Orders(){this.Array_Total_Orders=[],this.Array_Person.map(t=>{t.Items.map(r=>{var i=this.Array_Total_Orders.findIndex(g=>g.Item_Name===r.Item_Name),c=r.Item_Price*r.Item_Count,u=r.Item_Count;-1==i?(r.Total_Price=c,r.Total_Count=u,this.Array_Total_Orders.push(r)):(this.Array_Total_Orders[i].Total_Price+=c,this.Array_Total_Orders[i].Total_Count+=u)})})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ng))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nj(n,e){if(1&n){const t=d.EpF();d.O4$(),d.TgZ(0,"svg",2),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.Copy_item(i.Order))}),d.TgZ(1,"g",3),d._UZ(2,"path",22)(3,"path",23),d.qZA()()}}function rj(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"h6",24),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.Cancel_Copy(i.Order))}),d._uU(1,"Cancel"),d.qZA()}}function ij(n,e){1&n&&d._UZ(0,"div",25)}const sj=function(n){return{Copy:n}};let oj=(()=>{class n{constructor(t,r){this.store=t,this._OrderServ=r}get Array_Copyed_Objects(){return this._OrderServ.Array_Copyed_Objects}get Array_Person(){return this._OrderServ.Array_Person}Delete_Item(t,r){confirm("Do You Want To Remove This Item ?")&&(t.Items.splice(r,1),this._OrderServ.Total_Orders(),this._OrderServ.Update_FoodMenu(t))}Copy_item(t){t.Item_Name.length>0&&(this.Array_Copyed_Objects.push(t),t.Copy=!0)}Cancel_Copy(t){this.Remove_Copyed_Object(t),t.Copy=!1}Remove_Copyed_Object(t){var r=this.Array_Copyed_Objects.findIndex(i=>i.index===t.index);r>-1&&this.Array_Copyed_Objects.splice(r,1)}Change_All_Price(t){this.Array_Person.map(r=>{r.Items.map(i=>{i.Item_Name===t.Item_Name&&(i.Item_Price=t.Item_Price,this._OrderServ.Update_FoodMenu(r))})})}Get_Total_Price_Single_item_Order(t){return t.Item_Count*t.Item_Price}handleKeyDown(t,r,i){t.altKey&&"+"===t.key&&this._OrderServ.Add_Item(r,i),t.altKey&&"ArrowUp"===t.key&&r.Items&&(r.Items[0].Item_Count+=1),t.altKey&&"ArrowDown"===t.key&&r.Items&&(r.Items[0].Item_Count-=1),t.altKey&&"ArrowRight"===t.key&&r.Items&&(r.Items[0].Item_Price+=1),t.altKey&&"ArrowLeft"===t.key&&r.Items&&(r.Items[0].Item_Price-=1)}Plus(t){this.Order[t]++,this._OrderServ.Total_Orders(),this._OrderServ.Update_FoodMenu(this.item)}Minus(t){this.Order[t]>0&&(this.Order[t]--,this._OrderServ.Total_Orders(),this._OrderServ.Update_FoodMenu(this.item))}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ng),d.Y36(v0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-card-person-body-item-order"]],inputs:{item:"item",parent_index:"parent_index",Order:"Order",index:"index",last:"last"},decls:37,vars:16,consts:[[1,"order",3,"ngClass"],[1,"order-content"],["width","36pt","version","1.0","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512.000000 512.000000","preserveAspectRatio","xMidYMid meet",3,"click"],["transform","translate(0.000000,512.000000) scale(0.100000,-0.100000)","stroke","none"],["d","M1855 4946 c-67 -29 -105 -106 -91 -181 9 -47 59 -102 104 -115 25 -8 257 -10 714 -8 665 3 677 3 704 24 53 39 69 71 69 134 0 63 -16 95 -69 134 -27 21 -38 21 -714 23 -556 2 -693 0 -717 -11z"],["d","M415 4306 c-94 -41 -124 -168 -58 -247 45 -53 73 -59 268 -59 l175 0 0 -1668 c0 -1630 0 -1671 20 -1746 28 -109 63 -170 150 -256 86 -87 147 -122 256 -150 75 -19 115 -20 1334 -20 1219 0 1259 1 1334 20 109 28 170 63 256 150 87 86 122 147 150 256 20 75 20 116 20 1745 l0 1668 189 3 c173 3 192 5 217 24 53 39 69 71 69 134 0 63 -16 95 -69 134 l-27 21 -2127 2 c-1753 2 -2132 0 -2157 -11z m3585 -1968 c0 -1651 -1 -1663 -21 -1708 -27 -60 -64 -98 -124 -126 l-50 -24 -1245 0 c-1231 0 -1246 1 -1290 21 -60 27 -98 64 -126 124 l-24 50 0 1663 0 1662 1440 0 1440 0 0 -1662z"],["d","M1965 3346 c-41 -18 -83 -69 -90 -109 -3 -18 -4 -478 -3 -1024 3 -984 3 -992 24 -1019 38 -52 71 -69 132 -69 70 0 115 28 143 89 18 39 19 87 19 1026 0 939 -1 987 -19 1026 -10 23 -33 51 -51 64 -39 28 -113 36 -155 16z"],["d","M3040 3353 c-38 -16 -74 -50 -91 -87 -18 -39 -19 -87 -19 -1026 0 -939 1 -987 19 -1026 28 -61 73 -89 143 -89 61 0 94 17 132 69 21 27 21 33 21 1046 0 1013 0 1019 -21 1046 -34 46 -69 67 -121 70 -26 2 -55 1 -63 -3z"],["width","36pt","version","1.0","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512.000000 512.000000","preserveAspectRatio","xMidYMid meet",3,"click",4,"ngIf"],["class","Cancel-Copy",3,"click",4,"ngIf"],[1,"Input-Container","Input-item-name"],[3,"for"],["type","text",2,"font-size","small","font-weight","bold",3,"id","ngModel","keydown","ngModelChange","change"],[1,"Input-Container","Input-item-Count"],[3,"click"],["type","number","min","0","value","0","placeholder","",3,"id","ngModel","ngModelChange","change"],[1,"Input-Container","Input-item-Price"],["type","number","min","0","placeholder","",3,"id","ngModel","ngModelChange","change"],[1,"price"],[1,"title"],[1,"price-value"],["class","end-line",4,"ngIf"],["d","M1720 5104 c-155 -42 -269 -173 -293 -337 -10 -67 -9 -78 10 -113 26 -50 72 -77 129 -76 77 1 127 52 139 144 10 68 47 104 118 113 28 3 585 5 1237 3 1298 -3 1205 1 1248 -60 16 -21 17 -160 20 -1749 2 -1370 0 -1734 -10 -1765 -15 -45 -66 -84 -110 -84 -38 0 -104 -34 -119 -61 -37 -70 -29 -136 21 -184 25 -24 40 -30 93 -33 158 -10 314 95 379 255 l23 58 0 1790 c0 1710 -1 1792 -18 1843 -36 103 -132 202 -237 245 l-55 22 -1260 2 c-1086 2 -1268 0 -1315 -13z"],["d","M785 4202 c-108 -37 -202 -129 -247 -239 l-23 -58 0 -1790 c0 -1710 1 -1792 18 -1843 36 -103 132 -202 237 -245 l55 -22 1254 -3 c1366 -3 1319 -4 1417 53 97 57 174 166 194 276 7 37 9 643 8 1815 l-3 1759 -23 58 c-46 113 -140 201 -256 240 -45 16 -162 17 -1315 16 -1167 0 -1270 -2 -1316 -17z m2564 -276 c15 -8 37 -28 47 -43 18 -27 19 -76 19 -1768 0 -1646 -1 -1742 -18 -1768 -9 -15 -29 -35 -44 -44 -26 -17 -98 -18 -1243 -18 -1315 0 -1259 -2 -1297 54 -17 25 -18 109 -21 1752 -2 1368 0 1735 10 1765 8 24 26 47 47 61 l34 23 1219 0 c1045 0 1223 -2 1247 -14z"],[1,"Cancel-Copy",3,"click"],[1,"end-line"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"span",1),d.O4$(),d.TgZ(2,"svg",2),d.NdJ("click",function(){return r.Delete_Item(r.item,r.index)}),d.TgZ(3,"g",3),d._UZ(4,"path",4)(5,"path",5)(6,"path",6)(7,"path",7),d.qZA()(),d.YNc(8,nj,4,0,"svg",8),d.YNc(9,rj,2,0,"h6",9),d.kcU(),d.TgZ(10,"section")(11,"div",10)(12,"label",11),d._uU(13,"item Name"),d.qZA(),d.TgZ(14,"input",12),d.NdJ("keydown",function(c){return r.handleKeyDown(c,r.item,r.item.Items.length+""+r.parent_index)})("ngModelChange",function(c){return r.Order.Item_Name=c})("change",function(){return r._OrderServ.Total_Orders(),r._OrderServ.Update_FoodMenu(r.item)}),d.qZA()(),d.TgZ(15,"div",13)(16,"label",11),d._uU(17,"Count"),d.qZA(),d.TgZ(18,"button",14),d.NdJ("click",function(){return r.Plus("Item_Count")}),d._uU(19,"+"),d.qZA(),d.TgZ(20,"input",15),d.NdJ("ngModelChange",function(c){return r.Order.Item_Count=c})("change",function(){return r._OrderServ.Total_Orders(),r._OrderServ.Update_FoodMenu(r.item)}),d.qZA(),d.TgZ(21,"button",14),d.NdJ("click",function(){return r.Minus("Item_Count")}),d._uU(22,"-"),d.qZA()(),d.TgZ(23,"div",16)(24,"label",11),d._uU(25,"Price"),d.qZA(),d.TgZ(26,"button",14),d.NdJ("click",function(){return r.Plus("Item_Price")}),d._uU(27,"+"),d.qZA(),d.TgZ(28,"input",17),d.NdJ("ngModelChange",function(c){return r.Order.Item_Price=c})("change",function(){return r._OrderServ.Total_Orders(),r.Change_All_Price(r.Order),r._OrderServ.Update_FoodMenu(r.item)}),d.qZA(),d.TgZ(29,"button",14),d.NdJ("click",function(){return r.Minus("Item_Price")}),d._uU(30,"-"),d.qZA()(),d.TgZ(31,"div",18)(32,"p",19),d._uU(33,"Total"),d.qZA(),d.TgZ(34,"p",20),d._uU(35),d.qZA()()()(),d.YNc(36,ij,1,0,"div",21),d.qZA()),2&t&&(d.Q6J("ngClass",d.VKq(14,sj,r.Order.Copy)),d.xp6(8),d.Q6J("ngIf",!r.Order.Copy),d.xp6(1),d.Q6J("ngIf",r.Order.Copy),d.xp6(3),d.MGl("for","inputItemName",r.index,""),d.xp6(2),d.MGl("id","inputItemName",r.index,""),d.Q6J("ngModel",r.Order.Item_Name),d.xp6(2),d.MGl("for","inputCount",r.index,""),d.xp6(4),d.MGl("id","inputCount",r.index,""),d.Q6J("ngModel",r.Order.Item_Count),d.xp6(4),d.MGl("for","inputPrice",r.index,""),d.xp6(4),d.MGl("id","inputPrice",r.index,""),d.Q6J("ngModel",r.Order.Item_Price),d.xp6(7),d.hij("",r.Get_Total_Price_Single_item_Order(r.Order)," LE"),d.xp6(1),d.Q6J("ngIf",!r.last))},dependencies:[tn,Jn,Go,Bf,Ss,Nd,qo],styles:[".order[_ngcontent-%COMP%]{border:2px solid white;border-radius:3px}.order.Copy[_ngcontent-%COMP%]{border:1px solid #F44336;border-radius:3px;box-shadow:0 4px 7px #0000003d;background:#ffeeed}.order.Copy[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background:#ffeeed}.order[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]{margin-top:8px;display:flex;align-items:flex-start}.order[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:19pt;fill:#4d8bbc;margin:8px 6px;cursor:pointer}.order[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   .Cancel-Copy[_ngcontent-%COMP%]{cursor:pointer;margin:8px 4px}.order[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:4px;margin:2px;cursor:pointer}.order[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.order[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px}.order[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;flex:1 200px}.order[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px}.order[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .price-value[_ngcontent-%COMP%]{font-size:13px;color:#e91e63;white-space:nowrap}.order[_ngcontent-%COMP%]   .end-line[_ngcontent-%COMP%]{height:1px;background-color:#d5d5d5;margin:20px 30px}.Input-Container[_ngcontent-%COMP%]{position:relative;margin:8px 0;display:flex;margin-inline-end:12px}.Input-Container.Input-item-name[_ngcontent-%COMP%]{flex:1 100%}.Input-Container.Input-item-name[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.Input-Container.Input-item-Count[_ngcontent-%COMP%], .Input-Container.Input-item-Price[_ngcontent-%COMP%]{border:1px solid #dfe1e7;border-radius:4px}.Input-Container.Input-item-Count[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .Input-Container.Input-item-Price[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{left:50%;transform:translate(-50%)}.Input-Container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;outline:none;border:none;cursor:pointer;background:#dfe1e7;color:#1568a7;width:25px;height:100%;margin:0;font-size:large}.Input-Container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:-7px;left:13px;font-size:12px;background:white;padding:0 4px;color:#033ff4}.Input-Container[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .Input-Container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{padding:10px 6px 6px 12px;text-align:center;outline:none;border:1px solid #dfe1e7;border-radius:4px;background:transparent}.Input-Container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:230px;text-align:start}.Input-Container[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{max-width:45px;border:none}.Input-Container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{color:#8a2be2}@media only screen and (max-width: 767px){.order[_ngcontent-%COMP%]   .order-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:35pt}.Input-Container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center}.Input-Container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{text-align:start}.Input-Container.Input-item-name[_ngcontent-%COMP%]{flex:1 100%}}"]}),n})();const aj=function(n){return{"No-border":n}};function cj(n,e){if(1&n&&(d.TgZ(0,"div",12)(1,"span",13)(2,"span",14),d._uU(3),d.qZA(),d._uU(4),d.TgZ(5,"span",4),d._uU(6),d.qZA()()()),2&n){const t=e.$implicit;d.Q6J("ngClass",d.VKq(4,aj,e.last)),d.xp6(3),d.hij(" ",t.Item_Count," \xd7"),d.xp6(1),d.hij(" ",t.Item_Name," "),d.xp6(2),d.hij("",t.Item_Price," LE")}}function lj(n,e){if(1&n&&(d.TgZ(0,"div",10),d.YNc(1,cj,7,6,"div",11),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.item.Items)}}function uj(n,e){if(1&n&&(d.TgZ(0,"div")(1,"span",4),d._uU(2),d.qZA()()),2&n){const t=d.oxw();d.xp6(2),d.hij(" ",t.Total_Order_Person(t.item)," ")}}function dj(n,e){if(1&n&&(d.TgZ(0,"div"),d._uU(1),d.ALo(2,"number"),d.TgZ(3,"span",4),d._uU(4),d.ALo(5,"number"),d.qZA()()),2&n){const t=d.oxw();d.xp6(1),d.AsE(" ( ",t.Total_Order_Person(t.item)," + ",d.xi3(2,3,t.Delivery/t.Array_Person.length,"1.2-2")," ) = "),d.xp6(3),d.hij(" ",d.xi3(5,6,t.Total_Order_Person(t.item)+t.Delivery/t.Array_Person.length,"1.2-2")," ")}}let hj=(()=>{class n{constructor(t,r){this.store=t,this._OrderServ=r}get Delivery(){return this._OrderServ.Delivery}get Array_Person(){return this._OrderServ.Array_Person}get Show_Detail(){return this._OrderServ.Show_Detail}Total_Order_Person(t){var r=0;return t.Items.map(i=>{r+=i.Item_Price*i.Item_Count}),r}Rest(t){if(null!=t.inputPaid){var r=this.Total_Order_Person(t)+this.Delivery/this.Array_Person.length;t.RestValue=t.inputPaid-r}else t.RestValue=0;this._OrderServ.Update_FoodMenu(t)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ng),d.Y36(v0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-card-person-body-item-total"]],inputs:{item:"item"},decls:15,vars:5,consts:[[1,"Total-Order"],["class","Group-Item-Total",4,"ngIf"],[1,"Total-Price"],[4,"ngIf"],[1,"Price"],[1,"Paid"],[1,"Input-Container"],["for","inputPaid"],["id","inputPaid","type","number","placeholder","0 LE",3,"ngModel","ngModelChange","change"],[1,"Rest"],[1,"Group-Item-Total"],["class","Item-Total",3,"ngClass",4,"ngFor","ngForOf"],[1,"Item-Total",3,"ngClass"],[1,"Item-Name"],[1,"Count"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,lj,2,1,"div",1),d.TgZ(2,"div",2),d._uU(3," Total Price = "),d.YNc(4,uj,3,1,"div",3),d.YNc(5,dj,6,9,"div",3),d.TgZ(6,"span",4),d._uU(7," LE "),d.qZA()(),d.TgZ(8,"div",5)(9,"div",6)(10,"label",7),d._uU(11,"Paid"),d.qZA(),d.TgZ(12,"input",8),d.NdJ("ngModelChange",function(c){return r.item.inputPaid=c})("change",function(){return r.Rest(r.item)}),d.qZA(),d.TgZ(13,"span",9),d._uU(14),d.qZA()()()()),2&t&&(d.xp6(1),d.Q6J("ngIf",!r.Show_Detail),d.xp6(3),d.Q6J("ngIf",r.Delivery<=0||null==r.Delivery),d.xp6(1),d.Q6J("ngIf",r.Delivery>0),d.xp6(7),d.Q6J("ngModel",r.item.inputPaid),d.xp6(2),d.hij(" ",r.item.RestValue," LE"))},dependencies:[tn,dn,Jn,Go,Bf,Ss,qo,Hu],styles:[".Total-Order[_ngcontent-%COMP%]{border-top:1px solid #dedede;padding:20px 0;display:flex;flex-direction:column}.Total-Order[_ngcontent-%COMP%]   .Group-Item-Total[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.Total-Order[_ngcontent-%COMP%]   .Group-Item-Total[_ngcontent-%COMP%]   .Item-Total[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:6px;border-right:1px solid gray;padding-right:10px;flex:1 1 0}.Total-Order[_ngcontent-%COMP%]   .Group-Item-Total[_ngcontent-%COMP%]   .Item-Total.No-border[_ngcontent-%COMP%]{border:none}.Total-Order[_ngcontent-%COMP%]   .Group-Item-Total[_ngcontent-%COMP%]   .Item-Total[_ngcontent-%COMP%]   .Item-Name[_ngcontent-%COMP%]{font-size:14px;display:flex;white-space:nowrap}.Total-Order[_ngcontent-%COMP%]   .Group-Item-Total[_ngcontent-%COMP%]   .Item-Total[_ngcontent-%COMP%]   .Count[_ngcontent-%COMP%], .Total-Order[_ngcontent-%COMP%]   .Group-Item-Total[_ngcontent-%COMP%]   .Item-Total[_ngcontent-%COMP%]   .Price[_ngcontent-%COMP%]{color:gray;font-size:10px;padding:2px 4px}.Total-Order[_ngcontent-%COMP%]   .Total-Price[_ngcontent-%COMP%]{margin:8px;font-weight:700}.Total-Order[_ngcontent-%COMP%]   .Total-Price[_ngcontent-%COMP%]   .Price[_ngcontent-%COMP%]{color:#e9a000;text-shadow:0px 0px 1px #f49703}.Total-Order[_ngcontent-%COMP%]   .Total-Price[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline}.Total-Order[_ngcontent-%COMP%]   .Paid[_ngcontent-%COMP%]{padding-top:12px}.Total-Order[_ngcontent-%COMP%]   .Paid[_ngcontent-%COMP%]   .Input-Container[_ngcontent-%COMP%]{width:200px}.Input-Container[_ngcontent-%COMP%]{position:relative}.Input-Container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:-7px;left:13px;font-size:12px;background:white;padding:0 4px;color:#033ff4}.Input-Container[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .Input-Container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{padding:10px 6px 6px 12px;margin:0 6px;max-width:55px;text-align:center;outline:none;border:1px solid #b9b9b9;border-radius:4px;background:transparent}.Input-Container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{max-width:180px;text-align:start}.Input-Container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{color:#8a2be2}"]}),n})();function fj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",9)(1,"div",10),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i._OrderServ.Add_Item(i.item,i.item.Items.length+""+i.parent_index))}),d.TgZ(2,"p"),d._uU(3,"Add Item +"),d.qZA()(),d.TgZ(4,"div",11),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.Paste_Item(i.item,i.parent_index))}),d.TgZ(5,"p"),d._uU(6,"Paste"),d.qZA()()()}}function pj(n,e){if(1&n&&d._UZ(0,"app-card-person-body-item-order",15),2&n){const t=e.$implicit,r=e.index,i=e.last,c=d.oxw(2);d.Q6J("item",c.item)("parent_index",c.parent_index)("Order",t)("index",r)("last",i)}}function gj(n,e){if(1&n&&(d.TgZ(0,"div",12)(1,"span",13),d._uU(2),d.qZA(),d.YNc(3,pj,1,5,"app-card-person-body-item-order",14),d.qZA()),2&n){const t=d.oxw();d.xp6(2),d.hij(" ",t.item.Items.length," item "),d.xp6(1),d.Q6J("ngForOf",t.item.Items)}}let mj=(()=>{class n{constructor(t,r){this.store=t,this._OrderServ=r}get Array_Person(){return this._OrderServ.Array_Person}get Array_Total_Orders(){return this._OrderServ.Array_Total_Orders}get Show_Detail(){return this._OrderServ.Show_Detail}get Array_Copyed_Objects(){return this._OrderServ.Array_Copyed_Objects}get Delivery(){return this._OrderServ.Delivery}Remove_Person(t,r){confirm("are you want to remove this person ?")&&(this.Array_Person.splice(r,1),this._OrderServ.Total_Orders(),this.Delete_FoodMenu(t))}Delete_FoodMenu(t){this.store.collection("FoodMenu").doc(t.id).delete()}Paste_Item(t,r){this.Array_Copyed_Objects.map(i=>{i.Copy=!1;var c={index:parseInt(`${this.Array_Copyed_Objects.length+1}${r}`),Item_Name:i.Item_Name,Item_Price:i.Item_Price,Item_Count:i.Item_Count},u=t.Items.findIndex(g=>g.Item_Name===i.Item_Name);u>-1?t.Items[u].Item_Count+=i.Item_Count:t.Items.push(c)}),this._OrderServ.Array_Copyed_Objects=[],this._OrderServ.Total_Orders(),this._OrderServ.Update_FoodMenu(t)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ng),d.Y36(v0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-card-person"]],inputs:{item:"item",parent_index:"parent_index"},decls:11,vars:4,consts:[[1,"card"],[1,"head"],[1,"Input-Container"],["id","inputPersonName","type","text","value","","placeholder","Person Name",3,"ngModel","ngModelChange"],[1,"Remove-Person",3,"click"],[1,"body"],["class","Actions",4,"ngIf"],["class","Group-Order",4,"ngIf"],[3,"item"],[1,"Actions"],[1,"Add-New-item",3,"click"],[1,"Paste-item",3,"click"],[1,"Group-Order"],[1,"Count-item-Num"],[3,"item","parent_index","Order","index","last",4,"ngFor","ngForOf"],[3,"item","parent_index","Order","index","last"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),d.NdJ("ngModelChange",function(c){return r.item.Person_Name=c}),d.qZA()(),d.TgZ(4,"div",4),d.NdJ("click",function(){return r.Remove_Person(r.item,r.parent_index)}),d.TgZ(5,"span"),d._uU(6,"x"),d.qZA()()(),d.TgZ(7,"div",5),d.YNc(8,fj,7,0,"div",6),d.YNc(9,gj,4,2,"div",7),d._UZ(10,"app-card-person-body-item-total",8),d.qZA()()),2&t&&(d.xp6(3),d.Q6J("ngModel",r.item.Person_Name),d.xp6(5),d.Q6J("ngIf",r.Show_Detail),d.xp6(1),d.Q6J("ngIf",r.Show_Detail),d.xp6(1),d.Q6J("item",r.item))},dependencies:[dn,Jn,Go,Ss,qo,oj,hj],styles:[".card[_ngcontent-%COMP%]{border-radius:3px;padding:0 8px;max-width:535px;margin:12px;box-shadow:0 3px 12px #d9d9d9;height:-moz-fit-content;height:fit-content}.card[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{margin-bottom:8px;padding:17px 2px;display:flex}.card[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .Input-Container[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .Input-Container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none}.card[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .Input-Container[_ngcontent-%COMP%]   #inputPersonName[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.card[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .Remove-Person[_ngcontent-%COMP%]{display:flex}.card[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .Remove-Person[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:8px;cursor:pointer;color:#52637b8c}.card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{position:relative}.card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .Group-Order[_ngcontent-%COMP%]{border-top:1px solid #dedede;display:flex;flex-direction:column;overflow:auto;height:276px;padding:20px 0 0}.card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .Count-item-Num[_ngcontent-%COMP%]{transform:translate(-50%);position:absolute;top:3.5rem;left:50%;background:white;padding:1px 16px}.card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .Actions[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between;margin:0 0 20px}.card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .Actions[_ngcontent-%COMP%]   .Add-New-item[_ngcontent-%COMP%]{cursor:pointer;width:-moz-fit-content;width:fit-content;margin:0 16px;display:flex;justify-content:center;align-items:center}.card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .Actions[_ngcontent-%COMP%]   .Add-New-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:8px 12px;margin:6px 0;box-shadow:0 0 5px #c5c5c5;border-radius:3px;background:#4d8bbc;color:#fff}.card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .Actions[_ngcontent-%COMP%]   .Paste-item[_ngcontent-%COMP%]{border:2px dashed #cecece;border-radius:4px;display:flex;align-items:center;justify-content:center;margin:0 12px 6px 0;padding:0 48px;cursor:pointer}.card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .Actions[_ngcontent-%COMP%]   .Paste-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#b8b8b8;cursor:pointer}.Input-Container[_ngcontent-%COMP%]{position:relative}.Input-Container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:-7px;left:13px;font-size:12px;background:white;padding:0 4px;color:#033ff4}.Input-Container[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .Input-Container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{padding:10px 6px 6px 12px;margin:0 6px;max-width:55px;text-align:center;outline:none;border:1px solid #b9b9b9;border-radius:4px;background:transparent}.Input-Container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{max-width:180px;text-align:start}.Input-Container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{color:#8a2be2}"]}),n})(),_j=(()=>{class n{constructor(t,r){this.store=t,this._OrderServ=r}get Show_Detail(){return this._OrderServ.Show_Detail}Push_FoodMenu(t,r,i,c){this.store.collection("FoodMenu").add({Person_Name:t,inputPaid:r,RestValue:i,Items:c})}Add_Person(t){var r={Person_Name:t.value,inputPaid:0,RestValue:0,Items:[]};this.Push_FoodMenu(r.Person_Name,r.inputPaid,r.RestValue,r.Items),t.value=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ng),d.Y36(v0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-add-person"]],decls:12,vars:1,consts:[[1,"New-Card"],[1,"Input-Container"],["for","inputNewPersonName"],["id","inputNewPersonName","type","text","value","","placeholder","Person Name",3,"keyup.enter"],["inputNewPersonName",""],[1,"plus",3,"click"],[1,"Show-Detail"],["type","checkbox","name","Show_Detail","id","Show_Detail",3,"ngModel","ngModelChange"],["for","Show_Detail"]],template:function(t,r){if(1&t){const i=d.EpF();d.TgZ(0,"div",0)(1,"div",1)(2,"label",2),d._uU(3,"Name"),d.qZA(),d.TgZ(4,"input",3,4),d.NdJ("keyup.enter",function(u){return r.Add_Person(u.target)}),d.qZA(),d.TgZ(6,"span",5),d.NdJ("click",function(){d.CHM(i);const u=d.MAs(5);return d.KtG(r.Add_Person(u))}),d._uU(7,"+"),d.qZA()(),d.TgZ(8,"div",6)(9,"input",7),d.NdJ("ngModelChange",function(u){return r._OrderServ.Show_Detail=u}),d.qZA(),d.TgZ(10,"label",8),d._uU(11,"Show Detail"),d.qZA()()()}2&t&&(d.xp6(9),d.Q6J("ngModel",r._OrderServ.Show_Detail))},dependencies:[dw,Ss,qo],styles:[".New-Card[_ngcontent-%COMP%]{position:relative;width:-moz-fit-content;width:fit-content}.New-Card[_ngcontent-%COMP%]   #inputNewPersonName[_ngcontent-%COMP%]{padding-right:25px}.New-Card[_ngcontent-%COMP%]   .Input-Container[_ngcontent-%COMP%]{position:relative}.New-Card[_ngcontent-%COMP%]   .Input-Container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:-7px;left:13px;font-size:12px;background:white;padding:0 4px;color:#033ff4}.New-Card[_ngcontent-%COMP%]   .Input-Container[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .New-Card[_ngcontent-%COMP%]   .Input-Container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{padding:10px 6px 6px 12px;margin:0 6px;max-width:55px;text-align:center;outline:none;border:1px solid #b9b9b9;border-radius:4px;background:transparent}.New-Card[_ngcontent-%COMP%]   .Input-Container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{max-width:180px;text-align:start}.New-Card[_ngcontent-%COMP%]   .Input-Container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{color:#8a2be2}.New-Card[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{position:absolute;top:50%;right:-1px;transform:translate(-50%,-50%);cursor:pointer;padding:6px}.New-Card[_ngcontent-%COMP%]   .Show-Detail[_ngcontent-%COMP%]{padding:16px 6px;display:flex;align-items:center}.New-Card[_ngcontent-%COMP%]   .Show-Detail[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-inline-end:.5rem}"]}),n})(),yj=(()=>{class n{transform(t,r){return t&&"string"==typeof t&&r?t.split(r).pop()?.split(".").shift():[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=d.Yjl({name:"splitString",type:n,pure:!0}),n})();const vj=["scalableElement"],Cj=function(n){return{Active:n}};function wj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",13),d.NdJ("click",function(){const c=d.CHM(t).$implicit,u=d.oxw();return d.KtG(u.Set_Tab_Button(c))}),d._uU(1),d.qZA()}if(2&n){const t=e.$implicit,r=d.oxw();d.Q6J("ngClass",d.VKq(2,Cj,r.Array_Tab[t])),d.xp6(1),d.Oqu(t)}}function Ij(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",17),d.NdJ("click",function(){const c=d.CHM(t).$implicit,u=d.oxw(2);return d.KtG(u.Open_PopUp_Image(c))}),d._UZ(1,"div",18),d.TgZ(2,"div",19),d._uU(3),d.ALo(4,"splitString"),d.qZA()()}if(2&n){const t=e.$implicit,r=d.oxw(2);d.xp6(1),d.Udp("background-image","url("+r.Fix_Space(t)+")"),d.xp6(2),d.hij(" ",d.xi3(4,3,t,"/"),"")}}function Ej(n,e){if(1&n&&(d.TgZ(0,"div",14)(1,"p",15),d._uU(2,"\\\\10.200.7.2\\Images"),d.qZA(),d.YNc(3,Ij,5,6,"div",16),d.qZA()),2&n){const t=d.oxw();d.xp6(3),d.Q6J("ngForOf",t.Images_Without_Thumbsdb())}}function bj(n,e){if(1&n&&(d.TgZ(0,"div",33)(1,"div",34),d._uU(2),d.qZA(),d.TgZ(3,"div",35),d._uU(4),d.qZA(),d.TgZ(5,"div",36),d._uU(6),d.qZA(),d.TgZ(7,"div",37),d._uU(8),d.qZA()()),2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.Item_Name),d.xp6(2),d.Oqu(t.Total_Count),d.xp6(2),d.Oqu(t.Item_Price),d.xp6(2),d.Oqu(t.Total_Price)}}function Dj(n,e){if(1&n&&d._UZ(0,"app-card-person",38),2&n){const r=e.index;d.Q6J("item",e.$implicit)("parent_index",r)}}const Tj=function(n){return{"Hide-Side-bar":n}};function Sj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23)(4,"h4"),d._uU(5,"Total Orders "),d.qZA()(),d.TgZ(6,"div",24),d.YNc(7,bj,9,4,"div",25),d.TgZ(8,"div",26)(9,"h4"),d._uU(10),d.qZA()(),d.TgZ(11,"div",27)(12,"label",28),d._uU(13,"Delivery"),d.qZA(),d.TgZ(14,"input",29),d.NdJ("ngModelChange",function(i){d.CHM(t);const c=d.oxw();return d.KtG(c._OrderServ.Delivery=i)}),d.qZA()()()()(),d.TgZ(15,"div",30)(16,"h4"),d._uU(17,"Persons"),d.qZA(),d._UZ(18,"app-add-person"),d.TgZ(19,"div",31),d.YNc(20,Dj,1,2,"app-card-person",32),d.qZA()()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngClass",d.VKq(5,Tj,!t.Show_Side_bar)),d.xp6(6),d.Q6J("ngForOf",t.Array_Total_Orders),d.xp6(3),d.hij("Total = ",t.Total_Order_Price()," LE "),d.xp6(4),d.Q6J("ngModel",t._OrderServ.Delivery),d.xp6(6),d.Q6J("ngForOf",t.Array_Person)}}function Aj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",65),d.NdJ("click",function(){d.CHM(t);const i=d.oxw().$implicit;return d.KtG(i.Edit=!0)}),d.TgZ(1,"label"),d._uU(2,"edit"),d.qZA()()}}function Mj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",66)(1,"label",50),d.NdJ("click",function(){d.CHM(t);const i=d.oxw().$implicit,c=d.oxw(2);return d.KtG(c.Update_FoodLink(i))}),d._uU(2,"Save"),d.qZA(),d.TgZ(3,"label",50),d.NdJ("click",function(){d.CHM(t);const i=d.oxw().$implicit;return d.KtG(i.Edit=!1)}),d._uU(4,"Cancel"),d.qZA()()}}function xj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",27)(1,"label",42),d._uU(2,"Title"),d.qZA(),d.TgZ(3,"input",67),d.NdJ("ngModelChange",function(i){d.CHM(t);const c=d.oxw().$implicit;return d.KtG(c.Title=i)}),d.qZA()()}if(2&n){const t=d.oxw().$implicit;d.xp6(3),d.Q6J("ngModel",t.Title)}}function Pj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",45)(1,"label",46),d._uU(2,"Link"),d.qZA(),d.TgZ(3,"input",68),d.NdJ("ngModelChange",function(i){d.CHM(t);const c=d.oxw().$implicit;return d.KtG(c.Link=i)}),d.qZA()()}if(2&n){const t=d.oxw().$implicit;d.xp6(3),d.Q6J("ngModel",t.Link)}}function Oj(n,e){if(1&n&&(d.TgZ(0,"h4"),d._uU(1),d.qZA()),2&n){const t=d.oxw().$implicit;d.xp6(1),d.Oqu(t.Title)}}function Rj(n,e){if(1&n&&(d.TgZ(0,"a",69),d._uU(1),d.qZA()),2&n){const t=d.oxw().$implicit;d.s9C("href",t.Link,d.LSH),d.xp6(1),d.Oqu(t.Link)}}function kj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",53)(1,"div",54),d.YNc(2,Aj,3,0,"div",55),d.YNc(3,Mj,5,0,"div",56),d.TgZ(4,"div",57)(5,"span",58),d.NdJ("click",function(){const c=d.CHM(t).$implicit,u=d.oxw(2);return d.KtG(u.Delete_FoodLink(c))}),d._uU(6,"x"),d.qZA()()(),d.TgZ(7,"div",59)(8,"div",41),d.YNc(9,xj,4,1,"div",60),d.YNc(10,Pj,4,1,"div",61),d.qZA(),d.TgZ(11,"div",62),d.YNc(12,Oj,2,1,"h4",63),d.YNc(13,Rj,2,2,"a",64),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(2),d.Q6J("ngIf",!t.Edit),d.xp6(1),d.Q6J("ngIf",t.Edit),d.xp6(6),d.Q6J("ngIf",t.Edit),d.xp6(1),d.Q6J("ngIf",t.Edit),d.xp6(2),d.Q6J("ngIf",!t.Edit),d.xp6(1),d.Q6J("ngIf",!t.Edit)}}function Nj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",39)(1,"div",40)(2,"div",41)(3,"div",27)(4,"label",42),d._uU(5,"Title"),d.qZA(),d._UZ(6,"input",43,44),d.qZA(),d.TgZ(8,"div",45)(9,"label",46),d._uU(10,"Link"),d.qZA(),d._UZ(11,"input",47,48),d.qZA(),d.TgZ(13,"div",49)(14,"label",50),d.NdJ("click",function(){d.CHM(t);const i=d.MAs(12),c=d.MAs(7),u=d.oxw();return d.KtG(u.Push_FoodLink(i,c))}),d._uU(15,"+"),d.qZA()()()(),d.TgZ(16,"div",51),d.YNc(17,kj,14,6,"div",52),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(17),d.Q6J("ngForOf",t.Array_Links)}}function Fj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",70)(1,"div",71)(2,"div",72)(3,"div",73),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.increaseScale())}),d._UZ(4,"img",74),d.qZA(),d.TgZ(5,"div",75),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.decreaseScale())}),d._UZ(6,"img",76),d.qZA()(),d.TgZ(7,"div",77),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.Close_PopUp_Image())}),d._uU(8,"x"),d.qZA()(),d.TgZ(9,"div",78),d._UZ(10,"div",79,80),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(10),d.Udp("background-image","url("+t.Fix_Space(t.PopUp_Selected_Image)+")")}}let Lj=(()=>{class n{constructor(t,r,i,c){this.router=t,this.store=r,this.http=i,this._OrderServ=c,this.currentScale=1,this.scaleStep=.1,this.PopUp_Show_Image=!1,this.Show_Side_bar=!1,this.Array_Tab={Orders:!0,Menus:!1,Links:!1},this.Images=[],this.Array_Links=[],this.FoodLink=this.store.collection("FoodLink").valueChanges({idField:"id"})}get Show_Detail(){return this._OrderServ.Show_Detail}get Array_Total_Orders(){return this._OrderServ.Array_Total_Orders}get Delivery(){return this._OrderServ.Delivery}get Array_Person(){return this._OrderServ.Array_Person}ngAfterViewInit(){}Toggle_Side_bar(){this.Show_Side_bar=!this.Show_Side_bar}increaseScale(){this.currentScale+=this.scaleStep,this.applyScale()}decreaseScale(){this.currentScale-=this.scaleStep,this.applyScale()}applyScale(){this.element.nativeElement.style.scale=this.currentScale}Open_PopUp_Image(t){this.PopUp_Show_Image=!0,this.PopUp_Selected_Image=t}Close_PopUp_Image(){this.PopUp_Show_Image=!1}Fix_Space(t){return encodeURI(t)}Images_Without_Thumbsdb(){return this.Images.filter(t=>!t.includes("Thumbs.db"))}Get_Array_Tabs_As_Button(){return Object.keys(this.Array_Tab)}Set_Tab_Button(t){for(const r in this.Array_Tab)this.Array_Tab[r]=!1;this.Array_Tab[t]=!0}Push_FoodLink(t,r){this.store.collection("FoodLink").add({Link:t.value,Title:r.value}),t.value="",r.value=""}Update_FoodLink(t){t.Edit=!1,this.store.collection("FoodLink").doc(t.id).update(t)}Delete_FoodLink(t){confirm("Do You Want To Remove This Link ?")&&this.store.collection("FoodLink").doc(t.id).delete()}Get_FoodLinks(){this.FoodLink.subscribe(t=>{this.Array_Links=t})}Total_Order_Price(){var t=0;return this.Array_Total_Orders.map(r=>{t+=r.Total_Price}),t+this.Delivery}ngOnInit(){this._OrderServ.Get_FoodMenu(),this.Get_FoodLinks()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ds),d.Y36(ng),d.Y36(sN),d.Y36(v0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],viewQuery:function(t,r){if(1&t&&d.Gf(vj,5),2&t){let i;d.iGM(i=d.CRH())&&(r.element=i.first)}},decls:13,vars:5,consts:[[1,"Tab-header"],[1,"Burger-Menue"],["type","checkbox","id","checkbox"],["for","checkbox",1,"toggle",3,"click"],[1,"bar","bar--top"],[1,"bar","bar--middle"],[1,"bar","bar--bottom"],[1,"Group-Header-Button"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","Menus",4,"ngIf"],["class","Container",4,"ngIf"],["class","Links",4,"ngIf"],["class","PopUp-Show-Image",4,"ngIf"],[3,"ngClass","click"],[1,"Menus"],[1,"Button-Images-Path"],["class","Images",3,"click",4,"ngFor","ngForOf"],[1,"Images",3,"click"],[1,"background"],[1,"Image-Name"],[1,"Container"],[1,"Container-Side-Bar",3,"ngClass"],[1,"Side-Bar-Total-Order"],[1,"Side-Bar-Total-Order-Header"],[1,"Side-Bar-Total-Order-Body"],["class","Order-Item",4,"ngFor","ngForOf"],[1,"Total-Order-Items"],[1,"Input-Container"],["for","inputDelivery"],["id","inputDelivery","type","number","min","0","placeholder","Price",3,"ngModel","ngModelChange"],[1,"Container-Body"],[1,"group-card"],[3,"item","parent_index",4,"ngFor","ngForOf"],[1,"Order-Item"],[1,"Order","Order-Name"],[1,"Order","Order-Total-Count"],[1,"Order","Order-Item-Price"],[1,"Order","Order-Total-Price"],[3,"item","parent_index"],[1,"Links"],[1,"Add-Card-Link"],[1,"Modify"],["for","inputTitle"],["id","inputTitle","type","text","placeholder","example : site name"],["inputTitle",""],[1,"Input-Container","Link"],["for","inputLink"],["id","inputLink","type","text","placeholder","https://..."],["inputLink",""],[1,"add"],[3,"click"],[1,"group-card-link"],["class","card-link",4,"ngFor","ngForOf"],[1,"card-link"],[1,"card-link-header"],["class","edit",3,"click",4,"ngIf"],["class","save",4,"ngIf"],[1,"delete"],[1,"removeX",3,"click"],[1,"card-link-body"],["class","Input-Container",4,"ngIf"],["class","Input-Container Link",4,"ngIf"],[1,"Showing"],[4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],[1,"edit",3,"click"],[1,"save"],["id","inputTitle","type","text",3,"ngModel","ngModelChange"],["id","inputLink","type","text",3,"ngModel","ngModelChange"],["target","_blank",3,"href"],[1,"PopUp-Show-Image"],[1,"header"],[1,"Zoom"],[1,"in",3,"click"],["src","assets/ZoomIn.png","alt",""],[1,"out",3,"click"],["src","assets/ZoomOut.png","alt",""],[1,"close",3,"click"],[1,"body"],["cdkDrag","",1,"PopUp-background"],["scalableElement",""]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"input",2),d.TgZ(3,"label",3),d.NdJ("click",function(){return r.Toggle_Side_bar()}),d._UZ(4,"div",4)(5,"div",5)(6,"div",6),d.qZA()(),d.TgZ(7,"div",7),d.YNc(8,wj,2,4,"button",8),d.qZA()(),d.YNc(9,Ej,4,1,"div",9),d.YNc(10,Sj,21,7,"div",10),d.YNc(11,Nj,18,1,"div",11),d.YNc(12,Fj,12,2,"div",12)),2&t&&(d.xp6(8),d.Q6J("ngForOf",r.Get_Array_Tabs_As_Button()),d.xp6(1),d.Q6J("ngIf",r.Array_Tab.Menus),d.xp6(1),d.Q6J("ngIf",r.Array_Tab.Orders),d.xp6(1),d.Q6J("ngIf",r.Array_Tab.Links),d.xp6(1),d.Q6J("ngIf",r.PopUp_Show_Image))},dependencies:[tn,dn,Jn,Go,Bf,Ss,Nd,qo,sw,mj,_j,yj],styles:['*[_ngcontent-%COMP%]{color:#52637b;font-family:sans-serif;transition:all .3s}.Tab-header[_ngcontent-%COMP%]{position:fixed;background-color:#fff;width:100%;height:52px;top:0;left:0;display:flex;align-items:center;justify-content:center;box-shadow:0 3px 18px 2px #dfdfdf;z-index:1}.Tab-header[_ngcontent-%COMP%]   .Burger-Menue[_ngcontent-%COMP%]{display:none}.Tab-header[_ngcontent-%COMP%]   .Group-Header-Button[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.Tab-header[_ngcontent-%COMP%]   .Group-Header-Button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid #8e9fff;outline:none;margin:4px;padding:8px 20px;background:white;border-radius:6px;cursor:pointer}.Tab-header[_ngcontent-%COMP%]   .Group-Header-Button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#2d76ffe3;color:#fff}.Tab-header[_ngcontent-%COMP%]   .Group-Header-Button[_ngcontent-%COMP%]   button.Active[_ngcontent-%COMP%]{background-color:#2d75ff;color:#fff}.Input-Container[_ngcontent-%COMP%]{position:relative}.Input-Container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:-7px;left:13px;font-size:12px;background:white;padding:0 4px;color:#033ff4}.Input-Container[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .Input-Container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{padding:10px 6px 6px 12px;margin:0 6px;max-width:55px;text-align:center;outline:none;border:1px solid #b9b9b9;border-radius:4px;background:transparent}.Input-Container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{max-width:180px;text-align:start}.Input-Container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{color:#8a2be2}.Menus[_ngcontent-%COMP%]{display:flex;margin-top:115px;flex-wrap:wrap;height:-webkit-fill-available;overflow:auto}.Menus[_ngcontent-%COMP%]   .Button-Images-Path[_ngcontent-%COMP%]{border:1px solid #8e9fff;outline:none;padding:8px 20px;background:#2d75ff;color:#fff;border-radius:6px;cursor:text;position:absolute;transform:translate(-50%,-50px);left:50%}.Menus[_ngcontent-%COMP%]   .Images[_ngcontent-%COMP%]{width:250px;height:400px;margin:16px 32px;display:flex;flex-direction:column;border-radius:3px;cursor:pointer}.Menus[_ngcontent-%COMP%]   .Images[_ngcontent-%COMP%]:hover{scale:1.04;transform:translateY(-12px)}.Menus[_ngcontent-%COMP%]   .Images[_ngcontent-%COMP%]:hover   .background[_ngcontent-%COMP%]{filter:drop-shadow(0px 7px 8px #9b9b9b) grayscale(0)}.Menus[_ngcontent-%COMP%]   .Images[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{width:250px;height:90%;background-size:cover;border-radius:6px;border:1px solid rgba(96,125,139,.3098039216);filter:drop-shadow(0px 7px 8px #9b9b9b) grayscale(1) opacity(.5)}.Menus[_ngcontent-%COMP%]   .Images[_ngcontent-%COMP%]   .Image-Name[_ngcontent-%COMP%]{height:10%;width:100%;text-align:center;margin:12px 0}.Container[_ngcontent-%COMP%]{display:flex;margin-top:48px;height:-webkit-fill-available}.Container[_ngcontent-%COMP%]   .Container-Side-Bar[_ngcontent-%COMP%]{width:317px;box-shadow:3px 0 18px -5px #dfdfdf;padding-right:16px;margin-right:30px}.Container[_ngcontent-%COMP%]   .Container-Side-Bar[_ngcontent-%COMP%]   .Side-Bar-Total-Order[_ngcontent-%COMP%]   .Side-Bar-Total-Order-Header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.Container[_ngcontent-%COMP%]   .Container-Side-Bar[_ngcontent-%COMP%]   .Side-Bar-Total-Order[_ngcontent-%COMP%]   .Side-Bar-Total-Order-Body[_ngcontent-%COMP%]{display:flex;flex-direction:column}.Container[_ngcontent-%COMP%]   .Container-Side-Bar[_ngcontent-%COMP%]   .Side-Bar-Total-Order[_ngcontent-%COMP%]   .Side-Bar-Total-Order-Body[_ngcontent-%COMP%]   .Order-Item[_ngcontent-%COMP%]{display:flex}.Container[_ngcontent-%COMP%]   .Container-Side-Bar[_ngcontent-%COMP%]   .Side-Bar-Total-Order[_ngcontent-%COMP%]   .Side-Bar-Total-Order-Body[_ngcontent-%COMP%]   .Order-Item[_ngcontent-%COMP%]   .Order[_ngcontent-%COMP%]{margin:18px 12px;position:relative}.Container[_ngcontent-%COMP%]   .Container-Side-Bar[_ngcontent-%COMP%]   .Side-Bar-Total-Order[_ngcontent-%COMP%]   .Side-Bar-Total-Order-Body[_ngcontent-%COMP%]   .Order-Item[_ngcontent-%COMP%]   .Order.Order-Name[_ngcontent-%COMP%]{min-width:100px;max-width:100px;line-break:anywhere}.Container[_ngcontent-%COMP%]   .Container-Side-Bar[_ngcontent-%COMP%]   .Side-Bar-Total-Order[_ngcontent-%COMP%]   .Side-Bar-Total-Order-Body[_ngcontent-%COMP%]   .Order-Item[_ngcontent-%COMP%]   .Order.Order-Total-Count[_ngcontent-%COMP%], .Container[_ngcontent-%COMP%]   .Container-Side-Bar[_ngcontent-%COMP%]   .Side-Bar-Total-Order[_ngcontent-%COMP%]   .Side-Bar-Total-Order-Body[_ngcontent-%COMP%]   .Order-Item[_ngcontent-%COMP%]   .Order.Order-Total-Price[_ngcontent-%COMP%], .Container[_ngcontent-%COMP%]   .Container-Side-Bar[_ngcontent-%COMP%]   .Side-Bar-Total-Order[_ngcontent-%COMP%]   .Side-Bar-Total-Order-Body[_ngcontent-%COMP%]   .Order-Item[_ngcontent-%COMP%]   .Order.Order-Item-Price[_ngcontent-%COMP%]{min-width:50px;max-width:50px}.Container[_ngcontent-%COMP%]   .Container-Side-Bar[_ngcontent-%COMP%]   .Side-Bar-Total-Order[_ngcontent-%COMP%]   .Side-Bar-Total-Order-Body[_ngcontent-%COMP%]   .Order-Item[_ngcontent-%COMP%]   .Order.Order[_ngcontent-%COMP%]:after{position:absolute;top:-19px;left:0;color:#00bad4;font-size:12px}.Container[_ngcontent-%COMP%]   .Container-Side-Bar[_ngcontent-%COMP%]   .Side-Bar-Total-Order[_ngcontent-%COMP%]   .Side-Bar-Total-Order-Body[_ngcontent-%COMP%]   .Order-Item[_ngcontent-%COMP%]   .Order.Order-Name[_ngcontent-%COMP%]:after{content:"Name"}.Container[_ngcontent-%COMP%]   .Container-Side-Bar[_ngcontent-%COMP%]   .Side-Bar-Total-Order[_ngcontent-%COMP%]   .Side-Bar-Total-Order-Body[_ngcontent-%COMP%]   .Order-Item[_ngcontent-%COMP%]   .Order.Order-Total-Count[_ngcontent-%COMP%]:after{content:"Count"}.Container[_ngcontent-%COMP%]   .Container-Side-Bar[_ngcontent-%COMP%]   .Side-Bar-Total-Order[_ngcontent-%COMP%]   .Side-Bar-Total-Order-Body[_ngcontent-%COMP%]   .Order-Item[_ngcontent-%COMP%]   .Order.Order-Item-Price[_ngcontent-%COMP%]:after{content:"Price"}.Container[_ngcontent-%COMP%]   .Container-Side-Bar[_ngcontent-%COMP%]   .Side-Bar-Total-Order[_ngcontent-%COMP%]   .Side-Bar-Total-Order-Body[_ngcontent-%COMP%]   .Order-Item[_ngcontent-%COMP%]   .Order.Order-Total-Price[_ngcontent-%COMP%]:after{content:"Total"}.Container[_ngcontent-%COMP%]   .Container-Side-Bar[_ngcontent-%COMP%]   .Side-Bar-Total-Order[_ngcontent-%COMP%]   .Side-Bar-Total-Order-Body[_ngcontent-%COMP%]   .Total-Order-Items[_ngcontent-%COMP%]{padding:0 8px}.Container[_ngcontent-%COMP%]   .Container-Side-Bar[_ngcontent-%COMP%]   .Side-Bar-Total-Order[_ngcontent-%COMP%]   .Side-Bar-Total-Order-Body[_ngcontent-%COMP%]   #inputDelivery[_ngcontent-%COMP%]{max-width:60px}.Container[_ngcontent-%COMP%]   .Container-Body[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:-webkit-fill-available;padding-bottom:5rem}.Container[_ngcontent-%COMP%]   .Container-Body[_ngcontent-%COMP%]   .group-card[_ngcontent-%COMP%]{height:100%;display:flex;width:100%;flex-wrap:wrap;overflow:auto}.Container[_ngcontent-%COMP%]   .Container-Body[_ngcontent-%COMP%]   .group-card[_ngcontent-%COMP%]   app-card-person[_ngcontent-%COMP%]{width:100%}.Links[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:60px;height:-webkit-fill-available}.Links[_ngcontent-%COMP%]   .Add-Card-Link[_ngcontent-%COMP%]{border-radius:3px;padding:12px;margin:12px;box-shadow:0 3px 12px #d9d9d9;height:-moz-fit-content;height:fit-content;width:350px}.Links[_ngcontent-%COMP%]   .Add-Card-Link[_ngcontent-%COMP%]   .Input-Container[_ngcontent-%COMP%]{margin-top:16px}.Links[_ngcontent-%COMP%]   .Add-Card-Link[_ngcontent-%COMP%]   .Input-Container.Link[_ngcontent-%COMP%]{width:100%}.Links[_ngcontent-%COMP%]   .Add-Card-Link[_ngcontent-%COMP%]   .Input-Container.Link[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:100%;width:320px}.Links[_ngcontent-%COMP%]   .Add-Card-Link[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center}.Links[_ngcontent-%COMP%]   .Add-Card-Link[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:12px 6px 4px;cursor:pointer}.Links[_ngcontent-%COMP%]   .group-card-link[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;overflow:auto}.Links[_ngcontent-%COMP%]   .group-card-link[_ngcontent-%COMP%]   .card-link[_ngcontent-%COMP%]{border-radius:3px;padding:12px;margin:12px;box-shadow:0 3px 12px #d9d9d9;height:-moz-fit-content;height:fit-content;width:350px}.Links[_ngcontent-%COMP%]   .group-card-link[_ngcontent-%COMP%]   .card-link[_ngcontent-%COMP%]   .card-link-header[_ngcontent-%COMP%]{display:flex;height:20px;padding:8px 6px;align-items:center}.Links[_ngcontent-%COMP%]   .group-card-link[_ngcontent-%COMP%]   .card-link[_ngcontent-%COMP%]   .card-link-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:4px 8px;cursor:pointer;width:16px}.Links[_ngcontent-%COMP%]   .group-card-link[_ngcontent-%COMP%]   .card-link[_ngcontent-%COMP%]   .card-link-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{filter:invert(.5);transform:translateY(-2px);border-bottom:1px solid}.Links[_ngcontent-%COMP%]   .group-card-link[_ngcontent-%COMP%]   .card-link[_ngcontent-%COMP%]   .card-link-header[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:100%}.Links[_ngcontent-%COMP%]   .group-card-link[_ngcontent-%COMP%]   .card-link[_ngcontent-%COMP%]   .card-link-header[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]   .removeX[_ngcontent-%COMP%]{cursor:pointer;padding:6px}.Links[_ngcontent-%COMP%]   .group-card-link[_ngcontent-%COMP%]   .card-link[_ngcontent-%COMP%]   .card-link-header[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{display:flex}.Links[_ngcontent-%COMP%]   .group-card-link[_ngcontent-%COMP%]   .card-link[_ngcontent-%COMP%]   .card-link-header[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-inline-end:12px;cursor:pointer}.Links[_ngcontent-%COMP%]   .group-card-link[_ngcontent-%COMP%]   .card-link[_ngcontent-%COMP%]   .card-link-body[_ngcontent-%COMP%]{padding:0}.Links[_ngcontent-%COMP%]   .group-card-link[_ngcontent-%COMP%]   .card-link[_ngcontent-%COMP%]   .card-link-body[_ngcontent-%COMP%]   .Showing[_ngcontent-%COMP%]{padding:0 8px}.Links[_ngcontent-%COMP%]   .group-card-link[_ngcontent-%COMP%]   .card-link[_ngcontent-%COMP%]   .card-link-body[_ngcontent-%COMP%]   .Input-Container[_ngcontent-%COMP%]{margin-top:16px}.Links[_ngcontent-%COMP%]   .group-card-link[_ngcontent-%COMP%]   .card-link[_ngcontent-%COMP%]   .card-link-body[_ngcontent-%COMP%]   .Input-Container.Link[_ngcontent-%COMP%]{width:100%}.Links[_ngcontent-%COMP%]   .group-card-link[_ngcontent-%COMP%]   .card-link[_ngcontent-%COMP%]   .card-link-body[_ngcontent-%COMP%]   .Input-Container.Link[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:100%;width:320px}.Links[_ngcontent-%COMP%]   .group-card-link[_ngcontent-%COMP%]   .card-link[_ngcontent-%COMP%]   .card-link-body[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;width:100%;text-overflow:ellipsis;overflow:hidden;padding:8px 0;height:34px}.Links[_ngcontent-%COMP%]   .group-card-link[_ngcontent-%COMP%]   .card-link[_ngcontent-%COMP%]   .card-link-body[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px;margin:10px 0}.PopUp-Show-Image[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;z-index:1;background-color:#00000082;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);display:flex;flex-direction:column;justify-content:center;align-items:center}.PopUp-Show-Image[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:end}.PopUp-Show-Image[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .Zoom[_ngcontent-%COMP%], .PopUp-Show-Image[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{z-index:1}.PopUp-Show-Image[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .Zoom[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.PopUp-Show-Image[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .Zoom[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:6px;cursor:pointer;filter:invert(1);margin:6px;background:rgba(255,255,255,.4901960784);border-radius:17%;border:1px solid}.PopUp-Show-Image[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;color:#fff;margin:8px 16px;cursor:pointer;width:30px;height:30px;background-color:#72727266;font-family:arial;border-radius:50%;border:1px solid}.PopUp-Show-Image[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%;padding-bottom:8px}.PopUp-Show-Image[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .PopUp-background[_ngcontent-%COMP%]{transition:all 0s;width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:center}@media only screen and (max-width: 767px){.Container-Side-Bar[_ngcontent-%COMP%]{position:fixed;background:#ffffff;z-index:1;left:0;width:100%;height:100%}.Container-Side-Bar.Hide-Side-bar[_ngcontent-%COMP%]{display:none}.Tab-header[_ngcontent-%COMP%]   .Burger-Menue[_ngcontent-%COMP%]{margin-right:auto;margin-left:1rem;scale:.5;display:block}.Tab-header[_ngcontent-%COMP%]   .Burger-Menue[_ngcontent-%COMP%]   #checkbox[_ngcontent-%COMP%]{display:none}.Tab-header[_ngcontent-%COMP%]   .Burger-Menue[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{position:relative;width:40px;cursor:pointer;margin:auto;display:block;height:34px}.Tab-header[_ngcontent-%COMP%]   .Burger-Menue[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{position:absolute;left:0;right:0;height:4px;border-radius:2px;background:#4d8bbc;color:inherit;opacity:1;transition:none .35s cubic-bezier(.5,-.35,.35,1.5) 0s}.Tab-header[_ngcontent-%COMP%]   .Burger-Menue[_ngcontent-%COMP%]   .bar--top[_ngcontent-%COMP%]{bottom:calc(50% + 13px);transition-property:bottom,transform;transition-delay:.35s,0s}.Tab-header[_ngcontent-%COMP%]   .Burger-Menue[_ngcontent-%COMP%]   .bar--middle[_ngcontent-%COMP%]{top:calc(50% - 2px);transition-property:opacity;transition-delay:.35s}.Tab-header[_ngcontent-%COMP%]   .Burger-Menue[_ngcontent-%COMP%]   .bar--bottom[_ngcontent-%COMP%]{top:calc(50% + 13px);transition-property:top,transform;transition-delay:.35s,0s}.Tab-header[_ngcontent-%COMP%]   .Burger-Menue[_ngcontent-%COMP%]   #checkbox[_ngcontent-%COMP%]:checked + .toggle[_ngcontent-%COMP%]   .bar--top[_ngcontent-%COMP%]{bottom:calc(50% - 2px);transform:rotate(135deg);transition-delay:0s,.35s}.Tab-header[_ngcontent-%COMP%]   .Burger-Menue[_ngcontent-%COMP%]   #checkbox[_ngcontent-%COMP%]:checked + .toggle[_ngcontent-%COMP%]   .bar--middle[_ngcontent-%COMP%]{opacity:0;transition-duration:0s;transition-delay:.35s}.Tab-header[_ngcontent-%COMP%]   .Burger-Menue[_ngcontent-%COMP%]   #checkbox[_ngcontent-%COMP%]:checked + .toggle[_ngcontent-%COMP%]   .bar--bottom[_ngcontent-%COMP%]{top:calc(50% - 2px);transform:rotate(225deg);transition-delay:0s,.35s}}']}),n})(),Vj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[Lj]}),n.\u0275inj=d.cJS({imports:[El,Ww,ss.hO.initializeApp(U1_firebaseConfig),AV,tj,rm]}),n})();fc().bootstrapModule(Vj).catch(n=>console.error(n))},9751:(gt,Me,L)=>{L.d(Me,{y:()=>Ee});var d=L(930),ee=L(727),k=L(8822),ce=L(9635),le=L(2416),pe=L(576),he=L(2806);let Ee=(()=>{class K{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const De=new K;return De.source=this,De.operator=Re,De}subscribe(Re,De,st){const we=function H(K){return K&&K instanceof d.Lv||function G(K){return K&&(0,pe.m)(K.next)&&(0,pe.m)(K.error)&&(0,pe.m)(K.complete)}(K)&&(0,ee.Nn)(K)}(Re)?Re:new d.Hp(Re,De,st);return(0,he.x)(()=>{const{operator:ye,source:mt}=this;we.add(ye?ye.call(we,mt):mt?this._subscribe(we):this._trySubscribe(we))}),we}_trySubscribe(Re){try{return this._subscribe(Re)}catch(De){Re.error(De)}}forEach(Re,De){return new(De=ge(De))((st,we)=>{const ye=new d.Hp({next:mt=>{try{Re(mt)}catch(bt){we(bt),ye.unsubscribe()}},error:we,complete:st});this.subscribe(ye)})}_subscribe(Re){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(Re)}[k.L](){return this}pipe(...Re){return(0,ce.U)(Re)(this)}toPromise(Re){return new(Re=ge(Re))((De,st)=>{let we;this.subscribe(ye=>we=ye,ye=>st(ye),()=>De(we))})}}return K.create=$e=>new K($e),K})();function ge(K){var $e;return null!==($e=K??le.v.Promise)&&void 0!==$e?$e:Promise}},7579:(gt,Me,L)=>{L.d(Me,{x:()=>he});var d=L(9751),ee=L(727);const ce=(0,L(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=L(8737),pe=L(2806);let he=(()=>{class ge extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const K=new Ee(this,this);return K.operator=H,K}_throwIfClosed(){if(this.closed)throw new ce}next(H){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(H)}})}error(H){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:K}=this;for(;K.length;)K.shift().error(H)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:K,isStopped:$e,observers:Re}=this;return K||$e?ee.Lc:(this.currentObservers=null,Re.push(H),new ee.w0(()=>{this.currentObservers=null,(0,le.P)(Re,H)}))}_checkFinalizedStatuses(H){const{hasError:K,thrownError:$e,isStopped:Re}=this;K?H.error($e):Re&&H.complete()}asObservable(){const H=new d.y;return H.source=this,H}}return ge.create=(G,H)=>new Ee(G,H),ge})();class Ee extends he{constructor(G,H){super(),this.destination=G,this.source=H}next(G){var H,K;null===(K=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===K||K.call(H,G)}error(G){var H,K;null===(K=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===K||K.call(H,G)}complete(){var G,H;null===(H=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===H||H.call(G)}_subscribe(G){var H,K;return null!==(K=null===(H=this.source)||void 0===H?void 0:H.subscribe(G))&&void 0!==K?K:ee.Lc}}},930:(gt,Me,L)=>{L.d(Me,{Hp:()=>st,Lv:()=>K});var d=L(576),ee=L(727),k=L(2416),ce=L(7849),le=L(5032);const pe=ge("C",void 0,void 0);function ge(Le,Ie,_e){return{kind:Le,value:Ie,error:_e}}var G=L(3410),H=L(2806);class K extends ee.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,ee.Nn)(Ie)&&Ie.add(this)):this.destination=bt}static create(Ie,_e,qe){return new st(Ie,_e,qe)}next(Ie){this.isStopped?mt(function Ee(Le){return ge("N",Le,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?mt(function he(Le){return ge("E",void 0,Le)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?mt(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Re(Le,Ie){return $e.call(Le,Ie)}class De{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:_e}=this;if(_e.next)try{_e.next(Ie)}catch(qe){we(qe)}}error(Ie){const{partialObserver:_e}=this;if(_e.error)try{_e.error(Ie)}catch(qe){we(qe)}else we(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(_e){we(_e)}}}class st extends K{constructor(Ie,_e,qe){let He;if(super(),(0,d.m)(Ie)||!Ie)He={next:Ie??void 0,error:_e??void 0,complete:qe??void 0};else{let tt;this&&k.v.useDeprecatedNextContext?(tt=Object.create(Ie),tt.unsubscribe=()=>this.unsubscribe(),He={next:Ie.next&&Re(Ie.next,tt),error:Ie.error&&Re(Ie.error,tt),complete:Ie.complete&&Re(Ie.complete,tt)}):He=Ie}this.destination=new De(He)}}function we(Le){k.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Le):(0,ce.h)(Le)}function mt(Le,Ie){const{onStoppedNotification:_e}=k.v;_e&&G.z.setTimeout(()=>_e(Le,Ie))}const bt={closed:!0,next:le.Z,error:function ye(Le){throw Le},complete:le.Z}},727:(gt,Me,L)=>{L.d(Me,{Lc:()=>pe,w0:()=>le,Nn:()=>he});var d=L(576);const k=(0,L(3888).d)(ge=>function(H){ge(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((K,$e)=>`${$e+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ce=L(8737);class le{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Re of H)Re.remove(this);else H.remove(this);const{initialTeardown:K}=this;if((0,d.m)(K))try{K()}catch(Re){G=Re instanceof k?Re.errors:[Re]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Re of $e)try{Ee(Re)}catch(De){G=G??[],De instanceof k?G=[...G,...De.errors]:G.push(De)}}if(G)throw new k(G)}}add(G){var H;if(G&&G!==this)if(this.closed)Ee(G);else{if(G instanceof le){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(G)}}_hasParent(G){const{_parentage:H}=this;return H===G||Array.isArray(H)&&H.includes(G)}_addParent(G){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(G),H):H?[H,G]:G}_removeParent(G){const{_parentage:H}=this;H===G?this._parentage=null:Array.isArray(H)&&(0,ce.P)(H,G)}remove(G){const{_finalizers:H}=this;H&&(0,ce.P)(H,G),G instanceof le&&G._removeParent(this)}}le.EMPTY=(()=>{const ge=new le;return ge.closed=!0,ge})();const pe=le.EMPTY;function he(ge){return ge instanceof le||ge&&"closed"in ge&&(0,d.m)(ge.remove)&&(0,d.m)(ge.add)&&(0,d.m)(ge.unsubscribe)}function Ee(ge){(0,d.m)(ge)?ge():ge.unsubscribe()}},2416:(gt,Me,L)=>{L.d(Me,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(gt,Me,L)=>{L.d(Me,{E:()=>ee});const ee=new(L(9751).y)(le=>le.complete())},8996:(gt,Me,L)=>{L.d(Me,{D:()=>Ie});var d=L(8421),ee=L(5363),k=L(9468),pe=L(9751),Ee=L(2202),ge=L(576),G=L(9672);function K(_e,qe){if(!_e)throw new Error("Iterable cannot be null");return new pe.y(He=>{(0,G.f)(He,qe,()=>{const tt=_e[Symbol.asyncIterator]();(0,G.f)(He,qe,()=>{tt.next().then(re=>{re.done?He.complete():He.next(re.value)})},0,!0)})})}var $e=L(3670),Re=L(8239),De=L(1144),st=L(6495),we=L(2206),ye=L(4532),mt=L(3260);function Ie(_e,qe){return qe?function Le(_e,qe){if(null!=_e){if((0,$e.c)(_e))return function ce(_e,qe){return(0,d.Xf)(_e).pipe((0,k.R)(qe),(0,ee.Q)(qe))}(_e,qe);if((0,De.z)(_e))return function he(_e,qe){return new pe.y(He=>{let tt=0;return qe.schedule(function(){tt===_e.length?He.complete():(He.next(_e[tt++]),He.closed||this.schedule())})})}(_e,qe);if((0,Re.t)(_e))return function le(_e,qe){return(0,d.Xf)(_e).pipe((0,k.R)(qe),(0,ee.Q)(qe))}(_e,qe);if((0,we.D)(_e))return K(_e,qe);if((0,st.T)(_e))return function H(_e,qe){return new pe.y(He=>{let tt;return(0,G.f)(He,qe,()=>{tt=_e[Ee.h](),(0,G.f)(He,qe,()=>{let re,xt;try{({value:re,done:xt}=tt.next())}catch(ct){return void He.error(ct)}xt?He.complete():He.next(re)},0,!0)}),()=>(0,ge.m)(tt?.return)&&tt.return()})}(_e,qe);if((0,mt.L)(_e))return function bt(_e,qe){return K((0,mt.Q)(_e),qe)}(_e,qe)}throw(0,ye.z)(_e)}(_e,qe):(0,d.Xf)(_e)}},8421:(gt,Me,L)=>{L.d(Me,{Xf:()=>$e});var d=L(7582),ee=L(1144),k=L(8239),ce=L(9751),le=L(3670),pe=L(2206),he=L(4532),Ee=L(6495),ge=L(3260),G=L(576),H=L(7849),K=L(8822);function $e(Le){if(Le instanceof ce.y)return Le;if(null!=Le){if((0,le.c)(Le))return function Re(Le){return new ce.y(Ie=>{const _e=Le[K.L]();if((0,G.m)(_e.subscribe))return _e.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,ee.z)(Le))return function De(Le){return new ce.y(Ie=>{for(let _e=0;_e<Le.length&&!Ie.closed;_e++)Ie.next(Le[_e]);Ie.complete()})}(Le);if((0,k.t)(Le))return function st(Le){return new ce.y(Ie=>{Le.then(_e=>{Ie.closed||(Ie.next(_e),Ie.complete())},_e=>Ie.error(_e)).then(null,H.h)})}(Le);if((0,pe.D)(Le))return ye(Le);if((0,Ee.T)(Le))return function we(Le){return new ce.y(Ie=>{for(const _e of Le)if(Ie.next(_e),Ie.closed)return;Ie.complete()})}(Le);if((0,ge.L)(Le))return function mt(Le){return ye((0,ge.Q)(Le))}(Le)}throw(0,he.z)(Le)}function ye(Le){return new ce.y(Ie=>{(function bt(Le,Ie){var _e,qe,He,tt;return(0,d.mG)(this,void 0,void 0,function*(){try{for(_e=(0,d.KL)(Le);!(qe=yield _e.next()).done;)if(Ie.next(qe.value),Ie.closed)return}catch(re){He={error:re}}finally{try{qe&&!qe.done&&(tt=_e.return)&&(yield tt.call(_e))}finally{if(He)throw He.error}}Ie.complete()})})(Le,Ie).catch(_e=>Ie.error(_e))})}},6451:(gt,Me,L)=>{L.d(Me,{T:()=>pe});var d=L(8189),ee=L(8421),k=L(515),ce=L(3269),le=L(8996);function pe(...he){const Ee=(0,ce.yG)(he),ge=(0,ce._6)(he,1/0),G=he;return G.length?1===G.length?(0,ee.Xf)(G[0]):(0,d.J)(ge)((0,le.D)(G,Ee)):k.E}},5403:(gt,Me,L)=>{L.d(Me,{x:()=>ee});var d=L(930);function ee(ce,le,pe,he,Ee){return new k(ce,le,pe,he,Ee)}class k extends d.Lv{constructor(le,pe,he,Ee,ge,G){super(le),this.onFinalize=ge,this.shouldUnsubscribe=G,this._next=pe?function(H){try{pe(H)}catch(K){le.error(K)}}:super._next,this._error=Ee?function(H){try{Ee(H)}catch(K){le.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(H){le.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(gt,Me,L)=>{L.d(Me,{U:()=>k});var d=L(4482),ee=L(5403);function k(ce,le){return(0,d.e)((pe,he)=>{let Ee=0;pe.subscribe((0,ee.x)(he,ge=>{he.next(ce.call(le,ge,Ee++))}))})}},8189:(gt,Me,L)=>{L.d(Me,{J:()=>k});var d=L(5577),ee=L(4671);function k(ce=1/0){return(0,d.z)(ee.y,ce)}},5577:(gt,Me,L)=>{L.d(Me,{z:()=>Ee});var d=L(4004),ee=L(8421),k=L(4482),ce=L(9672),le=L(5403),he=L(576);function Ee(ge,G,H=1/0){return(0,he.m)(G)?Ee((K,$e)=>(0,d.U)((Re,De)=>G(K,Re,$e,De))((0,ee.Xf)(ge(K,$e))),H):("number"==typeof G&&(H=G),(0,k.e)((K,$e)=>function pe(ge,G,H,K,$e,Re,De,st){const we=[];let ye=0,mt=0,bt=!1;const Le=()=>{bt&&!we.length&&!ye&&G.complete()},Ie=qe=>ye<K?_e(qe):we.push(qe),_e=qe=>{Re&&G.next(qe),ye++;let He=!1;(0,ee.Xf)(H(qe,mt++)).subscribe((0,le.x)(G,tt=>{$e?.(tt),Re?Ie(tt):G.next(tt)},()=>{He=!0},void 0,()=>{if(He)try{for(ye--;we.length&&ye<K;){const tt=we.shift();De?(0,ce.f)(G,De,()=>_e(tt)):_e(tt)}Le()}catch(tt){G.error(tt)}}))};return ge.subscribe((0,le.x)(G,Ie,()=>{bt=!0,Le()})),()=>{st?.()}}(K,$e,ge,H)))}},5363:(gt,Me,L)=>{L.d(Me,{Q:()=>ce});var d=L(9672),ee=L(4482),k=L(5403);function ce(le,pe=0){return(0,ee.e)((he,Ee)=>{he.subscribe((0,k.x)(Ee,ge=>(0,d.f)(Ee,le,()=>Ee.next(ge),pe),()=>(0,d.f)(Ee,le,()=>Ee.complete(),pe),ge=>(0,d.f)(Ee,le,()=>Ee.error(ge),pe)))})}},3099:(gt,Me,L)=>{L.d(Me,{B:()=>le});var d=L(8421),ee=L(7579),k=L(930),ce=L(4482);function le(he={}){const{connector:Ee=(()=>new ee.x),resetOnError:ge=!0,resetOnComplete:G=!0,resetOnRefCountZero:H=!0}=he;return K=>{let $e,Re,De,st=0,we=!1,ye=!1;const mt=()=>{Re?.unsubscribe(),Re=void 0},bt=()=>{mt(),$e=De=void 0,we=ye=!1},Le=()=>{const Ie=$e;bt(),Ie?.unsubscribe()};return(0,ce.e)((Ie,_e)=>{st++,!ye&&!we&&mt();const qe=De=De??Ee();_e.add(()=>{st--,0===st&&!ye&&!we&&(Re=pe(Le,H))}),qe.subscribe(_e),!$e&&st>0&&($e=new k.Hp({next:He=>qe.next(He),error:He=>{ye=!0,mt(),Re=pe(bt,ge,He),qe.error(He)},complete:()=>{we=!0,mt(),Re=pe(bt,G),qe.complete()}}),(0,d.Xf)(Ie).subscribe($e))})(K)}}function pe(he,Ee,...ge){if(!0===Ee)return void he();if(!1===Ee)return;const G=new k.Hp({next:()=>{G.unsubscribe(),he()}});return Ee(...ge).subscribe(G)}},9468:(gt,Me,L)=>{L.d(Me,{R:()=>ee});var d=L(4482);function ee(k,ce=0){return(0,d.e)((le,pe)=>{pe.add(k.schedule(()=>le.subscribe(pe),ce))})}},8505:(gt,Me,L)=>{L.d(Me,{b:()=>le});var d=L(576),ee=L(4482),k=L(5403),ce=L(4671);function le(pe,he,Ee){const ge=(0,d.m)(pe)||he||Ee?{next:pe,error:he,complete:Ee}:pe;return ge?(0,ee.e)((G,H)=>{var K;null===(K=ge.subscribe)||void 0===K||K.call(ge);let $e=!0;G.subscribe((0,k.x)(H,Re=>{var De;null===(De=ge.next)||void 0===De||De.call(ge,Re),H.next(Re)},()=>{var Re;$e=!1,null===(Re=ge.complete)||void 0===Re||Re.call(ge),H.complete()},Re=>{var De;$e=!1,null===(De=ge.error)||void 0===De||De.call(ge,Re),H.error(Re)},()=>{var Re,De;$e&&(null===(Re=ge.unsubscribe)||void 0===Re||Re.call(ge)),null===(De=ge.finalize)||void 0===De||De.call(ge)}))}):ce.y}},4408:(gt,Me,L)=>{L.d(Me,{o:()=>le});var d=L(727);class ee extends d.w0{constructor(he,Ee){super()}schedule(he,Ee=0){return this}}const k={setInterval(pe,he,...Ee){const{delegate:ge}=k;return ge?.setInterval?ge.setInterval(pe,he,...Ee):setInterval(pe,he,...Ee)},clearInterval(pe){const{delegate:he}=k;return(he?.clearInterval||clearInterval)(pe)},delegate:void 0};var ce=L(8737);class le extends ee{constructor(he,Ee){super(he,Ee),this.scheduler=he,this.work=Ee,this.pending=!1}schedule(he,Ee=0){var ge;if(this.closed)return this;this.state=he;const G=this.id,H=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(H,G,Ee)),this.pending=!0,this.delay=Ee,this.id=null!==(ge=this.id)&&void 0!==ge?ge:this.requestAsyncId(H,this.id,Ee),this}requestAsyncId(he,Ee,ge=0){return k.setInterval(he.flush.bind(he,this),ge)}recycleAsyncId(he,Ee,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return Ee;null!=Ee&&k.clearInterval(Ee)}execute(he,Ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(he,Ee);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,Ee){let G,ge=!1;try{this.work(he)}catch(H){ge=!0,G=H||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:he,scheduler:Ee}=this,{actions:ge}=Ee;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(ge,this),null!=he&&(this.id=this.recycleAsyncId(Ee,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(gt,Me,L)=>{L.d(Me,{v:()=>k});var d=L(6063);class ee{constructor(le,pe=ee.now){this.schedulerActionCtor=le,this.now=pe}schedule(le,pe=0,he){return new this.schedulerActionCtor(this,le).schedule(he,pe)}}ee.now=d.l.now;class k extends ee{constructor(le,pe=ee.now){super(le,pe),this.actions=[],this._active=!1}flush(le){const{actions:pe}=this;if(this._active)return void pe.push(le);let he;this._active=!0;do{if(he=le.execute(le.state,le.delay))break}while(le=pe.shift());if(this._active=!1,he){for(;le=pe.shift();)le.unsubscribe();throw he}}}},4986:(gt,Me,L)=>{L.d(Me,{P:()=>ce,z:()=>k});var d=L(4408);const k=new(L(7565).v)(d.o),ce=k},6063:(gt,Me,L)=>{L.d(Me,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(gt,Me,L)=>{L.d(Me,{z:()=>d});const d={setTimeout(ee,k,...ce){const{delegate:le}=d;return le?.setTimeout?le.setTimeout(ee,k,...ce):setTimeout(ee,k,...ce)},clearTimeout(ee){const{delegate:k}=d;return(k?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(gt,Me,L)=>{L.d(Me,{h:()=>ee});const ee=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gt,Me,L)=>{L.d(Me,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(gt,Me,L)=>{L.d(Me,{_6:()=>pe,jO:()=>ce,yG:()=>le});var d=L(576),ee=L(3532);function k(he){return he[he.length-1]}function ce(he){return(0,d.m)(k(he))?he.pop():void 0}function le(he){return(0,ee.K)(k(he))?he.pop():void 0}function pe(he,Ee){return"number"==typeof k(he)?he.pop():Ee}},8737:(gt,Me,L)=>{function d(ee,k){if(ee){const ce=ee.indexOf(k);0<=ce&&ee.splice(ce,1)}}L.d(Me,{P:()=>d})},3888:(gt,Me,L)=>{function d(ee){const ce=ee(le=>{Error.call(le),le.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}L.d(Me,{d:()=>d})},2806:(gt,Me,L)=>{L.d(Me,{O:()=>ce,x:()=>k});var d=L(2416);let ee=null;function k(le){if(d.v.useDeprecatedSynchronousErrorHandling){const pe=!ee;if(pe&&(ee={errorThrown:!1,error:null}),le(),pe){const{errorThrown:he,error:Ee}=ee;if(ee=null,he)throw Ee}}else le()}function ce(le){d.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=le)}},9672:(gt,Me,L)=>{function d(ee,k,ce,le=0,pe=!1){const he=k.schedule(function(){ce(),pe?ee.add(this.schedule(null,le)):this.unsubscribe()},le);if(ee.add(he),!pe)return he}L.d(Me,{f:()=>d})},4671:(gt,Me,L)=>{function d(ee){return ee}L.d(Me,{y:()=>d})},1144:(gt,Me,L)=>{L.d(Me,{z:()=>d});const d=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(gt,Me,L)=>{L.d(Me,{D:()=>ee});var d=L(576);function ee(k){return Symbol.asyncIterator&&(0,d.m)(k?.[Symbol.asyncIterator])}},576:(gt,Me,L)=>{function d(ee){return"function"==typeof ee}L.d(Me,{m:()=>d})},3670:(gt,Me,L)=>{L.d(Me,{c:()=>k});var d=L(8822),ee=L(576);function k(ce){return(0,ee.m)(ce[d.L])}},6495:(gt,Me,L)=>{L.d(Me,{T:()=>k});var d=L(2202),ee=L(576);function k(ce){return(0,ee.m)(ce?.[d.h])}},8239:(gt,Me,L)=>{L.d(Me,{t:()=>ee});var d=L(576);function ee(k){return(0,d.m)(k?.then)}},3260:(gt,Me,L)=>{L.d(Me,{L:()=>ce,Q:()=>k});var d=L(7582),ee=L(576);function k(le){return(0,d.FC)(this,arguments,function*(){const he=le.getReader();try{for(;;){const{value:Ee,done:ge}=yield(0,d.qq)(he.read());if(ge)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(Ee)}}finally{he.releaseLock()}})}function ce(le){return(0,ee.m)(le?.getReader)}},3532:(gt,Me,L)=>{L.d(Me,{K:()=>ee});var d=L(576);function ee(k){return k&&(0,d.m)(k.schedule)}},4482:(gt,Me,L)=>{L.d(Me,{A:()=>ee,e:()=>k});var d=L(576);function ee(ce){return(0,d.m)(ce?.lift)}function k(ce){return le=>{if(ee(le))return le.lift(function(pe){try{return ce(pe,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(gt,Me,L)=>{function d(){}L.d(Me,{Z:()=>d})},9635:(gt,Me,L)=>{L.d(Me,{U:()=>k,z:()=>ee});var d=L(4671);function ee(...ce){return k(ce)}function k(ce){return 0===ce.length?d.y:1===ce.length?ce[0]:function(pe){return ce.reduce((he,Ee)=>Ee(he),pe)}}},7849:(gt,Me,L)=>{L.d(Me,{h:()=>k});var d=L(2416),ee=L(3410);function k(ce){ee.z.setTimeout(()=>{const{onUnhandledError:le}=d.v;if(!le)throw ce;le(ce)})}},4532:(gt,Me,L)=>{function d(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Me,{z:()=>d})},4650:(gt,Me,L)=>{L.d(Me,{$8M:()=>hc,$Z:()=>hw,AFp:()=>ja,ALo:()=>QI,AaK:()=>Ee,AsE:()=>Dm,CHM:()=>Xa,CRH:()=>eE,CZH:()=>s_,CqO:()=>AT,D6c:()=>NE,EJc:()=>Tp,EpF:()=>Yw,F4k:()=>Wo,FYo:()=>Jg,FiY:()=>Xi,G48:()=>yu,Gf:()=>t_,GfV:()=>Xg,Gpc:()=>H,JOm:()=>Ds,KtG:()=>cl,LFG:()=>Vn,LSH:()=>F0,Lbi:()=>Dp,Lck:()=>HI,MAs:()=>ST,MGl:()=>Jl,MMx:()=>Km,NdJ:()=>iv,O4$:()=>pl,OlP:()=>hn,Oqu:()=>mv,Q6J:()=>Zw,QGY:()=>rv,QP$:()=>St,Qsj:()=>yD,R0b:()=>Os,RDi:()=>P0,Rgc:()=>gp,SBq:()=>Ot,Sil:()=>a_,Suo:()=>Vc,TTD:()=>gi,TgZ:()=>ss,Udp:()=>Zf,VKq:()=>dp,X6Q:()=>_C,XFs:()=>dt,Xpm:()=>Tn,Y36:()=>Td,YKP:()=>lp,YNc:()=>TT,Yjl:()=>W,Yz7:()=>me,Z0I:()=>yt,ZZ4:()=>wu,_Bn:()=>Wm,_UZ:()=>Nr,_Vd:()=>Vl,_c5:()=>Vp,_uU:()=>gv,aQg:()=>Rn,c2e:()=>o_,cJS:()=>Pt,cg1:()=>nu,dDg:()=>Yt,dqk:()=>fn,eFA:()=>bE,ekj:()=>Kf,eoX:()=>_n,f3M:()=>Ec,g9A:()=>bp,h0i:()=>au,hGG:()=>jS,hij:()=>Yf,iGM:()=>yp,ifc:()=>vt,ip1:()=>Ar,jDz:()=>up,kL8:()=>Ii,kcU:()=>rc,lG2:()=>V,lqb:()=>vd,lri:()=>CE,n5z:()=>En,oAB:()=>Qr,oxw:()=>Qw,q4F:()=>Ul,qLn:()=>Ef,qOj:()=>Uf,qZA:()=>Et,rWj:()=>fC,s9C:()=>Ut,sBO:()=>Fp,sIi:()=>Rd,s_b:()=>mp,soG:()=>Ps,uIk:()=>Nd,vHH:()=>De,vpe:()=>$s,wAp:()=>Mt,xi3:()=>lu,xp6:()=>Ed,zSh:()=>H0,zs3:()=>bd});var d=L(7579),ee=L(727),k=L(9751),ce=L(6451),le=L(3099);function pe(s){for(let o in s)if(s[o]===pe)return o;throw Error("Could not find renamed property on target object.")}function he(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function Ee(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Ee).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ge(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=pe({__forward_ref__:pe});function H(s){return s.__forward_ref__=H,s.toString=function(){return Ee(this())},s}function K(s){return $e(s)?s():s}function $e(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===H}class De extends Error{constructor(o,a){super(function st(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function we(s){return"string"==typeof s?s:null==s?"":String(s)}function Ie(s,o){throw new De(-201,!1)}function ie(s,o){null==s&&function te(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function me(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Pt(s){return{providers:s.providers||[],imports:s.imports||[]}}function ln(s){return qt(s,Yn)||qt(s,Kr)}function yt(s){return null!==ln(s)}function qt(s,o){return s.hasOwnProperty(o)?s[o]:null}function kn(s){return s&&(s.hasOwnProperty(jn)||s.hasOwnProperty(hi))?s[jn]:null}const Yn=pe({\u0275prov:pe}),jn=pe({\u0275inj:pe}),Kr=pe({ngInjectableDef:pe}),hi=pe({ngInjectorDef:pe});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let Br;function Ur(s){const o=Br;return Br=s,o}function Co(s,o,a){const l=ln(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&dt.Optional?null:void 0!==o?o:void Ie(Ee(s))}function cr(s){return{toString:s}.toString()}var wn=(()=>((wn=wn||{})[wn.OnPush=0]="OnPush",wn[wn.Default=1]="Default",wn))(),vt=(()=>{return(s=vt||(vt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",vt;var s})();const fn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Qn={},Tt=[],yr=pe({\u0275cmp:pe}),un=pe({\u0275dir:pe}),wo=pe({\u0275pipe:pe}),Xt=pe({\u0275mod:pe}),lr=pe({\u0275fac:pe}),vr=pe({__NG_ELEMENT_ID__:pe});let Si=0;function Tn(s){return cr(()=>{const a=!0===s.standalone,l={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===wn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Tt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||vt.Emulated,id:"c"+Si++,styles:s.styles||Tt,_:null,setInput:null,schemas:s.schemas||null,tView:null},m=s.dependencies,y=s.features;return h.inputs=U(s.inputs,l),h.outputs=U(s.outputs),y&&y.forEach(I=>I(h)),h.directiveDefs=m?()=>("function"==typeof m?m():m).map(qi).filter(Nn):null,h.pipeDefs=m?()=>("function"==typeof m?m():m).map(We).filter(Nn):null,h})}function qi(s){return ue(s)||J(s)}function Nn(s){return null!==s}function Qr(s){return cr(()=>({type:s.type,bootstrap:s.bootstrap||Tt,declarations:s.declarations||Tt,imports:s.imports||Tt,exports:s.exports||Tt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function U(s,o){if(null==s)return Qn;const a={};for(const l in s)if(s.hasOwnProperty(l)){let h=s[l],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),a[h]=l,o&&(o[h]=m)}return a}const V=Tn;function W(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function ue(s){return s[yr]||null}function J(s){return s[un]||null}function We(s){return s[wo]||null}function St(s){const o=ue(s)||J(s)||We(s);return null!==o&&o.standalone}function Lt(s,o){const a=s[Xt]||null;if(!a&&!0===o)throw new Error(`Type ${Ee(s)} does not have '\u0275mod' property.`);return a}function ur(s){return Array.isArray(s)&&"object"==typeof s[1]}function Hr(s){return Array.isArray(s)&&!0===s[1]}function Eo(s){return 0!=(8&s.flags)}function za(s){return 2==(2&s.flags)}function ps(s){return 1==(1&s.flags)}function Mi(s){return null!==s.template}function bo(s){return 0!=(256&s[2])}function gs(s,o){return s.hasOwnProperty(lr)?s[lr]:null}class Hu{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function gi(){return $u}function $u(s){return s.type.prototype.ngOnChanges&&(s.setInput=rl),sa}function sa(){const s=kh(this),o=s?.current;if(o){const a=s.previous;if(a===Qn)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function rl(s,o,a,l){const h=kh(s)||function il(s,o){return s[Za]=o}(s,{previous:Qn,current:null}),m=h.current||(h.current={}),y=h.previous,I=this.declaredInputs[a],b=y[I];m[I]=new Hu(b&&b.currentValue,o,y===Qn),s[l]=o}gi.ngInherit=!0;const Za="__ngSimpleChanges__";function kh(s){return s[Za]||null}function Fn(s){for(;Array.isArray(s);)s=s[0];return s}function mi(s,o){return Fn(o[s])}function $r(s,o){return Fn(o[s.index])}function oa(s,o){return s.data[o]}function Do(s,o){return s[o]}function Ln(s,o){const a=o[s];return ur(a)?a:a[0]}function Zs(s){return 64==(64&s[2])}function Xr(s,o){return null==o?null:s[o]}function Ls(s){s[18]=0}function Er(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const At={lFrame:fl(null),bindingsEnabled:!0};function Zu(){return At.bindingsEnabled}function Ae(){return At.lFrame.lView}function $t(){return At.lFrame.tView}function Xa(s){return At.lFrame.contextLView=s,s[8]}function cl(s){return At.lFrame.contextLView=null,s}function Sn(){let s=ec();for(;null!==s&&64===s.type;)s=s.parent;return s}function ec(){return At.lFrame.currentTNode}function ei(s,o){const a=At.lFrame;a.currentTNode=s,a.isParent=o}function To(){return At.lFrame.isParent}function Pr(){const s=At.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function ms(){return At.lFrame.bindingIndex++}function ni(s){const o=At.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function dg(s,o){const a=At.lFrame;a.bindingIndex=a.bindingRootIndex=s,dl(o)}function dl(s){At.lFrame.currentDirectiveIndex=s}function tc(){return At.lFrame.currentQueryIndex}function Or(s){At.lFrame.currentQueryIndex=s}function hl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function la(s,o,a){if(a&dt.SkipSelf){let h=o,m=s;for(;!(h=h.parent,null!==h||a&dt.Host||(h=hl(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;o=h,s=m}const l=At.lFrame=Qs();return l.currentTNode=o,l.lView=s,!0}function ua(s){const o=Qs(),a=s[1];At.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Qs(){const s=At.lFrame,o=null===s?null:s.child;return null===o?fl(s):o}function fl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function da(){const s=At.lFrame;return At.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Yu=da;function Ao(){const s=da();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function nn(){return At.lFrame.selectedIndex}function _s(s){At.lFrame.selectedIndex=s}function In(){const s=At.lFrame;return oa(s.tView,s.selectedIndex)}function pl(){At.lFrame.currentNamespace="svg"}function rc(){!function Ju(){At.lFrame.currentNamespace=null}()}function Js(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const m=s.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:b,ngAfterViewChecked:S,ngOnDestroy:R}=m;y&&(s.contentHooks||(s.contentHooks=[])).push(-a,y),I&&((s.contentHooks||(s.contentHooks=[])).push(a,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,I)),b&&(s.viewHooks||(s.viewHooks=[])).push(-a,b),S&&((s.viewHooks||(s.viewHooks=[])).push(a,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,S)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(a,R)}}function ha(s,o,a){fa(s,o,3,a)}function Mo(s,o,a,l){(3&s[2])===a&&fa(s,o,a,l)}function Xu(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function fa(s,o,a,l){const m=l??-1,y=o.length-1;let I=0;for(let b=void 0!==l?65535&s[18]:0;b<y;b++)if("number"==typeof o[b+1]){if(I=o[b],null!=l&&I>=l)break}else o[b]<0&&(s[18]+=65536),(I<m||-1==m)&&(Bh(s,a,o,b),s[18]=(4294901760&s[18])+b+2),b++}function Bh(s,o,a,l){const h=a[l]<0,m=a[l+1],I=s[h?-a[l]:a[l]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(I)}finally{}}}else try{m.call(I)}finally{}}class pa{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function ac(s,o,a){let l=0;for(;l<a.length;){const h=a[l];if("number"==typeof h){if(0!==h)break;l++;const m=a[l++],y=a[l++],I=a[l++];s.setAttribute(o,y,I,m)}else{const m=h,y=a[++l];Hh(m)?s.setProperty(o,m,y):s.setAttribute(o,m,y),l++}}return l}function cc(s){return 3===s||4===s||6===s}function Hh(s){return 64===s.charCodeAt(0)}function xo(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const h=o[l];"number"==typeof h?a=h:0===a||td(s,a,h,null,-1===a||2===a?o[++l]:null)}}return s}function td(s,o,a,l,h){let m=0,y=s.length;if(-1===o)y=-1;else for(;m<s.length;){const I=s[m++];if("number"==typeof I){if(I===o){y=-1;break}if(I>o){y=m-1;break}}}for(;m<s.length;){const I=s[m];if("number"==typeof I)break;if(I===a){if(null===l)return void(null!==h&&(s[m+1]=h));if(l===s[m+1])return void(s[m+2]=h)}m++,null!==l&&m++,null!==h&&m++}-1!==y&&(s.splice(y,0,o),m=y+1),s.splice(m++,0,a),null!==l&&s.splice(m++,0,l),null!==h&&s.splice(m++,0,h)}function yl(s){return-1!==s}function ga(s){return 32767&s}function Zi(s,o){let a=function $h(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let ma=!0;function vs(s){const o=ma;return ma=s,o}let _a=0;const _i={};function Po(s,o){const a=eo(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,Cl(l.data,s),Cl(o,null),Cl(l.blueprint,null));const h=to(s,o),m=s.injectorIndex;if(yl(h)){const y=ga(h),I=Zi(h,o),b=I[1].data;for(let S=0;S<8;S++)o[m+S]=I[y+S]|b[y+S]}return o[m+8]=h,m}function Cl(s,o){s.push(0,0,0,0,0,0,0,0,o)}function eo(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function to(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,h=o;for(;null!==h;){if(l=qh(h),null===l)return-1;if(a++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function ya(s,o,a){!function vl(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(vr)&&(l=a[vr]),null==l&&(l=a[vr]=_a++);const h=255&l;o.data[s+(h>>5)]|=1<<h}(s,o,a)}function uc(s,o,a){if(a&dt.Optional||void 0!==s)return s;Ie()}function Gh(s,o,a,l){if(a&dt.Optional&&void 0===l&&(l=null),0==(a&(dt.Self|dt.Host))){const h=s[9],m=Ur(void 0);try{return h?h.get(o,l,a&dt.Optional):Co(o,l,a&dt.Optional)}finally{Ur(m)}}return uc(l,0,a)}function va(s,o,a,l=dt.Default,h){if(null!==s){if(1024&o[2]){const y=function wa(s,o,a,l,h){let m=s,y=o;for(;null!==m&&null!==y&&1024&y[2]&&!(256&y[2]);){const I=Oo(m,y,a,l|dt.Self,_i);if(I!==_i)return I;let b=m.parent;if(!b){const S=y[21];if(S){const R=S.get(a,_i,l);if(R!==_i)return R}b=qh(y),y=y[15]}m=b}return h}(s,o,a,l,_i);if(y!==_i)return y}const m=Oo(s,o,a,l,_i);if(m!==_i)return m}return Gh(o,a,l,h)}function Oo(s,o,a,l,h){const m=function ro(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(vr)?s[vr]:void 0;return"number"==typeof o?o>=0?255&o:pg:o}(a);if("function"==typeof m){if(!la(o,s,l))return l&dt.Host?uc(h,0,l):Gh(o,a,l,h);try{const y=m(l);if(null!=y||l&dt.Optional)return y;Ie()}finally{Yu()}}else if("number"==typeof m){let y=null,I=eo(s,o),b=-1,S=l&dt.Host?o[16][6]:null;for((-1===I||l&dt.SkipSelf)&&(b=-1===I?to(s,o):o[I+8],-1!==b&&dc(l,!1)?(y=o[1],I=ga(b),o=Zi(b,o)):I=-1);-1!==I;){const R=o[1];if(zh(m,I,R.data)){const F=fg(I,o,a,y,l,S);if(F!==_i)return F}b=o[I+8],-1!==b&&dc(l,o[1].data[I+8]===S)&&zh(m,I,o)?(y=R,I=ga(b),o=Zi(b,o)):I=-1}}return h}function fg(s,o,a,l,h,m){const y=o[1],I=y.data[s+8],R=Yi(I,y,a,null==l?za(I)&&ma:l!=y&&0!=(3&I.type),h&dt.Host&&m===I);return null!==R?Ca(o,y,R,I):_i}function Yi(s,o,a,l,h){const m=s.providerIndexes,y=o.data,I=1048575&m,b=s.directiveStart,R=m>>20,$=h?I+R:s.directiveEnd;for(let X=l?I:I+R;X<$;X++){const Ce=y[X];if(X<b&&a===Ce||X>=b&&Ce.type===a)return X}if(h){const X=y[b];if(X&&Mi(X)&&X.type===a)return b}return null}function Ca(s,o,a,l){let h=s[a];const m=o.data;if(function sc(s){return s instanceof pa}(h)){const y=h;y.resolving&&function mt(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new De(-200,`Circular dependency in DI detected for ${s}${a}`)}(function ye(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():we(s)}(m[a]));const I=vs(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?Ur(y.injectImpl):null;la(s,l,dt.Default);try{h=s[a]=y.factory(void 0,m,s,l),o.firstCreatePass&&a>=l.directiveStart&&function gl(s,o,a){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:m}=o.type.prototype;if(l){const y=$u(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,y)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,h),m&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,m),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,m))}(a,m[a],o)}finally{null!==b&&Ur(b),vs(I),y.resolving=!1,Yu()}}return h}function zh(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function dc(s,o){return!(s&dt.Self||s&dt.Host&&o)}class Qi{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return va(this._tNode,this._lView,o,l,a)}}function pg(){return new Qi(Sn(),Ae())}function En(s){return cr(()=>{const o=s.prototype.constructor,a=o[lr]||wl(o),l=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==l;){const m=h[lr]||wl(h);if(m&&m!==a)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function wl(s){return $e(s)?()=>{const o=wl(K(s));return o&&o()}:gs(s)}function qh(s){const o=s[1],a=o.type;return 2===a?o.declTNode:1===a?s[6]:null}function hc(s){return function no(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let h=0;for(;h<l;){const m=a[h];if(cc(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<l&&"string"==typeof a[h];)h++;else{if(m===o)return a[h+1];h+=2}}}return null}(Sn(),s)}const Mn="__parameters__";function ws(s,o,a){return cr(()=>{const l=function Ro(s){return function(...a){if(s){const l=s(...a);for(const h in l)this[h]=l[h]}}}(o);function h(...m){if(this instanceof h)return l.apply(this,m),this;const y=new h(...m);return I.annotation=y,I;function I(b,S,R){const F=b.hasOwnProperty(Mn)?b[Mn]:Object.defineProperty(b,Mn,{value:[]})[Mn];for(;F.length<=R;)F.push(null);return(F[R]=F[R]||[]).push(y),b}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class hn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=me({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Hn(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Hn(l,o)):o!==s&&o.push(l)}return o}function ki(s,o){s.forEach(a=>Array.isArray(a)?ki(a,o):o(a))}function bl(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Dl(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ri(s,o,a){let l=ba(s,o);return l>=0?s[1|l]=a:(l=~l,function gg(s,o,a,l){let h=s.length;if(h==o)s.push(a,l);else if(1===h)s.push(l,s[0]),s[0]=a;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function _c(s,o){const a=ba(s,o);if(a>=0)return s[1|a]}function ba(s,o){return function Xh(s,o,a){let l=0,h=s.length>>a;for(;h!==l;){const m=l+(h-l>>1),y=s[m<<a];if(o===y)return m<<a;y>o?h=m:l=m+1}return~(h<<a)}(s,o,1)}const Rr={},Es="__NG_DI_FLAG__",Dr="ngTempTokenPath",Sl=/\n/gm,Da="__source";let bs;function dr(s){const o=bs;return bs=s,o}function Ic(s,o=dt.Default){if(void 0===bs)throw new De(-203,!1);return null===bs?Co(s,void 0,o):bs.get(s,o&dt.Optional?null:void 0,o)}function Vn(s,o=dt.Default){return(function Ti(){return Br}()||Ic)(K(s),o)}function Ec(s,o=dt.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Vn(s,o)}function cd(s){const o=[];for(let a=0;a<s.length;a++){const l=K(s[a]);if(Array.isArray(l)){if(0===l.length)throw new De(900,!1);let h,m=dt.Default;for(let y=0;y<l.length;y++){const I=l[y],b=Ml(I);"number"==typeof b?-1===b?h=I.token:m|=b:h=I}o.push(Vn(h,m))}else o.push(Vn(l))}return o}function Ji(s,o){return s[Es]=o,s.prototype[Es]=o,s}function Ml(s){return s[Es]}const Xi=Ji(ws("Optional"),8),es=Ji(ws("SkipSelf"),4);var Ds=(()=>((Ds=Ds||{})[Ds.Important=1]="Important",Ds[Ds.DashCase=2]="DashCase",Ds))();const N=new Map;let z=0;const Gn="__ngContext__";function zn(s,o){ur(o)?(s[Gn]=o[20],function fe(s){N.set(s[20],s)}(o)):s[Gn]=o}function hf(s,o){return undefined(s,o)}function hd(s){const o=s[3];return Hr(o)?o[3]:o}function Eg(s){return Aa(s[13])}function K_(s){return Aa(s[4])}function Aa(s){for(;null!==s&&!Hr(s);)s=s[4];return s}function Fl(s,o,a,l,h){if(null!=l){let m,y=!1;Hr(l)?m=l:ur(l)&&(y=!0,l=l[0]);const I=Fn(l);0===s&&null!==a?null==h?ff(o,a,I):jo(o,a,I,h||null,!0):1===s&&null!==a?jo(o,a,I,h||null,!0):2===s?function kg(s,o,a){const l=pf(s,o);l&&function M0(s,o,a,l){s.removeChild(o,a,l)}(s,l,o,a)}(o,I,y):3===s&&o.destroyNode(I),null!=m&&function Lg(s,o,a,l,h){const m=a[7];m!==Fn(a)&&Fl(o,s,l,m,h);for(let I=10;I<a.length;I++){const b=a[I];pd(b[1],b,s,o,l,m)}}(o,s,m,a,h)}}function Dg(s,o,a){return s.createElement(o,a)}function Q_(s,o){const a=s[9],l=a.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,Er(h,-1)),a.splice(l,1)}function Ag(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const h=l[17];null!==h&&h!==s&&Q_(h,l),o>0&&(s[a-1][4]=l[4]);const m=Dl(s,10+o);!function D0(s,o){pd(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const y=m[19];null!==y&&y.detachView(m[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function J_(s,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&pd(s,o,a,3,null,null),function S0(s){let o=s[13];if(!o)return Mg(s[1],s);for(;o;){let a=null;if(ur(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)ur(o)&&Mg(o[1],o),o=o[3];null===o&&(o=s),ur(o)&&Mg(o[1],o),a=o&&o[4]}o=a}}(o)}}function Mg(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function xg(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const h=o[a[l]];if(!(h instanceof pa)){const m=a[l+1];if(Array.isArray(m))for(let y=0;y<m.length;y+=2){const I=h[m[y]],b=m[y+1];try{b.call(I)}finally{}}else try{m.call(h)}finally{}}}}(s,o),function X_(s,o){const a=s.cleanup,l=o[7];let h=-1;if(null!==a)for(let m=0;m<a.length-1;m+=2)if("string"==typeof a[m]){const y=a[m+1],I="function"==typeof y?y(o):Fn(o[y]),b=l[h=a[m+2]],S=a[m+3];"boolean"==typeof S?I.removeEventListener(a[m],b,S):S>=0?l[h=S]():l[h=-S].unsubscribe(),m+=2}else{const y=l[h=a[m+1]];a[m].call(y)}if(null!==l){for(let m=h+1;m<l.length;m++)(0,l[m])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Hr(o[3])){a!==o[3]&&Q_(a,o);const l=o[19];null!==l&&l.detachView(s)}!function ze(s){N.delete(s[20])}(o)}}function ey(s,o,a){return function ty(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const h=s.data[l.directiveStart].encapsulation;if(h===vt.None||h===vt.Emulated)return null}return $r(l,a)}(s,o.parent,a)}function jo(s,o,a,l,h){s.insertBefore(o,a,l,h)}function ff(s,o,a){s.appendChild(o,a)}function ny(s,o,a,l,h){null!==l?jo(s,o,a,l,h):ff(s,o,a)}function pf(s,o){return s.parentNode(o)}let md,iy=function Og(s,o,a){return 40&s.type?$r(s,a):null};function gf(s,o,a,l){const h=ey(s,l,o),m=o[11],I=function ry(s,o,a){return iy(s,o,a)}(l.parent||o[6],l,o);if(null!=h)if(Array.isArray(a))for(let b=0;b<a.length;b++)ny(m,h,a[b],I,!1);else ny(m,h,a,I,!1)}function Ma(s,o){if(null!==o){const a=o.type;if(3&a)return $r(o,s);if(4&a)return mf(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return Ma(s,l);{const h=s[o.index];return Hr(h)?mf(-1,h):Fn(h)}}if(32&a)return hf(o,s)()||Fn(s[o.index]);{const l=oy(s,o);return null!==l?Array.isArray(l)?l[0]:Ma(hd(s[16]),l):Ma(s,o.next)}}return null}function oy(s,o){return null!==o?s[16][6].projection[o.projection]:null}function mf(s,o){const a=10+s+1;if(a<o.length){const l=o[a],h=l[1].firstChild;if(null!==h)return Ma(l,h)}return o[7]}function Ng(s,o,a,l,h,m,y){for(;null!=a;){const I=l[a.index],b=a.type;if(y&&0===o&&(I&&zn(Fn(I),l),a.flags|=4),64!=(64&a.flags))if(8&b)Ng(s,o,a.child,l,h,m,!1),Fl(o,s,h,I,m);else if(32&b){const S=hf(a,l);let R;for(;R=S();)Fl(o,s,h,R,m);Fl(o,s,h,I,m)}else 16&b?Fg(s,o,l,a,h,m):Fl(o,s,h,I,m);a=y?a.projectionNext:a.next}}function pd(s,o,a,l,h,m){Ng(a,l,s.firstChild,o,h,m,!1)}function Fg(s,o,a,l,h,m){const y=a[16],b=y[6].projection[l.projection];if(Array.isArray(b))for(let S=0;S<b.length;S++)Fl(o,s,h,b[S],m);else Ng(s,o,b,y[3],h,m,!0)}function Bg(s,o,a){s.setAttribute(o,"style",a)}function Ug(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function P0(s){md=s}class dy{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ii(s){return s instanceof dy?s.changingThisBreaksApplicationSecurity:s}const p=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var hr=(()=>((hr=hr||{})[hr.NONE=0]="NONE",hr[hr.HTML=1]="HTML",hr[hr.STYLE=2]="STYLE",hr[hr.SCRIPT=3]="SCRIPT",hr[hr.URL=4]="URL",hr[hr.RESOURCE_URL=5]="RESOURCE_URL",hr))();function F0(s){const o=function Cf(){const s=Ae();return s&&s[12]}();return o?o.sanitize(hr.URL,s)||"":function Ho(s,o){const a=function fy(s){return s instanceof dy&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?ii(s):function C(s){return(s=String(s)).match(p)?s:"unsafe:"+s}(we(s))}const L0=new hn("ENVIRONMENT_INITIALIZER"),V0=new hn("INJECTOR",-1),B0=new hn("INJECTOR_DEF_TYPES");class vy{get(o,a=Rr){if(a===Rr){const l=new Error(`NullInjectorError: No provider for ${Ee(o)}!`);throw l.name="NullInjectorError",l}return a}}function Xx(...s){return{\u0275providers:oD(0,s)}}function oD(s,...o){const a=[],l=new Set;let h;return ki(o,m=>{const y=m;U0(y,a,[],l)&&(h||(h=[]),h.push(y))}),void 0!==h&&aD(h,a),a}function aD(s,o){for(let a=0;a<s.length;a++){const{providers:h}=s[a];ki(h,m=>{o.push(m)})}}function U0(s,o,a,l){if(!(s=K(s)))return!1;let h=null,m=kn(s);const y=!m&&ue(s);if(m||y){if(y&&!y.standalone)return!1;h=s}else{const b=s.ngModule;if(m=kn(b),!m)return!1;h=b}const I=l.has(h);if(y){if(I)return!1;if(l.add(h),y.dependencies){const b="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const S of b)U0(S,o,a,l)}}else{if(!m)return!1;{if(null!=m.imports&&!I){let S;l.add(h);try{ki(m.imports,R=>{U0(R,o,a,l)&&(S||(S=[]),S.push(R))})}finally{}void 0!==S&&aD(S,o)}if(!I){const S=gs(h)||(()=>new h);o.push({provide:h,useFactory:S,deps:Tt},{provide:B0,useValue:h,multi:!0},{provide:L0,useValue:()=>Vn(h),multi:!0})}const b=m.providers;null==b||I||ki(b,R=>{o.push(R)})}}return h!==s&&void 0!==s.providers}const eP=pe({provide:String,useValue:pe});function j0(s){return null!==s&&"object"==typeof s&&eP in s}function yd(s){return"function"==typeof s}const H0=new hn("Set Injector scope."),Qg={},uD={};let $0;function Cy(){return void 0===$0&&($0=new vy),$0}class vd{}class dD extends vd{constructor(o,a,l,h){super(),this.parent=a,this.source=l,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,z0(o,y=>this.processProvider(y)),this.records.set(V0,wf(void 0,this)),h.has("environment")&&this.records.set(vd,wf(void 0,this));const m=this.records.get(H0);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(B0.multi,Tt,dt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=dr(this),l=Ur(void 0);try{return o()}finally{dr(a),Ur(l)}}get(o,a=Rr,l=dt.Default){this.assertNotDestroyed();const h=dr(this),m=Ur(void 0);try{if(!(l&dt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const b=function sP(s){return"function"==typeof s||"object"==typeof s&&s instanceof hn}(o)&&ln(o);I=b&&this.injectableDefInScope(b)?wf(G0(o),Qg):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(l&dt.Self?Cy():this.parent).get(o,a=l&dt.Optional&&a===Rr?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Dr]=y[Dr]||[]).unshift(Ee(o)),h)throw y;return function xl(s,o,a,l){const h=s[Dr];throw o[Da]&&h.unshift(o[Da]),s.message=function bc(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=Ee(o);if(Array.isArray(o))h=o.map(Ee).join(" -> ");else if("object"==typeof o){let m=[];for(let y in o)if(o.hasOwnProperty(y)){let I=o[y];m.push(y+":"+("string"==typeof I?JSON.stringify(I):Ee(I)))}h=`{${m.join(", ")}}`}return`${a}${l?"("+l+")":""}[${h}]: ${s.replace(Sl,"\n  ")}`}("\n"+s.message,h,a,l),s.ngTokenPath=h,s[Dr]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{Ur(m),dr(h)}}resolveInjectorInitializers(){const o=dr(this),a=Ur(void 0);try{const l=this.get(L0.multi,Tt,dt.Self);for(const h of l)h()}finally{dr(o),Ur(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(Ee(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(o){let a=yd(o=K(o))?o:K(o&&o.provide);const l=function hD(s){return j0(s)?wf(void 0,s.useValue):wf(fD(s),Qg)}(o);if(yd(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=wf(void 0,Qg,!0),h.factory=()=>cd(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===Qg&&(a.value=uD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function iP(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=K(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function G0(s){const o=ln(s),a=null!==o?o.factory:gs(s);if(null!==a)return a;if(s instanceof hn)throw new De(204,!1);if(s instanceof Function)return function nP(s){const o=s.length;if(o>0)throw function ko(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new De(204,!1);const a=function bn(s){const o=s&&(s[Yn]||s[Kr]);if(o){const a=function yn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new De(204,!1)}function fD(s,o,a){let l;if(yd(s)){const h=K(s);return gs(h)||G0(h)}if(j0(s))l=()=>K(s.useValue);else if(function lD(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...cd(s.deps||[]));else if(function cD(s){return!(!s||!s.useExisting)}(s))l=()=>Vn(K(s.useExisting));else{const h=K(s&&(s.useClass||s.provide));if(!function rP(s){return!!s.deps}(s))return gs(h)||G0(h);l=()=>new h(...cd(s.deps))}return l}function wf(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function oP(s){return!!s.\u0275providers}function z0(s,o){for(const a of s)Array.isArray(a)?z0(a,o):oP(a)?z0(a.\u0275providers,o):o(a)}class pD{}class mD{resolveComponentFactory(o){throw function cP(s){const o=Error(`No component factory found for ${Ee(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Vl=(()=>{class s{}return s.NULL=new mD,s})();function _D(){return xc(Sn(),Ae())}function xc(s,o){return new Ot($r(s,o))}let Ot=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=_D,s})();function Bl(s){return s instanceof Ot?s.nativeElement:s}class Jg{}let yD=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Cd(){const s=Ae(),a=Ln(Sn().index,s);return(ur(a)?a:s)[11]}(),s})(),nr=(()=>{class s{}return s.\u0275prov=me({token:s,providedIn:"root",factory:()=>null}),s})();class Xg{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Ul=new Xg("14.3.0"),kr={};function wy(s){return s.ngOriginalError}class Ef{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&wy(o);for(;a&&wy(a);)a=wy(a);return a||null}}function $o(s){return s instanceof Function?s():s}function by(s,o,a){let l=s.length;for(;;){const h=s.indexOf(o,a);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=o.length;if(h+m===l||s.charCodeAt(h+m)<=32)return h}a=h+1}}const Dy="ng-template";function DD(s,o,a){let l=0;for(;l<s.length;){let h=s[l++];if(a&&"class"===h){if(h=s[l],-1!==by(h.toLowerCase(),o,0))return!0}else if(1===h){for(;l<s.length&&"string"==typeof(h=s[l++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Ty(s){return 4===s.type&&s.value!==Dy}function K0(s,o,a){return o===(4!==s.type||a?s.value:Dy)}function Y0(s,o,a){let l=4;const h=s.attrs||[],m=function tm(s){for(let o=0;o<s.length;o++)if(cc(s[o]))return o;return s.length}(h);let y=!1;for(let I=0;I<o.length;I++){const b=o[I];if("number"!=typeof b){if(!y)if(4&l){if(l=2|1&l,""!==b&&!K0(s,b,a)||""===b&&1===o.length){if(rs(l))return!1;y=!0}}else{const S=8&l?b:o[++I];if(8&l&&null!==s.attrs){if(!DD(s.attrs,S,a)){if(rs(l))return!1;y=!0}continue}const F=TD(8&l?"class":b,h,Ty(s),a);if(-1===F){if(rs(l))return!1;y=!0;continue}if(""!==S){let $;$=F>m?"":h[F+1].toLowerCase();const X=8&l?$:null;if(X&&-1!==by(X,S,0)||2&l&&S!==$){if(rs(l))return!1;y=!0}}}}else{if(!y&&!rs(l)&&!rs(b))return!1;if(y&&rs(b))continue;y=!1,l=b|1&l}}return rs(l)||y}function rs(s){return 0==(1&s)}function TD(s,o,a,l){if(null===o)return-1;let h=0;if(l||!a){let m=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)m=!0;else{if(1===y||2===y){let I=o[++h];for(;"string"==typeof I;)I=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=m?1:2}return-1}return function Q0(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function em(s,o,a=!1){for(let l=0;l<o.length;l++)if(Y0(s,o[l],a))return!0;return!1}function Sy(s,o){return s?":not("+o.trim()+")":o}function J0(s){let o=s[0],a=1,l=2,h="",m=!1;for(;a<s.length;){let y=s[a];if("string"==typeof y)if(2&l){const I=s[++a];h+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&l?h+="."+y:4&l&&(h+=" "+y);else""!==h&&!rs(y)&&(o+=Sy(m,h),h=""),l=y,m=m||!rs(l);a++}return""!==h&&(o+=Sy(m,h)),o}const Gt={};function Ed(s){X0($t(),Ae(),nn()+s,!1)}function X0(s,o,a,l){if(!l)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&ha(o,m,a)}else{const m=s.preOrderHooks;null!==m&&Mo(o,m,0,a)}_s(a)}function xy(s,o=null,a=null,l){const h=Py(s,o,a,l);return h.resolveInjectorInitializers(),h}function Py(s,o=null,a=null,l,h=new Set){const m=[a||Tt,Xx(s)];return l=l||("object"==typeof s?void 0:Ee(s)),new dD(m,o||Cy(),l||null,h)}let bd=(()=>{class s{static create(a,l){if(Array.isArray(a))return xy({name:""},l,a,"");{const h=a.name??"";return xy({name:h},a.parent,a.providers,h)}}}return s.THROW_IF_NOT_FOUND=Rr,s.NULL=new vy,s.\u0275prov=me({token:s,providedIn:"any",factory:()=>Vn(V0)}),s.__NG_ELEMENT_ID__=-1,s})();function Td(s,o=dt.Default){const a=Ae();return null===a?Vn(s,o):va(Sn(),a,K(s),o)}function hw(){throw new Error("invalid")}function Go(s,o){return s<<17|o<<2}function ho(s){return s>>17&32767}function Gr(s){return 2|s}function wi(s){return(131068&s)>>2}function ky(s,o){return-131069&s|o<<2}function sm(s){return 1|s}function JD(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const h=a[l],m=a[l+1];if(-1!==m){const y=s.data[m];Or(h),y.contentQueries(2,o[m],m)}}}function Mf(s,o,a,l,h,m,y,I,b,S,R){const F=o.blueprint.slice();return F[0]=h,F[2]=76|l,(null!==R||s&&1024&s[2])&&(F[2]|=1024),Ls(F),F[3]=F[15]=s,F[8]=a,F[10]=y||s&&s[10],F[11]=I||s&&s[11],F[12]=b||s&&s[12]||null,F[9]=S||s&&s[9]||null,F[6]=m,F[20]=function Y(){return z++}(),F[21]=R,F[16]=2==o.type?s[16]:F,F}function Ad(s,o,a,l,h){let m=s.data[o];if(null===m)m=function Gy(s,o,a,l,h){const m=ec(),y=To(),b=s.data[o]=function Iw(s,o,a,l,h,m){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?m:m&&m.parent,a,o,l,h);return null===s.firstChild&&(s.firstChild=b),null!==m&&(y?null==m.child&&null!==b.parent&&(m.child=b):null===m.next&&(m.next=b)),b}(s,o,a,l,h),function Ku(){return At.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=a,m.value=l,m.attrs=h;const y=function Ks(){const s=At.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===y?-1:y.injectorIndex}return ei(m,!0),m}function Md(s,o,a,l){if(0===a)return-1;const h=o.length;for(let m=0;m<a;m++)o.push(l),s.blueprint.push(l),s.data.push(null);return h}function xf(s,o,a){ua(o);try{const l=s.viewQuery;null!==l&&Fw(1,l,a);const h=s.template;null!==h&&Pf(s,o,h,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&JD(s,o),s.staticViewQueries&&Fw(2,s.viewQuery,a);const m=s.components;null!==m&&function XD(s,o){for(let a=0;a<o.length;a++)Rw(s,o[a])}(o,m)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,Ao()}}function Pc(s,o,a,l){const h=o[2];if(128!=(128&h)){ua(o);try{Ls(o),function Oi(s){return At.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&Pf(s,o,a,2,l);const y=3==(3&h);if(y){const S=s.preOrderCheckHooks;null!==S&&ha(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Mo(o,S,0,null),Xu(o,0)}if(function oT(s){for(let o=Eg(s);null!==o;o=K_(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const h=a[l],m=h[3];0==(512&h[2])&&Er(m,1),h[2]|=512}}}(o),function IP(s){for(let o=Eg(s);null!==o;o=K_(o))for(let a=10;a<o.length;a++){const l=o[a],h=l[1];Zs(l)&&Pc(h,l,h.template,l[8])}}(o),null!==s.contentQueries&&JD(s,o),y){const S=s.contentCheckHooks;null!==S&&ha(o,S)}else{const S=s.contentHooks;null!==S&&Mo(o,S,1),Xu(o,1)}!function vP(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const h=a[l];if(h<0)_s(~h);else{const m=h,y=a[++l],I=a[++l];dg(y,m),I(2,o[m])}}}finally{_s(-1)}}(s,o);const I=s.components;null!==I&&function CP(s,o){for(let a=0;a<o.length;a++)Nf(s,o[a])}(o,I);const b=s.viewQuery;if(null!==b&&Fw(2,b,l),y){const S=s.viewCheckHooks;null!==S&&ha(o,S)}else{const S=s.viewHooks;null!==S&&Mo(o,S,2),Xu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Er(o[3],-1))}finally{Ao()}}}function Pf(s,o,a,l,h){const m=nn(),y=2&l;try{_s(-1),y&&o.length>22&&X0(s,o,22,!1),a(l,h)}finally{_s(m)}}function Gl(s,o,a){!Zu()||(function gm(s,o,a,l){const h=a.directiveStart,m=a.directiveEnd;s.firstCreatePass||Po(a,o),zn(l,o);const y=a.initialInputs;for(let I=h;I<m;I++){const b=s.data[I],S=Mi(b);S&&Mw(o,a,b);const R=Ca(o,s,I,a);zn(R,o),null!==y&&sT(0,I-h,R,b,0,y),S&&(Ln(a.index,o)[8]=R)}}(s,o,a,$r(a,o)),128==(128&a.flags)&&function nT(s,o,a){const l=a.directiveStart,h=a.directiveEnd,m=a.index,y=function So(){return At.lFrame.currentDirectiveIndex}();try{_s(m);for(let I=l;I<h;I++){const b=s.data[I],S=o[I];dl(I),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&bw(b,S)}}finally{_s(-1),dl(y)}}(s,o,a))}function Of(s,o,a=$r){const l=o.localNames;if(null!==l){let h=o.index+1;for(let m=0;m<l.length;m+=2){const y=l[m+1],I=-1===y?a(o,s):s[y];s[h++]=I}}}function zy(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Rf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Rf(s,o,a,l,h,m,y,I,b,S){const R=22+l,F=R+h,$=function Cw(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Gt);return a}(R,F),X="function"==typeof S?S():S;return $[1]={type:s,blueprint:$,template:a,queries:null,viewQuery:I,declTNode:o,data:$.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:X,incompleteFirstPass:!1}}function Wy(s,o,a,l){const h=cT(o);null===a?h.push(l):(h.push(a),s.firstCreatePass&&lT(s).push(l,h.length-1))}function dm(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const h=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,h):a[l]=[o,h]}return a}function eT(s,o){const l=o.directiveEnd,h=s.data,m=o.attrs,y=[];let I=null,b=null;for(let S=o.directiveStart;S<l;S++){const R=h[S],F=R.inputs,$=null===m||Ty(o)?null:xw(F,m);y.push($),I=dm(F,S,I),b=dm(R.outputs,S,b)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=I,o.outputs=b}function As(s,o,a,l,h,m,y,I){const b=$r(o,a);let R,S=o.inputs;!I&&null!=S&&(R=S[l])?(Yy(s,a,R,l,h),za(o)&&tT(a,o.index)):3&o.type&&(l=function wP(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),h=null!=y?y(h,o.value||"",l):h,m.setProperty(b,l,h))}function tT(s,o){const a=Ln(o,s);16&a[2]||(a[2]|=32)}function xd(s,o,a,l){let h=!1;if(Zu()){const m=function Dw(s,o,a){const l=s.directiveRegistry;let h=null;if(l)for(let m=0;m<l.length;m++){const y=l[m];em(a,y.selectors,!1)&&(h||(h=[]),ya(Po(a,o),s,y.type),Mi(y)?(Tw(s,a),h.unshift(y)):h.push(y))}return h}(s,o,a),y=null===l?null:{"":-1};if(null!==m){h=!0,iT(a,s.data.length,m.length);for(let R=0;R<m.length;R++){const F=m[R];F.providersResolver&&F.providersResolver(F)}let I=!1,b=!1,S=Md(s,o,m.length,null);for(let R=0;R<m.length;R++){const F=m[R];a.mergedAttrs=xo(a.mergedAttrs,F.hostAttrs),Aw(s,a,o,S,F),rT(S,F,y),null!==F.contentQueries&&(a.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(a.flags|=128);const $=F.type.prototype;!I&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),I=!0),!b&&($.ngOnChanges||$.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),b=!0),S++}eT(s,a)}y&&function Sw(s,o,a){if(o){const l=s.localNames=[];for(let h=0;h<o.length;h+=2){const m=a[o[h+1]];if(null==m)throw new De(-301,!1);l.push(o[h],m)}}}(a,l,y)}return a.mergedAttrs=xo(a.mergedAttrs,a.attrs),h}function Ew(s,o,a,l,h,m){const y=m.hostBindings;if(y){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const b=~o.index;(function Zy(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(I)!=b&&I.push(b),I.push(l,h,y)}}function bw(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Tw(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function rT(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Mi(o)&&(a[""]=s)}}function iT(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function Aw(s,o,a,l,h){s.data[l]=h;const m=h.factory||(h.factory=gs(h.type)),y=new pa(m,Mi(h),Td);s.blueprint[l]=y,a[l]=y,Ew(s,o,0,l,Md(s,a,h.hostVars,Gt),h)}function Mw(s,o,a){const l=$r(o,s),h=zy(a),m=s[10],y=Lf(s,Mf(s,h,null,a.onPush?32:16,l,o,m,m.createRenderer(l,a),null,null,null));s[o.index]=y}function Ra(s,o,a,l,h,m){const y=$r(s,o);!function kf(s,o,a,l,h,m,y){if(null==m)s.removeAttribute(o,h,a);else{const I=null==y?we(m):y(m,l||"",h);s.setAttribute(o,h,I,a)}}(o[11],y,m,s.value,a,l,h)}function sT(s,o,a,l,h,m){const y=m[o];if(null!==y){const I=l.setInput;for(let b=0;b<y.length;){const S=y[b++],R=y[b++],F=y[b++];null!==I?l.setInput(a,F,S,R):a[R]=F}}}function xw(s,o){let a=null,l=0;for(;l<o.length;){const h=o[l];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,s[h],o[l+1])),l+=2}else l+=2;else l+=4}return a}function Ow(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function Nf(s,o){const a=Ln(o,s);if(Zs(a)){const l=a[1];48&a[2]?Pc(l,a,l.template,a[8]):a[5]>0&&Ff(a)}}function Ff(s){for(let l=Eg(s);null!==l;l=K_(l))for(let h=10;h<l.length;h++){const m=l[h];if(Zs(m))if(512&m[2]){const y=m[1];Pc(y,m,y.template,m[8])}else m[5]>0&&Ff(m)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const h=Ln(a[l],s);Zs(h)&&h[5]>0&&Ff(h)}}function Rw(s,o){const a=Ln(o,s),l=a[1];(function kw(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),xf(l,a,a[8])}function Lf(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Nw(s){for(;s;){s[2]|=32;const o=hd(s);if(bo(s)&&!o)return s;s=o}return null}function mm(s,o,a,l=!0){const h=o[10];h.begin&&h.begin();try{Pc(s,o,s.template,a)}catch(y){throw l&&Ky(o,y),y}finally{h.end&&h.end()}}function Fw(s,o,a){Or(0),o(s,a)}function cT(s){return s[7]||(s[7]=[])}function lT(s){return s.cleanup||(s.cleanup=[])}function Ky(s,o){const a=s[9],l=a?a.get(Ef,null):null;l&&l.handleError(o)}function Yy(s,o,a,l,h){for(let m=0;m<a.length;){const y=a[m++],I=a[m++],b=o[y],S=s.data[y];null!==S.setInput?S.setInput(b,h,l,I):b[I]=h}}function zo(s,o,a){const l=mi(o,s);!function Y_(s,o,a){s.setValue(o,a)}(s[11],l,a)}function qo(s,o,a){let l=a?s.styles:null,h=a?s.classes:null,m=0;if(null!==o)for(let y=0;y<o.length;y++){const I=o[y];"number"==typeof I?m=I:1==m?h=ge(h,I):2==m&&(l=ge(l,I+": "+o[++y]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=h:s.classesWithoutHost=h}function _m(s,o,a,l,h=!1){for(;null!==a;){const m=o[a.index];if(null!==m&&l.push(Fn(m)),Hr(m))for(let I=10;I<m.length;I++){const b=m[I],S=b[1].firstChild;null!==S&&_m(b[1],b,S,l)}const y=a.type;if(8&y)_m(s,o,a.child,l);else if(32&y){const I=hf(a,o);let b;for(;b=I();)l.push(b)}else if(16&y){const I=oy(o,a);if(Array.isArray(I))l.push(...I);else{const b=hd(o[16]);_m(b[1],b,I,l,!0)}}a=h?a.projectionNext:a.next}return l}class Vf{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return _m(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Hr(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Ag(o,l),Dl(a,l))}this._attachedToViewContainer=!1}J_(this._lView[1],this._lView)}onDestroy(o){Wy(this._lView[1],this._lView,null,o)}markForCheck(){Nw(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){mm(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function T0(s,o){pd(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=o}}class Bf extends Vf{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;mm(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Qy extends Vl{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=ue(o);return new Pd(a,this.ngModule)}}function uT(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class dT{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const h=this.injector.get(o,kr,l);return h!==kr||a===kr?h:this.parentInjector.get(o,a,l)}}class Pd extends pD{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function AD(s){return s.map(J0).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return uT(this.componentDef.inputs)}get outputs(){return uT(this.componentDef.outputs)}create(o,a,l,h){let m=(h=h||this.ngModule)instanceof vd?h:h?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const y=m?new dT(o,m):o,I=y.get(Jg,null);if(null===I)throw new De(407,!1);const b=y.get(nr,null),S=I.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",F=l?function ww(s,o,a){return s.selectRootElement(o,a===vt.ShadowDom)}(S,l,this.componentDef.encapsulation):Dg(S,R,function Vw(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),$=this.componentDef.onPush?288:272,X=Rf(0,null,null,1,0,null,null,null,null,null),Ce=Mf(null,X,null,$,null,null,I,S,b,y,null);let je,Ye;ua(Ce);try{const ft=function Uw(s,o,a,l,h,m){const y=a[1];a[22]=s;const b=Ad(y,22,2,"#host",null),S=b.mergedAttrs=o.hostAttrs;null!==S&&(qo(b,S,!0),null!==s&&(ac(h,s,S),null!==b.classes&&Ug(h,s,b.classes),null!==b.styles&&Bg(h,s,b.styles)));const R=l.createRenderer(s,o),F=Mf(a,zy(o),null,o.onPush?32:16,a[22],b,l,R,m||null,null,null);return y.firstCreatePass&&(ya(Po(b,a),y,o.type),Tw(y,b),iT(b,a.length,1)),Lf(a,F),a[22]=F}(F,this.componentDef,Ce,I,S);if(F)if(l)ac(S,F,["ng-version",Ul.full]);else{const{attrs:Rt,classes:ke}=function dP(s){const o=[],a=[];let l=1,h=2;for(;l<s.length;){let m=s[l];if("string"==typeof m)2===h?""!==m&&o.push(m,s[++l]):8===h&&a.push(m);else{if(!rs(h))break;h=m}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Rt&&ac(S,F,Rt),ke&&ke.length>0&&Ug(S,F,ke.join(" "))}if(Ye=oa(X,22),void 0!==a){const Rt=Ye.projection=[];for(let ke=0;ke<this.ngContentSelectors.length;ke++){const kt=a[ke];Rt.push(null!=kt?Array.from(kt):null)}}je=function pT(s,o,a,l){const h=a[1],m=function pm(s,o,a){const l=Sn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Aw(s,l,o,Md(s,o,1,null),a),eT(s,l));const h=Ca(o,s,l.directiveStart,l);zn(h,o);const m=$r(l,o);return m&&zn(m,o),h}(h,a,o);if(s[8]=a[8]=m,null!==l)for(const I of l)I(m,o);if(o.contentQueries){const I=Sn();o.contentQueries(1,m,I.directiveStart)}const y=Sn();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(_s(y.index),Ew(a[1],y,0,y.directiveStart,y.directiveEnd,o),bw(o,m)),m}(ft,this.componentDef,Ce,[Jy]),xf(X,Ce,null)}finally{Ao()}return new Bw(this.componentType,je,xc(Ye,Ce),Ce,Ye)}}class Bw extends class aP{}{constructor(o,a,l,h,m){super(),this.location=l,this._rootLView=h,this._tNode=m,this.instance=a,this.hostView=this.changeDetectorRef=new Bf(h),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let h;if(null!==l&&(h=l[o])){const m=this._rootLView;Yy(m[1],m,h,o,a),tT(m,this._tNode.index)}}get injector(){return new Qi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function Jy(){const s=Sn();Js(Ae()[1],s)}function Uf(s){let o=function jw(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let h;if(Mi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new De(903,!1);h=o.\u0275dir}if(h){if(a){l.push(h);const y=s;y.inputs=jf(s.inputs),y.declaredInputs=jf(s.declaredInputs),y.outputs=jf(s.outputs);const I=h.hostBindings;I&&$w(s,I);const b=h.viewQuery,S=h.contentQueries;if(b&&Hw(s,b),S&&mT(s,S),he(s.inputs,h.inputs),he(s.declaredInputs,h.declaredInputs),he(s.outputs,h.outputs),Mi(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let y=0;y<m.length;y++){const I=m[y];I&&I.ngInherit&&I(s),I===Uf&&(a=!1)}}o=Object.getPrototypeOf(o)}!function gT(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const h=s[l];h.hostVars=o+=h.hostVars,h.hostAttrs=xo(h.hostAttrs,a=xo(a,h.hostAttrs))}}(l)}function jf(s){return s===Qn?{}:s===Tt?[]:s}function Hw(s,o){const a=s.viewQuery;s.viewQuery=a?(l,h)=>{o(l,h),a(l,h)}:o}function mT(s,o){const a=s.contentQueries;s.contentQueries=a?(l,h,m)=>{o(l,h,m),a(l,h,m)}:o}function $w(s,o){const a=s.hostBindings;s.hostBindings=a?(l,h)=>{o(l,h),a(l,h)}:o}let Od=null;function zl(){if(!Od){const s=fn.Symbol;if(s&&s.iterator)Od=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Od=l)}}}return Od}function Rd(s){return!!Hf(s)&&(Array.isArray(s)||!(s instanceof Map)&&zl()in s)}function Hf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function fo(s,o,a){return s[o]=a}function fr(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function ql(s,o,a,l){const h=fr(s,o,a);return fr(s,o+1,l)||h}function Nd(s,o,a,l){const h=Ae();return fr(h,ms(),o)&&($t(),Ra(In(),h,s,o,a,l)),Nd}function Ld(s,o,a,l){return fr(s,ms(),a)?o+we(a)+l:Gt}function Oc(s,o,a,l,h,m){const I=ql(s,function ti(){return At.lFrame.bindingIndex}(),a,h);return ni(2),I?o+we(a)+l+we(h)+m:Gt}function TT(s,o,a,l,h,m,y,I){const b=Ae(),S=$t(),R=s+22,F=S.firstCreatePass?function TP(s,o,a,l,h,m,y,I,b){const S=o.consts,R=Ad(o,s,4,y||null,Xr(S,I));xd(o,a,R,Xr(S,b)),Js(o,R);const F=R.tViews=Rf(2,R,l,h,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,R),F.queries=o.queries.embeddedTView(R)),R}(R,S,b,o,a,l,h,m,y):S.data[R];ei(F,!1);const $=b[11].createComment("");gf(S,b,$,F),zn($,b),Lf(b,b[R]=Ow($,b,$,F)),ps(F)&&Gl(S,b,F),null!=y&&Of(b,F,I)}function ST(s){return Do(function An(){return At.lFrame.contextLView}(),22+s)}function Zw(s,o,a){const l=Ae();return fr(l,ms(),o)&&As($t(),In(),l,s,o,l[11],a,!1),Zw}function Kw(s,o,a,l,h){const y=h?"class":"style";Yy(s,a,o.inputs[y],y,l)}function ss(s,o,a,l){const h=Ae(),m=$t(),y=22+s,I=h[11],b=h[y]=Dg(I,o,function ic(){return At.lFrame.currentNamespace}()),S=m.firstCreatePass?function AP(s,o,a,l,h,m,y){const I=o.consts,S=Ad(o,s,2,h,Xr(I,m));return xd(o,a,S,Xr(I,y)),null!==S.attrs&&qo(S,S.attrs,!1),null!==S.mergedAttrs&&qo(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(y,m,h,0,o,a,l):m.data[y];ei(S,!0);const R=S.mergedAttrs;null!==R&&ac(I,b,R);const F=S.classes;null!==F&&Ug(I,b,F);const $=S.styles;return null!==$&&Bg(I,b,$),64!=(64&S.flags)&&gf(m,h,b,S),0===function aa(){return At.lFrame.elementDepthCount}()&&zn(b,h),function qu(){At.lFrame.elementDepthCount++}(),ps(S)&&(Gl(m,h,S),function $l(s,o,a){if(Eo(o)){const h=o.directiveEnd;for(let m=o.directiveStart;m<h;m++){const y=s.data[m];y.contentQueries&&y.contentQueries(1,a[m],m)}}}(m,S,h)),null!==l&&Of(h,S),ss}function Et(){let s=Sn();To()?function ll(){At.lFrame.isParent=!1}():(s=s.parent,ei(s,!1));const o=s;!function Wu(){At.lFrame.elementDepthCount--}();const a=$t();return a.firstCreatePass&&(Js(a,s),Eo(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function ed(s){return 0!=(16&s.flags)}(o)&&Kw(a,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function jh(s){return 0!=(32&s.flags)}(o)&&Kw(a,o,Ae(),o.stylesWithoutHost,!1),Et}function Nr(s,o,a,l){return ss(s,o,a,l),Et(),Nr}function Yw(){return Ae()}function rv(s){return!!s&&"function"==typeof s.then}function Wo(s){return!!s&&"function"==typeof s.subscribe}const AT=Wo;function iv(s,o,a,l){const h=Ae(),m=$t(),y=Sn();return function Gf(s,o,a,l,h,m,y,I){const b=ps(l),R=s.firstCreatePass&&lT(s),F=o[8],$=cT(o);let X=!0;if(3&l.type||I){const Ye=$r(l,o),ft=I?I(Ye):Ye,Rt=$.length,ke=I?mn=>I(Fn(mn[l.index])):l.index;let kt=null;if(!I&&b&&(kt=function Ql(s,o,a,l){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const y=h[m];if(y===a&&h[m+1]===l){const I=o[7],b=h[m+2];return I.length>b?I[b]:null}"string"==typeof y&&(m+=2)}return null}(s,o,h,l.index)),null!==kt)(kt.__ngLastListenerFn__||kt).__ngNextListenerFn__=m,kt.__ngLastListenerFn__=m,X=!1;else{m=an(l,o,F,m,!1);const mn=a.listen(ft,h,m);$.push(m,mn),R&&R.push(h,ke,Rt,Rt+1)}}else m=an(l,o,F,m,!1);const Ce=l.outputs;let je;if(X&&null!==Ce&&(je=Ce[h])){const Ye=je.length;if(Ye)for(let ft=0;ft<Ye;ft+=2){const Kn=o[je[ft]][je[ft+1]].subscribe(m),Iu=$.length;$.push(m,Kn),R&&R.push(h,l.index,Iu,-(Iu+1))}}}(m,h,h[11],y,s,o,0,l),iv}function ka(s,o,a,l){try{return!1!==a(l)}catch(h){return Ky(s,h),!1}}function an(s,o,a,l,h){return function m(y){if(y===Function)return l;Nw(2&s.flags?Ln(s.index,o):o);let b=ka(o,0,l,y),S=m.__ngNextListenerFn__;for(;S;)b=ka(o,0,S,y)&&b,S=S.__ngNextListenerFn__;return h&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function Qw(s=1){return function nc(s){return(At.lFrame.contextLView=function hg(s,o){for(;s>0;)o=o[15],s--;return o}(s,At.lFrame.contextLView))[8]}(s)}function Ut(s,o,a){return Jl(s,"",o,"",a),Ut}function Jl(s,o,a,l,h){const m=Ae(),y=Ld(m,o,a,l);return y!==Gt&&As($t(),In(),m,s,y,m[11],h,!1),Jl}function ov(s,o,a,l,h){const m=s[a+1],y=null===o;let I=l?ho(m):wi(m),b=!1;for(;0!==I&&(!1===b||y);){const R=s[I+1];av(s[I],o)&&(b=!0,s[I+1]=l?sm(R):Gr(R)),I=l?ho(R):wi(R)}b&&(s[a+1]=l?Gr(m):sm(m))}function av(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ba(s,o)>=0}function Zf(s,o,a){return mo(s,o,a,!1),Zf}function Kf(s,o){return mo(s,o,null,!0),Kf}function mo(s,o,a,l){const h=Ae(),m=$t(),y=ni(2);m.firstUpdatePass&&function zd(s,o,a,l){const h=s.data;if(null===h[a+1]){const m=h[nn()],y=function oI(s,o){return o>=s.expandoStartIndex}(s,a);(function pv(s,o){return 0!=(s.flags&(o?16:32))})(m,l)&&null===o&&!y&&(o=!1),o=function OT(s,o,a,l){const h=function ca(s){const o=At.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=l?o.residualClasses:o.residualStyles;if(null===h)0===(l?o.classBindings:o.styleBindings)&&(a=qd(a=dv(null,s,o,a,l),o.attrs,l),m=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(a=dv(h,s,o,a,l),null===m){let b=function RT(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==wi(l))return s[ho(l)]}(s,o,l);void 0!==b&&Array.isArray(b)&&(b=dv(null,s,o,b[1],l),b=qd(b,o.attrs,l),function wm(s,o,a,l){s[ho(a?o.classBindings:o.styleBindings)]=l}(s,o,l,b))}else m=function uv(s,o,a){let l;const h=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<h;m++)l=qd(l,s[m].hostAttrs,a);return qd(l,o.attrs,a)}(s,o,l)}return void 0!==m&&(l?o.residualClasses=m:o.residualStyles=m),a}(h,m,o,l),function Rc(s,o,a,l,h,m){let y=m?o.classBindings:o.styleBindings,I=ho(y),b=wi(y);s[l]=a;let R,S=!1;if(Array.isArray(a)){const F=a;R=F[1],(null===R||ba(F,R)>0)&&(S=!0)}else R=a;if(h)if(0!==b){const $=ho(s[I+1]);s[l+1]=Go($,I),0!==$&&(s[$+1]=ky(s[$+1],l)),s[I+1]=function pw(s,o){return 131071&s|o<<17}(s[I+1],l)}else s[l+1]=Go(I,0),0!==I&&(s[I+1]=ky(s[I+1],l)),I=l;else s[l+1]=Go(b,0),0===I?I=l:s[b+1]=ky(s[b+1],l),b=l;S&&(s[l+1]=Gr(s[l+1])),ov(s,R,l,!0),ov(s,R,l,!1),function MT(s,o,a,l,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&ba(m,o)>=0&&(a[l+1]=sm(a[l+1]))}(o,R,s,l,m),y=Go(I,b),m?o.classBindings=y:o.styleBindings=y}(h,m,o,a,y,l)}}(m,s,y,l),o!==Gt&&fr(h,y,o)&&function Em(s,o,a,l,h,m,y,I){if(!(3&o.type))return;const b=s.data,S=b[I+1];Wd(function UD(s){return 1==(1&s)}(S)?bm(b,o,a,h,wi(S),y):void 0)||(Wd(m)||function Oa(s){return 2==(2&s)}(S)&&(m=bm(b,null,a,h,I,y)),function Vg(s,o,a,l,h){if(o)h?s.addClass(a,l):s.removeClass(a,l);else{let m=-1===l.indexOf("-")?void 0:Ds.DashCase;null==h?s.removeStyle(a,l,m):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),m|=Ds.Important),s.setStyle(a,l,h,m))}}(l,y,mi(nn(),a),h,m))}(m,m.data[nn()],h,h[11],s,h[y+1]=function fv(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=Ee(ii(s)))),s}(o,a),l,y)}function dv(s,o,a,l,h){let m=null;const y=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<y&&(m=o[I],l=qd(l,m.hostAttrs,h),m!==s);)I++;return null!==s&&(a.directiveStylingLast=I),l}function qd(s,o,a){const l=a?1:2;let h=-1;if(null!==o)for(let m=0;m<o.length;m++){const y=o[m];"number"==typeof y?h=y:h===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ri(s,y,!!a||o[++m]))}return void 0===s?null:s}function bm(s,o,a,l,h,m){const y=null===o;let I;for(;h>0;){const b=s[h],S=Array.isArray(b),R=S?b[1]:b,F=null===R;let $=a[h+1];$===Gt&&($=F?Tt:void 0);let X=F?_c($,l):R===l?$:void 0;if(S&&!Wd(X)&&(X=_c(b,l)),Wd(X)&&(I=X,y))return I;const Ce=s[h+1];h=y?ho(Ce):wi(Ce)}if(null!==o){let b=m?o.residualClasses:o.residualStyles;null!=b&&(I=_c(b,l))}return I}function Wd(s){return void 0!==s}function gv(s,o=""){const a=Ae(),l=$t(),h=s+22,m=l.firstCreatePass?Ad(l,h,1,o,null):l.data[h],y=a[h]=function fd(s,o){return s.createText(o)}(a[11],o);gf(l,a,y,m),ei(m,!1)}function mv(s){return Yf("",s,""),mv}function Yf(s,o,a){const l=Ae(),h=Ld(l,s,o,a);return h!==Gt&&zo(l,nn(),h),Yf}function Dm(s,o,a,l,h){const m=Ae(),y=Oc(m,s,o,a,l,h);return y!==Gt&&zo(m,nn(),y),Dm}const eu=void 0;var gI=["en",[["a","p"],["AM","PM"],eu],[["AM","PM"],eu,eu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],eu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],eu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",eu,"{1} 'at' {0}",eu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function tu(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Na={};function nu(s){const o=function mI(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Tv(o);if(a)return a;const l=o.split("-")[0];if(a=Tv(l),a)return a;if("en"===l)return gI;throw new De(701,!1)}function Ii(s){return nu(s)[Mt.PluralCase]}function Tv(s){return s in Na||(Na[s]=fn.ng&&fn.ng.common&&fn.ng.common.locales&&fn.ng.common.locales[s]),Na[s]}var Mt=(()=>((Mt=Mt||{})[Mt.LocaleId=0]="LocaleId",Mt[Mt.DayPeriodsFormat=1]="DayPeriodsFormat",Mt[Mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mt[Mt.DaysFormat=3]="DaysFormat",Mt[Mt.DaysStandalone=4]="DaysStandalone",Mt[Mt.MonthsFormat=5]="MonthsFormat",Mt[Mt.MonthsStandalone=6]="MonthsStandalone",Mt[Mt.Eras=7]="Eras",Mt[Mt.FirstDayOfWeek=8]="FirstDayOfWeek",Mt[Mt.WeekendRange=9]="WeekendRange",Mt[Mt.DateFormat=10]="DateFormat",Mt[Mt.TimeFormat=11]="TimeFormat",Mt[Mt.DateTimeFormat=12]="DateTimeFormat",Mt[Mt.NumberSymbols=13]="NumberSymbols",Mt[Mt.NumberFormats=14]="NumberFormats",Mt[Mt.CurrencyCode=15]="CurrencyCode",Mt[Mt.CurrencySymbol=16]="CurrencySymbol",Mt[Mt.CurrencyName=17]="CurrencyName",Mt[Mt.Currencies=18]="Currencies",Mt[Mt.Directionality=19]="Directionality",Mt[Mt.PluralCase=20]="PluralCase",Mt[Mt.ExtraData=21]="ExtraData",Mt))();const ru="en-US";let Qd=ru;function Gm(s,o,a,l,h){if(s=K(s),Array.isArray(s))for(let m=0;m<s.length;m++)Gm(s[m],o,a,l,h);else{const m=$t(),y=Ae();let I=yd(s)?s:K(s.provide),b=fD(s);const S=Sn(),R=1048575&S.providerIndexes,F=S.directiveStart,$=S.providerIndexes>>20;if(yd(s)||!s.multi){const X=new pa(b,h,Td),Ce=zm(I,o,h?R:R+$,F);-1===Ce?(ya(Po(S,y),m,I),rh(m,s,o.length),o.push(I),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(X),y.push(X)):(a[Ce]=X,y[Ce]=X)}else{const X=zm(I,o,R+$,F),Ce=zm(I,o,R,R+$),je=X>=0&&a[X],Ye=Ce>=0&&a[Ce];if(h&&!Ye||!h&&!je){ya(Po(S,y),m,I);const ft=function Uv(s,o,a,l,h){const m=new pa(s,a,Td);return m.multi=[],m.index=o,m.componentProviders=0,UI(m,h,l&&!a),m}(h?jI:cp,a.length,h,l,b);!h&&Ye&&(a[Ce].providerFactory=ft),rh(m,s,o.length,0),o.push(I),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(ft),y.push(ft)}else rh(m,s,X>-1?X:Ce,UI(a[h?Ce:X],b,!h&&l));!h&&l&&Ye&&a[Ce].componentProviders++}}}function rh(s,o,a,l){const h=yd(o),m=function tP(s){return!!s.useClass}(o);if(h||m){const b=(m?K(o.useClass):o).prototype.ngOnDestroy;if(b){const S=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=S.indexOf(a);-1===R?S.push(a,[l,b]):S[R+1].push(l,b)}else S.push(a,b)}}}function UI(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function zm(s,o,a,l){for(let h=a;h<l;h++)if(o[h]===s)return h;return-1}function cp(s,o,a,l){return qm(this.multi,[])}function jI(s,o,a,l){const h=this.multi;let m;if(this.providerFactory){const y=this.providerFactory.componentProviders,I=Ca(a,a[1],this.providerFactory.index,l);m=I.slice(0,y),qm(h,m);for(let b=y;b<I.length;b++)m.push(I[b])}else m=[],qm(h,m);return m}function qm(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function Wm(s,o=[]){return a=>{a.providersResolver=(l,h)=>function $m(s,o,a){const l=$t();if(l.firstCreatePass){const h=Mi(s);Gm(a,l.data,l.blueprint,h,!0),Gm(o,l.data,l.blueprint,h,!1)}}(l,h?h(s):s,o)}}class au{}class lp{}function HI(s,o){return new Fc(s,o??null)}class Fc extends au{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Qy(this);const l=Lt(o);this._bootstrapComponents=$o(l.bootstrap),this._r3Injector=Py(o,a,[{provide:au,useValue:this},{provide:Vl,useValue:this.componentFactoryResolver}],Ee(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Zm extends lp{constructor(o){super(),this.moduleType=o}create(o){return new Fc(this.moduleType,o)}}class $I extends au{constructor(o,a,l){super(),this.componentFactoryResolver=new Qy(this),this.instance=null;const h=new dD([...o,{provide:au,useValue:this},{provide:Vl,useValue:this.componentFactoryResolver}],a||Cy(),l,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Km(s,o,a=null){return new $I(s,o,a).injector}let GI=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=oD(0,a.type),h=l.length>0?Km([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=me({token:s,providedIn:"environment",factory:()=>new s(Vn(vd))}),s})();function up(s){s.getStandaloneInjector=o=>o.get(GI).getOrCreateStandaloneInjector(s)}function dp(s,o,a,l){return function ZI(s,o,a,l,h,m){const y=o+a;return fr(s,y,h)?fo(s,y+1,m?l.call(m,h):l(h)):fp(s,y+1)}(Ae(),Pr(),s,o,a,l)}function fp(s,o){const a=s[o];return a===Gt?void 0:a}function QI(s,o){const a=$t();let l;const h=s+22;a.firstCreatePass?(l=function oh(s,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(s===l.name)return l}}(o,a.pipeRegistry),a.data[h]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(h,l.onDestroy)):l=a.data[h];const m=l.factory||(l.factory=gs(l.type)),y=Ur(Td);try{const I=vs(!1),b=m();return vs(I),function SP(s,o,a,l){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=l}(a,Ae(),h,b),b}finally{Ur(y)}}function lu(s,o,a,l){const h=s+22,m=Ae(),y=Do(m,h);return function Ve(s,o){return s[1].data[o].pure}(m,h)?function Wv(s,o,a,l,h,m,y){const I=o+a;return ql(s,I,h,m)?fo(s,I+2,y?l.call(y,h,m):l(h,m)):fp(s,I+2)}(m,Pr(),o,y.transform,a,l,y):y.transform(a,l)}function os(s){return o=>{setTimeout(s,void 0,o)}}const $s=class _r extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let h=o,m=a||(()=>null),y=l;if(o&&"object"==typeof o){const b=o;h=b.next?.bind(b),m=b.error?.bind(b),y=b.complete?.bind(b)}this.__isAsync&&(m=os(m),h&&(h=os(h)),y&&(y=os(y)));const I=super.subscribe({next:h,error:m,complete:y});return o instanceof ee.w0&&o.add(I),I}};function it(){return this._results[zl()]()}class pt{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=zl(),l=pt.prototype;l[a]||(l[a]=it)}get changes(){return this._changes||(this._changes=new $s)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const h=Hn(o);(this._changesDetected=!function Qh(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let h=s[l],m=o[l];if(a&&(h=a(h),m=a(m)),m!==h)return!1}return!0}(l._results,h,a))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let gp=(()=>{class s{}return s.__NG_ELEMENT_ID__=Pe,s})();const Qe=gp,de=class extends Qe{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,h=Mf(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(l)),xf(l,h,o),new Vf(h)}};function Pe(){return pr(Sn(),Ae())}function pr(s,o){return 4&s.type?new de(o,s,xc(s,o)):null}let mp=(()=>{class s{}return s.__NG_ELEMENT_ID__=cS,s})();function cS(){return Yv(Sn(),Ae())}const lS=mp,JI=class extends lS{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return xc(this._hostTNode,this._hostLView)}get injector(){return new Qi(this._hostTNode,this._hostLView)}get parentInjector(){const o=to(this._hostTNode,this._hostLView);if(yl(o)){const a=Zi(o,this._hostLView),l=ga(o);return new Qi(a[1].data[l+8],a)}return new Qi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=XI(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let h,m;"number"==typeof l?h=l:null!=l&&(h=l.index,m=l.injector);const y=o.createEmbeddedView(a||{},m);return this.insert(y,h),y}createComponent(o,a,l,h,m){const y=o&&!function yi(s){return"function"==typeof s}(o);let I;if(y)I=a;else{const F=a||{};I=F.index,l=F.injector,h=F.projectableNodes,m=F.environmentInjector||F.ngModuleRef}const b=y?o:new Pd(ue(o)),S=l||this.parentInjector;if(!m&&null==b.ngModule){const $=(y?S:this.parentInjector).get(vd,null);$&&(m=$)}const R=b.create(S,h,void 0,m);return this.insert(R.hostView,I),R}insert(o,a){const l=o._lView,h=l[1];if(function al(s){return Hr(s[3])}(l)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const F=l[3],$=new JI(F,F[6],F[3]);$.detach($.indexOf(o))}}const m=this._adjustIndex(a),y=this._lContainer;!function Sg(s,o,a,l){const h=10+l,m=a.length;l>0&&(a[h-1][4]=o),l<m-10?(o[4]=a[h],bl(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const y=o[17];null!==y&&a!==y&&function A0(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(y,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(h,l,y,m);const I=mf(m,y),b=l[11],S=pf(b,y[7]);return null!==S&&function Tg(s,o,a,l,h,m){l[0]=h,l[6]=o,pd(s,l,a,1,h,m)}(h,y[6],b,l,S,I),o.attachToViewContainerRef(),bl(Kv(y),m,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=XI(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Ag(this._lContainer,a);l&&(Dl(Kv(this._lContainer),a),J_(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Ag(this._lContainer,a);return l&&null!=Dl(Kv(this._lContainer),a)?new Vf(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function XI(s){return s[8]}function Kv(s){return s[8]||(s[8]=[])}function Yv(s,o){let a;const l=o[s.index];if(Hr(l))a=l;else{let h;if(8&s.type)h=Fn(l);else{const m=o[11];h=m.createComment("");const y=$r(s,o);jo(m,pf(m,y),h,function x0(s,o){return s.nextSibling(o)}(m,y),!1)}o[s.index]=a=Ow(l,o,h,s),Lf(o,a)}return new JI(a,s,o)}class Xm{constructor(o){this.queryList=o,this.matches=null}clone(){return new Xm(this.queryList)}setDirty(){this.queryList.setDirty()}}class Bt{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let m=0;m<l;m++){const y=a.getByIndex(m);h.push(this.queries[y.indexInDeclarationView].clone())}return new Bt(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Qv(o,a).matches&&this.queries[a].setDirty()}}class uu{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class e_{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const h=null!==a?a.length:0,m=this.getByIndex(l).embeddedTView(o,h);m&&(m.indexInDeclarationView=l,null!==a?a.push(m):a=[m])}return null!==a?new e_(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class On{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new On(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const m=l[h];this.matchTNodeWithReadOption(o,a,Ct(a,m)),this.matchTNodeWithReadOption(o,a,Yi(a,o,m,!1,!1))}else l===gp?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Yi(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===Ot||h===mp||h===gp&&4&a.type)this.addMatch(a.index,-2);else{const m=Yi(a,o,h,!1,!1);null!==m&&this.addMatch(a.index,m)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Ct(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function rn(s,o,a,l){return-1===a?function _p(s,o){return 11&s.type?xc(s,o):4&s.type?pr(s,o):null}(o,s):-2===a?function dS(s,o,a){return a===Ot?xc(o,s):a===gp?pr(o,s):a===mp?Yv(o,s):void 0}(s,o,l):Ca(s,s[1],a,o)}function rr(s,o,a,l){const h=o[19].queries[l];if(null===h.matches){const m=s.data,y=a.matches,I=[];for(let b=0;b<y.length;b+=2){const S=y[b];I.push(S<0?null:rn(o,m[S],y[b+1],a.metadata.read))}h.matches=I}return h.matches}function Ke(s,o,a,l){const h=s.queries.getByIndex(a),m=h.matches;if(null!==m){const y=rr(s,o,h,a);for(let I=0;I<m.length;I+=2){const b=m[I];if(b>0)l.push(y[I/2]);else{const S=m[I+1],R=o[-b];for(let F=10;F<R.length;F++){const $=R[F];$[17]===$[3]&&Ke($[1],$,S,l)}if(null!==R[9]){const F=R[9];for(let $=0;$<F.length;$++){const X=F[$];Ke(X[1],X,S,l)}}}}}return l}function yp(s){const o=Ae(),a=$t(),l=tc();Or(l+1);const h=Qv(a,l);if(s.dirty&&function ug(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?Ke(a,o,l,[]):rr(a,o,h,l);s.reset(m,Bl),s.notifyOnChanges()}return!0}return!1}function t_(s,o,a){const l=$t();l.firstCreatePass&&(ah(l,new uu(s,o,a),-1),2==(2&o)&&(l.staticViewQueries=!0)),tE(l,Ae(),o)}function Vc(s,o,a,l){const h=$t();if(h.firstCreatePass){const m=Sn();ah(h,new uu(o,a,l),m.index),function nE(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(h,s),2==(2&a)&&(h.staticContentQueries=!0)}tE(h,Ae(),a)}function eE(){return function n_(s,o){return s[19].queries[o].queryList}(Ae(),tc())}function tE(s,o,a){const l=new pt(4==(4&a));Wy(s,o,l,l.destroy),null===o[19]&&(o[19]=new Bt),o[19].queries.push(new Xm(l))}function ah(s,o,a){null===s.queries&&(s.queries=new e_),s.queries.track(new On(o,a))}function Qv(s,o){return s.queries.getByIndex(o)}function Ep(...s){}const Ar=new hn("Application Initializer");let s_=(()=>{class s{constructor(a){this.appInits=a,this.resolve=Ep,this.reject=Ep,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(rv(m))a.push(m);else if(AT(m)){const y=new Promise((I,b)=>{m.subscribe({complete:I,error:b})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(h=>{this.reject(h)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Vn(Ar,8))},s.\u0275prov=me({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const ja=new hn("AppId",{providedIn:"root",factory:function ir(){return`${lh()}${lh()}${lh()}`}});function lh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const bp=new hn("Platform Initializer"),Dp=new hn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),bS=new hn("appBootstrapListener");let o_=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=me({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Ps=new hn("LocaleId",{providedIn:"root",factory:()=>Ec(Ps,dt.Optional|dt.SkipSelf)||function $c(){return typeof $localize<"u"&&$localize.locale||ru}()}),Tp=new hn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class oC{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let a_=(()=>{class s{compileModuleSync(a){return new Zm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),m=$o(Lt(a).declarations).reduce((y,I)=>{const b=ue(I);return b&&y.push(new Pd(b)),y},[]);return new oC(l,m)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=me({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const _E=(()=>Promise.resolve(0))();function uC(s){typeof Zone>"u"?_E.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Os{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $s(!1),this.onMicrotaskEmpty=new $s(!1),this.onStable=new $s(!1),this.onError=new $s(!1),typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&a,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function TS(){let s=fn.requestAnimationFrame,o=fn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Un(s){const o=()=>{!function vE(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(fn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Jo(s),s.isCheckStableRunning=!0,Lr(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Jo(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,h,m,y,I)=>{try{return dC(s),a.invokeTask(h,m,y,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),hC(s)}},onInvoke:(a,l,h,m,y,I,b)=>{try{return dC(s),a.invoke(h,m,y,I,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),hC(s)}},onHasTask:(a,l,h,m)=>{a.hasTask(h,m),l===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,Jo(s),Lr(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(a,l,h,m)=>(a.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Os.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(Os.isInAngularZone())throw new De(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,h){const m=this._inner,y=m.scheduleEventTask("NgZoneEvent: "+h,o,yE,Ep,Ep);try{return m.runTask(y,a,l)}finally{m.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const yE={};function Lr(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Jo(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function dC(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function hC(s){s._nesting--,Lr(s)}class uh{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $s,this.onMicrotaskEmpty=new $s,this.onStable=new $s,this.onError=new $s}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,h){return o.apply(a,l)}}const CE=new hn(""),fC=new hn("");let Mp,Yt=(()=>{class s{constructor(a,l,h){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Mp||(function dh(s){Mp=s}(h),h.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Os.assertNotInAngularZone(),uC(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())uC(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,h){let m=-1;l&&l>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==m),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:m,updateCb:h})}whenStable(a,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,h){return[]}}return s.\u0275fac=function(a){return new(a||s)(Vn(Os),Vn(_n),Vn(fC))},s.\u0275prov=me({token:s,factory:s.\u0275fac}),s})(),_n=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Mp?.findTestabilityInTree(this,a,l)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=me({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Xo=null;const pC=new hn("AllowMultipleToken"),xp=new hn("PlatformDestroyListeners");function bE(s,o,a=[]){const l=`Platform: ${o}`,h=new hn(l);return(m=[])=>{let y=Ha();if(!y||y.injector.get(pC,!1)){const I=[...a,...m,{provide:h,useValue:!0}];s?s(I):function MS(s){if(Xo&&!Xo.get(pC,!1))throw new De(400,!1);Xo=s;const o=s.get(hh);(function EE(s){const o=s.get(bp,null);o&&o.forEach(a=>a())})(s)}(function DE(s=[],o){return bd.create({name:o,providers:[{provide:H0,useValue:"platform"},{provide:xp,useValue:new Set([()=>Xo=null])},...s]})}(I,l))}return function PS(s){const o=Ha();if(!o)throw new De(401,!1);return o}()}}function Ha(){return Xo?.get(hh)??null}let hh=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const h=function Op(s,o){let a;return a="noop"===s?new uh:("zone.js"===s?void 0:s)||new Os(o),a}(l?.ngZone,function Pp(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(l)),m=[{provide:Os,useValue:h}];return h.run(()=>{const y=bd.create({providers:m,parent:this.injector,name:a.moduleType.name}),I=a.create(y),b=I.injector.get(Ef,null);if(!b)throw new De(402,!1);return h.runOutsideAngular(()=>{const S=h.onError.subscribe({next:R=>{b.handleError(R)}});I.onDestroy(()=>{Rp(this._modules,I),S.unsubscribe()})}),function gC(s,o,a){try{const l=a();return rv(l)?l.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(b,h,()=>{const S=I.injector.get(s_);return S.runInitializers(),S.donePromise.then(()=>(function Mv(s){ie(s,"Expected localeId to be defined"),"string"==typeof s&&(Qd=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Ps,ru)||ru),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,l=[]){const h=mC({},l);return function wE(s,o,a){const l=new Zm(a);return Promise.resolve(l)}(0,0,a).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(a){const l=a.injector.get(vo);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new De(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(xp,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Vn(bd))},s.\u0275prov=me({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function mC(s,o){return Array.isArray(o)?o.reduce(mC,s):{...s,...o}}let vo=(()=>{class s{constructor(a,l,h){this._zone=a,this._injector=l,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new k.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),y=new k.y(I=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{Os.assertNotInAngularZone(),uC(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Os.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{b.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ce.T)(m,y.pipe((0,le.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const h=a instanceof pD;if(!this._injector.get(s_).done)throw!h&&St(a),new De(405,false);let y;y=h?a:this._injector.get(Vl).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const I=function AS(s){return s.isBoundToModule}(y)?void 0:this._injector.get(au),S=y.create(bd.NULL,[],l||y.selector,I),R=S.location.nativeElement,F=S.injector.get(CE,null);return F?.registerApplication(R),S.onDestroy(()=>{this.detachView(S.hostView),Rp(this.components,S),F?.unregisterApplication(R)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Rp(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(bS,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Rp(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new De(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(Vn(Os),Vn(vd),Vn(Ef))},s.\u0275prov=me({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Rp(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let c_=!0,kp=!1;function _C(){return kp=!0,c_}function yu(){if(kp)throw new Error("Cannot enable prod mode after platform setup.");c_=!1}let Fp=(()=>{class s{}return s.__NG_ELEMENT_ID__=ME,s})();function ME(s){return function yC(s,o,a){if(za(s)&&!a){const l=Ln(s.index,o);return new Vf(l,l)}return 47&s.type?new Vf(o[16],o):null}(Sn(),Ae(),16==(16&s))}class PE{constructor(){}supports(o){return Rd(o)}create(o){return new OE(o)}}const BS=(s,o)=>o;class OE{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||BS}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,h=0,m=null;for(;a||l;){const y=!l||a&&a.currentIndex<zc(l,h,m)?a:l,I=zc(y,h,m),b=y.currentIndex;if(y===l)h--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)h++;else{m||(m=[]);const S=I-h,R=b-h;if(S!=R){for(let $=0;$<S;$++){const X=$<m.length?m[$]:m[$]=0,Ce=X+$;R<=Ce&&Ce<S&&(m[$]=X+1)}m[y.previousIndex]=R-S}}I!==b&&o(y,I,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Rd(o))throw new De(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,m,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)m=o[I],y=this._trackByFn(I,m),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,m,y,I)),Object.is(a.item,m)||this._addIdentityChange(a,m)):(a=this._mismatch(a,m,y,I),l=!0),a=a._next}else h=0,function DP(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[zl()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,I=>{y=this._trackByFn(h,I),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,I,y,h)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,y,h),l=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,h){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,m,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,m,h)):o=this._addAfter(new ph(a,l),m,h),o}_verifyReinsertion(o,a,l,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==m?o=this._reinsertAfter(m,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,m=o._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new bC),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bC),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ph{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Cu{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class bC{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new Cu,this.map.set(a,l)),l.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zc(s,o,a){const l=s.previousIndex;if(null===l)return l;let h=0;return a&&l<a.length&&(h=a[l]),l+o+h}class DC{constructor(){}supports(o){return o instanceof Map||Hf(o)}create(){return new gh}}class gh{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Hf(o)))throw new De(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const m=this._getOrCreateRecordForKey(h,l);a=this._insertBeforeOrAppend(a,m)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const m=h._prev,y=h._next;return m&&(m._next=y),y&&(y._prev=m),h._next=null,h._prev=null,h}const l=new RE(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class RE{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function TC(){return new wu([new PE])}let wu=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const h=l.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||TC()),deps:[[s,new es,new Xi]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(null!=l)return l;throw new De(901,!1)}}return s.\u0275prov=me({token:s,providedIn:"root",factory:TC}),s})();function kE(){return new Rn([new DC])}let Rn=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const h=l.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||kE()),deps:[[s,new es,new Xi]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(l)return l;throw new De(901,!1)}}return s.\u0275prov=me({token:s,providedIn:"root",factory:kE}),s})();const Vp=bE(null,"core",[]);let jS=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Vn(vo))},s.\u0275mod=Qr({type:s}),s.\u0275inj=Pt({}),s})();function NE(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(gt,Me,L)=>{L.d(Me,{Z:()=>De});var d=L(2090),ee=L(4859),k=L(6881),ce=L(1877);class le{constructor(we,ye){this._delegate=we,this.firebase=ye,(0,k._addComponent)(we,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=we.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this._delegate.automaticDataCollectionEnabled=we}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(we=>{this._delegate.checkDestroyed(),we()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(we,ye=k._DEFAULT_ENTRY_NAME){var mt;this._delegate.checkDestroyed();const bt=this._delegate.container.getProvider(we);return!bt.isInitialized()&&"EXPLICIT"===(null===(mt=bt.getComponent())||void 0===mt?void 0:mt.instantiationMode)&&bt.initialize(),bt.getImmediate({identifier:ye})}_removeServiceInstance(we,ye=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(we).clearInstance(ye)}_addComponent(we){(0,k._addComponent)(this._delegate,we)}_addOrOverwriteComponent(we){(0,k._addOrOverwriteComponent)(this._delegate,we)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function ge(){const st=function Ee(st){const we={},ye={__esModule:!0,initializeApp:function Le(He,tt={}){const re=k.initializeApp(He,tt);if((0,d.r3)(we,re.name))return we[re.name];const xt=new st(re,ye);return we[re.name]=xt,xt},app:bt,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function _e(He){const tt=He.name,re=tt.replace("-compat","");if(k._registerComponent(He)&&"PUBLIC"===He.type){const xt=(ct=bt())=>{if("function"!=typeof ct[re])throw he.create("invalid-app-argument",{appName:tt});return ct[re]()};void 0!==He.serviceProps&&(0,d.ZB)(xt,He.serviceProps),ye[re]=xt,st.prototype[re]=function(...ct){return this._getService.bind(this,tt).apply(this,He.multipleInstances?ct:[])}}return"PUBLIC"===He.type?ye[re]:null},removeApp:function mt(He){delete we[He]},useAsService:function qe(He,tt){return"serverAuth"===tt?null:tt},modularAPIs:k}};function bt(He){if(!(0,d.r3)(we,He=He||k._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:He});return we[He]}return ye.default=ye,Object.defineProperty(ye,"apps",{get:function Ie(){return Object.keys(we).map(He=>we[He])}}),bt.App=st,ye}(le);return st.INTERNAL=Object.assign(Object.assign({},st.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function we(ye){(0,d.ZB)(st,ye)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),st}(),H=new ce.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const st=self.firebase.SDK_VERSION;st&&st.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const De=G;!function Re(st){(0,k.registerVersion)("@firebase/app-compat","0.2.13",st)}()},6881:(gt,Me,L)=>{L.r(Me),L.d(Me,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>wo,_DEFAULT_ENTRY_NAME:()=>fi,_addComponent:()=>nt,_addOrOverwriteComponent:()=>vt,_apps:()=>wn,_clearComponents:()=>Qn,_components:()=>Jt,_getProvider:()=>zi,_registerComponent:()=>fn,_removeServiceInstance:()=>Yr,deleteApp:()=>Si,getApp:()=>lr,getApps:()=>vr,initializeApp:()=>Xt,onLog:()=>qi,registerVersion:()=>Cr,setLogLevel:()=>Nn});var d=L(5861),ee=L(4859),k=L(1877),ce=L(2090);let pe,he;const G=new WeakMap,H=new WeakMap,K=new WeakMap,$e=new WeakMap,Re=new WeakMap;let we={get(se,ne,Fe){if(se instanceof IDBTransaction){if("done"===ne)return H.get(se);if("objectStoreNames"===ne)return se.objectStoreNames||K.get(se);if("store"===ne)return Fe.objectStoreNames[1]?void 0:Fe.objectStore(Fe.objectStoreNames[0])}return Le(se[ne])},set:(se,ne,Fe)=>(se[ne]=Fe,!0),has:(se,ne)=>se instanceof IDBTransaction&&("done"===ne||"store"===ne)||ne in se};function bt(se){return"function"==typeof se?function mt(se){return se!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(se)?function(...ne){return se.apply(Ie(this),ne),Le(G.get(this))}:function(...ne){return Le(se.apply(Ie(this),ne))}:function(ne,...Fe){const Be=se.call(Ie(this),ne,...Fe);return K.set(Be,ne.sort?ne.sort():[ne]),Le(Be)}}(se):(se instanceof IDBTransaction&&function st(se){if(H.has(se))return;const ne=new Promise((Fe,Be)=>{const Dt=()=>{se.removeEventListener("complete",Vt),se.removeEventListener("error",en),se.removeEventListener("abort",en)},Vt=()=>{Fe(),Dt()},en=()=>{Be(se.error||new DOMException("AbortError","AbortError")),Dt()};se.addEventListener("complete",Vt),se.addEventListener("error",en),se.addEventListener("abort",en)});H.set(se,ne)}(se),((se,ne)=>ne.some(Fe=>se instanceof Fe))(se,function Ee(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(se,we):se)}function Le(se){if(se instanceof IDBRequest)return function De(se){const ne=new Promise((Fe,Be)=>{const Dt=()=>{se.removeEventListener("success",Vt),se.removeEventListener("error",en)},Vt=()=>{Fe(Le(se.result)),Dt()},en=()=>{Be(se.error),Dt()};se.addEventListener("success",Vt),se.addEventListener("error",en)});return ne.then(Fe=>{Fe instanceof IDBCursor&&G.set(Fe,se)}).catch(()=>{}),Re.set(ne,se),ne}(se);if($e.has(se))return $e.get(se);const ne=bt(se);return ne!==se&&($e.set(se,ne),Re.set(ne,se)),ne}const Ie=se=>Re.get(se),He=["get","getKey","getAll","getAllKeys","count"],tt=["put","add","delete","clear"],re=new Map;function xt(se,ne){if(!(se instanceof IDBDatabase)||ne in se||"string"!=typeof ne)return;if(re.get(ne))return re.get(ne);const Fe=ne.replace(/FromIndex$/,""),Be=ne!==Fe,Dt=tt.includes(Fe);if(!(Fe in(Be?IDBIndex:IDBObjectStore).prototype)||!Dt&&!He.includes(Fe))return;const Vt=function(){var en=(0,d.Z)(function*(Dn,...zt){const Ir=this.transaction(Dn,Dt?"readwrite":"readonly");let pi=Ir.store;return Be&&(pi=pi.index(zt.shift())),(yield Promise.all([pi[Fe](...zt),Dt&&Ir.done]))[0]});return function(zt){return en.apply(this,arguments)}}();return re.set(ne,Vt),Vt}!function ye(se){we=se(we)}(se=>({...se,get:(ne,Fe,Be)=>xt(ne,Fe)||se.get(ne,Fe,Be),has:(ne,Fe)=>!!xt(ne,Fe)||se.has(ne,Fe)}));class ct{constructor(ne){this.container=ne}getPlatformInfoString(){return this.container.getProviders().map(Fe=>{if(function Ht(se){return"VERSION"===se.getComponent()?.type}(Fe)){const Be=Fe.getImmediate();return`${Be.library}/${Be.version}`}return null}).filter(Fe=>Fe).join(" ")}}const at="@firebase/app",Zr=new k.Yd("@firebase/app"),fi="[DEFAULT]",cr={[at]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},wn=new Map,Jt=new Map;function nt(se,ne){try{se.container.addComponent(ne)}catch(Fe){Zr.debug(`Component ${ne.name} failed to register with FirebaseApp ${se.name}`,Fe)}}function vt(se,ne){se.container.addOrOverwriteComponent(ne)}function fn(se){const ne=se.name;if(Jt.has(ne))return Zr.debug(`There were multiple attempts to register component ${ne}.`),!1;Jt.set(ne,se);for(const Fe of wn.values())nt(Fe,se);return!0}function zi(se,ne){const Fe=se.container.getProvider("heartbeat").getImmediate({optional:!0});return Fe&&Fe.triggerHeartbeat(),se.container.getProvider(ne)}function Yr(se,ne,Fe=fi){zi(se,ne).clearInstance(Fe)}function Qn(){Jt.clear()}const yr=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class un{constructor(ne,Fe,Be){this._isDeleted=!1,this._options=Object.assign({},ne),this._config=Object.assign({},Fe),this._name=Fe.name,this._automaticDataCollectionEnabled=Fe.automaticDataCollectionEnabled,this._container=Be,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ne){this._isDeleted=ne}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}const wo="9.23.0";function Xt(se,ne={}){let Fe=se;"object"!=typeof ne&&(ne={name:ne});const Be=Object.assign({name:fi,automaticDataCollectionEnabled:!1},ne),Dt=Be.name;if("string"!=typeof Dt||!Dt)throw yr.create("bad-app-name",{appName:String(Dt)});if(Fe||(Fe=(0,ce.aH)()),!Fe)throw yr.create("no-options");const Vt=wn.get(Dt);if(Vt){if((0,ce.vZ)(Fe,Vt.options)&&(0,ce.vZ)(Be,Vt.config))return Vt;throw yr.create("duplicate-app",{appName:Dt})}const en=new ee.H0(Dt);for(const zt of Jt.values())en.addComponent(zt);const Dn=new un(Fe,Be,en);return wn.set(Dt,Dn),Dn}function lr(se=fi){const ne=wn.get(se);if(!ne&&se===fi&&(0,ce.aH)())return Xt();if(!ne)throw yr.create("no-app",{appName:se});return ne}function vr(){return Array.from(wn.values())}function Si(se){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,d.Z)(function*(se){const ne=se.name;wn.has(ne)&&(wn.delete(ne),yield Promise.all(se.container.getProviders().map(Fe=>Fe.delete())),se.isDeleted=!0)})).apply(this,arguments)}function Cr(se,ne,Fe){var Be;let Dt=null!==(Be=cr[se])&&void 0!==Be?Be:se;Fe&&(Dt+=`-${Fe}`);const Vt=Dt.match(/\s|\//),en=ne.match(/\s|\//);if(Vt||en){const Dn=[`Unable to register library "${Dt}" with version "${ne}":`];return Vt&&Dn.push(`library name "${Dt}" contains illegal characters (whitespace or "/")`),Vt&&en&&Dn.push("and"),en&&Dn.push(`version name "${ne}" contains illegal characters (whitespace or "/")`),void Zr.warn(Dn.join(" "))}fn(new ee.wA(`${Dt}-version`,()=>({library:Dt,version:ne}),"VERSION"))}function qi(se,ne){if(null!==se&&"function"!=typeof se)throw yr.create("invalid-log-argument");(0,k.Am)(se,ne)}function Nn(se){(0,k.Ub)(se)}const U="firebase-heartbeat-store";let V=null;function W(){return V||(V=function _e(se,ne,{blocked:Fe,upgrade:Be,blocking:Dt,terminated:Vt}={}){const en=indexedDB.open(se,ne),Dn=Le(en);return Be&&en.addEventListener("upgradeneeded",zt=>{Be(Le(en.result),zt.oldVersion,zt.newVersion,Le(en.transaction),zt)}),Fe&&en.addEventListener("blocked",zt=>Fe(zt.oldVersion,zt.newVersion,zt)),Dn.then(zt=>{Vt&&zt.addEventListener("close",()=>Vt()),Dt&&zt.addEventListener("versionchange",Ir=>Dt(Ir.oldVersion,Ir.newVersion,Ir))}).catch(()=>{}),Dn}("firebase-heartbeat-database",1,{upgrade:(se,ne)=>{0===ne&&se.createObjectStore(U)}}).catch(se=>{throw yr.create("idb-open",{originalErrorMessage:se.message})})),V}function J(){return(J=(0,d.Z)(function*(se){try{return yield(yield W()).transaction(U).objectStore(U).get(Lt(se))}catch(ne){if(ne instanceof ce.ZR)Zr.warn(ne.message);else{const Fe=yr.create("idb-get",{originalErrorMessage:ne?.message});Zr.warn(Fe.message)}}})).apply(this,arguments)}function We(se,ne){return St.apply(this,arguments)}function St(){return(St=(0,d.Z)(function*(se,ne){try{const Be=(yield W()).transaction(U,"readwrite");yield Be.objectStore(U).put(ne,Lt(se)),yield Be.done}catch(Fe){if(Fe instanceof ce.ZR)Zr.warn(Fe.message);else{const Be=yr.create("idb-set",{originalErrorMessage:Fe?.message});Zr.warn(Be.message)}}})).apply(this,arguments)}function Lt(se){return`${se.name}!${se.options.appId}`}class ut{constructor(ne){this.container=ne,this._heartbeatsCache=null;const Fe=this.container.getProvider("app").getImmediate();this._storage=new wr(Fe),this._heartbeatsCachePromise=this._storage.read().then(Be=>(this._heartbeatsCache=Be,Be))}triggerHeartbeat(){var ne=this;return(0,d.Z)(function*(){const Be=ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Dt=_t();if(null===ne._heartbeatsCache&&(ne._heartbeatsCache=yield ne._heartbeatsCachePromise),ne._heartbeatsCache.lastSentHeartbeatDate!==Dt&&!ne._heartbeatsCache.heartbeats.some(Vt=>Vt.date===Dt))return ne._heartbeatsCache.heartbeats.push({date:Dt,agent:Be}),ne._heartbeatsCache.heartbeats=ne._heartbeatsCache.heartbeats.filter(Vt=>{const en=new Date(Vt.date).valueOf();return Date.now()-en<=2592e6}),ne._storage.overwrite(ne._heartbeatsCache)})()}getHeartbeatsHeader(){var ne=this;return(0,d.Z)(function*(){if(null===ne._heartbeatsCache&&(yield ne._heartbeatsCachePromise),null===ne._heartbeatsCache||0===ne._heartbeatsCache.heartbeats.length)return"";const Fe=_t(),{heartbeatsToSend:Be,unsentEntries:Dt}=function pn(se,ne=1024){const Fe=[];let Be=se.slice();for(const Dt of se){const Vt=Fe.find(en=>en.agent===Dt.agent);if(Vt){if(Vt.dates.push(Dt.date),gn(Fe)>ne){Vt.dates.pop();break}}else if(Fe.push({agent:Dt.agent,dates:[Dt.date]}),gn(Fe)>ne){Fe.pop();break}Be=Be.slice(1)}return{heartbeatsToSend:Fe,unsentEntries:Be}}(ne._heartbeatsCache.heartbeats),Vt=(0,ce.L)(JSON.stringify({version:2,heartbeats:Be}));return ne._heartbeatsCache.lastSentHeartbeatDate=Fe,Dt.length>0?(ne._heartbeatsCache.heartbeats=Dt,yield ne._storage.overwrite(ne._heartbeatsCache)):(ne._heartbeatsCache.heartbeats=[],ne._storage.overwrite(ne._heartbeatsCache)),Vt})()}}function _t(){return(new Date).toISOString().substring(0,10)}class wr{constructor(ne){this.app=ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ne=this;return(0,d.Z)(function*(){return(yield ne._canUseIndexedDBPromise)&&(yield function ue(se){return J.apply(this,arguments)}(ne.app))||{heartbeats:[]}})()}overwrite(ne){var Fe=this;return(0,d.Z)(function*(){var Be;if(yield Fe._canUseIndexedDBPromise){const Vt=yield Fe.read();return We(Fe.app,{lastSentHeartbeatDate:null!==(Be=ne.lastSentHeartbeatDate)&&void 0!==Be?Be:Vt.lastSentHeartbeatDate,heartbeats:ne.heartbeats})}})()}add(ne){var Fe=this;return(0,d.Z)(function*(){var Be;if(yield Fe._canUseIndexedDBPromise){const Vt=yield Fe.read();return We(Fe.app,{lastSentHeartbeatDate:null!==(Be=ne.lastSentHeartbeatDate)&&void 0!==Be?Be:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...ne.heartbeats]})}})()}}function gn(se){return(0,ce.L)(JSON.stringify({version:2,heartbeats:se})).length}!function Ai(se){fn(new ee.wA("platform-logger",ne=>new ct(ne),"PRIVATE")),fn(new ee.wA("heartbeat",ne=>new ut(ne),"PRIVATE")),Cr(at,"0.9.13",se),Cr(at,"0.9.13","esm2017"),Cr("fire-js","")}("")},4859:(gt,Me,L)=>{L.d(Me,{H0:()=>Ee,wA:()=>k});var d=L(5861),ee=L(2090);class k{constructor(G,H,K){this.name=G,this.instanceFactory=H,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ce="[DEFAULT]";class le{constructor(G,H){this.name=G,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const H=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(H)){const K=new ee.BH;if(this.instancesDeferred.set(H,K),this.isInitialized(H)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:H});$e&&K.resolve($e)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(G){var H;const K=this.normalizeInstanceIdentifier(G?.identifier),$e=null!==(H=G?.optional)&&void 0!==H&&H;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Re){if($e)return null;throw Re}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function he(ge){return"EAGER"===ge.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[H,K]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(H);try{const Re=this.getOrInitializeService({instanceIdentifier:$e});K.resolve(Re)}catch{}}}}clearInstance(G=ce){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,d.Z)(function*(){const H=Array.from(G.instances.values());yield Promise.all([...H.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...H.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ce){return this.instances.has(G)}getOptions(G=ce){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:H={}}=G,K=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:K,options:H});for(const[Re,De]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Re)&&De.resolve($e);return $e}onInit(G,H){var K;const $e=this.normalizeInstanceIdentifier(H),Re=null!==(K=this.onInitCallbacks.get($e))&&void 0!==K?K:new Set;Re.add(G),this.onInitCallbacks.set($e,Re);const De=this.instances.get($e);return De&&G(De,$e),()=>{Re.delete(G)}}invokeOnInitCallbacks(G,H){const K=this.onInitCallbacks.get(H);if(K)for(const $e of K)try{$e(G,H)}catch{}}getOrInitializeService({instanceIdentifier:G,options:H={}}){let K=this.instances.get(G);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=G,ge===ce?void 0:ge),options:H}),this.instances.set(G,K),this.instancesOptions.set(G,H),this.invokeOnInitCallbacks(K,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,K)}catch{}var ge;return K||null}normalizeInstanceIdentifier(G=ce){return this.component?this.component.multipleInstances?G:ce:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ee{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const H=this.getProvider(G.name);if(H.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);H.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const H=new le(G,this);return this.providers.set(G,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(gt,Me,L)=>{L.d(Me,{Am:()=>ge,Ub:()=>Ee,Yd:()=>he,in:()=>ee});const d=[];var ee=(()=>{return(G=ee||(ee={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",ee;var G})();const k={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ce=ee.INFO,le={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},pe=(G,H,...K)=>{if(H<G.logLevel)return;const $e=(new Date).toISOString(),Re=le[H];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Re](`[${$e}]  ${G.name}:`,...K)};class he{constructor(H){this.name=H,this._logLevel=ce,this._logHandler=pe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in ee))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?k[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...H),this._logHandler(this,ee.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...H),this._logHandler(this,ee.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...H),this._logHandler(this,ee.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...H),this._logHandler(this,ee.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...H),this._logHandler(this,ee.ERROR,...H)}}function Ee(G){d.forEach(H=>{H.setLogLevel(G)})}function ge(G,H){for(const K of d){let $e=null;H&&H.level&&($e=k[H.level]),K.userLogHandler=null===G?null:(Re,De,...st)=>{const we=st.map(ye=>{if(null==ye)return null;if("string"==typeof ye)return ye;if("number"==typeof ye||"boolean"==typeof ye)return ye.toString();if(ye instanceof Error)return ye.message;try{return JSON.stringify(ye)}catch{return null}}).filter(ye=>ye).join(" ");De>=($e??Re.logLevel)&&G({level:ee[De].toLowerCase(),message:we,args:st,type:Re.name})}}}},259:(gt,Me,L)=>{L.d(Me,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=L(6881);(0,d.registerVersion)("firebase","9.23.0","app")},9260:(gt,Me,L)=>{L.d(Me,{Z:()=>d.Z});var d=L(3942);d.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(gt,Me,L)=>{L.r(Me);var d=L(5861),ee=L(3942),k=L(2090),ce=L(6881),le=L(7582),pe=L(1877),he=L(4859);const De=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},st=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},we=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),mt=new pe.Yd("@firebase/auth");function Le(_,...f){mt.logLevel<=pe.in.ERROR&&mt.error(`Auth (${ce.SDK_VERSION}): ${_}`,...f)}function Ie(_,...f){throw tt(_,...f)}function _e(_,...f){return tt(_,...f)}function qe(_,f,p){const C=Object.assign(Object.assign({},st()),{[f]:p});return new k.LL("auth","Firebase",C).create(f,{appName:_.name})}function He(_,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&Ie(_,"argument-error"),qe(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tt(_,...f){if("string"!=typeof _){const p=f[0],C=[...f.slice(1)];return C[0]&&(C[0].appName=_.name),_._errorFactory.create(p,...C)}return we.create(_,...f)}function re(_,f,...p){if(!_)throw tt(f,...p)}function xt(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Le(f),new Error(f)}function ct(_,f){_||xt(f)}function Ht(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function at(){return"http:"===fs()||"https:"===fs()}function fs(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Gi{constructor(f,p){this.shortDelay=f,this.longDelay=p,ct(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Zr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(at()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ie(_,f){ct(_.emulator,"Emulator should always be set here");const{url:p}=_.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class te{static initialize(f,p,C){this.fetchImpl=f,p&&(this.headersImpl=p),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void xt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void xt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void xt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Te={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},be=new Gi(3e4,6e4);function xe(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function me(_,f,p,C){return lt.apply(this,arguments)}function lt(){return(lt=(0,d.Z)(function*(_,f,p,C,T={}){return Pt(_,T,(0,d.Z)(function*(){let O={},j={};C&&("GET"===f?j=C:O={body:JSON.stringify(C)});const Q=(0,k.xO)(Object.assign({key:_.config.apiKey},j)).slice(1),Ne=yield _._getAdditionalHeaders();return Ne["Content-Type"]="application/json",_.languageCode&&(Ne["X-Firebase-Locale"]=_.languageCode),te.fetch()(bn(_,_.config.apiHost,p,Q),Object.assign({method:f,headers:Ne,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Pt(_,f,p){return ln.apply(this,arguments)}function ln(){return(ln=(0,d.Z)(function*(_,f,p){_._canInitEmulator=!1;const C=Object.assign(Object.assign({},Te),f);try{const T=new yn(_),O=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const j=yield O.json();if("needConfirmation"in j)throw kn(_,"account-exists-with-different-credential",j);if(O.ok&&!("errorMessage"in j))return j;{const Q=O.ok?j.errorMessage:j.error.message,[Ne,Ge]=Q.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ne)throw kn(_,"credential-already-in-use",j);if("EMAIL_EXISTS"===Ne)throw kn(_,"email-already-in-use",j);if("USER_DISABLED"===Ne)throw kn(_,"user-disabled",j);const rt=C[Ne]||Ne.toLowerCase().replace(/[_\s]+/g,"-");if(Ge)throw qe(_,rt,Ge);Ie(_,rt)}}catch(T){if(T instanceof k.ZR)throw T;Ie(_,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function yt(_,f,p,C){return qt.apply(this,arguments)}function qt(){return(qt=(0,d.Z)(function*(_,f,p,C,T={}){const O=yield me(_,f,p,C,T);return"mfaPendingCredential"in O&&Ie(_,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function bn(_,f,p,C){const T=`${f}${p}?${C}`;return _.config.emulator?ie(_.config,T):`${_.config.apiScheme}://${T}`}class yn{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,C)=>{this.timer=setTimeout(()=>C(_e(this.auth,"network-request-failed")),be.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kn(_,f,p){const C={appName:_.name};p.email&&(C.email=p.email),p.phoneNumber&&(C.phoneNumber=p.phoneNumber);const T=_e(_,f,C);return T.customData._tokenResponse=p,T}function jn(){return(jn=(0,d.Z)(function*(_,f){return me(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Kr(_,f){return hi.apply(this,arguments)}function hi(){return(hi=(0,d.Z)(function*(_,f){return me(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function dt(_,f){return Br.apply(this,arguments)}function Br(){return(Br=(0,d.Z)(function*(_,f){return me(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Ti(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function fi(){return(fi=(0,d.Z)(function*(_,f=!1){const p=(0,k.m9)(_),C=yield p.getIdToken(f),T=wn(C);re(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const O="object"==typeof T.firebase?T.firebase:void 0,j=O?.sign_in_provider;return{claims:T,token:C,authTime:Ti(cr(T.auth_time)),issuedAtTime:Ti(cr(T.iat)),expirationTime:Ti(cr(T.exp)),signInProvider:j||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function cr(_){return 1e3*Number(_)}function wn(_){const[f,p,C]=_.split(".");if(void 0===f||void 0===p||void 0===C)return Le("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,k.tV)(p);return T?JSON.parse(T):(Le("Failed to decode base64 JWT payload"),null)}catch(T){return Le("Caught error parsing JWT payload as JSON",T?.toString()),null}}function nt(_,f){return vt.apply(this,arguments)}function vt(){return(vt=(0,d.Z)(function*(_,f,p=!1){if(p)return f;try{return yield f}catch(C){throw C instanceof k.ZR&&fn(C)&&_.auth.currentUser===_&&(yield _.auth.signOut()),C}})).apply(this,arguments)}function fn({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class zi{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const C=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield p.iteration()}),C)}iteration(){var f=this;return(0,d.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&f.schedule(!0))}f.schedule()})()}}class Yr{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ti(this.lastLoginAt),this.creationTime=Ti(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qn(_){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,d.Z)(function*(_){var f;const p=_.auth,C=yield _.getIdToken(),T=yield nt(_,dt(p,{idToken:C}));re(T?.users.length,p,"internal-error");const O=T.users[0];_._notifyReloadListener(O);const j=null!==(f=O.providerUserInfo)&&void 0!==f&&f.length?Xt(O.providerUserInfo):[],Q=wo(_.providerData,j),rt=!!_.isAnonymous&&!(_.email&&O.passwordHash||Q?.length),ot={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:Q,metadata:new Yr(O.createdAt,O.lastLoginAt),isAnonymous:rt};Object.assign(_,ot)})).apply(this,arguments)}function un(){return(un=(0,d.Z)(function*(_){const f=(0,k.m9)(_);yield Qn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function wo(_,f){return[..._.filter(C=>!f.some(T=>T.providerId===C.providerId)),...f]}function Xt(_){return _.map(f=>{var{providerId:p}=f,C=(0,le._T)(f,["providerId"]);return{providerId:p,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function vr(){return(vr=(0,d.Z)(function*(_,f){const p=yield Pt(_,{},(0,d.Z)(function*(){const C=(0,k.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:O}=_.config,j=bn(_,T,"/v1/token",`key=${O}`),Q=yield _._getAdditionalHeaders();return Q["Content-Type"]="application/x-www-form-urlencoded",te.fetch()(j,{method:"POST",headers:Q,body:C})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Si{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){re(f.idToken,"internal-error"),re(typeof f.idToken<"u","internal-error"),re(typeof f.refreshToken<"u","internal-error");const p="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Jt(_){const f=wn(_);return re(f,"internal-error"),re(typeof f.exp<"u","internal-error"),re(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var C=this;return(0,d.Z)(function*(){return re(!C.accessToken||C.refreshToken,f,"user-token-expired"),p||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(f,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var C=this;return(0,d.Z)(function*(){const{accessToken:T,refreshToken:O,expiresIn:j}=yield function lr(_,f){return vr.apply(this,arguments)}(f,p);C.updateTokensAndExpiration(T,O,Number(j))})()}updateTokensAndExpiration(f,p,C){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(f,p){const{refreshToken:C,accessToken:T,expirationTime:O}=p,j=new Si;return C&&(re("string"==typeof C,"internal-error",{appName:f}),j.refreshToken=C),T&&(re("string"==typeof T,"internal-error",{appName:f}),j.accessToken=T),O&&(re("number"==typeof O,"internal-error",{appName:f}),j.expirationTime=O),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Si,this.toJSON())}_performRefresh(){return xt("not implemented")}}function Tn(_,f){re("string"==typeof _||typeof _>"u","internal-error",{appName:f})}class Cr{constructor(f){var{uid:p,auth:C,stsTokenManager:T}=f,O=(0,le._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=C,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Yr(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,d.Z)(function*(){const C=yield nt(p,p.stsTokenManager.getToken(p.auth,f));return re(C,p.auth,"internal-error"),p.accessToken!==C&&(p.accessToken=C,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),C})()}getIdTokenResult(f){return function Co(_){return fi.apply(this,arguments)}(this,f)}reload(){return function yr(_){return un.apply(this,arguments)}(this)}_assign(f){this!==f&&(re(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const p=new Cr(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(f){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var C=this;return(0,d.Z)(function*(){let T=!1;f.idToken&&f.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(f),T=!0),p&&(yield Qn(C)),yield C.auth._persistUserIfCurrent(C),T&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var f=this;return(0,d.Z)(function*(){const p=yield f.getIdToken();return yield nt(f,function Yn(_,f){return jn.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var C,T,O,j,Q,Ne,Ge,rt;const ot=null!==(C=p.displayName)&&void 0!==C?C:void 0,xn=null!==(T=p.email)&&void 0!==T?T:void 0,ns=null!==(O=p.phoneNumber)&&void 0!==O?O:void 0,Wg=null!==(j=p.photoURL)&&void 0!==j?j:void 0,N0=null!==(Q=p.tenantId)&&void 0!==Q?Q:void 0,yf=null!==(Ne=p._redirectEventId)&&void 0!==Ne?Ne:void 0,Zg=null!==(Ge=p.createdAt)&&void 0!==Ge?Ge:void 0,my=null!==(rt=p.lastLoginAt)&&void 0!==rt?rt:void 0,{uid:_d,emailVerified:_y,isAnonymous:Kg,providerData:xa,stsTokenManager:yy}=p;re(_d&&yy,f,"internal-error");const vf=Si.fromJSON(this.name,yy);re("string"==typeof _d,f,"internal-error"),Tn(ot,f.name),Tn(xn,f.name),re("boolean"==typeof _y,f,"internal-error"),re("boolean"==typeof Kg,f,"internal-error"),Tn(ns,f.name),Tn(Wg,f.name),Tn(N0,f.name),Tn(yf,f.name),Tn(Zg,f.name),Tn(my,f.name);const Yg=new Cr({uid:_d,auth:f,email:xn,emailVerified:_y,displayName:ot,isAnonymous:Kg,photoURL:Wg,phoneNumber:ns,tenantId:N0,stsTokenManager:vf,createdAt:Zg,lastLoginAt:my});return xa&&Array.isArray(xa)&&(Yg.providerData=xa.map(hr=>Object.assign({},hr))),yf&&(Yg._redirectEventId=yf),Yg}static _fromIdTokenResponse(f,p,C=!1){return(0,d.Z)(function*(){const T=new Si;T.updateFromServerResponse(p);const O=new Cr({uid:p.localId,auth:f,stsTokenManager:T,isAnonymous:C});return yield Qn(O),O})()}}const qi=new Map;function Nn(_){ct(_ instanceof Function,"Expected a class definition");let f=qi.get(_);return f?(ct(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,qi.set(_,f),f)}const jr=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(p,C){var T=this;return(0,d.Z)(function*(){T.storage[p]=C})()}_get(p){var C=this;return(0,d.Z)(function*(){const T=C.storage[p];return void 0===T?null:T})()}_remove(p){var C=this;return(0,d.Z)(function*(){delete C.storage[p]})()}_addListener(p,C){}_removeListener(p,C){}}return _.type="NONE",_})();function U(_,f,p){return`firebase:${_}:${f}:${p}`}class V{constructor(f,p,C){this.persistence=f,this.auth=p,this.userKey=C;const{config:T,name:O}=this.auth;this.fullUserKey=U(this.userKey,T.apiKey,O),this.fullPersistenceKey=U("persistence",T.apiKey,O),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?Cr._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,d.Z)(function*(){if(p.persistence===f)return;const C=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,C?p.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,C="authUser"){return(0,d.Z)(function*(){if(!p.length)return new V(Nn(jr),f,C);const T=(yield Promise.all(p.map(function(){var Ge=(0,d.Z)(function*(rt){if(yield rt._isAvailable())return rt});return function(rt){return Ge.apply(this,arguments)}}()))).filter(Ge=>Ge);let O=T[0]||Nn(jr);const j=U(C,f.config.apiKey,f.name);let Q=null;for(const Ge of p)try{const rt=yield Ge._get(j);if(rt){const ot=Cr._fromJSON(f,rt);Ge!==O&&(Q=ot),O=Ge;break}}catch{}const Ne=T.filter(Ge=>Ge._shouldAllowMigration);return O._shouldAllowMigration&&Ne.length?(O=Ne[0],Q&&(yield O._set(j,Q.toJSON())),yield Promise.all(p.map(function(){var Ge=(0,d.Z)(function*(rt){if(rt!==O)try{yield rt._remove(j)}catch{}});return function(rt){return Ge.apply(this,arguments)}}())),new V(O,f,C)):new V(O,f,C)})()}}function W(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(St(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(ue(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(on(f))return"Blackberry";if(Ue(f))return"Webos";if(J(f))return"Safari";if((f.includes("chrome/")||We(f))&&!f.includes("edge/"))return"Chrome";if(Lt(f))return"Android";{const C=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function ue(_=(0,k.z$)()){return/firefox\//i.test(_)}function J(_=(0,k.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function We(_=(0,k.z$)()){return/crios\//i.test(_)}function St(_=(0,k.z$)()){return/iemobile/i.test(_)}function Lt(_=(0,k.z$)()){return/android/i.test(_)}function on(_=(0,k.z$)()){return/blackberry/i.test(_)}function Ue(_=(0,k.z$)()){return/webos/i.test(_)}function ut(_=(0,k.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function gn(_=(0,k.z$)()){return ut(_)||Lt(_)||Ue(_)||on(_)||/windows phone/i.test(_)||St(_)}function se(_,f=[]){let p;switch(_){case"Browser":p=W((0,k.z$)());break;case"Worker":p=`${W((0,k.z$)())}-${_}`;break;default:p=_}const C=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${ce.SDK_VERSION}/${C}`}function Fe(){return(Fe=(0,d.Z)(function*(_){return(yield me(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Be(_,f){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,d.Z)(function*(_,f){return me(_,"GET","/v2/recaptchaConfig",xe(_,f))})).apply(this,arguments)}function Vt(_){return void 0!==_&&void 0!==_.getResponse}function en(_){return void 0!==_&&void 0!==_.enterprise}class Dn{constructor(f){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.emailPasswordEnabled=f.recaptchaEnforcementState.some(p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState)}}function Ir(_){return new Promise((f,p)=>{const C=document.createElement("script");C.setAttribute("src",_),C.onload=f,C.onerror=T=>{const O=_e("internal-error");O.customData=T,p(O)},C.type="text/javascript",C.charset="UTF-8",function zt(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(C)})}function pi(_){return`__${_}${Math.floor(1e6*Math.random())}`}class tn{constructor(f){this.type="recaptcha-enterprise",this.auth=dn(f)}verify(f="verify",p=!1){var C=this;return(0,d.Z)(function*(){function O(){return O=(0,d.Z)(function*(Q){if(!p){if(null==Q.tenantId&&null!=Q._agentRecaptchaConfig)return Q._agentRecaptchaConfig.siteKey;if(null!=Q.tenantId&&void 0!==Q._tenantRecaptchaConfigs[Q.tenantId])return Q._tenantRecaptchaConfigs[Q.tenantId].siteKey}return new Promise(function(){var Ne=(0,d.Z)(function*(Ge,rt){Be(Q,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ot=>{if(void 0!==ot.recaptchaKey){const xn=new Dn(ot);return null==Q.tenantId?Q._agentRecaptchaConfig=xn:Q._tenantRecaptchaConfigs[Q.tenantId]=xn,Ge(xn.siteKey)}rt(new Error("recaptcha Enterprise site key undefined"))}).catch(ot=>{rt(ot)})});return function(Ge,rt){return Ne.apply(this,arguments)}}())}),O.apply(this,arguments)}function j(Q,Ne,Ge){const rt=window.grecaptcha;en(rt)?rt.enterprise.ready(()=>{rt.enterprise.execute(Q,{action:f}).then(ot=>{Ne(ot)}).catch(()=>{Ne("NO_RECAPTCHA")})}):Ge(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Q,Ne)=>{(function T(Q){return O.apply(this,arguments)})(C.auth).then(Ge=>{if(!p&&en(window.grecaptcha))j(Ge,Q,Ne);else{if(typeof window>"u")return void Ne(new Error("RecaptchaVerifier is only supported in browser"));Ir("https://www.google.com/recaptcha/enterprise.js?render="+Ge).then(()=>{j(Ge,Q,Ne)}).catch(rt=>{Ne(rt)})}}).catch(Ge=>{Ne(Ge)})})})()}}function Wi(_,f,p){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,d.Z)(function*(_,f,p,C=!1){const T=new tn(_);let O;try{O=yield T.verify(p)}catch{O=yield T.verify(p,!0)}const j=Object.assign({},f);return Object.assign(j,C?{captchaResp:O}:{captchaResponse:O}),Object.assign(j,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(j,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),j})).apply(this,arguments)}class Ws{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,p){const C=O=>new Promise((j,Q)=>{try{j(f(O))}catch(Ne){Q(Ne)}});C.onAbort=p,this.queue.push(C);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var p=this;return(0,d.Z)(function*(){if(p.auth.currentUser===f)return;const C=[];try{for(const T of p.queue)yield T(f),T.onAbort&&C.push(T.onAbort)}catch(T){C.reverse();for(const O of C)try{O()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class Jc{constructor(f,p,C,T){this.app=f,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=C,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ns(this),this.idTokenSubscription=new Ns(this),this.beforeStateQueue=new Ws(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=we,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(f,p){var C=this;return p&&(this._popupRedirectResolver=Nn(p)),this._initializationPromise=this.queue((0,d.Z)(function*(){var T,O;if(!C._deleted&&(C.persistenceManager=yield V.create(C,f),!C._deleted)){if(null!==(T=C._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(p),C.lastNotifiedUid=(null===(O=C.currentUser)||void 0===O?void 0:O.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p,!0)}})()}initializeCurrentUser(f){var p=this;return(0,d.Z)(function*(){var C;const T=yield p.assertedPersistence.getCurrentUser();let O=T,j=!1;if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Q=null===(C=p.redirectUser)||void 0===C?void 0:C._redirectEventId,Ne=O?._redirectEventId,Ge=yield p.tryRedirectSignIn(f);(!Q||Q===Ne)&&Ge?.user&&(O=Ge.user,j=!0)}if(!O)return p.directlySetCurrentUser(null);if(!O._redirectEventId){if(j)try{yield p.beforeStateQueue.runMiddleware(O)}catch(Q){O=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Q))}return O?p.reloadAndSetCurrentUserOrClear(O):p.directlySetCurrentUser(null)}return re(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===O._redirectEventId?p.directlySetCurrentUser(O):p.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(f){var p=this;return(0,d.Z)(function*(){let C=null;try{C=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch{yield p._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,d.Z)(function*(){try{yield Qn(f)}catch(C){if("auth/network-request-failed"!==C?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function qs(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,d.Z)(function*(){const C=f?(0,k.m9)(f):null;return C&&re(C.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(C&&C._clone(p))})()}_updateCurrentUser(f,p=!1){var C=this;return(0,d.Z)(function*(){if(!C._deleted)return f&&re(C.tenantId===f.tenantId,C,"tenant-id-mismatch"),p||(yield C.beforeStateQueue.runMiddleware(f)),C.queue((0,d.Z)(function*(){yield C.directlySetCurrentUser(f),C.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var p=this;return this.queue((0,d.Z)(function*(){yield p.assertedPersistence.setPersistence(Nn(f))}))}initializeRecaptchaConfig(){var f=this;return(0,d.Z)(function*(){const p=yield Be(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),C=new Dn(p);null==f.tenantId?f._agentRecaptchaConfig=C:f._tenantRecaptchaConfigs[f.tenantId]=C,C.emailPasswordEnabled&&new tn(f).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new k.LL("auth","Firebase",f())}onAuthStateChanged(f,p,C){return this.registerStateListener(this.authStateSubscription,f,p,C)}beforeAuthStateChanged(f,p){return this.beforeStateQueue.pushCallback(f,p)}onIdTokenChanged(f,p,C){return this.registerStateListener(this.idTokenSubscription,f,p,C)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var C=this;return(0,d.Z)(function*(){const T=yield C.getOrInitRedirectPersistenceManager(p);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,d.Z)(function*(){if(!p.redirectPersistenceManager){const C=f&&Nn(f)||p._popupRedirectResolver;re(C,p,"argument-error"),p.redirectPersistenceManager=yield V.create(p,[Nn(C._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,d.Z)(function*(){var C,T;return p._isInitialized&&(yield p.queue((0,d.Z)(function*(){}))),(null===(C=p._currentUser)||void 0===C?void 0:C._redirectEventId)===f?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,d.Z)(function*(){if(f===p.currentUser)return p.queue((0,d.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,C,T){if(this._deleted)return()=>{};const O="function"==typeof p?p:p.next.bind(p),j=this._isInitialized?Promise.resolve():this._initializationPromise;return re(j,this,"internal-error"),j.then(()=>O(this.currentUser)),"function"==typeof p?f.addObserver(p,C,T):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,d.Z)(function*(){p.currentUser&&p.currentUser!==f&&p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh(),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=se(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var p;const C={"X-Client-Version":f.clientVersion};f.app.options.appId&&(C["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();T&&(C["X-Firebase-Client"]=T);const O=yield f._getAppCheckToken();return O&&(C["X-Firebase-AppCheck"]=O),C})()}_getAppCheckToken(){var f=this;return(0,d.Z)(function*(){var p;const C=yield null===(p=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return C?.error&&function bt(_,...f){mt.logLevel<=pe.in.WARN&&mt.warn(`Auth (${ce.SDK_VERSION}): ${_}`,...f)}(`Error while retrieving App Check token: ${C.error}`),C?.token})()}}function dn(_){return(0,k.m9)(_)}class Ns{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,k.ne)(p=>this.observer=p)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ur(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function Eo(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class ps{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return xt("not implemented")}_getIdTokenResponse(f){return xt("not implemented")}_linkToIdToken(f,p){return xt("not implemented")}_getReauthenticationResolver(f){return xt("not implemented")}}function Mi(_,f){return bo.apply(this,arguments)}function bo(){return(bo=(0,d.Z)(function*(_,f){return me(_,"POST","/v1/accounts:resetPassword",xe(_,f))})).apply(this,arguments)}function Ru(_,f){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,d.Z)(function*(_,f){return me(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ku(_,f){return xh.apply(this,arguments)}function xh(){return(xh=(0,d.Z)(function*(_,f){return me(_,"POST","/v1/accounts:update",xe(_,f))})).apply(this,arguments)}function vn(_,f){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,d.Z)(function*(_,f){return yt(_,"POST","/v1/accounts:signInWithPassword",xe(_,f))})).apply(this,arguments)}function el(_,f){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,d.Z)(function*(_,f){return me(_,"POST","/v1/accounts:sendOobCode",xe(_,f))})).apply(this,arguments)}function Ph(_,f){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,d.Z)(function*(_,f){return el(_,f)})).apply(this,arguments)}function qa(_,f){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,d.Z)(function*(_,f){return el(_,f)})).apply(this,arguments)}function Vu(_,f){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,d.Z)(function*(_,f){return el(_,f)})).apply(this,arguments)}function lg(_,f){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,d.Z)(function*(_,f){return el(_,f)})).apply(this,arguments)}function tl(){return(tl=(0,d.Z)(function*(_,f){return yt(_,"POST","/v1/accounts:signInWithEmailLink",xe(_,f))})).apply(this,arguments)}function Rh(){return(Rh=(0,d.Z)(function*(_,f){return yt(_,"POST","/v1/accounts:signInWithEmailLink",xe(_,f))})).apply(this,arguments)}class nl extends ps{constructor(f,p,C,T=null){super("password",C),this._email=f,this._password=p,this._tenantId=T}static _fromEmailAndPassword(f,p){return new nl(f,p,"password")}static _fromEmailAndCode(f,p,C=null){return new nl(f,p,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,d.Z)(function*(){var C;switch(p.signInMethod){case"password":const T={returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(C=f._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const O=yield Wi(f,T,"signInWithPassword");return vn(f,O)}return vn(f,T).catch(function(){var O=(0,d.Z)(function*(j){if("auth/missing-recaptcha-token"===j.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Q=yield Wi(f,T,"signInWithPassword");return vn(f,Q)}return Promise.reject(j)});return function(j){return O.apply(this,arguments)}}());case"emailLink":return function Uu(_,f){return tl.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:Ie(f,"internal-error")}})()}_linkToIdToken(f,p){var C=this;return(0,d.Z)(function*(){switch(C.signInMethod){case"password":return Ru(f,{idToken:p,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function ju(_,f){return Rh.apply(this,arguments)}(f,{idToken:p,email:C._email,oobCode:C._password});default:Ie(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function xi(_,f){return gs.apply(this,arguments)}function gs(){return(gs=(0,d.Z)(function*(_,f){return yt(_,"POST","/v1/accounts:signInWithIdp",xe(_,f))})).apply(this,arguments)}class gi extends ps{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new gi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):Ie("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:C,signInMethod:T}=p,O=(0,le._T)(p,["providerId","signInMethod"]);if(!C||!T)return null;const j=new gi(C,T);return j.idToken=O.idToken||void 0,j.accessToken=O.accessToken||void 0,j.secret=O.secret,j.nonce=O.nonce,j.pendingToken=O.pendingToken||null,j}_getIdTokenResponse(f){return xi(f,this.buildRequest())}_linkToIdToken(f,p){const C=this.buildRequest();return C.idToken=p,xi(f,C)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,xi(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,k.xO)(p)}return f}}function $u(_,f){return sa.apply(this,arguments)}function sa(){return(sa=(0,d.Z)(function*(_,f){return me(_,"POST","/v1/accounts:sendVerificationCode",xe(_,f))})).apply(this,arguments)}function Za(){return(Za=(0,d.Z)(function*(_,f){return yt(_,"POST","/v1/accounts:signInWithPhoneNumber",xe(_,f))})).apply(this,arguments)}function il(){return(il=(0,d.Z)(function*(_,f){const p=yield yt(_,"POST","/v1/accounts:signInWithPhoneNumber",xe(_,f));if(p.temporaryProof)throw kn(_,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Ka={USER_NOT_FOUND:"user-not-found"};function gr(){return(gr=(0,d.Z)(function*(_,f){return yt(_,"POST","/v1/accounts:signInWithPhoneNumber",xe(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Ka)})).apply(this,arguments)}class xr extends ps{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new xr({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new xr({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function rl(_,f){return Za.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function kh(_,f){return il.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Nh(_,f){return gr.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:C,verificationCode:T}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:C,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:C,phoneNumber:T,temporaryProof:O}=f;return C||p||T||O?new xr({verificationId:p,verificationCode:C,phoneNumber:T,temporaryProof:O}):null}}class Qa{constructor(f){var p,C,T,O,j,Q;const Ne=(0,k.zd)((0,k.pd)(f)),Ge=null!==(p=Ne.apiKey)&&void 0!==p?p:null,rt=null!==(C=Ne.oobCode)&&void 0!==C?C:null,ot=function Fh(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ne.mode)&&void 0!==T?T:null);re(Ge&&rt&&ot,"argument-error"),this.apiKey=Ge,this.operation=ot,this.code=rt,this.continueUrl=null!==(O=Ne.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(j=Ne.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(Q=Ne.tenantId)&&void 0!==Q?Q:null}static parseLink(f){const p=function Ya(_){const f=(0,k.zd)((0,k.pd)(_)).link,p=f?(0,k.zd)((0,k.pd)(f)).deep_link_id:null,C=(0,k.zd)((0,k.pd)(_)).deep_link_id;return(C?(0,k.zd)((0,k.pd)(C)).link:null)||C||p||f||_}(f);try{return new Qa(p)}catch{return null}}}let Fn=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(p,C){return nl._fromEmailAndPassword(p,C)}static credentialWithLink(p,C){const T=Qa.parseLink(C);return re(T,"argument-error"),nl._fromEmailAndCode(p,T.code,T.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Fs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class sl extends Fs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class mi extends sl{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return re("providerId"in p&&"signInMethod"in p,"argument-error"),gi._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return re(f.idToken||f.accessToken,"argument-error"),gi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return mi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return mi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:C,oauthTokenSecret:T,pendingToken:O,nonce:j,providerId:Q}=f;if(!C&&!T&&!p&&!O||!Q)return null;try{return new mi(Q)._credential({idToken:p,accessToken:C,nonce:j,pendingToken:O})}catch{return null}}}let $r=(()=>{class _ extends sl{constructor(){super("facebook.com")}static credential(p){return gi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),ol=(()=>{class _ extends sl{constructor(){super("google.com"),this.addScope("profile")}static credential(p,C){return gi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:C})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:C,oauthAccessToken:T}=p;if(!C&&!T)return null;try{return _.credential(C,T)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),oa=(()=>{class _ extends sl{constructor(){super("github.com")}static credential(p){return gi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Ln extends ps{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return xi(f,this.buildRequest())}_linkToIdToken(f,p){const C=this.buildRequest();return C.idToken=p,xi(f,C)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,xi(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:C,signInMethod:T,pendingToken:O}=p;return C&&T&&O&&C===T?new Ln(C,O):null}static _create(f,p){return new Ln(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Zs extends Fs{constructor(f){re(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Zs.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Zs.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=Ln.fromJSON(f);return re(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:C}=f;if(!p||!C)return null;try{return Ln._create(C,p)}catch{return null}}}let al=(()=>{class _ extends sl{constructor(){super("twitter.com")}static credential(p,C){return gi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:C})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:C,oauthTokenSecret:T}=p;if(!C||!T)return null;try{return _.credential(C,T)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Xr(_,f){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,d.Z)(function*(_,f){return yt(_,"POST","/v1/accounts:signUp",xe(_,f))})).apply(this,arguments)}class Er{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,C,T=!1){return(0,d.Z)(function*(){const O=yield Cr._fromIdTokenResponse(f,C,T),j=At(C);return new Er({user:O,providerId:j,_tokenResponse:C,operationType:p})})()}static _forOperation(f,p,C){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(C,!0);const T=At(C);return new Er({user:f,providerId:T,_tokenResponse:C,operationType:p})})()}}function At(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function zu(){return(zu=(0,d.Z)(function*(_){var f;const p=dn(_);if(yield p._initializationPromise,null!==(f=p.currentUser)&&void 0!==f&&f.isAnonymous)return new Er({user:p.currentUser,providerId:null,operationType:"signIn"});const C=yield Xr(p,{returnSecureToken:!0}),T=yield Er._fromIdTokenResponse(p,"signIn",C,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class aa extends k.ZR{constructor(f,p,C,T){var O;super(p.code,p.message),this.operationType=C,this.user=T,Object.setPrototypeOf(this,aa.prototype),this.customData={appName:f.name,tenantId:null!==(O=f.tenantId)&&void 0!==O?O:void 0,_serverResponse:p.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(f,p,C,T){return new aa(f,p,C,T)}}function qu(_,f,p,C){return("reauthenticate"===f?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?aa._fromErrorAndOperation(_,O,f,C):O})}function Wu(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function Pi(){return(Pi=(0,d.Z)(function*(_,f){const p=(0,k.m9)(_);yield $t(!0,p,f);const{providerUserInfo:C}=yield Kr(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),T=Wu(C||[]);return p.providerData=p.providerData.filter(O=>T.has(O.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Ja(_,f){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,d.Z)(function*(_,f,p=!1){const C=yield nt(_,f._linkToIdToken(_.auth,yield _.getIdToken()),p);return Er._forOperation(_,"link",C)})).apply(this,arguments)}function $t(_,f,p){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,d.Z)(function*(_,f,p){yield Qn(f);const T=!1===_?"provider-already-linked":"no-such-provider";re(Wu(f.providerData).has(p)===_,f.auth,T)})).apply(this,arguments)}function cl(_,f){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,d.Z)(function*(_,f,p=!1){const{auth:C}=_,T="reauthenticate";try{const O=yield nt(_,qu(C,T,f,_),p);re(O.idToken,C,"internal-error");const j=wn(O.idToken);re(j,C,"internal-error");const{sub:Q}=j;return re(_.uid===Q,C,"user-mismatch"),Er._forOperation(_,T,O)}catch(O){throw"auth/user-not-found"===O?.code&&Ie(C,"user-mismatch"),O}})).apply(this,arguments)}function ec(_,f){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,d.Z)(function*(_,f,p=!1){const C="signIn",T=yield qu(_,C,f),O=yield Er._fromIdTokenResponse(_,C,T);return p||(yield _._updateCurrentUser(O.user)),O})).apply(this,arguments)}function ei(_,f){return To.apply(this,arguments)}function To(){return(To=(0,d.Z)(function*(_,f){return ec(dn(_),f)})).apply(this,arguments)}function ll(_,f){return ul.apply(this,arguments)}function ul(){return(ul=(0,d.Z)(function*(_,f){const p=(0,k.m9)(_);return yield $t(!1,p,f.providerId),Ja(p,f)})).apply(this,arguments)}function An(_,f){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,d.Z)(function*(_,f){return cl((0,k.m9)(_),f)})).apply(this,arguments)}function Vh(_,f){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,d.Z)(function*(_,f){return yt(_,"POST","/v1/accounts:signInWithCustomToken",xe(_,f))})).apply(this,arguments)}function Oi(){return(Oi=(0,d.Z)(function*(_,f){const p=dn(_),C=yield Vh(p,{token:f,returnSecureToken:!0}),T=yield Er._fromIdTokenResponse(p,"signIn",C);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class ms{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?ni._fromServerResponse(f,p):"totpInfo"in p?Ku._fromServerResponse(f,p):Ie(f,"internal-error")}}class ni extends ms{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new ni(p)}}class Ku extends ms{constructor(f){super("totp",f)}static _fromServerResponse(f,p){return new Ku(p)}}function Ys(_,f,p){var C;re((null===(C=p.url)||void 0===C?void 0:C.length)>0,_,"invalid-continue-uri"),re(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(re(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(re(p.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function So(){return So=(0,d.Z)(function*(_,f,p){var C;const T=dn(_),O={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};if(null!==(C=T._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const j=yield Wi(T,O,"getOobCode",!0);p&&Ys(T,j,p),yield qa(T,j)}else p&&Ys(T,O,p),yield qa(T,O).catch(function(){var j=(0,d.Z)(function*(Q){if("auth/missing-recaptcha-token"!==Q.code)return Promise.reject(Q);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ne=yield Wi(T,O,"getOobCode",!0);p&&Ys(T,Ne,p),yield qa(T,Ne)}});return function(Q){return j.apply(this,arguments)}}())}),So.apply(this,arguments)}function ca(){return(ca=(0,d.Z)(function*(_,f,p){yield Mi((0,k.m9)(_),{oobCode:f,newPassword:p})})).apply(this,arguments)}function Or(){return(Or=(0,d.Z)(function*(_,f){yield ku((0,k.m9)(_),{oobCode:f})})).apply(this,arguments)}function hl(_,f){return la.apply(this,arguments)}function la(){return(la=(0,d.Z)(function*(_,f){const p=(0,k.m9)(_),C=yield Mi(p,{oobCode:f}),T=C.requestType;switch(re(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(C.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(C.mfaInfo,p,"internal-error");default:re(C.email,p,"internal-error")}let O=null;return C.mfaInfo&&(O=ms._fromServerResponse(dn(p),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:O},operation:T}})).apply(this,arguments)}function Qs(){return(Qs=(0,d.Z)(function*(_,f){const{data:p}=yield hl((0,k.m9)(_),f);return p.email})).apply(this,arguments)}function da(){return da=(0,d.Z)(function*(_,f,p){var C;const T=dn(_),O={returnSecureToken:!0,email:f,password:p,clientType:"CLIENT_TYPE_WEB"};let j;if(null!==(C=T._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const Ge=yield Wi(T,O,"signUpPassword");j=Xr(T,Ge)}else j=Xr(T,O).catch(function(){var Ge=(0,d.Z)(function*(rt){if("auth/missing-recaptcha-token"===rt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ot=yield Wi(T,O,"signUpPassword");return Xr(T,ot)}return Promise.reject(rt)});return function(rt){return Ge.apply(this,arguments)}}());const Q=yield j.catch(Ge=>Promise.reject(Ge)),Ne=yield Er._fromIdTokenResponse(T,"signIn",Q);return yield T._updateCurrentUser(Ne.user),Ne}),da.apply(this,arguments)}function nc(){return nc=(0,d.Z)(function*(_,f,p){var C;const T=dn(_),O={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};function j(Q,Ne){re(Ne.handleCodeInApp,T,"argument-error"),Ne&&Ys(T,Q,Ne)}if(null!==(C=T._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const Q=yield Wi(T,O,"getOobCode",!0);j(Q,p),yield Vu(T,Q)}else j(O,p),yield Vu(T,O).catch(function(){var Q=(0,d.Z)(function*(Ne){if("auth/missing-recaptcha-token"!==Ne.code)return Promise.reject(Ne);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ge=yield Wi(T,O,"getOobCode",!0);j(Ge,p),yield Vu(T,Ge)}});return function(Ne){return Q.apply(this,arguments)}}())}),nc.apply(this,arguments)}function _s(){return(_s=(0,d.Z)(function*(_,f,p){const C=(0,k.m9)(_),T=Fn.credentialWithLink(f,p||Ht());return re(T._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),ei(C,T)})).apply(this,arguments)}function In(_,f){return pl.apply(this,arguments)}function pl(){return(pl=(0,d.Z)(function*(_,f){return me(_,"POST","/v1/accounts:createAuthUri",xe(_,f))})).apply(this,arguments)}function rc(){return(rc=(0,d.Z)(function*(_,f){const C={identifier:f,continueUri:at()?Ht():"http://localhost"},{signinMethods:T}=yield In((0,k.m9)(_),C);return T||[]})).apply(this,arguments)}function ic(){return(ic=(0,d.Z)(function*(_,f){const p=(0,k.m9)(_),T={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&Ys(p.auth,T,f);const{email:O}=yield Ph(p.auth,T);O!==_.email&&(yield _.reload())})).apply(this,arguments)}function Js(){return(Js=(0,d.Z)(function*(_,f,p){const C=(0,k.m9)(_),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};p&&Ys(C.auth,O,p);const{email:j}=yield lg(C.auth,O);j!==_.email&&(yield _.reload())})).apply(this,arguments)}function ha(_,f){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,d.Z)(function*(_,f){return me(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function fa(){return(fa=(0,d.Z)(function*(_,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const C=(0,k.m9)(_),O={idToken:yield C.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},j=yield nt(C,ha(C.auth,O));C.displayName=j.displayName||null,C.photoURL=j.photoUrl||null;const Q=C.providerData.find(({providerId:Ne})=>"password"===Ne);Q&&(Q.displayName=C.displayName,Q.photoURL=C.photoURL),yield C._updateTokensIfNecessary(j)})).apply(this,arguments)}function pa(_,f,p){return sc.apply(this,arguments)}function sc(){return(sc=(0,d.Z)(function*(_,f,p){const{auth:C}=_,O={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(O.email=f),p&&(O.password=p);const j=yield nt(_,Ru(C,O));yield _._updateTokensIfNecessary(j,!0)})).apply(this,arguments)}class Ri{constructor(f,p,C={}){this.isNewUser=f,this.providerId=p,this.profile=C}}class ml extends Ri{constructor(f,p,C,T){super(f,p,C),this.username=T}}class ed extends Ri{constructor(f,p){super(f,"facebook.com",p)}}class jh extends ml{constructor(f,p){super(f,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class _l extends Ri{constructor(f,p){super(f,"google.com",p)}}class oc extends ml{constructor(f,p,C){super(f,"twitter.com",p,C)}}function ac(_){const{user:f,_tokenResponse:p}=_;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Uh(_){var f,p;if(!_)return null;const{providerId:C}=_,T=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},O=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!C&&_?.idToken){const j=null===(p=null===(f=wn(_.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(j)return new Ri(O,"anonymous"!==j&&"custom"!==j?j:null)}if(!C)return null;switch(C){case"facebook.com":return new ed(O,T);case"github.com":return new jh(O,T);case"google.com":return new _l(O,T);case"twitter.com":return new oc(O,T,_.screenName||null);case"custom":case"anonymous":return new Ri(O,null);default:return new Ri(O,C,T)}}(p)}class Xs{constructor(f,p,C){this.type=f,this.credential=p,this.auth=C}static _fromIdtoken(f,p){return new Xs("enroll",f,p)}static _fromMfaPendingCredential(f){return new Xs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,C;if(f?.multiFactorSession){if(null!==(p=f.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Xs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(C=f.multiFactorSession)&&void 0!==C&&C.idToken)return Xs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Ki{constructor(f,p,C){this.session=f,this.hints=p,this.signInResolver=C}static _fromError(f,p){const C=dn(f),T=p.customData._serverResponse,O=(T.mfaInfo||[]).map(Q=>ms._fromServerResponse(C,Q));re(T.mfaPendingCredential,C,"internal-error");const j=Xs._fromMfaPendingCredential(T.mfaPendingCredential);return new Ki(j,O,function(){var Q=(0,d.Z)(function*(Ne){const Ge=yield Ne._process(C,j);delete T.mfaInfo,delete T.mfaPendingCredential;const rt=Object.assign(Object.assign({},T),{idToken:Ge.idToken,refreshToken:Ge.refreshToken});switch(p.operationType){case"signIn":const ot=yield Er._fromIdTokenResponse(C,p.operationType,rt);return yield C._updateCurrentUser(ot.user),ot;case"reauthenticate":return re(p.user,C,"internal-error"),Er._forOperation(p.user,p.operationType,rt);default:Ie(C,"internal-error")}});return function(Ne){return Q.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,d.Z)(function*(){return p.signInResolver(f)})()}}function _a(_,f){return me(_,"POST","/v2/accounts/mfaEnrollment:start",xe(_,f))}class eo{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(C=>ms._fromServerResponse(f.auth,C)))})}static _fromUser(f){return new eo(f)}getSession(){var f=this;return(0,d.Z)(function*(){return Xs._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,p){var C=this;return(0,d.Z)(function*(){const T=f,O=yield C.getSession(),j=yield nt(C.user,T._process(C.user.auth,O,p));return yield C.user._updateTokensIfNecessary(j),C.user.reload()})()}unenroll(f){var p=this;return(0,d.Z)(function*(){const C="string"==typeof f?f:f.uid,T=yield p.user.getIdToken();try{const O=yield nt(p.user,function Cl(_,f){return me(_,"POST","/v2/accounts/mfaEnrollment:withdraw",xe(_,f))}(p.user.auth,{idToken:T,mfaEnrollmentId:C}));p.enrolledFactors=p.enrolledFactors.filter(({uid:j})=>j!==C),yield p.user._updateTokensIfNecessary(O),yield p.user.reload()}catch(O){throw O}})()}}const to=new WeakMap,no="__sak";class uc{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(no,"1"),this.storage.removeItem(no),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Yi=(()=>{class _ extends uc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,C)=>this.onStorageEvent(p,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Gh(){const _=(0,k.z$)();return J(_)||ut(_)}()&&function Ai(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=gn(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const C of Object.keys(this.listeners)){const T=this.storage.getItem(C),O=this.localCache[C];T!==O&&p(C,O,T)}}onStorageEvent(p,C=!1){if(!p.key)return void this.forAllChangedKeys((Q,Ne,Ge)=>{this.notifyListeners(Q,Ge)});const T=p.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Q=this.storage.getItem(T);if(p.newValue!==Q)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!C)return}const O=()=>{const Q=this.storage.getItem(T);!C&&this.localCache[T]===Q||this.notifyListeners(T,Q)},j=this.storage.getItem(T);!function wr(){return(0,k.w1)()&&10===document.documentMode}()||j===p.newValue||p.newValue===p.oldValue?O():setTimeout(O,10)}notifyListeners(p,C){this.localCache[p]=C;const T=this.listeners[p];if(T)for(const O of Array.from(T))O(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,C,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:C,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(C)}_removeListener(p,C){this.listeners[p]&&(this.listeners[p].delete(C),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,C){var T=()=>super._set,O=this;return(0,d.Z)(function*(){yield T().call(O,p,C),O.localCache[p]=JSON.stringify(C)})()}_get(p){var C=()=>super._get,T=this;return(0,d.Z)(function*(){const O=yield C().call(T,p);return T.localCache[p]=JSON.stringify(O),O})()}_remove(p){var C=()=>super._remove,T=this;return(0,d.Z)(function*(){yield C().call(T,p),delete T.localCache[p]})()}}return _.type="LOCAL",_})(),ro=(()=>{class _ extends uc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,C){}_removeListener(p,C){}}return _.type="SESSION",_})();let dc=(()=>{class _{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const C=this.receivers.find(O=>O.isListeningto(p));if(C)return C;const T=new _(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var C=this;return(0,d.Z)(function*(){const T=p,{eventId:O,eventType:j,data:Q}=T.data,Ne=C.handlersMap[j];if(!Ne?.size)return;T.ports[0].postMessage({status:"ack",eventId:O,eventType:j});const Ge=Array.from(Ne).map(function(){var ot=(0,d.Z)(function*(xn){return xn(T.origin,Q)});return function(xn){return ot.apply(this,arguments)}}()),rt=yield function zh(_){return Promise.all(_.map(function(){var f=(0,d.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(C){return{fulfilled:!1,reason:C}}});return function(p){return f.apply(this,arguments)}}()))}(Ge);T.ports[0].postMessage({status:"done",eventId:O,eventType:j,response:rt})})()}_subscribe(p,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(C)}_unsubscribe(p,C){this.handlersMap[p]&&C&&this.handlersMap[p].delete(C),(!C||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Qi(_="",f=10){let p="";for(let C=0;C<f;C++)p+=Math.floor(10*Math.random());return _+p}class pg{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,C=50){var T=this;return(0,d.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let j,Q;return new Promise((Ne,Ge)=>{const rt=Qi("",20);O.port1.start();const ot=setTimeout(()=>{Ge(new Error("unsupported_event"))},C);Q={messageChannel:O,onMessage(xn){const ns=xn;if(ns.data.eventId===rt)switch(ns.data.status){case"ack":clearTimeout(ot),j=setTimeout(()=>{Ge(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),Ne(ns.data.response);break;default:clearTimeout(ot),clearTimeout(j),Ge(new Error("invalid_response"))}}},T.handlers.add(Q),O.port1.addEventListener("message",Q.onMessage),T.target.postMessage({eventType:f,eventId:rt,data:p},[O.port2])}).finally(()=>{Q&&T.removeMessageHandler(Q)})})()}}function En(){return window}function wa(){return typeof En().WorkerGlobalScope<"u"&&"function"==typeof En().importScripts}function hc(){return(hc=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const io="firebaseLocalStorageDb",Ro="firebaseLocalStorage",ws="fbase_key";class fc{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Ia(_,f){return _.transaction([Ro],f?"readwrite":"readonly").objectStore(Ro)}function Il(){const _=indexedDB.open(io,1);return new Promise((f,p)=>{_.addEventListener("error",()=>{p(_.error)}),_.addEventListener("upgradeneeded",()=>{const C=_.result;try{C.createObjectStore(Ro,{keyPath:ws})}catch(T){p(T)}}),_.addEventListener("success",(0,d.Z)(function*(){const C=_.result;C.objectStoreNames.contains(Ro)?f(C):(C.close(),yield function hn(){const _=indexedDB.deleteDatabase(io);return new fc(_).toPromise()}(),f(yield Il()))}))})}function El(_,f,p){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,d.Z)(function*(_,f,p){const C=Ia(_,!0).put({[ws]:f,value:p});return new fc(C).toPromise()})).apply(this,arguments)}function Zh(){return(Zh=(0,d.Z)(function*(_,f){const p=Ia(_,!1).get(f),C=yield new fc(p).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Kh(_,f){const p=Ia(_,!0).delete(f);return new fc(p).toPromise()}const pc=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,d.Z)(function*(){return p.db||(p.db=yield Il()),p.db})()}_withRetries(p){var C=this;return(0,d.Z)(function*(){let T=0;for(;;)try{const O=yield C._openDb();return yield p(O)}catch(O){if(T++>3)throw O;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,d.Z)(function*(){return wa()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,d.Z)(function*(){p.receiver=dc._getInstance(function Mn(){return wa()?self:null}()),p.receiver._subscribe("keyChanged",function(){var C=(0,d.Z)(function*(T,O){return{keyProcessed:(yield p._poll()).includes(O.key)}});return function(T,O){return C.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var C=(0,d.Z)(function*(T,O){return["keyChanged"]});return function(T,O){return C.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,d.Z)(function*(){var C,T;if(p.activeServiceWorker=yield function qh(){return hc.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new pg(p.activeServiceWorker);const O=yield p.sender._send("ping",{},800);!O||(null===(C=O[0])||void 0===C?void 0:C.fulfilled)&&(null===(T=O[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var C=this;return(0,d.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function Cs(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:p},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Il();return yield El(p,no,"1"),yield Kh(p,no),!0}catch{}return!1})()}_withPendingWrite(p){var C=this;return(0,d.Z)(function*(){C.pendingWrites++;try{yield p()}finally{C.pendingWrites--}})()}_set(p,C){var T=this;return(0,d.Z)(function*(){return T._withPendingWrite((0,d.Z)(function*(){return yield T._withRetries(O=>El(O,p,C)),T.localCache[p]=C,T.notifyServiceWorker(p)}))})()}_get(p){var C=this;return(0,d.Z)(function*(){const T=yield C._withRetries(O=>function nd(_,f){return Zh.apply(this,arguments)}(O,p));return C.localCache[p]=T,T})()}_remove(p){var C=this;return(0,d.Z)(function*(){return C._withPendingWrite((0,d.Z)(function*(){return yield C._withRetries(T=>Kh(T,p)),delete C.localCache[p],C.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,d.Z)(function*(){const C=yield p._withRetries(j=>{const Q=Ia(j,!1).getAll();return new fc(Q).toPromise()});if(!C)return[];if(0!==p.pendingWrites)return[];const T=[],O=new Set;for(const{fbase_key:j,value:Q}of C)O.add(j),JSON.stringify(p.localCache[j])!==JSON.stringify(Q)&&(p.notifyListeners(j,Q),T.push(j));for(const j of Object.keys(p.localCache))p.localCache[j]&&!O.has(j)&&(p.notifyListeners(j,null),T.push(j));return T})()}notifyListeners(p,C){this.localCache[p]=C;const T=this.listeners[p];if(T)for(const O of Array.from(T))O(C)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(C)}_removeListener(p,C){this.listeners[p]&&(this.listeners[p].delete(C),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Xn(_,f){return me(_,"POST","/v2/accounts/mfaSignIn:start",xe(_,f))}const Hn=1e12;class ki{constructor(f){this.auth=f,this.counter=Hn,this._widgets=new Map}render(f,p){const C=this.counter;return this._widgets.set(C,new bl(f,this.auth.name,p||{})),this.counter++,C}reset(f){var p;const C=f||Hn;null===(p=this._widgets.get(C))||void 0===p||p.delete(),this._widgets.delete(C)}getResponse(f){var p;return(null===(p=this._widgets.get(f||Hn))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,d.Z)(function*(){var C;return null===(C=p._widgets.get(f||Hn))||void 0===C||C.execute(),""})()}}class bl{constructor(f,p,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;re(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Dl(_){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<_;C++)f.push(p.charAt(Math.floor(Math.random()*p.length)));return f.join("")}(50);const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ko=pi("rcb"),id=new Gi(3e4,6e4);class gg{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=En().grecaptcha)||void 0===f||!f.render)}load(f,p=""){return re(function Jh(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(p),f,"argument-error"),this.shouldResolveImmediately(p)&&Vt(En().grecaptcha)?Promise.resolve(En().grecaptcha):new Promise((C,T)=>{const O=En().setTimeout(()=>{T(_e(f,"network-request-failed"))},id.get());En()[ko]=()=>{En().clearTimeout(O),delete En()[ko];const Q=En().grecaptcha;if(!Q||!Vt(Q))return void T(_e(f,"internal-error"));const Ne=Q.render;Q.render=(Ge,rt)=>{const ot=Ne(Ge,rt);return this.counter++,ot},this.hostLanguage=p,C(Q)},Ir(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:ko,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(O),T(_e(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var p;return!(null===(p=En().grecaptcha)||void 0===p||!p.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class U_{load(f){return(0,d.Z)(function*(){return new ki(f)})()}clearedOneInstance(){}}const mc="recaptcha",ri={theme:"light",type:"image"};class _c{constructor(f,p=Object.assign({},ri),C){this.parameters=p,this.type=mc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dn(C),this.isInvisible="invisible"===this.parameters.size,re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;re(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new U_:new gg,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),C=f.getAssertedRecaptcha();return C.getResponse(p)||new Promise(O=>{const j=Q=>{!Q||(f.tokenChangeListeners.delete(j),O(Q))};f.tokenChangeListeners.add(j),f.isInvisible&&C.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(C=>C(p)),"function"==typeof f)f(p);else if("string"==typeof f){const C=En()[f];"function"==typeof C&&C(p)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const C=document.createElement("div");p.appendChild(C),p=C}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){re(at()&&!wa(),f.auth,"internal-error"),yield function ba(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function ne(_){return Fe.apply(this,arguments)}(f.auth);re(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Tl{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=xr._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function yc(){return(yc=(0,d.Z)(function*(_,f,p){const C=dn(_),T=yield wc(C,f,(0,k.m9)(p));return new Tl(T,O=>ei(C,O))})).apply(this,arguments)}function vc(){return(vc=(0,d.Z)(function*(_,f,p){const C=(0,k.m9)(_);yield $t(!1,C,"phone");const T=yield wc(C.auth,f,(0,k.m9)(p));return new Tl(T,O=>ll(C,O))})).apply(this,arguments)}function Cc(){return(Cc=(0,d.Z)(function*(_,f,p){const C=(0,k.m9)(_),T=yield wc(C.auth,f,(0,k.m9)(p));return new Tl(T,O=>An(C,O))})).apply(this,arguments)}function wc(_,f,p){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,d.Z)(function*(_,f,p){var C;const T=yield p.verify();try{let O;if(re("string"==typeof T,_,"argument-error"),re(p.type===mc,_,"argument-error"),O="string"==typeof f?{phoneNumber:f}:f,"session"in O){const j=O.session;if("phoneNumber"in O)return re("enroll"===j.type,_,"internal-error"),(yield _a(_,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{re("signin"===j.type,_,"internal-error");const Q=(null===(C=O.multiFactorHint)||void 0===C?void 0:C.uid)||O.multiFactorUid;return re(Q,_,"missing-multi-factor-info"),(yield Xn(_,{mfaPendingCredential:j.credential,mfaEnrollmentId:Q,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield $u(_,{phoneNumber:O.phoneNumber,recaptchaToken:T});return j}}finally{p._reset()}})).apply(this,arguments)}function Is(){return(Is=(0,d.Z)(function*(_,f){yield Ja((0,k.m9)(_),f)})).apply(this,arguments)}let Rr=(()=>{class _{constructor(p){this.providerId=_.PROVIDER_ID,this.auth=dn(p)}verifyPhoneNumber(p,C){return wc(this.auth,p,(0,k.m9)(C))}static credential(p,C){return xr._fromVerification(p,C)}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:C,temporaryProof:T}=p;return C&&T?xr._fromTokenResponse(C,T):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Es(_,f){return f?Nn(f):(re(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Dr extends ps{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return xi(f,this._buildIdpRequest())}_linkToIdToken(f,p){return xi(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return xi(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function ad(_){return ec(_.auth,new Dr(_),_.bypassAuthState)}function Sl(_){const{auth:f,user:p}=_;return re(p,f,"internal-error"),cl(p,new Dr(_),_.bypassAuthState)}function Al(_){return Da.apply(this,arguments)}function Da(){return(Da=(0,d.Z)(function*(_){const{auth:f,user:p}=_;return re(p,f,"internal-error"),Ja(p,new Dr(_),_.bypassAuthState)})).apply(this,arguments)}class bs{constructor(f,p,C,T,O=!1){this.auth=f,this.resolver=C,this.user=T,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,d.Z)(function*(C,T){f.pendingPromise={resolve:C,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(O){f.reject(O)}});return function(C,T){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,d.Z)(function*(){const{urlResponse:C,sessionId:T,postBody:O,tenantId:j,error:Q,type:Ne}=f;if(Q)return void p.reject(Q);const Ge={auth:p.auth,requestUri:C,sessionId:T,tenantId:j||void 0,postBody:O||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ne)(Ge))}catch(rt){p.reject(rt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return ad;case"linkViaPopup":case"linkViaRedirect":return Al;case"reauthViaPopup":case"reauthViaRedirect":return Sl;default:Ie(this.auth,"internal-error")}}resolve(f){ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const dr=new Gi(2e3,1e4);function Vn(){return(Vn=(0,d.Z)(function*(_,f,p){const C=dn(_);He(_,f,Fs);const T=Es(C,p);return new Ml(C,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function Ec(){return(Ec=(0,d.Z)(function*(_,f,p){const C=(0,k.m9)(_);He(C.auth,f,Fs);const T=Es(C.auth,p);return new Ml(C.auth,"reauthViaPopup",f,T,C).executeNotNull()})).apply(this,arguments)}function Ji(){return(Ji=(0,d.Z)(function*(_,f,p){const C=(0,k.m9)(_);He(C.auth,f,Fs);const T=Es(C.auth,p);return new Ml(C.auth,"linkViaPopup",f,T,C).executeNotNull()})).apply(this,arguments)}let Ml=(()=>{class _ extends bs{constructor(p,C,T,O,j){super(p,C,O,j),this.provider=T,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var p=this;return(0,d.Z)(function*(){const C=yield p.execute();return re(C,p.auth,"internal-error"),C})()}onExecution(){var p=this;return(0,d.Z)(function*(){ct(1===p.filter.length,"Popup operations only handle one event");const C=Qi();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],C),p.authWindow.associatedEvent=C,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(_e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const p=()=>{var C,T;this.pollId=null!==(T=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,dr.get())};p()}}return _.currentPopupAction=null,_})();const bc=new Map;class tf extends bs{constructor(f,p,C=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,C),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,d.Z)(function*(){let C=bc.get(p.auth._key());if(!C){try{const O=(yield function Xi(_,f){return er.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;C=()=>Promise.resolve(O)}catch(T){C=()=>Promise.reject(T)}bc.set(p.auth._key(),C)}return p.bypassAuthState||bc.set(p.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,C=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(C,f);if("unknown"!==f.type){if(f.eventId){const T=yield C.auth._redirectUserForId(f.eventId);if(T)return C.user=T,p().call(C,f);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function er(){return(er=(0,d.Z)(function*(_,f){const p=Tc(f),C=Dc(_);if(!(yield C._isAvailable()))return!1;const T="true"===(yield C._get(p));return yield C._remove(p),T})).apply(this,arguments)}function es(_,f){return $n.apply(this,arguments)}function $n(){return($n=(0,d.Z)(function*(_,f){return Dc(_)._set(Tc(f),"true")})).apply(this,arguments)}function tr(_,f){bc.set(_._key(),f)}function Dc(_){return Nn(_._redirectPersistence)}function Tc(_){return U("pendingRedirect",_.config.apiKey,_.name)}function ts(){return(ts=(0,d.Z)(function*(_,f,p){const C=dn(_);He(_,f,Fs),yield C._initializationPromise;const T=Es(C,p);return yield es(T,C),T._openRedirect(C,f,"signInViaRedirect")})).apply(this,arguments)}function oo(){return(oo=(0,d.Z)(function*(_,f,p){const C=(0,k.m9)(_);He(C.auth,f,Fs),yield C.auth._initializationPromise;const T=Es(C.auth,p);yield es(T,C.auth);const O=yield Sc(C);return T._openRedirect(C.auth,f,"reauthViaRedirect",O)})).apply(this,arguments)}function No(){return(No=(0,d.Z)(function*(_,f,p){const C=(0,k.m9)(_);He(C.auth,f,Fs),yield C.auth._initializationPromise;const T=Es(C.auth,p);yield $t(!1,C,f.providerId),yield es(T,C.auth);const O=yield Sc(C);return T._openRedirect(C.auth,f,"linkViaRedirect",O)})).apply(this,arguments)}function ao(){return(ao=(0,d.Z)(function*(_,f){return yield dn(_)._initializationPromise,co(_,f,!1)})).apply(this,arguments)}function co(_,f){return vi.apply(this,arguments)}function vi(){return(vi=(0,d.Z)(function*(_,f,p=!1){const C=dn(_),T=Es(C,f),j=yield new tf(C,T,p).execute();return j&&!p&&(delete j.user._redirectEventId,yield C._persistUserIfCurrent(j.user),yield C._setRedirectUser(null,f)),j})).apply(this,arguments)}function Sc(_){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,d.Z)(function*(_){const f=Qi(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class Rl{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(f,C)&&(p=!0,this.sendToConsumer(f,C),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Vo(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ld(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var C;if(f.error&&!ld(f)){const T=(null===(C=f.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";p.onError(_e(this.auth,T))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const C=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&C}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lo(f))}saveEventToCache(f){this.cachedEventUids.add(Lo(f)),this.lastProcessedEventTime=Date.now()}}function Lo(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function ld({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===f?.code}function yg(_){return kl.apply(this,arguments)}function kl(){return(kl=(0,d.Z)(function*(_,f={}){return me(_,"GET","/v1/projects",f)})).apply(this,arguments)}const w0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,H_=/^https?/;function Bo(){return(Bo=(0,d.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield yg(_);for(const p of f)try{if(vg(p))return}catch{}Ie(_,"unauthorized-domain")})).apply(this,arguments)}function vg(_){const f=Ht(),{protocol:p,hostname:C}=new URL(f);if(_.startsWith("chrome-extension://")){const j=new URL(_);return""===j.hostname&&""===C?"chrome-extension:"===p&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&j.hostname===C}if(!H_.test(p))return!1;if(w0.test(_))return C===_;const T=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(C)}const $_=new Gi(3e4,6e4);function Cg(){const _=En().___jsl;if(_?.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let p=0;p<_.CP.length;p++)_.CP[p]=null}let Mc=null;function Vs(_){return Mc=Mc||function Sa(_){return new Promise((f,p)=>{var C,T,O;function j(){Cg(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Cg(),p(_e(_,"network-request-failed"))},timeout:$_.get()})}if(null!==(T=null===(C=En().gapi)||void 0===C?void 0:C.iframes)&&void 0!==T&&T.Iframe)f(gapi.iframes.getContext());else{if(null===(O=En().gapi)||void 0===O||!O.load){const Q=pi("iframefcb");return En()[Q]=()=>{gapi.load?j():p(_e(_,"network-request-failed"))},Ir(`https://apis.google.com/js/api.js?onload=${Q}`).catch(Ne=>p(Ne))}j()}}).catch(f=>{throw Mc=null,f})}(_),Mc}const af=new Gi(5e3,15e3),cf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ds=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G_(_){const f=_.config;re(f.authDomain,_,"auth-domain-config-required");const p=f.emulator?ie(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,C={apiKey:f.apiKey,appName:_.name,v:ce.SDK_VERSION},T=Ds.get(_.config.apiHost);T&&(C.eid=T);const O=_._getFrameworks();return O.length&&(C.fw=O.join(",")),`${p}?${(0,k.xO)(C).slice(1)}`}function D(){return D=(0,d.Z)(function*(_){const f=yield Vs(_),p=En().gapi;return re(p,_,"internal-error"),f.open({where:document.body,url:G_(_),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cf,dontclear:!0},C=>new Promise(function(){var T=(0,d.Z)(function*(O,j){yield C.restyle({setHideOnLeave:!1});const Q=_e(_,"network-request-failed"),Ne=En().setTimeout(()=>{j(Q)},af.get());function Ge(){En().clearTimeout(Ne),O(C)}C.ping(Ge).then(Ge,()=>{j(Q)})});return function(O,j){return T.apply(this,arguments)}}()))}),D.apply(this,arguments)}const x={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ze{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ci=encodeURIComponent("fac");function Gn(_,f,p,C,T,O){return zn.apply(this,arguments)}function zn(){return(zn=(0,d.Z)(function*(_,f,p,C,T,O){re(_.config.authDomain,_,"auth-domain-config-required"),re(_.config.apiKey,_,"invalid-api-key");const j={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:C,v:ce.SDK_VERSION,eventId:T};if(f instanceof Fs){f.setDefaultLanguage(_.languageCode),j.providerId=f.providerId||"",(0,k.xb)(f.getCustomParameters())||(j.customParameters=JSON.stringify(f.getCustomParameters()));for(const[rt,ot]of Object.entries(O||{}))j[rt]=ot}if(f instanceof sl){const rt=f.getScopes().filter(ot=>""!==ot);rt.length>0&&(j.scopes=rt.join(","))}_.tenantId&&(j.tid=_.tenantId);const Q=j;for(const rt of Object.keys(Q))void 0===Q[rt]&&delete Q[rt];const Ne=yield _._getAppCheckToken(),Ge=Ne?`#${Ci}=${encodeURIComponent(Ne)}`:"";return`${Uo(_)}?${(0,k.xO)(Q).slice(1)}${Ge}`})).apply(this,arguments)}function Uo({config:_}){return _.emulator?ie(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}const lo="webStorageSupport";class Ig extends class Nl{constructor(f){this.factorId=f}_process(f,p,C){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,C);case"signin":return this._finalizeSignIn(f,p.credential);default:return xt("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Ig(f)}_finalizeEnroll(f,p,C){return function _i(_,f){return me(_,"POST","/v2/accounts/mfaEnrollment:finalize",xe(_,f))}(f,{idToken:p,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function gc(_,f){return me(_,"POST","/v2/accounts/mfaSignIn:finalize",xe(_,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let z_=(()=>{class _{constructor(){}static assertion(p){return Ig._fromCredential(p)}}return _.FACTOR_ID="phone",_})();var df="@firebase/auth";class I0{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,d.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(C=>{f(C?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);!p||(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Aa(){return window}function fd(){return(fd=(0,d.Z)(function*(_,f,p){var C;const{BuildInfo:T}=Aa();ct(f.sessionId,"AuthEvent did not contain a session ID");const O=yield S0(f.sessionId),j={};return ut()?j.ibi=T.packageName:Lt()?j.apn=T.packageName:Ie(_,"operation-not-supported-in-this-environment"),T.displayName&&(j.appDisplayName=T.displayName),j.sessionId=O,Gn(_,p,f.type,void 0,null!==(C=f.eventId)&&void 0!==C?C:void 0,j)})).apply(this,arguments)}function bg(){return(bg=(0,d.Z)(function*(_){const{BuildInfo:f}=Aa(),p={};ut()?p.iosBundleId=f.packageName:Lt()?p.androidPackageName=f.packageName:Ie(_,"operation-not-supported-in-this-environment"),yield yg(_,p)})).apply(this,arguments)}function Tg(){return(Tg=(0,d.Z)(function*(_,f,p){const{cordova:C}=Aa();let T=()=>{};try{yield new Promise((O,j)=>{let Q=null;function Ne(){var ot;O();const xn=null===(ot=C.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof xn&&xn(),"function"==typeof p?.close&&p.close()}function Ge(){Q||(Q=window.setTimeout(()=>{j(_e(_,"redirect-cancelled-by-user"))},2e3))}function rt(){"visible"===document?.visibilityState&&Ge()}f.addPassiveListener(Ne),document.addEventListener("resume",Ge,!1),Lt()&&document.addEventListener("visibilitychange",rt,!1),T=()=>{f.removePassiveListener(Ne),document.removeEventListener("resume",Ge,!1),document.removeEventListener("visibilitychange",rt,!1),Q&&window.clearTimeout(Q)}})}finally{T()}})).apply(this,arguments)}function S0(_){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,d.Z)(function*(_){const f=A0(_),p=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function A0(_){if(ct(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),p=new Uint8Array(f);for(let C=0;C<_.length;C++)p[C]=_.charCodeAt(C);return p}(0,k.Pz)("authIdTokenMaxAge"),function E0(_){(0,ce._registerComponent)(new he.wA("auth",(f,{options:p})=>{const C=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),O=f.getProvider("app-check-internal"),{apiKey:j,authDomain:Q}=C.options;re(j&&!j.includes(":"),"invalid-api-key",{appName:C.name});const Ne={apiKey:j,authDomain:Q,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:se(_)},Ge=new Jc(C,T,O,Ne);return function Jn(_,f){const p=f?.persistence||[],C=(Array.isArray(p)?p:[p]).map(Nn);f?.errorMap&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(C,f?.popupRedirectResolver)}(Ge,p),Ge},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,C)=>{f.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new he.wA("auth-internal",f=>{const p=dn(f.getProvider("auth").getImmediate());return new I0(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(df,"0.23.2",function W_(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,ce.registerVersion)(df,"0.23.2","esm2017")}("Browser");class Ag extends Rl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function X_(_){return xg.apply(this,arguments)}function xg(){return(xg=(0,d.Z)(function*(_){const f=yield jo()._get(ff(_));return f&&(yield jo()._remove(ff(_))),f})).apply(this,arguments)}function ty(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const C=Math.floor(Math.random()*f.length);_.push(f.charAt(C))}return _.join("")}function jo(){return Nn(Yi)}function ff(_){return U("authEvent",_.config.apiKey,_.name)}function Pg(_){if(!_?.includes("?"))return{};const[f,...p]=_.split("?");return(0,k.zd)(p.join("?"))}function Og(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function Ma(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function mf(_=(0,k.z$)()){return!("file:"!==Ma()&&"ionic:"!==Ma()&&"capacitor:"!==Ma()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Fg(){try{const _=self.localStorage,f=Qi();if(_)return _.setItem(f,"1"),_.removeItem(f),!function ay(_=(0,k.z$)()){return function Ng(){return(0,k.w1)()&&11===document?.documentMode}()||function pd(_=(0,k.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,k.hl)()}catch{return Lg()&&(0,k.hl)()}return!1}function Lg(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vg(){return(function oy(){return"http:"===Ma()||"https:"===Ma()}()||(0,k.ru)()||mf())&&!function kg(){return(0,k.b$)()||(0,k.UG)()}()&&Fg()&&!Lg()}function Bg(){return mf()&&typeof document<"u"}function Ll(){return(Ll=(0,d.Z)(function*(){return!!Bg()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const Tr={LOCAL:"local",NONE:"none",SESSION:"session"},gd=re,cy="persistence";function Hg(_){return md.apply(this,arguments)}function md(){return(md=(0,d.Z)(function*(_){yield _._initializationPromise;const f=$g(),p=U(cy,_.config.apiKey,_.name);f&&f.setItem(p,_._getPersistence())})).apply(this,arguments)}function $g(){var _;try{return(null===(_=function jg(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const _f=re;class uo{constructor(){this.browserResolver=Nn(class Ni{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ro,this._completeRedirectFn=co,this._overrideRedirectResult=tr}_openPopup(f,p,C,T){var O=this;return(0,d.Z)(function*(){var j;ct(null===(j=O.eventManagers[f._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const Q=yield Gn(f,p,C,Ht(),T);return function ze(_,f,p,C=500,T=600){const O=Math.max((window.screen.availHeight-T)/2,0).toString(),j=Math.max((window.screen.availWidth-C)/2,0).toString();let Q="";const Ne=Object.assign(Object.assign({},x),{width:C.toString(),height:T.toString(),top:O,left:j}),Ge=(0,k.z$)().toLowerCase();p&&(Q=We(Ge)?"_blank":p),ue(Ge)&&(f=f||"http://localhost",Ne.scrollbars="yes");const rt=Object.entries(Ne).reduce((xn,[ns,Wg])=>`${xn}${ns}=${Wg},`,"");if(function pn(_=(0,k.z$)()){var f;return ut(_)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Ge)&&"_self"!==Q)return function ht(_,f){const p=document.createElement("a");p.href=_,p.target=f;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(C)}(f||"",Q),new Ze(null);const ot=window.open(f||"",Q,rt);re(ot,_,"popup-blocked");try{ot.focus()}catch{}return new Ze(ot)}(f,Q,Qi())})()}_openRedirect(f,p,C,T){var O=this;return(0,d.Z)(function*(){return yield O._originValidation(f),function wl(_){En().location.href=_}(yield Gn(f,p,C,Ht(),T)),new Promise(()=>{})})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:T,promise:O}=this.eventManagers[p];return T?Promise.resolve(T):(ct(O,"If manager is not set, promise should be"),O)}const C=this.initAndGetManager(f);return this.eventManagers[p]={promise:C},C.catch(()=>{delete this.eventManagers[p]}),C}initAndGetManager(f){var p=this;return(0,d.Z)(function*(){const C=yield function w(_){return D.apply(this,arguments)}(f),T=new Rl(f);return C.register("authEvent",O=>(re(O?.authEvent,f,"invalid-auth-event"),{status:T.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:T},p.iframes[f._key()]=C,T})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(lo,{type:lo},T=>{var O;const j=null===(O=T?.[0])||void 0===O?void 0:O[lo];void 0!==j&&p(!!j),Ie(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function ud(_){return Bo.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return gn()||J()||ut()}}),this.cordovaResolver=Nn(class x0{constructor(){this._redirectPersistence=ro,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=co,this._overrideRedirectResult=tr}_initialize(f){var p=this;return(0,d.Z)(function*(){const C=f._key();let T=p.eventManagers.get(C);return T||(T=new Ag(f),p.eventManagers.set(C,T),p.attachCallbackListeners(f,T)),T})()}_openPopup(f){Ie(f,"operation-not-supported-in-this-environment")}_openRedirect(f,p,C,T){var O=this;return(0,d.Z)(function*(){!function T0(_){var f,p,C,T,O,j,Q,Ne,Ge,rt;const ot=Aa();re("function"==typeof(null===(f=ot?.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(typeof(null===(p=ot?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re("function"==typeof(null===(O=null===(T=null===(C=ot?.cordova)||void 0===C?void 0:C.plugins)||void 0===T?void 0:T.browsertab)||void 0===O?void 0:O.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(Ne=null===(Q=null===(j=ot?.cordova)||void 0===j?void 0:j.plugins)||void 0===Q?void 0:Q.browsertab)||void 0===Ne?void 0:Ne.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(rt=null===(Ge=ot?.cordova)||void 0===Ge?void 0:Ge.InAppBrowser)||void 0===rt?void 0:rt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const j=yield O._initialize(f);yield j.initialized(),j.resetRedirect(),function nf(){bc.clear()}(),yield O._originValidation(f);const Q=function J_(_,f,p=null){return{type:f,eventId:p,urlResponse:null,sessionId:ty(),postBody:null,tenantId:_.tenantId,error:_e(_,"no-auth-event")}}(f,C,T);yield function Mg(_,f){return jo()._set(ff(_),f)}(f,Q);const Ne=yield function Fl(_,f,p){return fd.apply(this,arguments)}(f,Q,p),Ge=yield function Dg(_){const{cordova:f}=Aa();return new Promise(p=>{f.plugins.browsertab.isAvailable(C=>{let T=null;C?f.plugins.browsertab.openUrl(_):T=f.InAppBrowser.open(_,function _t(_=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),p(T)})})}(Ne);return function D0(_,f,p){return Tg.apply(this,arguments)}(f,j,Ge)})()}_isIframeWebStorageSupported(f,p){throw new Error("Method not implemented.")}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Y_(_){return bg.apply(this,arguments)}(f)),this.originValidationPromises[p]}attachCallbackListeners(f,p){const{universalLinks:C,handleOpenURL:T,BuildInfo:O}=Aa(),j=setTimeout((0,d.Z)(function*(){yield X_(f),p.onEvent(Og())}),500),Q=function(){var rt=(0,d.Z)(function*(ot){clearTimeout(j);const xn=yield X_(f);let ns=null;xn&&ot?.url&&(ns=function ey(_,f){var p,C;const T=function M0(_){const f=Pg(_),p=f.link?decodeURIComponent(f.link):void 0,C=Pg(p).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Pg(T).link||T||C||p||_}(f);if(T.includes("/__/auth/callback")){const O=Pg(T),j=O.firebaseError?function ny(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,Q=null===(C=null===(p=j?.code)||void 0===p?void 0:p.split("auth/"))||void 0===C?void 0:C[1],Ne=Q?_e(Q):null;return Ne?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Ne,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:T,postBody:null}}return null}(xn,ot.url)),p.onEvent(ns||Og())});return function(xn){return rt.apply(this,arguments)}}();typeof C<"u"&&"function"==typeof C.subscribe&&C.subscribe(null,Q);const Ne=T,Ge=`${O.packageName.toLowerCase()}://`;Aa().handleOpenURL=function(){var rt=(0,d.Z)(function*(ot){if(ot.toLowerCase().startsWith(Ge)&&Q({url:ot}),"function"==typeof Ne)try{Ne(ot)}catch(xn){console.error(xn)}});return function(ot){return rt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ro,this._completeRedirectFn=co,this._overrideRedirectResult=tr}_initialize(f){var p=this;return(0,d.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,p,C,T){var O=this;return(0,d.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(f,p,C,T)})()}_openRedirect(f,p,C,T){var O=this;return(0,d.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(f,p,C,T)})()}_isIframeWebStorageSupported(f,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,p)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Bg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _f(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const p=yield function Ug(){return Ll.apply(this,arguments)}();f.underlyingResolver=p?f.cordovaResolver:f.browserResolver})()}}function Gg(_){return _.unwrap()}function uy(_){return hy(_)}function hy(_){const{_tokenResponse:f}=_ instanceof k.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof k.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Rr.credentialFromResult(_);const p=f.providerId;if(!p||"password"===p)return null;let C;switch(p){case"google.com":C=ol;break;case"facebook.com":C=$r;break;case"github.com":C=oa;break;case"twitter.com":C=al;break;default:const{oauthIdToken:T,oauthAccessToken:O,oauthTokenSecret:j,pendingToken:Q,nonce:Ne}=f;return O||j||T||Q?Q?p.startsWith("saml.")?Ln._create(p,Q):gi._fromParams({providerId:p,signInMethod:p,pendingToken:Q,idToken:T,accessToken:O}):new mi(p).credential({idToken:T,accessToken:O,rawNonce:Ne}):null}return _ instanceof k.ZR?C.credentialFromError(_):C.credentialFromResult(_)}function Fi(_,f){return f.catch(p=>{throw p instanceof k.ZR&&function dy(_,f){var p;const C=null===(p=f.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new O0(_,function lc(_,f){var p;const C=(0,k.m9)(_),T=f;return re(f.customData.operationType,C,"argument-error"),re(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,C,"argument-error"),Ki._fromError(C,T)}(_,f));else if(C){const T=hy(f),O=f;T&&(O.credential=T,O.tenantId=C.tenantId||void 0,O.email=C.email||void 0,O.phoneNumber=C.phoneNumber||void 0)}}(_,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:uy(p),additionalUserInfo:ac(p),user:ii.getOrCreate(T)}})}function zg(_,f){return qg.apply(this,arguments)}function qg(){return(qg=(0,d.Z)(function*(_,f){const p=yield f;return{verificationId:p.verificationId,confirm:C=>Fi(_,p.confirm(C))}})).apply(this,arguments)}class O0{constructor(f,p){this.resolver=p,this.auth=function ly(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Fi(Gg(this.auth),this.resolver.resolveSignIn(f))}}class ii{constructor(f){this._delegate=f,this.multiFactor=function ya(_){const f=(0,k.m9)(_);return to.has(f)||to.set(f,eo._fromUser(f)),to.get(f)}(f)}static getOrCreate(f){return ii.USER_MAP.has(f)||ii.USER_MAP.set(f,new ii(f)),ii.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var p=this;return(0,d.Z)(function*(){return Fi(p.auth,ll(p._delegate,f))})()}linkWithPhoneNumber(f,p){var C=this;return(0,d.Z)(function*(){return zg(C.auth,function mg(_,f,p){return vc.apply(this,arguments)}(C._delegate,f,p))})()}linkWithPopup(f){var p=this;return(0,d.Z)(function*(){return Fi(p.auth,function cd(_,f,p){return Ji.apply(this,arguments)}(p._delegate,f,uo))})()}linkWithRedirect(f){var p=this;return(0,d.Z)(function*(){return yield Hg(dn(p.auth)),function Ol(_,f,p){return function j_(_,f,p){return No.apply(this,arguments)}(_,f,p)}(p._delegate,f,uo)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var p=this;return(0,d.Z)(function*(){return Fi(p.auth,An(p._delegate,f))})()}reauthenticateWithPhoneNumber(f,p){return zg(this.auth,function od(_,f,p){return Cc.apply(this,arguments)}(this._delegate,f,p))}reauthenticateWithPopup(f){return Fi(this.auth,function ef(_,f,p){return Ec.apply(this,arguments)}(this._delegate,f,uo))}reauthenticateWithRedirect(f){var p=this;return(0,d.Z)(function*(){return yield Hg(dn(p.auth)),function Ta(_,f,p){return function _g(_,f,p){return oo.apply(this,arguments)}(_,f,p)}(p._delegate,f,uo)})()}sendEmailVerification(f){return function Ju(_,f){return ic.apply(this,arguments)}(this._delegate,f)}unlink(f){var p=this;return(0,d.Z)(function*(){return yield function Zu(_,f){return Pi.apply(this,arguments)}(p._delegate,f),p})()}updateEmail(f){return function Bh(_,f){return pa((0,k.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function ys(_,f){return pa((0,k.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function so(_,f){return Is.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Xu(_,f){return fa.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,p){return function gl(_,f,p){return Js.apply(this,arguments)}(this._delegate,f,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ii.USER_MAP=new WeakMap;const Ho=re;let fy=(()=>{class _{constructor(p,C){if(this.app=p,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;Ho(T,"invalid-api-key",{appName:p.name}),Ho(T,"invalid-api-key",{appName:p.name});const O=typeof window<"u"?uo:void 0;this._delegate=C.initialize({options:{persistence:nD(T,p.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(De),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ii.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,C){!function Ou(_,f,p){const C=dn(_);re(C._canInitEmulator,C,"emulator-config-failed"),re(/^https?:\/\//.test(f),C,"invalid-emulator-scheme");const T=!!p?.disableWarnings,O=ur(f),{host:j,port:Q}=function Hr(_){const f=ur(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!p)return{host:"",port:null};const C=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(C);if(T){const O=T[1];return{host:O,port:Eo(C.substr(O.length+1))}}{const[O,j]=C.split(":");return{host:O,port:Eo(j)}}}(f);C.config.emulator={url:`${O}//${j}${null===Q?"":`:${Q}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:j,port:Q,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function za(){function _(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,p,C)}applyActionCode(p){return function tc(_,f){return Or.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return hl(this._delegate,p)}confirmPasswordReset(p,C){return function dl(_,f,p){return ca.apply(this,arguments)}(this._delegate,p,C)}createUserWithEmailAndPassword(p,C){var T=this;return(0,d.Z)(function*(){return Fi(T._delegate,function fl(_,f,p){return da.apply(this,arguments)}(T._delegate,p,C))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Qu(_,f){return rc.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function hg(_,f){return"EMAIL_SIGNIN"===Qa.parseLink(f)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,d.Z)(function*(){Ho(Vg(),p._delegate,"operation-not-supported-in-this-environment");const C=yield function sf(_,f){return ao.apply(this,arguments)}(p._delegate,uo);return C?Fi(p._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function iy(_,f){dn(_)._logFramework(f)}(this._delegate,p)}onAuthStateChanged(p,C,T){const{next:O,error:j,complete:Q}=R0(p,C,T);return this._delegate.onAuthStateChanged(O,j,Q)}onIdTokenChanged(p,C,T){const{next:O,error:j,complete:Q}=R0(p,C,T);return this._delegate.onIdTokenChanged(O,j,Q)}sendSignInLinkToEmail(p,C){return function Ao(_,f,p){return nc.apply(this,arguments)}(this._delegate,p,C)}sendPasswordResetEmail(p,C){return function dg(_,f,p){return So.apply(this,arguments)}(this._delegate,p,C||void 0)}setPersistence(p){var C=this;return(0,d.Z)(function*(){let T;switch(function tD(_,f){gd(Object.values(Tr).includes(f),_,"invalid-persistence-type"),(0,k.b$)()?gd(f!==Tr.SESSION,_,"unsupported-persistence-type"):(0,k.UG)()?gd(f===Tr.NONE,_,"unsupported-persistence-type"):Lg()?gd(f===Tr.NONE||f===Tr.LOCAL&&(0,k.hl)(),_,"unsupported-persistence-type"):gd(f===Tr.NONE||Fg(),_,"unsupported-persistence-type")}(C._delegate,p),p){case Tr.SESSION:T=ro;break;case Tr.LOCAL:T=(yield Nn(pc)._isAvailable())?pc:Yi;break;case Tr.NONE:T=jr;break;default:return Ie("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Fi(this._delegate,function Gu(_){return zu.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Fi(this._delegate,ei(this._delegate,p))}signInWithCustomToken(p){return Fi(this._delegate,function ti(_,f){return Oi.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,C){return Fi(this._delegate,function Yu(_,f,p){return ei((0,k.m9)(_),Fn.credential(f,p))}(this._delegate,p,C))}signInWithEmailLink(p,C){return Fi(this._delegate,function nn(_,f,p){return _s.apply(this,arguments)}(this._delegate,p,C))}signInWithPhoneNumber(p,C){return zg(this._delegate,function Xh(_,f,p){return yc.apply(this,arguments)}(this._delegate,p,C))}signInWithPopup(p){var C=this;return(0,d.Z)(function*(){return Ho(Vg(),C._delegate,"operation-not-supported-in-this-environment"),Fi(C._delegate,function Ic(_,f,p){return Vn.apply(this,arguments)}(C._delegate,p,uo))})()}signInWithRedirect(p){var C=this;return(0,d.Z)(function*(){return Ho(Vg(),C._delegate,"operation-not-supported-in-this-environment"),yield Hg(C._delegate),function Pl(_,f,p){return function rf(_,f,p){return ts.apply(this,arguments)}(_,f,p)}(C._delegate,p,uo)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function ua(_,f){return Qs.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Tr,_})();function R0(_,f,p){let C=_;"function"!=typeof _&&({next:C,error:f,complete:p}=_);const T=C;return{next:j=>T(j&&ii.getOrCreate(j)),error:f,complete:p}}function nD(_,f){const p=function P0(_,f){const p=$g();if(!p)return[];const C=U(cy,_,f);switch(p.getItem(C)){case Tr.NONE:return[jr];case Tr.LOCAL:return[pc,ro];case Tr.SESSION:return[ro];default:return[]}}(_,f);if(typeof self<"u"&&!p.includes(pc)&&p.push(pc),typeof window<"u")for(const C of[Yi,ro])p.includes(C)||p.push(C);return p.includes(jr)||p.push(jr),p}class py{constructor(){this.providerId="phone",this._delegate=new Rr(Gg(ee.Z.auth()))}static credential(f,p){return Rr.credential(f,p)}verifyPhoneNumber(f,p){return this._delegate.verifyPhoneNumber(f,p)}unwrap(){return this._delegate}}py.PHONE_SIGN_IN_METHOD=Rr.PHONE_SIGN_IN_METHOD,py.PROVIDER_ID=Rr.PROVIDER_ID;const rD=re;class iD{constructor(f,p,C=ee.Z.app()){var T;rD(null===(T=C.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new _c(f,p,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function k0(_){_.INTERNAL.registerComponent(new he.wA("auth-compat",f=>{const p=f.getProvider("app-compat").getImmediate(),C=f.getProvider("auth");return new fy(p,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Fn,FacebookAuthProvider:$r,GithubAuthProvider:oa,GoogleAuthProvider:ol,OAuthProvider:mi,SAMLAuthProvider:Zs,PhoneAuthProvider:py,PhoneMultiFactorGenerator:z_,RecaptchaVerifier:iD,TwitterAuthProvider:al,Auth:fy,AuthCredential:ps,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.4.2")}(ee.Z)},5861:(gt,Me,L)=>{function d(k,ce,le,pe,he,Ee,ge){try{var G=k[Ee](ge),H=G.value}catch(K){return void le(K)}G.done?ce(H):Promise.resolve(H).then(pe,he)}function ee(k){return function(){var ce=this,le=arguments;return new Promise(function(pe,he){var Ee=k.apply(ce,le);function ge(H){d(Ee,pe,he,ge,G,"next",H)}function G(H){d(Ee,pe,he,ge,G,"throw",H)}ge(void 0)})}}L.d(Me,{Z:()=>ee})},7582:(gt,Me,L)=>{function ce(ie,te){var Te={};for(var be in ie)Object.prototype.hasOwnProperty.call(ie,be)&&te.indexOf(be)<0&&(Te[be]=ie[be]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var xe=0;for(be=Object.getOwnPropertySymbols(ie);xe<be.length;xe++)te.indexOf(be[xe])<0&&Object.prototype.propertyIsEnumerable.call(ie,be[xe])&&(Te[be[xe]]=ie[be[xe]])}return Te}function K(ie,te,Te,be){return new(Te||(Te=Promise))(function(me,lt){function Pt(qt){try{yt(be.next(qt))}catch(bn){lt(bn)}}function ln(qt){try{yt(be.throw(qt))}catch(bn){lt(bn)}}function yt(qt){qt.done?me(qt.value):function xe(me){return me instanceof Te?me:new Te(function(lt){lt(me)})}(qt.value).then(Pt,ln)}yt((be=be.apply(ie,te||[])).next())})}function Le(ie){return this instanceof Le?(this.v=ie,this):new Le(ie)}function Ie(ie,te,Te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,be=Te.apply(ie,te||[]),me=[];return xe={},lt("next"),lt("throw"),lt("return"),xe[Symbol.asyncIterator]=function(){return this},xe;function lt(yn){be[yn]&&(xe[yn]=function(kn){return new Promise(function(Yn,jn){me.push([yn,kn,Yn,jn])>1||Pt(yn,kn)})})}function Pt(yn,kn){try{!function ln(yn){yn.value instanceof Le?Promise.resolve(yn.value.v).then(yt,qt):bn(me[0][2],yn)}(be[yn](kn))}catch(Yn){bn(me[0][3],Yn)}}function yt(yn){Pt("next",yn)}function qt(yn){Pt("throw",yn)}function bn(yn,kn){yn(kn),me.shift(),me.length&&Pt(me[0][0],me[0][1])}}function qe(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,te=ie[Symbol.asyncIterator];return te?te.call(ie):(ie=function st(ie){var te="function"==typeof Symbol&&Symbol.iterator,Te=te&&ie[te],be=0;if(Te)return Te.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&be>=ie.length&&(ie=void 0),{value:ie&&ie[be++],done:!ie}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),Te={},be("next"),be("throw"),be("return"),Te[Symbol.asyncIterator]=function(){return this},Te);function be(me){Te[me]=ie[me]&&function(lt){return new Promise(function(Pt,ln){!function xe(me,lt,Pt,ln){Promise.resolve(ln).then(function(yt){me({value:yt,done:Pt})},lt)}(Pt,ln,(lt=ie[me](lt)).done,lt.value)})}}}L.d(Me,{FC:()=>Ie,KL:()=>qe,_T:()=>ce,mG:()=>K,qq:()=>Le}),"function"==typeof SuppressedError&&SuppressedError}},gt=>{gt(gt.s=7789)}]);